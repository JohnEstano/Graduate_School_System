import{r as t,j as e,L as w}from"./app-CQngmq00.js";import{S as N}from"./switch-B12NJufO.js";import{D as k,a as D,e as O,b as L,c as R,f as T}from"./dialog-D-tH9FDm.js";import{B as r}from"./button-Cw9tQIeO.js";import{I as E}from"./input-izsDzGd9.js";import{t as u}from"./index-Vwkg4oTI.js";import{A as F}from"./app-layout-C76KB2Lm.js";import{S as I}from"./layout-DfjdbQgR.js";import"./index-DRp-GX9j.js";import"./index-CDDLQrUy.js";import"./utils-jAU0Cazi.js";import"./index-BSk2xfhC.js";import"./index-BZgaE142.js";import"./x-B3RMhnUQ.js";import"./createLucideIcon-pjYyoixj.js";import"./index-DZZQifJx.js";import"./tooltip-BvePKNvs.js";import"./floating-ui.react-dom-DL84dtXf.js";import"./separator-CMC4qrzs.js";import"./index-ahz1tZ6M.js";import"./chevron-right-QGs8lTP5.js";import"./dropdown-menu-BQlfF7jf.js";import"./index-CgLqTVh4.js";import"./index-VBHUZLOo.js";import"./index-BfMlnZ5P.js";import"./index-Csh4Fj4k.js";import"./check-BEGkAg7k.js";import"./avatar-DUph8BC-.js";import"./settings-CDLWUJwV.js";import"./users-DZ67WViD.js";import"./graduation-cap-DHFIPOzN.js";import"./file-text-Buh9X5tE.js";import"./dollar-sign-CkMbILE9.js";import"./send-BvMnN6yE.js";import"./credit-card-Cid_txJ6.js";import"./tabs-DJOYkXMD.js";import"./badge-BsPMjMb7.js";import"./circle-check-big-PSYRp90q.js";import"./info-BJ9Jpdwx.js";import"./sun-5m6UvoyG.js";function Se({initialAutoAccept:n,initialAdviserCode:h}){const[x,f]=t.useState(n),[o,g]=t.useState(n),[v,i]=t.useState(!1),[c,d]=t.useState(!1),[j,y]=t.useState(h),[m,l]=t.useState(!1);function A(s){g(s),i(!0)}async function S(){var a;d(!0),i(!1),f(o);const s=(a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content");await fetch("/settings/adviser/auto-accept",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""},body:JSON.stringify({autoAccept:o})}),u.success("Auto-accept setting updated!"),d(!1)}async function C(){var p;l(!0);const s=(p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content"),b=await(await fetch("/settings/adviser/reset-code",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""}})).json();y(b.adviser_code),u.success("Adviser code reset!"),l(!1)}return e.jsxs(F,{breadcrumbs:[{title:"Adviser Settings",href:"/settings/adviser"}],children:[e.jsx(w,{title:"Adviser Settings"}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Adviser Code Management"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Your Adviser Code"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{value:j,disabled:!0,className:"w-40 font-mono"}),e.jsx(r,{onClick:C,disabled:m,variant:"destructive",children:m?"Resetting...":"Reset Code"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Share this code with your students so they can register you as their adviser. If you suspect your code is compromised, reset it here."})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{checked:x,onCheckedChange:A,disabled:c,"aria-label":"Auto-accept students"}),e.jsx("span",{className:"text-base font-medium",children:"Auto-accept students who enter your adviser code"})]}),e.jsx("div",{className:"text-muted-foreground text-sm max-w-lg",children:"When enabled, students who enter your code are automatically linked to you. When disabled, you must manually approve each student."})]}),e.jsx(k,{open:v,onOpenChange:i,children:e.jsxs(D,{children:[e.jsxs(O,{children:[e.jsx(L,{children:o?"Enable Auto-Accept?":"Disable Auto-Accept?"}),e.jsx(R,{children:o?"Students who enter your adviser code will be automatically linked to you.":"You will need to manually approve each student who enters your adviser code."})]}),e.jsxs(T,{children:[e.jsx(r,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(r,{onClick:S,disabled:c,children:"Confirm"})]})]})})]})})]})}export{Se as default};
