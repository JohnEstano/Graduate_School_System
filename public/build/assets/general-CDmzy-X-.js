import{r as t,j as e,L as V}from"./app-cp5Xxmuq.js";import{S as j}from"./switch-DFJK2ZQy.js";import{D as y,a as v,b as S,c as C,d as A,e as w}from"./dialog-BrgoPxJ8.js";import{B as a}from"./button-HcUz4N3c.js";import{I as Y}from"./input-CozWEoae.js";import{t as N}from"./index-BuZOVBQ5.js";import{A as H}from"./app-layout-FVyShlvS.js";import{S as _}from"./layout-WmBUqkvE.js";import"./index-BwY1skv1.js";import"./index-BiaJJerR.js";import"./utils-jAU0Cazi.js";import"./index-DbUO4osX.js";import"./index-BkV9g7de.js";import"./x-ChVMmgUr.js";import"./createLucideIcon-fPg6f676.js";import"./index-DZZQifJx.js";import"./tooltip-CP7U2y76.js";import"./floating-ui.react-dom-CclZEsZs.js";import"./separator-DqvAWWgV.js";import"./index-B7grp9yP.js";import"./chevron-right-u5yeAyLv.js";import"./dropdown-menu-gg636D7H.js";import"./index-DGSzJOj5.js";import"./index-w2GBgPnQ.js";import"./index-KWoA_zXX.js";import"./index-DgxNXxEZ.js";import"./avatar-BVnHwuNv.js";import"./settings-BJpfwdNG.js";import"./chevrons-up-down-CUkeUAhf.js";import"./file-text-Brb8dGUd.js";import"./graduation-cap-DiPQsR-i.js";import"./dollar-sign-OqGbvCP2.js";import"./users-Dgf5XU-g.js";import"./credit-card-BumryUWt.js";import"./badge-CD31ww1M.js";import"./circle-check-big-D0Jy2-20.js";import"./info-CTXSwM4X.js";import"./sun-BdlRNmMn.js";function Le({role:d,initialAcceptDefense:l,initialAutoAccept:m,initialAdviserCode:k}){const[D,O]=t.useState(l??!1),[o,T]=t.useState(l??!1),[E,i]=t.useState(!1),[u,p]=t.useState(!1),[L,R]=t.useState(m??!1),[r,F]=t.useState(m??!1),[q,c]=t.useState(!1),[h,f]=t.useState(!1),[P,W]=t.useState(k??""),[g,x]=t.useState(!1);function G(s){T(s),i(!0)}async function I(){var n;p(!0),i(!1),O(o);const s=(n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content");await fetch("/api/settings/general",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""},body:JSON.stringify({acceptDefense:o})}),p(!1)}function K(s){F(s),c(!0)}async function X(){var n;f(!0),c(!1),R(r);const s=(n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content");await fetch("/settings/adviser/auto-accept",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""},body:JSON.stringify({autoAccept:r})}),N.success("Auto-accept setting updated!"),f(!1)}async function B(){var b;x(!0);const s=(b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"),J=await(await fetch("/settings/adviser/reset-code",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""}})).json();W(J.adviser_code),N.success("Adviser code reset!"),x(!1)}return e.jsxs(H,{breadcrumbs:[{title:"General",href:"/settings/general"}],children:[e.jsx(V,{title:"General Settings"}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-8",children:[d==="Coordinator"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{checked:D,onCheckedChange:G,disabled:u,"aria-label":"Accept defense submissions"}),e.jsx("span",{className:"text-base font-normal",children:"Accept defense submissions"})]}),e.jsx("div",{className:"text-sm text-muted-foreground max-w-lg",children:"When enabled, students can submit defense requirements. When disabled, submissions are blocked. Only applicable to your program."}),e.jsx(y,{open:E,onOpenChange:i,children:e.jsxs(v,{children:[e.jsxs(S,{children:[e.jsx(C,{className:"text-base font-semibold",children:o?"Enable Defense Submissions?":"Disable Defense Submissions?"}),e.jsx(A,{className:"text-sm",children:o?"Enabling this will allow students to submit defense requirements.":"Disabling this will block all new defense requirement submissions from students. Existing workflows will not be affected."})]}),e.jsxs(w,{children:[e.jsx(a,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(a,{onClick:I,disabled:u,children:"Confirm"})]})]})})]}),(d==="Adviser"||d==="Faculty")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium mb-1",children:"Your Adviser Code"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Y,{value:P,disabled:!0,className:"w-40 font-mono text-base"}),e.jsx(a,{onClick:B,disabled:g,className:"bg-rose-500 hover:bg-rose-600 text-white transition-colors px-4 py-2 rounded-md font-medium dark:bg-rose-500 dark:hover:bg-rose-600",children:g?"Resetting...":"Reset Code"})]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Share this code with your students so they can register you as their adviser. If you suspect your code is compromised, reset it here."})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(j,{checked:L,onCheckedChange:K,disabled:h,"aria-label":"Auto-accept students"}),e.jsx("span",{className:"text-base font-medium",children:"Auto-accept students who enter your adviser code"})]}),e.jsx("div",{className:"text-sm text-muted-foreground max-w-lg",children:"When enabled, students who enter your code are automatically registered as your students. When disabled, you must manually approve each student."})]}),e.jsx(y,{open:q,onOpenChange:c,children:e.jsxs(v,{children:[e.jsxs(S,{children:[e.jsx(C,{className:"text-base font-semibold",children:r?"Enable Auto-Accept?":"Disable Auto-Accept?"}),e.jsx(A,{className:"text-sm",children:r?"Students who enter your adviser code will be automatically linked to you.":"You will need to manually approve each student who enters your adviser code."})]}),e.jsxs(w,{children:[e.jsx(a,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(a,{onClick:X,disabled:h,children:"Confirm"})]})]})})]})]})})]})}export{Le as default};
