import{r as n,a as g,j as e}from"./app-CQngmq00.js";import{T as S,a as T,b as o,c as a,d as C,e as d}from"./table-BEEQP98I.js";import{B as A}from"./button-Cw9tQIeO.js";import{I as U}from"./input-izsDzGd9.js";import{S as f}from"./skeleton-Dhy5gbzz.js";import{A as B,a as F}from"./avatar-DUph8BC-.js";import{T as H,a as O,b as L,c as _}from"./tabs-DJOYkXMD.js";import{U as Q}from"./users-DZ67WViD.js";import{C as $}from"./check-BEGkAg7k.js";import{T as q}from"./trash-C5eAxSGc.js";import"./utils-jAU0Cazi.js";import"./index-CDDLQrUy.js";import"./index-DZZQifJx.js";import"./index-VBHUZLOo.js";import"./index-ahz1tZ6M.js";import"./index-DRp-GX9j.js";import"./createLucideIcon-pjYyoixj.js";function D(i){var x,u,l,h;const p=((u=(x=i.first_name)==null?void 0:x.trim())==null?void 0:u[0])??"",m=((h=(l=i.last_name)==null?void 0:l.trim())==null?void 0:h[0])??"";return(p+m).toUpperCase()||"U"}function xe(){const[i,p]=n.useState([]),[m,x]=n.useState([]),[u,l]=n.useState(!1),[h,j]=n.useState(!0),[N,P]=n.useState(""),[M,V]=n.useState(!1),[G,J]=n.useState(null);n.useEffect(()=>{k(),b()},[]);const k=async()=>{j(!0);try{const s=await g.get("/api/adviser/students");p(s.data||[])}catch(s){console.error("Failed to load students",s)}finally{j(!1)}},b=async()=>{l(!0);try{const s=await g.get("/api/adviser/pending-students");x(s.data||[])}catch(s){console.error("Failed to load pending",s)}finally{l(!1)}},R=async s=>{try{await g.post(`/api/adviser/pending-students/${s.id}/accept`),await k(),await b()}catch(r){console.error(r)}},E=async s=>{try{await g.post(`/api/adviser/pending-students/${s.id}/reject`),await b()}catch(r){console.error(r)}},c=N.toLowerCase(),I=i.filter(s=>{var r,t,z,v,y;return(((r=s.student_number)==null?void 0:r.toLowerCase().includes(c))??!1)||(((t=s.first_name)==null?void 0:t.toLowerCase().includes(c))??!1)||(((z=s.last_name)==null?void 0:z.toLowerCase().includes(c))??!1)||(((v=s.email)==null?void 0:v.toLowerCase().includes(c))??!1)||(((y=s.program)==null?void 0:y.toLowerCase().includes(c))??!1)});if(h)return e.jsxs("div",{className:"w-full min-h-[70vh] bg-background flex flex-col gap-4 p-0 m-0",children:[e.jsx(f,{className:"h-6 w-1/6 rounded bg-muted dark:bg-muted mt-8 mx-8"}),e.jsx(f,{className:"h-12 w-3/4 rounded bg-muted dark:bg-muted mx-8"}),e.jsx(f,{className:"h-12 w-2/3 rounded bg-muted dark:bg-muted mx-8"}),e.jsx(f,{className:"h-[400px] w-full rounded bg-muted dark:bg-muted mt-4"})]});function w(s,r=!1){return s.length===0?e.jsx(o,{children:e.jsx(d,{colSpan:r?6:5,className:"py-8 text-center text-sm text-muted-foreground dark:text-zinc-400",children:"No students found."})}):s.map(t=>e.jsxs(o,{className:"dark:hover:bg-zinc-700",children:[e.jsxs(d,{className:"flex items-center gap-3 dark:text-zinc-200",children:[e.jsx(B,{className:"h-8 w-8",children:e.jsx(F,{children:D(t)})}),e.jsxs("span",{children:[t.first_name||""," ",t.middle_name?t.middle_name[0]+".":""," ",t.last_name||""]})]}),e.jsx(d,{className:"dark:text-zinc-200",children:t.student_number||"N/A"}),e.jsx(d,{className:"dark:text-zinc-200",children:t.email||"N/A"}),e.jsx(d,{className:"dark:text-zinc-200",children:t.program||"N/A"}),e.jsx(d,{className:"dark:text-zinc-200",children:t.coordinator_name||"N/A"}),r&&e.jsxs(d,{className:"flex gap-2 justify-center",children:[e.jsx(A,{variant:"outline",size:"icon",title:"Accept",onClick:()=>R(t),className:"text-green-600 border-green-300 hover:bg-green-50 hover:text-green-700",children:e.jsx($,{className:"w-4 h-4"})}),e.jsx(A,{variant:"outline",size:"icon",title:"Reject",onClick:()=>E(t),className:"text-rose-600 border-rose-300 hover:bg-rose-50 hover:text-rose-700",children:e.jsx(q,{className:"w-4 h-4"})})]})]},t.id))}return e.jsxs("div",{className:`flex h-full flex-1 flex-col gap-4 overflow-auto rounded-xl pt-5 pr-7 pl-7 relative
      bg-background dark:bg-zinc-900 transition-colors`,children:[e.jsxs("div",{className:"w-full border border-border rounded-lg overflow-hidden mb-1 bg-white dark:bg-zinc-900 dark:border-zinc-700",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between w-full p-3 border-b bg-white dark:bg-zinc-900 dark:border-zinc-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-full bg-rose-500/10 border border-rose-500",children:e.jsx(Q,{className:"h-5 w-5 text-rose-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold text-zinc-900 dark:text-zinc-100",children:"My Students"}),e.jsx("span",{className:"block text-xs text-muted-foreground dark:text-zinc-400",children:"This section shows all students assigned to you."})]})]}),e.jsx("div",{})]}),e.jsx("div",{className:"flex flex-row items-center justify-between w-full p-3 border-t bg-white dark:bg-zinc-900 dark:border-zinc-700",children:e.jsx(U,{type:"text",placeholder:"Search...",value:N,onChange:s=>P(s.target.value),className:"max-w-xs text-sm py-1 h-8 bg-background dark:bg-background"})})]}),e.jsxs(H,{defaultValue:"assigned",className:"w-full",children:[e.jsxs(O,{className:"mb-3",children:[e.jsxs(L,{value:"assigned",className:"flex items-center gap-2",children:["Assigned",e.jsx("span",{className:"inline-flex items-center justify-center px-2 py-0.5 text-xs text-zinc-700 dark:text-zinc-100",children:i.length})]}),e.jsxs(L,{value:"pending",className:"flex items-center gap-2",children:["Pending",e.jsx("span",{className:"inline-flex items-center justify-center px-2 py-0.5 text-xs text-zinc-700 dark:text-zinc-100",children:m.length})]})]}),e.jsx(_,{value:"pending",children:e.jsx("div",{className:"rounded-md overflow-x-auto w-full max-w-full border border-border bg-white dark:bg-zinc-900 dark:border-zinc-700",children:e.jsxs(S,{children:[e.jsx(T,{children:e.jsxs(o,{children:[e.jsx(a,{className:"dark:text-zinc-100",children:"Name"}),e.jsx(a,{className:"dark:text-zinc-100",children:"Student #"}),e.jsx(a,{className:"dark:text-zinc-100",children:"Email"}),e.jsx(a,{className:"dark:text-zinc-100",children:"Program"}),e.jsx(a,{className:"dark:text-zinc-100",children:"Program Coordinator"}),e.jsx(a,{className:"dark:text-zinc-100 text-center",children:"Actions"})]})}),e.jsx(C,{children:u?e.jsx(o,{children:e.jsx(d,{colSpan:6,className:"py-8 text-center text-sm text-muted-foreground dark:text-zinc-400",children:"Loading pending..."})}):w(m,!0)})]})})}),e.jsx(_,{value:"assigned",children:e.jsx("div",{className:"rounded-md overflow-x-auto w-full max-w-full border border-border bg-white dark:bg-zinc-900 dark:border-zinc-700",children:e.jsxs(S,{children:[e.jsx(T,{children:e.jsxs(o,{children:[e.jsx(a,{className:"dark:text-zinc-100",children:"Name"}),e.jsx(a,{className:"dark:text-zinc-100",children:"School ID"}),e.jsx(a,{className:"dark:text-zinc-100",children:"Email"}),e.jsx(a,{className:"dark:text-zinc-100",children:"Program"}),e.jsx(a,{className:"dark:text-zinc-100",children:"Program Coordinator"})]})}),e.jsx(C,{children:w(I,!1)})]})})})]})]})}export{xe as default};
