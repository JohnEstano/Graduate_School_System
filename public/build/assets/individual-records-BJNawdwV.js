import{r as c,j as e,L as x}from"./app-BDkuJsct.js";import{T as h,a as g,b as l,c as i,d as j,e as a}from"./table-CnA6sFiR.js";import{D as p,a as u,d as f,b as N,c as b,g as y}from"./dialog-DeUj0iLU.js";import{A as w,a as v}from"./avatar-DpsgA3Kf.js";import{B as D}from"./button-DggClj9M.js";import{X as _}from"./x-CtfT_1vN.js";import{C as k}from"./chevron-down-DMxaecxw.js";import{C as S}from"./chevron-right-BpKiIXqV.js";import{D as T}from"./download-DGArilmi.js";import"./utils-jAU0Cazi.js";import"./index-CWqpdCTP.js";import"./index-BhbofC_p.js";import"./index-B_a1aFVM.js";import"./index-D-bfryUZ.js";import"./index-BdhkuEJx.js";import"./index-LRezjsDo.js";import"./index-DZZQifJx.js";import"./createLucideIcon-CEmaZ7tj.js";function J({record:s,onClose:m}){const[r,o]=c.useState(null);return e.jsx(p,{open:!!s,onOpenChange:t=>{t||m()},children:e.jsx(u,{className:"max-w-3xl min-w-280 min-h-90 w-full max-h-[90vh] flex flex-col p-0 gap-0",children:s&&e.jsxs(e.Fragment,{children:[e.jsxs(f,{className:"sticky top-0 z-20 bg-white dark:bg-[#121212] border-b p-4 flex flex-row justify-between items-center m-2",children:[e.jsxs("div",{children:[e.jsx(N,{children:`${s.first_name} ${s.middle_name||""} ${s.last_name}`.trim()}),e.jsxs(b,{children:["Student ID: ",s.student_id||"-"]})]}),e.jsx(y,{asChild:!0,children:e.jsx("button",{className:`ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground 
                 absolute top-4 right-4 rounded-xs opacity-70 transition-opacity 
                 hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden 
                 disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 
                 [&_svg:not([class*='size-'])]:size-4`,"aria-label":"Close",children:e.jsx(_,{})})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto py-2 px-6",children:[e.jsx(x,{title:"Individual Record"}),e.jsxs("div",{className:"rounded-md overflow-x-auto border bg-white dark:bg-[#121212] p-4",children:[e.jsx("div",{className:"overflow-x-auto border-b bg-white dark:bg-[#121212] p-4",children:e.jsxs("div",{className:"flex items-start space-x-6",children:[e.jsx(w,{className:"w-36 h-36 mt-5",children:e.jsx(v,{className:"text-4xl",children:s.first_name.charAt(0)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 flex-1 pt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"First Name"}),e.jsx("p",{className:"font-medium",children:s.first_name}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Middle Name"}),e.jsx("p",{className:"font-medium",children:s.middle_name||"-"}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Last Name"}),e.jsx("p",{className:"font-medium",children:s.last_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Gender"}),e.jsx("p",{className:"font-medium",children:s.gender||"-"}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"School Year"}),e.jsx("p",{className:"font-medium",children:s.school_year||"-"}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Student ID"}),e.jsx("p",{className:"font-medium",children:s.student_id||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Birthdate"}),e.jsx("p",{className:"font-medium",children:s.birthdate?new Date(s.birthdate).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}):"-"})]})]})]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Defense Schedule"}),e.jsxs(h,{className:"min-w-full text-sm",children:[e.jsx(g,{children:e.jsxs(l,{children:[e.jsx(i,{className:"w-8"}),e.jsx(i,{children:"Defense Date"}),e.jsx(i,{children:"Defense Type"}),e.jsx(i,{children:"Defense Status"}),e.jsx(i,{children:"OR Number"}),e.jsx(i,{children:"Payment Date"}),e.jsx(i,{className:"text-right",children:"Amount"}),e.jsx(i,{className:"text-center",children:"Action"})]})}),e.jsx(j,{children:s.payments&&s.payments.length>0?s.payments.sort((t,n)=>{const d=t.defense_date?new Date(t.defense_date).getTime():s.defense_date?new Date(s.defense_date).getTime():0;return(n.defense_date?new Date(n.defense_date).getTime():s.defense_date?new Date(s.defense_date).getTime():0)-d}).map(t=>e.jsxs(e.Fragment,{children:[e.jsxs(l,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>o(r===t.id?null:t.id),children:[e.jsx(a,{className:"w-8",children:r===t.id?e.jsx(k,{className:"w-4 h-4"}):e.jsx(S,{className:"w-4 h-4"})}),e.jsx(a,{children:t.defense_date?new Date(t.defense_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):s.defense_date?new Date(s.defense_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}),e.jsx(a,{children:t.defense_type||s.defense_type||"-"}),e.jsx(a,{children:t.defense_status||"-"}),e.jsx(a,{children:t.or_number||s.or_number||"-"}),e.jsx(a,{children:t.payment_date?new Date(t.payment_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}),e.jsxs(a,{className:"text-right",children:["₱",Number(t.amount).toFixed(2)]}),e.jsx(a,{className:"text-center",children:e.jsx(D,{variant:"ghost",size:"sm",onClick:n=>{n.stopPropagation(),window.open(`/student-records/${s.id}/download-pdf?payment_id=${t.id}`,"_blank")},className:"h-8 w-8 p-0",title:"Download PDF",children:e.jsx(T,{className:"h-4 w-4"})})})]},t.id),r===t.id&&e.jsx(l,{children:e.jsx(a,{colSpan:8,className:"bg-gray-50 dark:bg-gray-900/50 p-4",children:e.jsxs("div",{className:"rounded-md overflow-hidden",children:[e.jsx("h4",{className:"font-semibold text-gray-600 dark:text-gray-300 mb-3 px-1",children:"Payment Breakdown:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border-separate border-spacing-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-4 text-left font-medium text-gray-500 dark:text-gray-400",children:"Panelist Name"}),e.jsx("th",{className:"py-2 px-4 text-left font-medium text-gray-500 dark:text-gray-400",children:"Role"}),e.jsx("th",{className:"py-2 px-4 text-right font-medium text-gray-500 dark:text-gray-400",children:"Honorarium Amount"})]})}),e.jsx("tbody",{children:t.panelists&&t.panelists.length>0?e.jsxs(e.Fragment,{children:[t.panelists.map((n,d)=>e.jsxs("tr",{className:"hover:bg-gray-100 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"py-2 px-4",children:n.name||"-"}),e.jsx("td",{className:"py-2 px-4",children:n.role||"-"}),e.jsx("td",{className:"py-2 px-4 text-right font-medium",children:n.amount==="-"?"-":`₱${Number(n.amount||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`})]},d)),e.jsxs("tr",{className:"border-t-2 border-gray-300 dark:border-gray-600 bg-gray-100 dark:bg-gray-800 font-bold",children:[e.jsx("td",{className:"py-3 px-4",colSpan:2,children:"TOTAL"}),e.jsxs("td",{className:"py-3 px-4 text-right text-lg",children:["₱",Number(t.grand_total||t.amount||0).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}):e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center py-3 text-gray-500",children:"No panelist breakdown available."})})})]})})]})})})]})):e.jsx(l,{children:e.jsx(a,{colSpan:8,className:"text-center py-4",children:"No payments found."})})})]})]})]})]})]})})})}export{J as default};
