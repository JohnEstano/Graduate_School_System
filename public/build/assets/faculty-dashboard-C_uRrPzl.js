import{K as S,r as t,j as e}from"./app-cp5Xxmuq.js";import k from"./weekly-defense-schedule-widget-BCIb_qRN.js";import{Q as D}from"./quick-actions-widget-DpltoGXd.js";import z from"./immediate-action-defense-requests-widget-DEnKLPZK.js";import{C,a as q,b as R,c as E}from"./card-CEBh1pSW.js";import{S as r}from"./skeleton-CvIeXqD9.js";import d from"./unified-dashboard-layout-CyE1hZwB.js";import{C as T}from"./clipboard-list-B-Seeu2v.js";import{C as W}from"./calendar-days-JKNu6GOh.js";import{U as A}from"./users-Dgf5XU-g.js";import"./utils-jAU0Cazi.js";import"./calendar-CPOz5vlg.js";import"./createLucideIcon-fPg6f676.js";import"./chevron-right-u5yeAyLv.js";import"./graduation-cap-DiPQsR-i.js";import"./format-HX8DKPSU.js";import"./en-US-BA9orzCf.js";import"./isSameDay-DUlCFK42.js";import"./parseISO-CbXPh3Al.js";import"./tooltip-CP7U2y76.js";import"./index-BwY1skv1.js";import"./index-BiaJJerR.js";import"./floating-ui.react-dom-CclZEsZs.js";import"./user-round-Bjl-RuYP.js";import"./settings-BJpfwdNG.js";import"./receipt-bvtmF3pp.js";import"./book-open-DtRim5tR.js";import"./separator-DqvAWWgV.js";import"./index-B7grp9yP.js";import"./sun-BdlRNmMn.js";function me(){const{auth:{user:a},studentsCount:c=0}=S().props,[m,x]=t.useState([]),[n,p]=t.useState([]),[u,f]=t.useState([]),[l,g]=t.useState(!0),[h,b]=t.useState(new Date().getDay()),j=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];t.useEffect(()=>{fetch("/adviser/defense-requests",{headers:{Accept:"application/json"}}).then(s=>s.json()).then(s=>{const i=s&&s.items?s.items:[];x(i);const y=i.filter(o=>{const N=(o.workflow_state||"").toLowerCase();return["","submitted","pending","adviser-pending","adviser-review"].includes(N)});p(y);const w=new Date().toISOString().slice(0,10);f(i.filter(o=>o.scheduled_date===w))}).catch(()=>{}).finally(()=>g(!1))},[]);const v=[{title:"Pending Defense Submissions",value:n.length,description:"Submitted requirements needing your review",icon:e.jsx(T,{className:"text-rose-500 size-7"})},{title:"Today's Schedules",value:u.length,description:"Events scheduled for today",icon:e.jsx(W,{className:"text-rose-500 size-7"})},{title:"Students",value:c,description:"Total students linked to you",icon:e.jsx(A,{className:"text-rose-500 size-7"})}];return l?e.jsx(d,{user:a,children:e.jsxs("div",{className:"w-full min-h-[70vh] bg-zinc-100 dark:bg-zinc-900 flex flex-col gap-4 p-0 m-0",children:[e.jsx(r,{className:"h-6 w-1/6 rounded bg-zinc-300 dark:bg-zinc-800 mt-8 mx-8"}),e.jsx(r,{className:"h-12 w-3/4 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(r,{className:"h-12 w-2/3 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(r,{className:"h-[500px] w-full rounded bg-zinc-300 dark:bg-zinc-800 mt-4"})]})}):e.jsxs(d,{user:a,children:[e.jsx("div",{className:"absolute top-6 right-8",children:e.jsx(D,{userRole:a==null?void 0:a.role})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 px-7",children:v.map((s,i)=>e.jsxs(C,{className:"border border-1 bg-white dark:bg-muted rounded-xl shadow-none flex flex-row items-center min-h-[70px] py-4 px-5 w-full",children:[e.jsxs("div",{className:"flex flex-col justify-center flex-1",children:[e.jsx(q,{className:"pb-1 px-0",children:e.jsx(R,{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:s.title})}),e.jsxs(E,{className:"px-0 py-0",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white leading-tight",children:s.value}),e.jsx("div",{className:"text-[11px] text-gray-400 mt-0.5",children:s.description})]})]}),e.jsx("div",{className:"flex items-center justify-center ml-3 w-[40px] h-[40px]",children:s.icon})]},i))}),e.jsxs("div",{className:"flex flex-col gap-6 bg-gray-100 ms-4 me-4 rounded-xl mt-2 mb-2 px-5 py-8 dark:bg-zinc-900",children:[e.jsxs("div",{className:"w-full mb-2 flex flex-col md:flex-row gap-4",children:[e.jsx(z,{requests:n,loading:l}),e.jsx(k,{weekDays:j,selectedDay:h,setSelectedDay:b,approvedDefenses:m,referenceDate:new Date,loading:l})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2"})]})]})}export{me as default};
