import{r as t,j as e,L as w}from"./app-cp5Xxmuq.js";import{S as N}from"./switch-DFJK2ZQy.js";import{D as k,a as D,b as O,c as L,d as R,e as T}from"./dialog-BrgoPxJ8.js";import{B as r}from"./button-HcUz4N3c.js";import{I as E}from"./input-CozWEoae.js";import{t as u}from"./index-BuZOVBQ5.js";import{A as F}from"./app-layout-FVyShlvS.js";import{S as I}from"./layout-WmBUqkvE.js";import"./index-BwY1skv1.js";import"./index-BiaJJerR.js";import"./utils-jAU0Cazi.js";import"./index-DbUO4osX.js";import"./index-BkV9g7de.js";import"./x-ChVMmgUr.js";import"./createLucideIcon-fPg6f676.js";import"./index-DZZQifJx.js";import"./tooltip-CP7U2y76.js";import"./floating-ui.react-dom-CclZEsZs.js";import"./separator-DqvAWWgV.js";import"./index-B7grp9yP.js";import"./chevron-right-u5yeAyLv.js";import"./dropdown-menu-gg636D7H.js";import"./index-DGSzJOj5.js";import"./index-w2GBgPnQ.js";import"./index-KWoA_zXX.js";import"./index-DgxNXxEZ.js";import"./avatar-BVnHwuNv.js";import"./settings-BJpfwdNG.js";import"./chevrons-up-down-CUkeUAhf.js";import"./file-text-Brb8dGUd.js";import"./graduation-cap-DiPQsR-i.js";import"./dollar-sign-OqGbvCP2.js";import"./users-Dgf5XU-g.js";import"./credit-card-BumryUWt.js";import"./badge-CD31ww1M.js";import"./circle-check-big-D0Jy2-20.js";import"./info-CTXSwM4X.js";import"./sun-BdlRNmMn.js";function ye({initialAutoAccept:n,initialAdviserCode:h}){const[x,g]=t.useState(n),[o,f]=t.useState(n),[v,i]=t.useState(!1),[c,d]=t.useState(!1),[j,y]=t.useState(h),[l,m]=t.useState(!1);function A(s){f(s),i(!0)}async function S(){var a;d(!0),i(!1),g(o);const s=(a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content");await fetch("/settings/adviser/auto-accept",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""},body:JSON.stringify({autoAccept:o})}),u.success("Auto-accept setting updated!"),d(!1)}async function C(){var p;m(!0);const s=(p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content"),b=await(await fetch("/settings/adviser/reset-code",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""}})).json();y(b.adviser_code),u.success("Adviser code reset!"),m(!1)}return e.jsxs(F,{breadcrumbs:[{title:"Adviser Settings",href:"/settings/adviser"}],children:[e.jsx(w,{title:"Adviser Settings"}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Adviser Code Management"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Your Adviser Code"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{value:j,disabled:!0,className:"w-40 font-mono"}),e.jsx(r,{onClick:C,disabled:l,variant:"destructive",children:l?"Resetting...":"Reset Code"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Share this code with your students so they can register you as their adviser. If you suspect your code is compromised, reset it here."})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{checked:x,onCheckedChange:A,disabled:c,"aria-label":"Auto-accept students"}),e.jsx("span",{className:"text-base font-medium",children:"Auto-accept students who enter your adviser code"})]}),e.jsx("div",{className:"text-muted-foreground text-sm max-w-lg",children:"When enabled, students who enter your code are automatically linked to you. When disabled, you must manually approve each student."})]}),e.jsx(k,{open:v,onOpenChange:i,children:e.jsxs(D,{children:[e.jsxs(O,{children:[e.jsx(L,{children:o?"Enable Auto-Accept?":"Disable Auto-Accept?"}),e.jsx(R,{children:o?"Students who enter your adviser code will be automatically linked to you.":"You will need to manually approve each student who enters your adviser code."})]}),e.jsxs(T,{children:[e.jsx(r,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(r,{onClick:S,disabled:c,children:"Confirm"})]})]})})]})})]})}export{ye as default};
