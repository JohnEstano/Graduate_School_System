import{j as e}from"./app-OOvd0qGy.js";import{C as f,c as j}from"./card-CMDgN0i6.js";import{B as u}from"./button-Bvl2ELDv.js";import{G as x}from"./graduation-cap-CCWiuwHf.js";import{X as c}from"./x-DrNmi13E.js";import{C as o}from"./check-CihXD7iu.js";import{H as r}from"./hourglass-PkVD7duv.js";import"./utils-jAU0Cazi.js";import"./index-ChOW5_O6.js";import"./index-DZZQifJx.js";import"./createLucideIcon-Cvkj7Hkp.js";const h=new Set(["cancelled","adviser-rejected","coordinator-rejected","completed"]),m={submitted:{label:"Submitted",icon:e.jsx(r,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})},"adviser-review":{label:"Under Adviser Review",icon:e.jsx(r,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})},"adviser-approved":{label:"Approved by Adviser",icon:e.jsx(o,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})},"coordinator-review":{label:"Coordinator Review",icon:e.jsx(r,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})},"coordinator-approved":{label:"Coordinator Approved",icon:e.jsx(o,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})},"panels-assigned":{label:"Panels Assigned",icon:e.jsx(x,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})},scheduled:{label:"Defense Scheduled",icon:e.jsx(x,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})},completed:{label:"Defense Completed",icon:e.jsx(o,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})},"adviser-rejected":{label:"Rejected (Adviser)",icon:e.jsx(c,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})},"coordinator-rejected":{label:"Rejected (Coordinator)",icon:e.jsx(c,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})},cancelled:{label:"Cancelled",icon:e.jsx(c,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})}};function z(i){const n=(i.workflow_state||"").toLowerCase();if(n&&m[n])return m[n];const t=(i.normalized_status||i.status||"").toLowerCase();return t.includes("reject")?{label:"Rejected",icon:e.jsx(c,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})}:t.includes("approve")?{label:"Approved",icon:e.jsx(o,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})}:t==="cancelled"?{label:"Cancelled",icon:e.jsx(c,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})}:{label:"Submitted",icon:e.jsx(r,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"})}}const D=({recentRequests:i=[],loading:n=!1})=>{const t=[...i].sort((a,d)=>{const p=a.created_at?new Date(a.created_at).getTime():0;return(d.created_at?new Date(d.created_at).getTime():0)-p}),s=t.find(a=>!h.has((a.workflow_state||"").toLowerCase()))||t[0];let l;if(n)l=e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("div",{className:"h-7 w-7 rounded-full bg-zinc-200 dark:bg-zinc-800 animate-pulse"}),e.jsx("div",{className:"h-6 w-32 rounded bg-zinc-200 dark:bg-zinc-800 animate-pulse"})]});else if(!s)l=e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(r,{className:"h-5 w-5 text-zinc-900 dark:text-zinc-100"}),e.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:"No Submission"})]});else{const{label:a,icon:d}=z(s);l=e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[d,e.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-zinc-100",children:a})]})}return e.jsxs(f,{className:"col-span-1 rounded-2xl shadow-none border flex flex-col justify-between p-0 min-h-[220px]",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 pt-5",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Defense Status"}),e.jsx(u,{variant:"ghost",size:"sm",className:"text-sm font-semibold px-3 py-1",type:"button",asChild:!0,children:e.jsx("a",{href:"/defense-requirements",children:"View More"})})]}),e.jsxs("div",{className:"px-6",children:[l,e.jsx("div",{className:"text-xs mt-2 mb-2 text-muted-foreground line-clamp-1",children:s!=null&&s.thesis_title?s.thesis_title:e.jsx("span",{className:"italic",children:"Untitled Thesis"})})]}),e.jsx(j,{className:"flex-1 flex items-end w-full p-0",children:e.jsx("div",{className:"flex items-center justify-end w-full pr-6 pb-4",children:e.jsx(x,{className:"text-rose-500 dark:text-rose-400 size-7"})})})]})};export{D as default};
