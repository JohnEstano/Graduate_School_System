import{K as N,r as a,j as e,R as k}from"./app-BDkuJsct.js";import z from"./weekly-defense-schedule-widget-tElMdAaa.js";import S from"./quick-actions-widget-Dik1XIA1.js";import D from"./immediate-action-defense-requests-widget-HIlpIcGx.js";import{C as T}from"./card-BJFJPDio.js";import{S as i}from"./skeleton-C1N4Z9e5.js";import{C as R}from"./clipboard-list-DFItBkgn.js";import{C as q}from"./calendar-days-Dp2eL-bU.js";import{U as C}from"./users-BTr8E8QO.js";import{S as E,M as W}from"./sun-B3PIUh1_.js";import"./utils-jAU0Cazi.js";import"./calendar-CI-DWPmu.js";import"./createLucideIcon-CEmaZ7tj.js";import"./chevron-right-BpKiIXqV.js";import"./graduation-cap-Cszrlop1.js";import"./format-Cze4Gw5q.js";import"./parseISO-Bx-IO3P2.js";import"./isSameDay-DsAL-Hdb.js";import"./tooltip-CWM4FSMS.js";import"./index-BhbofC_p.js";import"./index-B_a1aFVM.js";import"./floating-ui.react-dom-w0Q93DA2.js";import"./user-round-BfbMCXUO.js";import"./settings-BITCJcnj.js";import"./badge-dollar-sign-Ck-V3fgX.js";import"./book-open-D0xLe0hN.js";import"./receipt-YZTtq_ps.js";function F(){return new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function A(){const t=new Date().getHours();return t>=6&&t<18}function oe(){const{auth:{user:t},studentsCount:c=0}=N().props,[x,p]=a.useState([]),[m,g]=a.useState([]),[u,f]=a.useState([]),[d,h]=a.useState(!0),[b,v]=a.useState(new Date().getDay()),j=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];a.useEffect(()=>{fetch("/adviser/defense-requests",{headers:{Accept:"application/json"}}).then(s=>s.json()).then(s=>{const l=s&&s.items?s.items:[];p(l);const r=l.filter(o=>{const w=(o.workflow_state||"").toLowerCase();return["","submitted","pending","adviser-pending","adviser-review"].includes(w)});g(r);const n=new Date().toISOString().slice(0,10);f(l.filter(o=>o.scheduled_date===n))}).catch(()=>{}).finally(()=>h(!1))},[]);const y=[{title:"Pending Defense Submissions",value:m.length,description:"Submitted requirements needing your review",icon:e.jsx(R,{className:"size-5 text-rose-500"}),iconTheme:"bg-rose-100 text-rose-600 dark:bg-rose-900 dark:text-rose-300"},{title:"Today's Schedules",value:u.length,description:"Events scheduled for today",icon:e.jsx(q,{className:"size-5 text-blue-500"}),iconTheme:"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300"},{title:"Students",value:c,description:"Total students linked to you",icon:e.jsx(C,{className:"size-5 text-green-500"}),iconTheme:"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-300"}];return e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-auto bg-white dark:bg-background",children:d?e.jsxs("div",{className:"w-full min-h-[70vh] bg-zinc-100 dark:bg-zinc-900 flex flex-col gap-4 p-0 m-0",children:[e.jsx(i,{className:"h-6 w-1/6 rounded bg-zinc-300 dark:bg-zinc-800 mt-8 mx-8"}),e.jsx(i,{className:"h-12 w-3/4 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(i,{className:"h-12 w-2/3 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(i,{className:"h-[500px] w-full rounded bg-zinc-300 dark:bg-zinc-800 mt-4"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 md:mb-7 mt-4 md:mt-5 px-4 md:px-7",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-0 relative overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex items-center text-xs font-semibold text-gray-700 dark:text-gray-200 mb-1 md:mb-2 relative z-10",children:[A()?e.jsx(E,{className:"mr-1 size-3 md:size-4 text-rose-500"}):e.jsx(W,{className:"mr-1 size-3 md:size-4 text-rose-500"}),F()]}),e.jsxs("h1",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white relative z-10",children:["Hi, ",t==null?void 0:t.name,"!"]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 relative z-10",children:(t==null?void 0:t.role)??"Faculty"})]}),e.jsxs("div",{className:"hidden md:flex items-center",children:[e.jsx("div",{className:"h-12 w-px mx-4 bg-gray-300 dark:bg-gray-700 opacity-60"}),e.jsx("div",{className:"mr-8",children:e.jsx(S,{userRole:t==null?void 0:t.role})})]})]})}),e.jsx("div",{className:"w-full max-w-screen-xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 px-4 md:px-7 mb-4 md:mb-6",children:y.map((s,l)=>{var r;return e.jsxs(T,{className:"col-span-1 rounded-lg md:rounded-xl border border-gray-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 shadow-sm flex flex-col justify-between p-0 min-h-0 h-auto transition hover:shadow-md",style:{minWidth:0},children:[e.jsxs("div",{className:"flex items-center justify-between px-4 md:px-5 pt-3 md:pt-4 pb-0",children:[e.jsx("div",{className:"text-xs md:text-sm font-extrabold text-gray-800 dark:text-zinc-100 leading-tight",children:s.title}),e.jsx("div",{className:`rounded-full p-1 md:p-1.5 flex items-center justify-center flex-shrink-0 ${s.iconTheme}`,children:k.cloneElement(s.icon,{className:"size-3 md:size-4 font-extrabold "+(((r=s.iconTheme)==null?void 0:r.split(" ").find(n=>n.startsWith("text-")))??"")})})]}),e.jsxs("div",{className:"flex flex-col px-4 md:px-5 pb-3 md:pb-4 pt-1 md:pt-2",children:[e.jsx("span",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white leading-none",children:s.value}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 truncate",children:s.description})]})]},l)})}),e.jsxs("div",{className:"flex flex-col gap-4 md:gap-6 bg-gray-100 dark:bg-zinc-900 mx-2 md:mx-4 rounded-lg md:rounded-xl mt-2 mb-2 px-3 md:px-5 py-4 md:py-8",children:[e.jsxs("div",{className:"w-full mb-2 flex flex-col gap-4",children:[e.jsx(D,{requests:m,loading:d}),e.jsx(z,{weekDays:j,selectedDay:b,setSelectedDay:v,approvedDefenses:x,referenceDate:new Date,loading:d})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2"})]})]})})}export{oe as default};
