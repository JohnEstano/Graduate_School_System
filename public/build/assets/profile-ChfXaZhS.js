import{K as g,r as l,j as e,L as N,a as b}from"./app-cp5Xxmuq.js";import{A as y,a as A}from"./avatar-BVnHwuNv.js";import{B as _}from"./button-HcUz4N3c.js";import{A as w}from"./app-layout-FVyShlvS.js";import{S as k}from"./layout-WmBUqkvE.js";import{A as C,a as I,b as S}from"./alert-2SYxK9Wm.js";import{I as L}from"./input-CozWEoae.js";import{t as n}from"./index-BuZOVBQ5.js";import{I as R}from"./info-CTXSwM4X.js";import"./index-w2GBgPnQ.js";import"./index-B7grp9yP.js";import"./index-BwY1skv1.js";import"./utils-jAU0Cazi.js";import"./index-BiaJJerR.js";import"./index-DZZQifJx.js";import"./index-DbUO4osX.js";import"./index-BkV9g7de.js";import"./x-ChVMmgUr.js";import"./createLucideIcon-fPg6f676.js";import"./tooltip-CP7U2y76.js";import"./floating-ui.react-dom-CclZEsZs.js";import"./separator-DqvAWWgV.js";import"./chevron-right-u5yeAyLv.js";import"./dropdown-menu-gg636D7H.js";import"./index-DGSzJOj5.js";import"./index-KWoA_zXX.js";import"./index-DgxNXxEZ.js";import"./settings-BJpfwdNG.js";import"./chevrons-up-down-CUkeUAhf.js";import"./file-text-Brb8dGUd.js";import"./graduation-cap-DiPQsR-i.js";import"./dollar-sign-OqGbvCP2.js";import"./users-Dgf5XU-g.js";import"./credit-card-BumryUWt.js";import"./badge-CD31ww1M.js";import"./circle-check-big-D0Jy2-20.js";import"./sun-BdlRNmMn.js";const U=[{title:"Profile settings",href:"/settings/profile"}];function F(t){var s,r,i,a;const o=((r=(s=t.first_name)==null?void 0:s.trim())==null?void 0:r[0])??"",m=((a=(i=t.last_name)==null?void 0:i.trim())==null?void 0:a[0])??"";return(o+m).toUpperCase()||"U"}function P(t){return t.display_name??t.name??[t.first_name,t.middle_name?`${t.middle_name[0].toUpperCase()}.`:"",t.last_name].filter(Boolean).join(" ")}function je({mustVerifyEmail:t,status:o}){const{auth:m}=g().props,s=m.user,r=Array.isArray(s.advisers)?s.advisers[0]??null:null,[i,a]=l.useState(s.adviser_code??""),[c,x]=l.useState(!1),[f,h]=l.useState(""),j=async()=>{var p,u;x(!0),h("");const d=n.loading("Registering adviser...");try{const v=await b.post("/api/adviser/register-with-code",{adviser_code:i});n.success("Adviser registered successfully!",{id:d}),window.location.reload()}catch(v){n.dismiss(d),h(((u=(p=v.response)==null?void 0:p.data)==null?void 0:u.error)||"Registration failed.")}finally{x(!1)}};return e.jsxs(w,{breadcrumbs:U,children:[e.jsx(N,{title:"Profile settings"}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(C,{className:"bg-rose-50 dark:bg-rose-950 border-rose-200 dark:border-rose-900 text-rose-900 dark:text-rose-100 flex items-start gap-3 px-6 py-5 rounded-xl",children:[e.jsx(R,{className:"h-5 w-5 text-rose-500 dark:text-rose-400 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx(I,{className:"font-semibold mb-1",children:"Notice"}),e.jsx(S,{children:"Account details and information are fetched directly from the official myUIC portal database. Use the official myUIC portal if you wish to change any of the user information."})]})]}),e.jsxs("div",{className:"flex flex-row items-center gap-6 mb-8",children:[e.jsx(y,{className:"h-20 w-20",children:e.jsx(A,{className:"text-3xl font-bold bg-zinc-200 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-200",children:F(s)})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-semibold",children:P(s)}),e.jsx("div",{className:"text-muted-foreground text-sm",children:s.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-6 mt-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"First Name"}),e.jsx("div",{className:"font-medium text-base",children:s.first_name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Last Name"}),e.jsx("div",{className:"font-medium text-base",children:s.last_name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"School ID"}),e.jsx("div",{className:"font-medium text-base",children:s.school_id??"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Role"}),e.jsx("div",{className:"font-medium text-base",children:s.role??"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Email"}),e.jsx("div",{className:"font-medium text-base",children:s.email??"—"})]}),s.program&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Program"}),e.jsx("div",{className:"font-medium text-base",children:s.program})]}),s.role==="Student"&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Adviser"}),r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-medium text-base",children:r.name}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:r.email})]}):e.jsxs("div",{className:"flex flex-row gap-2 mt-2 items-center",children:[e.jsx(L,{type:"text",placeholder:"Paste adviser code here",value:typeof i=="string"?i:"",onChange:d=>a(d.target.value),disabled:c,className:"w-48"}),e.jsx(_,{onClick:j,disabled:c||!i,variant:"default",className:"px-4",children:"Register Adviser"}),f&&e.jsx("div",{className:"text-xs text-rose-500 mt-1",children:f})]})]}),(s.role==="Adviser"||s.role==="Faculty")&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Adviser Code"}),e.jsx("div",{className:" font-medium text-base",children:i?String(i):"—"}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Share this code with your students so they can register you as their adviser."})]})]}),t&&s.email_verified_at===null&&e.jsx("div",{className:"mt-6",children:o==="verification-link-sent"&&e.jsx("div",{className:"mt-2 text-sm font-medium text-green-600",children:"A new verification link has been sent to your email address."})}),e.jsx("div",{className:"h-24"})]})})]})}export{je as default};
