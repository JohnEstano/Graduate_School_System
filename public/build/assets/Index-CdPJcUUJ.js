import{r as a,j as t,c as ge,g as It,R as L,K as Tt,L as Pt}from"./app-OOvd0qGy.js";import{A as Et}from"./app-layout-4BSfGYAy.js";import{B as le}from"./button-Bvl2ELDv.js";import{D as Dt,a as zt,e as Ot,b as Mt,c as Ft}from"./dialog-DgFd6e46.js";import"./index-DQ9rqnvl.js";import{c as he}from"./index-ChOW5_O6.js";import $t from"./submit-defense-requirements-DM3XPNVy.js";import{d as pe}from"./dayjs.min-CtUKUHq-.js";import{D as Lt,a as Ut,b as Gt,c as de}from"./dropdown-menu-JMbXV8S0.js";import{c as We}from"./utils-jAU0Cazi.js";import{c as Bt}from"./createLucideIcon-Cvkj7Hkp.js";import{I as Wt}from"./input-CzcDJDbH.js";import{S as ue}from"./skeleton-bTWQssEl.js";import{A as Kt,a as Yt,b as Vt}from"./alert-D5RZvq8L.js";import{D as Xt}from"./DocumentGeneratorDialog-DkYkBccr.js";import{B as Jt}from"./badge-9siNCstt.js";import{I as $e}from"./info-CIHMpyv0.js";import{X as B}from"./x-DrNmi13E.js";import{G as J}from"./graduation-cap-CCWiuwHf.js";import{P as Qt}from"./plus-7hsPCuko.js";import{C as Zt}from"./chevron-down-CgfVHQYn.js";import{C as W}from"./circle-check-big-Ddw5Ycw8.js";import{P as q}from"./paperclip-D2cdFqeN.js";import{E as Ht}from"./ellipsis-vertical-DH9UkuLB.js";import{C as ee}from"./calendar-h4nCOpBr.js";import{H as te}from"./hourglass-PkVD7duv.js";import{U as Q}from"./users-EStqJIUY.js";import{E as Le}from"./eye-pnwaU9ct.js";import"./index-DZZQifJx.js";import"./index-B2wwfcIF.js";import"./index-4w5oLsoB.js";import"./tooltip-BFmjF_jJ.js";import"./floating-ui.react-dom-BrG2AUyT.js";import"./separator-Cye1ujSm.js";import"./index-B9sjBiRz.js";import"./chevron-right-BsU_TN8l.js";import"./avatar-DboJvblb.js";import"./index-kQq3evoo.js";import"./settings-BGemkvqC.js";import"./file-text-DLuaZQHd.js";import"./dollar-sign-4LNVBfuJ.js";import"./credit-card-Bfq-rBsk.js";import"./tabs-BvigrSxv.js";import"./sun-Ch86N1Y-.js";import"./label-CWMX11o4.js";import"./Stepper-SsStzHEi.js";import"./proxy-BaOzGSOe.js";import"./alert-dialog-Dwgivs-P.js";import"./check-CihXD7iu.js";import"./circle-alert-B6wfWeDO.js";import"./index-DcZRhvrv.js";import"./index-C9drr0Qb.js";import"./index-CQ9en90x.js";import"./index-C7ezi2Q7.js";import"./select-Bb-LA2Y0.js";import"./index-DnomuSoJ.js";import"./index-imi9ZEDw.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],en=Bt("Circle",qt);function tn(e,r,{checkForDefaultPrevented:s=!0}={}){return function(i){if(e==null||e(i),s===!1||!i.defaultPrevented)return r==null?void 0:r(i)}}function nn(e,r=[]){let s=[];function o(c,n){const d=a.createContext(n),f=s.length;s=[...s,n];const l=p=>{var j;const{scope:h,children:x,...v}=p,b=((j=h==null?void 0:h[e])==null?void 0:j[f])||d,g=a.useMemo(()=>v,Object.values(v));return t.jsx(b.Provider,{value:g,children:x})};l.displayName=c+"Provider";function m(p,h){var b;const x=((b=h==null?void 0:h[e])==null?void 0:b[f])||d,v=a.useContext(x);if(v)return v;if(n!==void 0)return n;throw new Error(`\`${p}\` must be used within \`${c}\``)}return[l,m]}const i=()=>{const c=s.map(n=>a.createContext(n));return function(d){const f=(d==null?void 0:d[e])||c;return a.useMemo(()=>({[`__scope${e}`]:{...d,[e]:f}}),[d,f])}};return i.scopeName=e,[o,rn(i,...r)]}function rn(...e){const r=e[0];if(e.length===1)return r;const s=()=>{const o=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(c){const n=o.reduce((d,{useScope:f,scopeName:l})=>{const p=f(c)[`__scope${l}`];return{...d,...p}},{});return a.useMemo(()=>({[`__scope${r.scopeName}`]:n}),[n])}};return s.scopeName=r.scopeName,s}var se=globalThis!=null&&globalThis.document?a.useLayoutEffect:()=>{},sn=ge[" useInsertionEffect ".trim().toString()]||se;function on({prop:e,defaultProp:r,onChange:s=()=>{},caller:o}){const[i,c,n]=an({defaultProp:r,onChange:s}),d=e!==void 0,f=d?e:i;{const m=a.useRef(e!==void 0);a.useEffect(()=>{const p=m.current;p!==d&&console.warn(`${o} is changing from ${p?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=d},[d,o])}const l=a.useCallback(m=>{var p;if(d){const h=cn(m)?m(e):m;h!==e&&((p=n.current)==null||p.call(n,h))}else c(m)},[d,e,c,n]);return[f,l]}function an({defaultProp:e,onChange:r}){const[s,o]=a.useState(e),i=a.useRef(s),c=a.useRef(r);return sn(()=>{c.current=r},[r]),a.useEffect(()=>{var n;i.current!==s&&((n=c.current)==null||n.call(c,s),i.current=s)},[s,i]),[s,o,c]}function cn(e){return typeof e=="function"}function Ue(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function ln(...e){return r=>{let s=!1;const o=e.map(i=>{const c=Ue(i,r);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let i=0;i<o.length;i++){const c=o[i];typeof c=="function"?c():Ue(e[i],null)}}}}function Ke(...e){return a.useCallback(ln(...e),e)}var dn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Se=dn.reduce((e,r)=>{const s=he(`Primitive.${r}`),o=a.forwardRef((i,c)=>{const{asChild:n,...d}=i,f=n?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(f,{...d,ref:c})});return o.displayName=`Primitive.${r}`,{...e,[r]:o}},{});function un(e,r){return a.useReducer((s,o)=>r[s][o]??s,e)}var Ye=e=>{const{present:r,children:s}=e,o=mn(r),i=typeof s=="function"?s({present:o.isPresent}):a.Children.only(s),c=Ke(o.ref,fn(i));return typeof s=="function"||o.isPresent?a.cloneElement(i,{ref:c}):null};Ye.displayName="Presence";function mn(e){const[r,s]=a.useState(),o=a.useRef(null),i=a.useRef(e),c=a.useRef("none"),n=e?"mounted":"unmounted",[d,f]=un(n,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const l=me(o.current);c.current=d==="mounted"?l:"none"},[d]),se(()=>{const l=o.current,m=i.current;if(m!==e){const h=c.current,x=me(l);e?f("MOUNT"):x==="none"||(l==null?void 0:l.display)==="none"?f("UNMOUNT"):f(m&&h!==x?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,f]),se(()=>{if(r){let l;const m=r.ownerDocument.defaultView??window,p=x=>{const b=me(o.current).includes(x.animationName);if(x.target===r&&b&&(f("ANIMATION_END"),!i.current)){const g=r.style.animationFillMode;r.style.animationFillMode="forwards",l=m.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=g)})}},h=x=>{x.target===r&&(c.current=me(o.current))};return r.addEventListener("animationstart",h),r.addEventListener("animationcancel",p),r.addEventListener("animationend",p),()=>{m.clearTimeout(l),r.removeEventListener("animationstart",h),r.removeEventListener("animationcancel",p),r.removeEventListener("animationend",p)}}else f("ANIMATION_END")},[r,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:a.useCallback(l=>{o.current=l?getComputedStyle(l):null,s(l)},[])}}function me(e){return(e==null?void 0:e.animationName)||"none"}function fn(e){var o,i;let r=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(r=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var pn=ge[" useId ".trim().toString()]||(()=>{}),xn=0;function hn(e){const[r,s]=a.useState(pn());return se(()=>{s(o=>o??String(xn++))},[e]),e||(r?`radix-${r}`:"")}var be="Collapsible",[gn,vs]=nn(be),[bn,Ae]=gn(be),Ve=a.forwardRef((e,r)=>{const{__scopeCollapsible:s,open:o,defaultOpen:i,disabled:c,onOpenChange:n,...d}=e,[f,l]=on({prop:o,defaultProp:i??!1,onChange:n,caller:be});return t.jsx(bn,{scope:s,disabled:c,contentId:hn(),open:f,onOpenToggle:a.useCallback(()=>l(m=>!m),[l]),children:t.jsx(Se.div,{"data-state":Te(f),"data-disabled":c?"":void 0,...d,ref:r})})});Ve.displayName=be;var Xe="CollapsibleTrigger",Je=a.forwardRef((e,r)=>{const{__scopeCollapsible:s,...o}=e,i=Ae(Xe,s);return t.jsx(Se.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":Te(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...o,ref:r,onClick:tn(e.onClick,i.onOpenToggle)})});Je.displayName=Xe;var Ie="CollapsibleContent",Qe=a.forwardRef((e,r)=>{const{forceMount:s,...o}=e,i=Ae(Ie,e.__scopeCollapsible);return t.jsx(Ye,{present:s||i.open,children:({present:c})=>t.jsx(vn,{...o,ref:r,present:c})})});Qe.displayName=Ie;var vn=a.forwardRef((e,r)=>{const{__scopeCollapsible:s,present:o,children:i,...c}=e,n=Ae(Ie,s),[d,f]=a.useState(o),l=a.useRef(null),m=Ke(r,l),p=a.useRef(0),h=p.current,x=a.useRef(0),v=x.current,b=n.open||d,g=a.useRef(b),j=a.useRef(void 0);return a.useEffect(()=>{const N=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(N)},[]),se(()=>{const N=l.current;if(N){j.current=j.current||{transitionDuration:N.style.transitionDuration,animationName:N.style.animationName},N.style.transitionDuration="0s",N.style.animationName="none";const y=N.getBoundingClientRect();p.current=y.height,x.current=y.width,g.current||(N.style.transitionDuration=j.current.transitionDuration,N.style.animationName=j.current.animationName),f(o)}},[n.open,o]),t.jsx(Se.div,{"data-state":Te(n.open),"data-disabled":n.disabled?"":void 0,id:n.contentId,hidden:!b,...c,ref:m,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":v?`${v}px`:void 0,...e.style},children:b&&i})});function Te(e){return e?"open":"closed"}var wn=Ve;function jn({...e}){return t.jsx(wn,{"data-slot":"collapsible",...e})}function Nn({...e}){return t.jsx(Je,{"data-slot":"collapsible-trigger",...e})}function yn({...e}){return t.jsx(Qe,{"data-slot":"collapsible-content",...e})}var xe={exports:{}},_n=xe.exports,Ge;function kn(){return Ge||(Ge=1,function(e,r){(function(s,o){e.exports=o()})(_n,function(){return function(s,o,i){s=s||{};var c=o.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function d(l,m,p,h){return c.fromToBase(l,m,p,h)}i.en.relativeTime=n,c.fromToBase=function(l,m,p,h,x){for(var v,b,g,j=p.$locale().relativeTime||n,N=s.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],y=N.length,C=0;C<y;C+=1){var I=N[C];I.d&&(v=h?i(l).diff(p,I.d,!0):p.diff(l,I.d,!0));var M=(s.rounding||Math.round)(Math.abs(v));if(g=v>0,M<=I.r||!I.r){M<=1&&C>0&&(I=N[C-1]);var F=j[I.l];x&&(M=x(""+M)),b=typeof F=="string"?F.replace("%d",M):F(M,m,I.l,g);break}}if(m)return b;var R=g?j.future:j.past;return typeof R=="function"?R(b):R.replace("%s",b)},c.to=function(l,m){return d(l,m,this,!0)},c.from=function(l,m){return d(l,m,this)};var f=function(l){return l.$u?i.utc():i()};c.toNow=function(l){return this.to(f(this),l)},c.fromNow=function(l){return this.from(f(this),l)}}})}(xe)),xe.exports}var Cn=kn();const Rn=It(Cn);function G(e,r,{checkForDefaultPrevented:s=!0}={}){return function(i){if(e==null||e(i),s===!1||!i.defaultPrevented)return r==null?void 0:r(i)}}function Be(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function Sn(...e){return r=>{let s=!1;const o=e.map(i=>{const c=Be(i,r);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let i=0;i<o.length;i++){const c=o[i];typeof c=="function"?c():Be(e[i],null)}}}}function K(...e){return a.useCallback(Sn(...e),e)}function ve(e,r=[]){let s=[];function o(c,n){const d=a.createContext(n),f=s.length;s=[...s,n];const l=p=>{var j;const{scope:h,children:x,...v}=p,b=((j=h==null?void 0:h[e])==null?void 0:j[f])||d,g=a.useMemo(()=>v,Object.values(v));return t.jsx(b.Provider,{value:g,children:x})};l.displayName=c+"Provider";function m(p,h){var b;const x=((b=h==null?void 0:h[e])==null?void 0:b[f])||d,v=a.useContext(x);if(v)return v;if(n!==void 0)return n;throw new Error(`\`${p}\` must be used within \`${c}\``)}return[l,m]}const i=()=>{const c=s.map(n=>a.createContext(n));return function(d){const f=(d==null?void 0:d[e])||c;return a.useMemo(()=>({[`__scope${e}`]:{...d,[e]:f}}),[d,f])}};return i.scopeName=e,[o,An(i,...r)]}function An(...e){const r=e[0];if(e.length===1)return r;const s=()=>{const o=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(c){const n=o.reduce((d,{useScope:f,scopeName:l})=>{const p=f(c)[`__scope${l}`];return{...d,...p}},{});return a.useMemo(()=>({[`__scope${r.scopeName}`]:n}),[n])}};return s.scopeName=r.scopeName,s}var In=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Z=In.reduce((e,r)=>{const s=he(`Primitive.${r}`),o=a.forwardRef((i,c)=>{const{asChild:n,...d}=i,f=n?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(f,{...d,ref:c})});return o.displayName=`Primitive.${r}`,{...e,[r]:o}},{});function Tn(e){const r=e+"CollectionProvider",[s,o]=ve(r),[i,c]=s(r,{collectionRef:{current:null},itemMap:new Map}),n=b=>{const{scope:g,children:j}=b,N=L.useRef(null),y=L.useRef(new Map).current;return t.jsx(i,{scope:g,itemMap:y,collectionRef:N,children:j})};n.displayName=r;const d=e+"CollectionSlot",f=he(d),l=L.forwardRef((b,g)=>{const{scope:j,children:N}=b,y=c(d,j),C=K(g,y.collectionRef);return t.jsx(f,{ref:C,children:N})});l.displayName=d;const m=e+"CollectionItemSlot",p="data-radix-collection-item",h=he(m),x=L.forwardRef((b,g)=>{const{scope:j,children:N,...y}=b,C=L.useRef(null),I=K(g,C),M=c(m,j);return L.useEffect(()=>(M.itemMap.set(C,{ref:C,...y}),()=>void M.itemMap.delete(C))),t.jsx(h,{[p]:"",ref:I,children:N})});x.displayName=m;function v(b){const g=c(e+"CollectionConsumer",b);return L.useCallback(()=>{const N=g.collectionRef.current;if(!N)return[];const y=Array.from(N.querySelectorAll(`[${p}]`));return Array.from(g.itemMap.values()).sort((M,F)=>y.indexOf(M.ref.current)-y.indexOf(F.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:n,Slot:l,ItemSlot:x},v,o]}var oe=globalThis!=null&&globalThis.document?a.useLayoutEffect:()=>{},Pn=ge[" useId ".trim().toString()]||(()=>{}),En=0;function Dn(e){const[r,s]=a.useState(Pn());return oe(()=>{s(o=>o??String(En++))},[e]),r?`radix-${r}`:""}function zn(e){const r=a.useRef(e);return a.useEffect(()=>{r.current=e}),a.useMemo(()=>(...s)=>{var o;return(o=r.current)==null?void 0:o.call(r,...s)},[])}var On=ge[" useInsertionEffect ".trim().toString()]||oe;function Ze({prop:e,defaultProp:r,onChange:s=()=>{},caller:o}){const[i,c,n]=Mn({defaultProp:r,onChange:s}),d=e!==void 0,f=d?e:i;{const m=a.useRef(e!==void 0);a.useEffect(()=>{const p=m.current;p!==d&&console.warn(`${o} is changing from ${p?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=d},[d,o])}const l=a.useCallback(m=>{var p;if(d){const h=Fn(m)?m(e):m;h!==e&&((p=n.current)==null||p.call(n,h))}else c(m)},[d,e,c,n]);return[f,l]}function Mn({defaultProp:e,onChange:r}){const[s,o]=a.useState(e),i=a.useRef(s),c=a.useRef(r);return On(()=>{c.current=r},[r]),a.useEffect(()=>{var n;i.current!==s&&((n=c.current)==null||n.call(c,s),i.current=s)},[s,i]),[s,o,c]}function Fn(e){return typeof e=="function"}var $n=a.createContext(void 0);function He(e){const r=a.useContext($n);return e||r||"ltr"}var Ce="rovingFocusGroup.onEntryFocus",Ln={bubbles:!1,cancelable:!0},ie="RovingFocusGroup",[Re,qe,Un]=Tn(ie),[Gn,et]=ve(ie,[Un]),[Bn,Wn]=Gn(ie),tt=a.forwardRef((e,r)=>t.jsx(Re.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Re.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Kn,{...e,ref:r})})}));tt.displayName=ie;var Kn=a.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:s,orientation:o,loop:i=!1,dir:c,currentTabStopId:n,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:f,onEntryFocus:l,preventScrollOnEntryFocus:m=!1,...p}=e,h=a.useRef(null),x=K(r,h),v=He(c),[b,g]=Ze({prop:n,defaultProp:d??null,onChange:f,caller:ie}),[j,N]=a.useState(!1),y=zn(l),C=qe(s),I=a.useRef(!1),[M,F]=a.useState(0);return a.useEffect(()=>{const R=h.current;if(R)return R.addEventListener(Ce,y),()=>R.removeEventListener(Ce,y)},[y]),t.jsx(Bn,{scope:s,orientation:o,dir:v,loop:i,currentTabStopId:b,onItemFocus:a.useCallback(R=>g(R),[g]),onItemShiftTab:a.useCallback(()=>N(!0),[]),onFocusableItemAdd:a.useCallback(()=>F(R=>R+1),[]),onFocusableItemRemove:a.useCallback(()=>F(R=>R-1),[]),children:t.jsx(Z.div,{tabIndex:j||M===0?-1:0,"data-orientation":o,...p,ref:x,style:{outline:"none",...e.style},onMouseDown:G(e.onMouseDown,()=>{I.current=!0}),onFocus:G(e.onFocus,R=>{const ae=!I.current;if(R.target===R.currentTarget&&ae&&!j){const Y=new CustomEvent(Ce,Ln);if(R.currentTarget.dispatchEvent(Y),!Y.defaultPrevented){const V=C().filter(U=>U.focusable),je=V.find(U=>U.active),Ne=V.find(U=>U.id===b),ce=[je,Ne,...V].filter(Boolean).map(U=>U.ref.current);st(ce,m)}}I.current=!1}),onBlur:G(e.onBlur,()=>N(!1))})})}),nt="RovingFocusGroupItem",rt=a.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:s,focusable:o=!0,active:i=!1,tabStopId:c,children:n,...d}=e,f=Dn(),l=c||f,m=Wn(nt,s),p=m.currentTabStopId===l,h=qe(s),{onFocusableItemAdd:x,onFocusableItemRemove:v,currentTabStopId:b}=m;return a.useEffect(()=>{if(o)return x(),()=>v()},[o,x,v]),t.jsx(Re.ItemSlot,{scope:s,id:l,focusable:o,active:i,children:t.jsx(Z.span,{tabIndex:p?0:-1,"data-orientation":m.orientation,...d,ref:r,onMouseDown:G(e.onMouseDown,g=>{o?m.onItemFocus(l):g.preventDefault()}),onFocus:G(e.onFocus,()=>m.onItemFocus(l)),onKeyDown:G(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){m.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const j=Xn(g,m.orientation,m.dir);if(j!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let y=h().filter(C=>C.focusable).map(C=>C.ref.current);if(j==="last")y.reverse();else if(j==="prev"||j==="next"){j==="prev"&&y.reverse();const C=y.indexOf(g.currentTarget);y=m.loop?Jn(y,C+1):y.slice(C+1)}setTimeout(()=>st(y))}}),children:typeof n=="function"?n({isCurrentTabStop:p,hasTabStop:b!=null}):n})})});rt.displayName=nt;var Yn={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Vn(e,r){return r!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Xn(e,r,s){const o=Vn(e.key,s);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Yn[o]}function st(e,r=!1){const s=document.activeElement;for(const o of e)if(o===s||(o.focus({preventScroll:r}),document.activeElement!==s))return}function Jn(e,r){return e.map((s,o)=>e[(r+o)%e.length])}var Qn=tt,Zn=rt;function Hn(e){const[r,s]=a.useState(void 0);return oe(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});const o=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const c=i[0];let n,d;if("borderBoxSize"in c){const f=c.borderBoxSize,l=Array.isArray(f)?f[0]:f;n=l.inlineSize,d=l.blockSize}else n=e.offsetWidth,d=e.offsetHeight;s({width:n,height:d})});return o.observe(e,{box:"border-box"}),()=>o.unobserve(e)}else s(void 0)},[e]),r}function qn(e){const r=a.useRef({value:e,previous:e});return a.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}function er(e,r){return a.useReducer((s,o)=>r[s][o]??s,e)}var ot=e=>{const{present:r,children:s}=e,o=tr(r),i=typeof s=="function"?s({present:o.isPresent}):a.Children.only(s),c=K(o.ref,nr(i));return typeof s=="function"||o.isPresent?a.cloneElement(i,{ref:c}):null};ot.displayName="Presence";function tr(e){const[r,s]=a.useState(),o=a.useRef(null),i=a.useRef(e),c=a.useRef("none"),n=e?"mounted":"unmounted",[d,f]=er(n,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const l=fe(o.current);c.current=d==="mounted"?l:"none"},[d]),oe(()=>{const l=o.current,m=i.current;if(m!==e){const h=c.current,x=fe(l);e?f("MOUNT"):x==="none"||(l==null?void 0:l.display)==="none"?f("UNMOUNT"):f(m&&h!==x?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,f]),oe(()=>{if(r){let l;const m=r.ownerDocument.defaultView??window,p=x=>{const b=fe(o.current).includes(CSS.escape(x.animationName));if(x.target===r&&b&&(f("ANIMATION_END"),!i.current)){const g=r.style.animationFillMode;r.style.animationFillMode="forwards",l=m.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=g)})}},h=x=>{x.target===r&&(c.current=fe(o.current))};return r.addEventListener("animationstart",h),r.addEventListener("animationcancel",p),r.addEventListener("animationend",p),()=>{m.clearTimeout(l),r.removeEventListener("animationstart",h),r.removeEventListener("animationcancel",p),r.removeEventListener("animationend",p)}}else f("ANIMATION_END")},[r,f]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:a.useCallback(l=>{o.current=l?getComputedStyle(l):null,s(l)},[])}}function fe(e){return(e==null?void 0:e.animationName)||"none"}function nr(e){var o,i;let r=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(r=(i=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:i.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Pe="Radio",[rr,it]=ve(Pe),[sr,or]=rr(Pe),at=a.forwardRef((e,r)=>{const{__scopeRadio:s,name:o,checked:i=!1,required:c,disabled:n,value:d="on",onCheck:f,form:l,...m}=e,[p,h]=a.useState(null),x=K(r,g=>h(g)),v=a.useRef(!1),b=p?l||!!p.closest("form"):!0;return t.jsxs(sr,{scope:s,checked:i,disabled:n,children:[t.jsx(Z.button,{type:"button",role:"radio","aria-checked":i,"data-state":ut(i),"data-disabled":n?"":void 0,disabled:n,value:d,...m,ref:x,onClick:G(e.onClick,g=>{i||f==null||f(),b&&(v.current=g.isPropagationStopped(),v.current||g.stopPropagation())})}),b&&t.jsx(dt,{control:p,bubbles:!v.current,name:o,value:d,checked:i,required:c,disabled:n,form:l,style:{transform:"translateX(-100%)"}})]})});at.displayName=Pe;var ct="RadioIndicator",lt=a.forwardRef((e,r)=>{const{__scopeRadio:s,forceMount:o,...i}=e,c=or(ct,s);return t.jsx(ot,{present:o||c.checked,children:t.jsx(Z.span,{"data-state":ut(c.checked),"data-disabled":c.disabled?"":void 0,...i,ref:r})})});lt.displayName=ct;var ir="RadioBubbleInput",dt=a.forwardRef(({__scopeRadio:e,control:r,checked:s,bubbles:o=!0,...i},c)=>{const n=a.useRef(null),d=K(n,c),f=qn(s),l=Hn(r);return a.useEffect(()=>{const m=n.current;if(!m)return;const p=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(p,"checked").set;if(f!==s&&x){const v=new Event("click",{bubbles:o});x.call(m,s),m.dispatchEvent(v)}},[f,s,o]),t.jsx(Z.input,{type:"radio","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:d,style:{...i.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});dt.displayName=ir;function ut(e){return e?"checked":"unchecked"}var ar=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],we="RadioGroup",[cr,ws]=ve(we,[et,it]),mt=et(),ft=it(),[lr,dr]=cr(we),pt=a.forwardRef((e,r)=>{const{__scopeRadioGroup:s,name:o,defaultValue:i,value:c,required:n=!1,disabled:d=!1,orientation:f,dir:l,loop:m=!0,onValueChange:p,...h}=e,x=mt(s),v=He(l),[b,g]=Ze({prop:c,defaultProp:i??null,onChange:p,caller:we});return t.jsx(lr,{scope:s,name:o,required:n,disabled:d,value:b,onValueChange:g,children:t.jsx(Qn,{asChild:!0,...x,orientation:f,dir:v,loop:m,children:t.jsx(Z.div,{role:"radiogroup","aria-required":n,"aria-orientation":f,"data-disabled":d?"":void 0,dir:v,...h,ref:r})})})});pt.displayName=we;var xt="RadioGroupItem",ht=a.forwardRef((e,r)=>{const{__scopeRadioGroup:s,disabled:o,...i}=e,c=dr(xt,s),n=c.disabled||o,d=mt(s),f=ft(s),l=a.useRef(null),m=K(r,l),p=c.value===i.value,h=a.useRef(!1);return a.useEffect(()=>{const x=b=>{ar.includes(b.key)&&(h.current=!0)},v=()=>h.current=!1;return document.addEventListener("keydown",x),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",x),document.removeEventListener("keyup",v)}},[]),t.jsx(Zn,{asChild:!0,...d,focusable:!n,active:p,children:t.jsx(at,{disabled:n,required:c.required,checked:p,...f,...i,name:c.name,ref:m,onCheck:()=>c.onValueChange(i.value),onKeyDown:G(x=>{x.key==="Enter"&&x.preventDefault()}),onFocus:G(i.onFocus,()=>{var x;h.current&&((x=l.current)==null||x.click())})})})});ht.displayName=xt;var ur="RadioGroupIndicator",gt=a.forwardRef((e,r)=>{const{__scopeRadioGroup:s,...o}=e,i=ft(s);return t.jsx(lt,{...i,...o,ref:r})});gt.displayName=ur;var bt=pt,vt=ht,mr=gt;const wt=a.forwardRef(({className:e,...r},s)=>t.jsx(bt,{className:We("grid gap-2",e),...r,ref:s}));wt.displayName=bt.displayName;const re=a.forwardRef(({className:e,...r},s)=>t.jsx(vt,{ref:s,className:We("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:t.jsx(mr,{className:"flex items-center justify-center",children:t.jsx(en,{className:"h-2.5 w-2.5 fill-current text-current"})})}));re.displayName=vt.displayName;function ne(e){return e?/^https?:\/\//i.test(e)||e.startsWith("/storage/")?e:`/storage/${e.replace(/^\/?storage\//,"")}`:null}function fr(e){return{...e,student:{full_name:`${e.first_name||""} ${e.last_name||""}`.trim(),program:e.program||"",school_id:e.school_id||""},request:{thesis_title:e.thesis_title||"",defense_type:e.defense_type||e.status||""},adviser:e.adviser||e.defense_adviser||""}}pe.extend(Rn);const pr=[{title:"Dashboard",href:"/dashboard"},{title:"Defense Requirements",href:"/defense-requirements"}];function js(){const{props:e}=Tt(),{defenseRequirements:r=[],defenseRequest:s,acceptDefense:o=!0}=e,[i,c]=a.useState(!o),[n,d]=a.useState(s||null),[f,l]=a.useState(pe().format("h:mm A")),[m,p]=a.useState(!1),x=!!n&&!new Set(["cancelled","adviser-rejected","coordinator-rejected","completed"]).has((n.workflow_state||"").toLowerCase()),[v,b]=a.useState(!1),[g,j]=a.useState(!1),[N,y]=a.useState(!1),[C,I]=a.useState(null),[M,F]=a.useState(!1),[R,ae]=a.useState(""),[Y,V]=a.useState(""),[je,Ne]=a.useState(null),[Ee,ce]=a.useState(!1),[U,jt]=a.useState(null),De=["submitted","adviser-approved","coordinator-approved","panels-assigned","scheduled","completed"];function ze(u){if(!u)return null;const w=u.toLowerCase();return w==="submitted"||w==="adviser-review"?"submitted":w==="adviser-approved"||w==="coordinator-review"?"adviser-approved":w==="coordinator-approved"?"coordinator-approved":w==="panels-assigned"||w==="panel-assigned"?"panels-assigned":w==="scheduled"?"scheduled":w==="completed"?"completed":null}function Nt(u){if(!u)return 0;if(u.panels_assigned_at&&!["panels-assigned","scheduled","completed"].includes(u.workflow_state||""))return De.indexOf("panels-assigned");const w=ze(u.workflow_state);return w?De.indexOf(w):0}a.useEffect(()=>{if(!n)return;const u=setInterval(async()=>{try{const w=await fetch(`/api/defense-request/${n.id}`);if(w.ok){const _=await w.json();if(["workflow_state","defense_chairperson","defense_panelist1","defense_panelist2","defense_panelist3","defense_panelist4","scheduled_date","scheduled_time","scheduled_end_time","defense_venue","defense_mode","scheduling_notes"].some(A=>_[A]!==n[A])&&(d(_),l(pe().format("h:mm A")),console.log("Defense request updated:",_)),["adviser-rejected","coordinator-rejected"].includes(_.workflow_state)){const A=r.map(z=>z.thesis_title===_.thesis_title?{...z,status:"Rejected"}:z)}d(_)}}catch(w){console.error("Failed to poll defense request updates:",w)}},1e4);return()=>clearInterval(u)},[n==null?void 0:n.id,n]);function yt(){j(!0)}function Oe(u,w){var k,S,A;if(!w)return((k=u.status)==null?void 0:k.toLowerCase())==="pending";const _=["pending","submitted","adviser-review"];return((S=u.status)==null?void 0:S.toLowerCase())==="cancelled"||w.thesis_title===u.thesis_title&&w.workflow_state==="cancelled"?!1:((A=u.status)==null?void 0:A.toLowerCase())==="pending"||w.thesis_title===u.thesis_title&&_.includes(w.workflow_state)}function _t(u){const w=(u.workflow_state||"").toLowerCase();if((!n||n.thesis_title!==u.thesis_title)&&w==="completed")return{progress:100,title:"Defense Completed",description:"ðŸŽ“ Congratulations! Your defense has been completed successfully.",color:"text-green-600",icon:t.jsx(J,{className:"h-4 w-4 text-green-600"}),bg:"bg-green-50",progressColor:"bg-green-500"};if((!n||n.thesis_title!==u.thesis_title)&&w==="scheduled")return{progress:100,title:"Defense Scheduled",description:"Your defense has been scheduled. Prepare your presentation.",color:"text-green-600",icon:t.jsx(ee,{className:"h-4 w-4 text-green-600"}),bg:"bg-green-50",progressColor:"bg-green-500"};if((!n||n.thesis_title!==u.thesis_title)&&["adviser-rejected","coordinator-rejected"].includes(w))return{progress:100,title:w==="adviser-rejected"?"Rejected by Adviser":"Rejected by Coordinator",description:"This defense request was rejected. You may submit a new one after addressing feedback.",color:"text-red-600",icon:t.jsx(B,{className:"h-4 w-4 text-red-600"}),bg:"bg-red-50",progressColor:"bg-red-500"};let _=0,k="Submitted",S="Your defense requirements have been submitted and are awaiting review.",A="text-muted-foreground",z=t.jsx(te,{className:"h-4 w-4 opacity-60"}),$="bg-secondary",T="bg-blue-500";if(n&&n.thesis_title===u.thesis_title&&n.school_id===e.auth.user.school_id){const H=n.workflow_state;switch(H){case"submitted":case"adviser-review":_=20,k="Under Adviser Review",S="Your submission is being reviewed by your adviser. Please wait for feedback or approval.",A="text-blue-600",z=t.jsx(Le,{className:"h-4 w-4 text-blue-600"}),$="bg-blue-50",T="bg-blue-500";break;case"adviser-approved":case"coordinator-review":_=50,k="Awaiting Coordinator Review",S="Your adviser has approved your submission. The coordinator will now review and assign panel members.",A="text-orange-600",z=t.jsx(W,{className:"h-4 w-4 text-orange-600"}),$="bg-orange-50",T="bg-orange-500";break;case"coordinator-approved":_=60,k="Panel Assignment in Progress",S="The coordinator has approved your submission. Panel members will be assigned soon.",A="text-green-600",z=t.jsx(Q,{className:"h-4 w-4 text-green-600"}),$="bg-green-50",T="bg-green-500";break;case"panels-assigned":_=75,k="Panels Assigned",S="Panel members have been assigned. Scheduling your defense is next.",A="text-orange-600",z=t.jsx(Q,{className:"h-4 w-4 text-orange-600"}),$="bg-orange-50",T="bg-orange-500";break;case"scheduled":_=90,k="Defense Scheduled",S="Your defense has been scheduled. Please prepare your presentation and required materials.",A="text-green-600",z=t.jsx(ee,{className:"h-4 w-4 text-green-600"}),$="bg-green-50",T="bg-green-500";break;case"completed":_=100,k="Defense Completed",S="Congratulations! Your defense is complete.",A="text-green-600",z=t.jsx(J,{className:"h-4 w-4 text-green-600"}),$="bg-green-50",T="bg-green-500";break;case"adviser-rejected":_=100,k="Rejected by Adviser",S="Your adviser has rejected your submission. Please review the feedback and resubmit.",A="text-red-600",z=t.jsx(B,{className:"h-4 w-4 text-red-600"}),$="bg-red-50",T="bg-red-500";break;case"coordinator-rejected":_=100,k="Rejected by Coordinator",S="Your submission was rejected by the coordinator. Please review the feedback and resubmit.",A="text-red-600",z=t.jsx(B,{className:"h-4 w-4 text-red-600"}),$="bg-red-50",T="bg-red-500";break;default:_=10,k="Processing",S="Your defense request is being processed. Current status: "+(n.workflow_state_display||H),A="text-gray-600",z=t.jsx(te,{className:"h-4 w-4 text-gray-600"}),$="bg-gray-50",T="bg-gray-500";break}}return{progress:_,title:k,description:S,color:A,icon:z,bg:$,progressColor:T}}return t.jsxs(Et,{breadcrumbs:pr,children:[t.jsx(Pt,{title:"Defense Requirements"}),m?t.jsxs("div",{className:"w-full min-h-[70vh] bg-zinc-100 dark:bg-zinc-900 flex flex-col gap-4 p-0 m-0",children:[t.jsx(ue,{className:"h-6 w-1/6 rounded bg-zinc-300 dark:bg-zinc-800 mt-8 mx-8"}),t.jsx(ue,{className:"h-12 w-3/4 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),t.jsx(ue,{className:"h-12 w-2/3 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),t.jsx(ue,{className:"h-[500px] w-full rounded bg-zinc-300 dark:bg-zinc-800 mt-4"})]}):t.jsxs("div",{className:"flex flex-col px-7 pt-5 pb-5 w-full",children:[!o&&i&&t.jsxs(Kt,{className:"bg-yellow-50 dark:bg-yellow-950 border-yellow-200 dark:border-yellow-900 text-yellow-900 dark:text-yellow-100 flex items-start gap-3 px-6 py-5 rounded-xl mb-4 relative",children:[t.jsx($e,{className:"h-5 w-5 text-yellow-500 dark:text-yellow-400 mt-1 flex-shrink-0"}),t.jsxs("div",{children:[t.jsx(Yt,{className:"font-semibold mb-1",children:"Defense Requirement Submissions Closed"}),t.jsx(Vt,{children:"The defense requirement submission period is currently closed. Please contact your coordinator for more information."})]}),t.jsx("button",{type:"button",className:"absolute top-2 right-2 text-yellow-900 dark:text-yellow-100 hover:text-yellow-700 dark:hover:text-yellow-300 rounded p-1","aria-label":"Close",onClick:()=>c(!1),children:t.jsx(B,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"w-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg overflow-hidden",children:[t.jsxs("div",{className:"flex flex-row items-center justify-between w-full p-3 border-b border-zinc-200 dark:border-zinc-800",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-full bg-rose-500/10 dark:bg-rose-500/20 border border-rose-500 dark:border-rose-700",children:t.jsx(J,{className:"h-5 w-5 text-rose-400 dark:text-rose-300"})}),t.jsxs("div",{children:[t.jsx("span",{className:"text-base font-semibold dark:text-white",children:"Defense Requirements"}),t.jsx("p",{className:"block text-xs text-muted-foreground dark:text-zinc-400",children:"This sections shows all your submitted defense requirements and their current status."})]})]}),t.jsxs(le,{className:"bg-rose-500 text-sm px-5 rounded-md dark:bg-rose-600 disabled:opacity-60",onClick:()=>b(!0),disabled:x||!o,title:o?x?"You already have an active defense workflow. Finish (or reach a terminal state) before submitting another.":"Submit new defense requirements":"Defense requirement submissions are currently closed.",children:[t.jsx(Qt,{})," Submit requirements"]}),t.jsx($t,{open:v,onOpenChange:b,onFinish:yt,acceptDefense:o})]}),r.length===0?t.jsx("div",{className:"p-6 text-center text-sm text-muted-foreground dark:text-zinc-400",children:"No defense requirements submitted yet."}):[...r].sort((u,w)=>{const _=u.created_at?new Date(u.created_at).getTime():0;return(w.created_at?new Date(w.created_at).getTime():0)-_}).map(u=>{var Fe;_t(u);const w=U===u.id,_=u.created_at?pe(u.created_at).fromNow():"Unknown",k=[{key:"submitted",label:"Submitted",icon:t.jsx(te,{className:"w-4 h-4"})},{key:"adviser-approved",label:"Adviser Approved",icon:t.jsx(W,{className:"w-4 h-4"})},{key:"coordinator-approved",label:"Coordinator Approved",icon:t.jsx(W,{className:"w-4 h-4"})},{key:"panels-assigned",label:"Panels Assigned",icon:t.jsx(Q,{className:"w-4 h-4"})},{key:"scheduled",label:"Scheduled",icon:t.jsx(ee,{className:"w-4 h-4"})},{key:"completed",label:"Completed",icon:t.jsx(J,{className:"w-4 h-4"})}],S=n&&n.thesis_title===u.thesis_title?n:u.workflow_state?{workflow_state:u.workflow_state}:n,A=Nt(S),z=n==null?void 0:n.workflow_state,$=n?ze(z):null,T=!!n&&n.thesis_title===u.thesis_title&&["adviser-rejected","coordinator-rejected"].includes(n.workflow_state||""),H=T&&(n==null?void 0:n.workflow_state)==="coordinator-rejected",Me=T&&(n==null?void 0:n.workflow_state)==="adviser-rejected";H?n==null||n.coordinator_comments:Me&&(n==null||n.adviser_comments);const kt=H?"Rejected by Coordinator":Me?"Rejected by Adviser":"Rejected",X=((Fe=u.status)==null?void 0:Fe.toLowerCase())==="cancelled"||n&&n.thesis_title===u.thesis_title&&n.workflow_state==="cancelled",Ct=(u.workflow_state||"").toLowerCase(),ye=n&&n.thesis_title===u.thesis_title&&n.workflow_state==="completed"||Ct==="completed";let P=0,E="Submitted",D=t.jsx(te,{className:"h-4 w-4 opacity-60 dark:text-zinc-400"});const Rt=n&&n.thesis_title===u.thesis_title&&n.school_id===e.auth.user.school_id,_e=(u.workflow_state||"").toLowerCase();if(!Rt&&_e)switch(_e){case"completed":P=k.length-1,E="Defense Completed",D=t.jsx(J,{className:"h-4 w-4 text-green-600"});break;case"scheduled":P=k.findIndex(O=>O.key==="scheduled"),E="Defense Scheduled",D=t.jsx(ee,{className:"h-4 w-4 text-green-600"});break;case"panels-assigned":P=k.findIndex(O=>O.key==="panels-assigned"),E="Panels Assigned",D=t.jsx(Q,{className:"h-4 w-4 text-orange-600"});break;case"coordinator-approved":P=k.findIndex(O=>O.key==="coordinator-approved"),E="Coordinator Approved",D=t.jsx(W,{className:"h-4 w-4 text-green-600"});break;case"adviser-approved":P=k.findIndex(O=>O.key==="adviser-approved"),E="Adviser Approved",D=t.jsx(W,{className:"h-4 w-4 text-orange-600"});break;case"adviser-rejected":case"coordinator-rejected":P=0,E=_e==="adviser-rejected"?"Rejected by Adviser":"Rejected by Coordinator",D=t.jsx(B,{className:"h-4 w-4 text-red-600"});break}if(X)P=0,E="Cancelled",D=t.jsx(B,{className:"h-4 w-4 text-red-600"});else if(T)P=0,E=kt,D=t.jsx(B,{className:"h-4 w-4 text-red-600"});else if(n&&n.thesis_title===u.thesis_title&&n.school_id===e.auth.user.school_id){switch($){case"submitted":P=0,E="Under Adviser Review",D=t.jsx(Le,{className:"h-4 w-4 text-blue-600"});break;case"adviser-approved":P=1,E="Adviser Approved",D=t.jsx(W,{className:"h-4 w-4 text-orange-600"});break;case"coordinator-approved":P=2,E="Coordinator Approved",D=t.jsx(W,{className:"h-4 w-4 text-green-600"});break;case"panels-assigned":P=3,E="Panels Assigned",D=t.jsx(Q,{className:"h-4 w-4 text-orange-600"});break;case"scheduled":P=4,E="Defense Scheduled",D=t.jsx(ee,{className:"h-4 w-4 text-green-600"});break;case"completed":P=5,E="Defense Completed",D=t.jsx(J,{className:"h-4 w-4 text-green-600"});break;default:P=0,E="Processing",D=t.jsx(te,{className:"h-4 w-4 text-gray-600"})}!X&&(n!=null&&n.panels_assigned_at)&&P<3&&(P=3,E="Panels Assigned",D=t.jsx(Q,{className:"h-4 w-4 text-orange-600"}))}const St=!X&&!T&&!ye;return t.jsxs(L.Fragment,{children:[t.jsx("div",{className:"border-b border-zinc-200 dark:border-zinc-800 w-full"}),t.jsxs(jn,{open:w,onOpenChange:O=>jt(O?u.id:null),children:[t.jsx(Nn,{asChild:!0,children:t.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer bg-white dark:bg-zinc-900 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors",children:[t.jsx(Zt,{className:`transition-transform duration-200 h-4 w-4 text-muted-foreground dark:text-zinc-400 mr-3 ${w?"rotate-180":""}`}),t.jsxs("div",{className:"flex flex-col flex-1 gap-0.5",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[u.defense_type&&t.jsx(Jt,{variant:"outline",className:"text-xs font-semibold px-2 py-0.5 capitalize",children:u.defense_type}),t.jsx("span",{className:"font-semibold text-xs text-black dark:text-white leading-tight",children:u.thesis_title})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[X||T?t.jsx(B,{className:"h-4 w-4 text-red-600"}):ye?t.jsx(W,{className:"h-4 w-4 text-green-600"}):L.cloneElement(D,{className:"h-4 w-4 text-muted-foreground text-xs dark:text-zinc-300"}),t.jsx("span",{className:`font-medium text-xs ${X||T?"text-red-600":ye?"text-green-600":"text-muted-foreground dark:text-zinc-300"}`,children:E}),t.jsx("span",{className:"text-xs text-muted-foreground dark:text-zinc-400 ",children:_})]})]}),t.jsx("div",{className:"flex items-center w-64 justify-end",children:St?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"flex-1"}),t.jsx("div",{className:"flex items-center gap-0",children:k.map((O,ke)=>{const At=ke<=A?"bg-rose-500 text-white border-rose-500 dark:bg-rose-600 dark:border-rose-700":"bg-zinc-100 text-zinc-400 border-zinc-200 dark:bg-zinc-800 dark:text-zinc-500 dark:border-zinc-700";return t.jsxs(L.Fragment,{children:[t.jsx("div",{className:"flex items-center justify-center",children:t.jsx("div",{className:`rounded-full p-1 border ${At}`,children:O.icon})}),ke<k.length-1&&t.jsx("div",{className:`h-1 w-6 ${ke<A?"bg-rose-500 dark:bg-rose-700":"bg-zinc-200 dark:bg-zinc-700"}`})]},O.key)})})]}):t.jsx("div",{className:"flex items-center justify-center"})})]})}),t.jsx(yn,{children:t.jsx("div",{className:"px-4 py-3",children:t.jsxs("div",{className:"mb-3 p-3 rounded border bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 flex flex-col gap-2 rounded-md relative",children:[t.jsxs("div",{className:"flex flex-row gap-6 flex-wrap",children:[t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-xs text-zinc-500 dark:text-zinc-400",children:"Thesis Title:"}),t.jsx("div",{className:"text-sm font-medium text-zinc-800 dark:text-white",children:u.thesis_title})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-xs text-zinc-500 dark:text-zinc-400",children:"Student Name:"}),t.jsxs("div",{className:"text-sm text-zinc-800 dark:text-white",children:[u.first_name," ",u.last_name]})]}),t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-xs text-zinc-500 dark:text-zinc-400",children:"Adviser:"}),t.jsx("div",{className:"text-sm text-zinc-800 dark:text-white",children:u.adviser||"â€”"})]})]}),t.jsxs("div",{className:"flex flex-row gap-2 mt-2 flex-wrap",children:[u.manuscript_proposal&&t.jsxs("a",{href:ne(u.manuscript_proposal)||void 0,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[t.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:t.jsx(q,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"flex flex-col min-w-0",children:[t.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Manuscript"}),t.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:u.manuscript_proposal.split("/").pop()})]})]}),u.similarity_index&&t.jsxs("a",{href:ne(u.similarity_index)||void 0,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[t.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:t.jsx(q,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"flex flex-col min-w-0",children:[t.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Similarity"}),t.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:u.similarity_index.split("/").pop()})]})]}),u.rec_endorsement&&t.jsxs("a",{href:ne(u.rec_endorsement)||void 0,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[t.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:t.jsx(q,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"flex flex-col min-w-0",children:[t.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Endorsement"}),t.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:u.rec_endorsement.split("/").pop()})]})]}),u.proof_of_payment&&t.jsxs("a",{href:ne(u.proof_of_payment)||void 0,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[t.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:t.jsx(q,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"flex flex-col min-w-0",children:[t.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Payment"}),t.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:u.proof_of_payment.split("/").pop()})]})]}),u.avisee_adviser_attachment&&t.jsxs("a",{href:ne(u.avisee_adviser_attachment)||void 0,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[t.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:t.jsx(q,{className:"w-4 h-4 text-white"})}),t.jsxs("div",{className:"flex flex-col min-w-0",children:[t.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Avisee-Adviser"}),t.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:u.avisee_adviser_attachment.split("/").pop()})]})]})]}),n&&n.thesis_title===u.thesis_title&&t.jsxs("div",{className:"mt-2 w-full border border-zinc-200 dark:border-zinc-700 rounded-md p-3 bg-zinc-50 dark:bg-zinc-800/40",children:[t.jsxs("div",{className:"flex items-center mb-2",children:[t.jsx($e,{className:"w-4 h-4 text-rose-500 mr-2"}),t.jsx("span",{className:"text-xs font-semibold text-zinc-700 dark:text-zinc-200",children:"Defense Information"})]}),t.jsxs("div",{className:"text-xs text-zinc-700 dark:text-zinc-300 space-y-3",children:[["adviser-rejected","coordinator-rejected","cancelled"].includes(n.workflow_state)&&t.jsxs("div",{className:"text-xs text-rose-600",children:["No further defense information (request ",n.workflow_state.replace("-"," "),")."]}),["panels-assigned","scheduled","completed"].includes(n.workflow_state)&&[n.defense_chairperson,n.defense_panelist1,n.defense_panelist2,n.defense_panelist3,n.defense_panelist4].some(Boolean)&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold",children:"Committee:"}),t.jsxs("ul",{className:"pl-4 list-disc",children:[n.defense_chairperson&&t.jsxs("li",{children:[n.defense_chairperson," ",t.jsx("span",{className:"text-xs text-zinc-500",children:"(Chairperson)"})]}),n.defense_panelist1&&t.jsxs("li",{children:[n.defense_panelist1," ",t.jsx("span",{className:"text-xs text-zinc-500",children:"(Panelist 1)"})]}),n.defense_panelist2&&t.jsxs("li",{children:[n.defense_panelist2," ",t.jsx("span",{className:"text-xs text-zinc-500",children:"(Panelist 2)"})]}),n.defense_panelist3&&t.jsxs("li",{children:[n.defense_panelist3," ",t.jsx("span",{className:"text-xs text-zinc-500",children:"(Panelist 3)"})]}),n.defense_panelist4&&t.jsxs("li",{children:[n.defense_panelist4," ",t.jsx("span",{className:"text-xs text-zinc-500",children:"(Panelist 4)"})]})]})]}),n.workflow_state==="completed"&&t.jsxs("div",{className:"mt-2 p-3 rounded-md border border-green-200 bg-green-50 dark:bg-green-900/30 flex flex-col gap-2",children:[t.jsx("div",{className:"font-bold text-green-700 text-xs mb-1",children:"Congratulations, your defense has been successfully completed!"}),t.jsxs("div",{className:"text-xs text-zinc-700 dark:text-zinc-200 mb-1",children:[t.jsx("b",{children:"Request for Oral Defense Certificate"}),t.jsx("br",{}),"Please fill out the following form to request your Oral Defense Certificate:",t.jsx("br",{}),t.jsx("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScIFYf8Z6L8q_N2qVEdS4koTJ7jv4HOFnhit-4LKXmOH--Ukg/viewform?usp=send_form",target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 underline break-all",children:"https://docs.google.com/forms/d/e/1FAIpQLScIFYf8Z6L8q_N2qVEdS4koTJ7jv4HOFnhit-4LKXmOH--Ukg/viewform?usp=send_form"})]})]}),["submitted","adviser-review"].includes(n.workflow_state)&&t.jsx("div",{children:"Awaiting adviser review. No coordinator actions yet."}),["adviser-approved","coordinator-review"].includes(n.workflow_state)&&t.jsx("div",{children:"Adviser approved. Awaiting coordinator review / panel assignment."}),n.workflow_state==="coordinator-approved"&&![n.defense_chairperson,n.defense_panelist1,n.defense_panelist2,n.defense_panelist3,n.defense_panelist4].some(Boolean)&&t.jsx("div",{children:"Coordinator approved. Panel assignment pending."}),n.workflow_state==="panels-assigned"&&!n.scheduled_date&&t.jsx("div",{children:"Panel assigned. Scheduling in progress."})]})]}),t.jsxs("div",{className:"absolute right-3 top-2 flex items-center gap-2",children:[t.jsxs("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 whitespace-nowrap",children:["Submitted ",_]}),t.jsxs(Lt,{children:[t.jsx(Ut,{asChild:!0,children:t.jsx(le,{variant:"outline",size:"icon",className:"h-6 w-6 p-0",disabled:!!X,children:t.jsx(Ht,{className:"h-4 w-4"})})}),t.jsxs(Gt,{align:"end",children:[t.jsx(de,{disabled:!Oe(u,n),onSelect:O=>{O.preventDefault(),Oe(u,n)&&(Ne(u.id),ae(""),V(""),F(!0))},children:"Unsubmit"}),t.jsx(de,{onSelect:O=>{O.preventDefault(),I(fr({...u,...n&&n.thesis_title===u.thesis_title?n:{}})),y(!0)},children:"Generate Document"}),t.jsx(de,{children:"View Details"}),t.jsx(de,{children:"Download"})]})]})]})]})})})]})]},u.id)})]}),t.jsx(Dt,{open:M,onOpenChange:F,children:t.jsxs(zt,{children:[t.jsxs(Ot,{children:[t.jsx(Mt,{children:"Are you sure?"}),t.jsx(Ft,{children:"Please select a reason for unsubmission."})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs(wt,{value:R,onValueChange:ae,children:[t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx(re,{value:"mistake",id:"reason-mistake"}),t.jsx("label",{htmlFor:"reason-mistake",className:"text-sm",children:"I made a mistake in filling up the forms"})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx(re,{value:"cancel",id:"reason-cancel"}),t.jsx("label",{htmlFor:"reason-cancel",className:"text-sm",children:"I'd like to just cancel the submission"})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx(re,{value:"outdated",id:"reason-outdated"}),t.jsx("label",{htmlFor:"reason-outdated",className:"text-sm",children:"The submission was outdated"})]}),t.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[t.jsx(re,{value:"other",id:"reason-other"}),t.jsx("label",{htmlFor:"reason-other",className:"text-sm",children:"Other..."})]})]}),R==="other"&&t.jsx(Wt,{placeholder:"Enter your reason",value:Y,onChange:u=>V(u.target.value),className:"text-sm"}),t.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[t.jsx(le,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),t.jsx(le,{disabled:Ee||!R||R==="other"&&!Y,onClick:async()=>{var u,w;ce(!0);try{const _=((u=window.Laravel)==null?void 0:u.csrfToken)||((w=document.querySelector('meta[name="csrf-token"]'))==null?void 0:w.getAttribute("content")),k=await fetch(`/defense-requirements/${je}/unsubmit`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":_||""},body:JSON.stringify({reason:R==="other"?Y:R,_token:_||""})});if(k.ok)F(!1),window.location.reload();else{let S={};try{S=await k.json()}catch{}alert(typeof S=="object"&&S!==null&&"message"in S?S.message:"Failed to unsubmit. You can only unsubmit requirements that are still pending or under adviser review.")}}catch{alert("Network error. Please try again.")}finally{ce(!1)}},children:"Submit"})]})]})]})}),C&&t.jsx(Xt,{open:N,onOpenChange:y,defenseRequest:C})]})]})}export{js as default};
