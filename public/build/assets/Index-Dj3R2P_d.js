import{r as a,j as e,R as F,c as $e,K as Nt,L as kt}from"./app-BFhJ_rhz.js";import{A as _t}from"./app-layout-DKWHuAKG.js";import{B as xe}from"./button-CKae6SRa.js";import{D as yt,a as Ct,b as St,c as Rt,d as At}from"./dialog-D7W9x4ad.js";import{d as X,C as It,a as zt,b as Dt,r as Tt}from"./relativeTime-QZTXrn_K.js";import Pt from"./submit-defense-requirements-BQQC-86F.js";import{D as Et,a as Mt,b as Ot,c as Re}from"./dropdown-menu-ClRvripl.js";import"./index-BxKqTWPD.js";import{c as Ie}from"./index-XUnuFccv.js";import{c as Ge}from"./utils-jAU0Cazi.js";import{c as Ft}from"./createLucideIcon-KZz7-iiu.js";import{I as Lt}from"./input-BIzgsiDe.js";import{S as be}from"./skeleton-DzsJStbB.js";import{A as Ut,a as $t,b as Gt}from"./alert-COzO0krf.js";import{I as Fe}from"./info-C_dbFrPh.js";import{X as $}from"./x-CnUa_NpO.js";import{G as Q}from"./graduation-cap-CXqZ0t7s.js";import{C as Yt}from"./chevron-down-CFBjVW0P.js";import{C as K}from"./circle-check-big-B-7ETsgn.js";import{C as Bt}from"./check-C9G5qvCx.js";import{P as he}from"./paperclip-Dlg1S261.js";import{E as Kt}from"./ellipsis-vertical-CXO-glhN.js";import{C as re}from"./calendar-CgC1wT9Q.js";import{H as se}from"./hourglass-DgiREuGd.js";import{U as ne}from"./users-DEbcMkR_.js";import{E as Le}from"./eye-DZMJcIO6.js";import"./index-DZZQifJx.js";import"./index-B3ixvT_X.js";import"./index-D0wd6wGz.js";import"./tooltip-I1_k_sJu.js";import"./floating-ui.react-dom-cBbMY6yK.js";import"./separator-BY26pNcl.js";import"./index-DECR1Bfi.js";import"./chevron-right-DjSSbn5Y.js";import"./avatar-Hezgfi3W.js";import"./index-Cts8AH-1.js";import"./settings-HgSYffZJ.js";import"./chevrons-up-down-COq0GsTe.js";import"./file-text-DZ3MZZ0V.js";import"./dollar-sign-Du1oc25G.js";import"./credit-card-BiSsycVm.js";import"./badge-WiooCdVb.js";import"./sun-zhaV4S8O.js";import"./label-1vsVmE7Q.js";import"./Stepper-DpP2VZye.js";import"./index-C9pixpqP.js";import"./index-C_D7lUP4.js";import"./index-Bdmt_zOQ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Vt=Ft("Circle",Wt);function G(r,s,{checkForDefaultPrevented:n=!0}={}){return function(i){if(r==null||r(i),n===!1||!i.defaultPrevented)return s==null?void 0:s(i)}}function Ue(r,s){if(typeof r=="function")return r(s);r!=null&&(r.current=s)}function Xt(...r){return s=>{let n=!1;const o=r.map(i=>{const c=Ue(i,s);return!n&&typeof c=="function"&&(n=!0),c});if(n)return()=>{for(let i=0;i<o.length;i++){const c=o[i];typeof c=="function"?c():Ue(r[i],null)}}}}function H(...r){return a.useCallback(Xt(...r),r)}function we(r,s=[]){let n=[];function o(c,t){const l=a.createContext(t),f=n.length;n=[...n,t];const u=b=>{var S;const{scope:g,children:p,...v}=b,w=((S=g==null?void 0:g[r])==null?void 0:S[f])||l,x=a.useMemo(()=>v,Object.values(v));return e.jsx(w.Provider,{value:x,children:p})};u.displayName=c+"Provider";function m(b,g){var w;const p=((w=g==null?void 0:g[r])==null?void 0:w[f])||l,v=a.useContext(p);if(v)return v;if(t!==void 0)return t;throw new Error(`\`${b}\` must be used within \`${c}\``)}return[u,m]}const i=()=>{const c=n.map(t=>a.createContext(t));return function(l){const f=(l==null?void 0:l[r])||c;return a.useMemo(()=>({[`__scope${r}`]:{...l,[r]:f}}),[l,f])}};return i.scopeName=r,[o,Ht(i,...s)]}function Ht(...r){const s=r[0];if(r.length===1)return s;const n=()=>{const o=r.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(c){const t=o.reduce((l,{useScope:f,scopeName:u})=>{const b=f(c)[`__scope${u}`];return{...l,...b}},{});return a.useMemo(()=>({[`__scope${s.scopeName}`]:t}),[t])}};return n.scopeName=s.scopeName,n}var Jt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Z=Jt.reduce((r,s)=>{const n=Ie(`Primitive.${s}`),o=a.forwardRef((i,c)=>{const{asChild:t,...l}=i,f=t?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(f,{...l,ref:c})});return o.displayName=`Primitive.${s}`,{...r,[s]:o}},{});function Qt(r){const s=r+"CollectionProvider",[n,o]=we(s),[i,c]=n(s,{collectionRef:{current:null},itemMap:new Map}),t=w=>{const{scope:x,children:S}=w,P=F.useRef(null),j=F.useRef(new Map).current;return e.jsx(i,{scope:x,itemMap:j,collectionRef:P,children:S})};t.displayName=s;const l=r+"CollectionSlot",f=Ie(l),u=F.forwardRef((w,x)=>{const{scope:S,children:P}=w,j=c(l,S),C=H(x,j.collectionRef);return e.jsx(f,{ref:C,children:P})});u.displayName=l;const m=r+"CollectionItemSlot",b="data-radix-collection-item",g=Ie(m),p=F.forwardRef((w,x)=>{const{scope:S,children:P,...j}=w,C=F.useRef(null),L=H(x,C),O=c(m,S);return F.useEffect(()=>(O.itemMap.set(C,{ref:C,...j}),()=>void O.itemMap.delete(C))),e.jsx(g,{[b]:"",ref:L,children:P})});p.displayName=m;function v(w){const x=c(r+"CollectionConsumer",w);return F.useCallback(()=>{const P=x.collectionRef.current;if(!P)return[];const j=Array.from(P.querySelectorAll(`[${b}]`));return Array.from(x.itemMap.values()).sort((O,W)=>j.indexOf(O.ref.current)-j.indexOf(W.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:t,Slot:u,ItemSlot:p},v,o]}var ae=globalThis!=null&&globalThis.document?a.useLayoutEffect:()=>{},Zt=$e[" useId ".trim().toString()]||(()=>{}),qt=0;function er(r){const[s,n]=a.useState(Zt());return ae(()=>{n(o=>o??String(qt++))},[r]),s?`radix-${s}`:""}function tr(r){const s=a.useRef(r);return a.useEffect(()=>{s.current=r}),a.useMemo(()=>(...n)=>{var o;return(o=s.current)==null?void 0:o.call(s,...n)},[])}var rr=$e[" useInsertionEffect ".trim().toString()]||ae;function Ye({prop:r,defaultProp:s,onChange:n=()=>{},caller:o}){const[i,c,t]=sr({defaultProp:s,onChange:n}),l=r!==void 0,f=l?r:i;{const m=a.useRef(r!==void 0);a.useEffect(()=>{const b=m.current;b!==l&&console.warn(`${o} is changing from ${b?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=l},[l,o])}const u=a.useCallback(m=>{var b;if(l){const g=nr(m)?m(r):m;g!==r&&((b=t.current)==null||b.call(t,g))}else c(m)},[l,r,c,t]);return[f,u]}function sr({defaultProp:r,onChange:s}){const[n,o]=a.useState(r),i=a.useRef(n),c=a.useRef(s);return rr(()=>{c.current=s},[s]),a.useEffect(()=>{var t;i.current!==n&&((t=c.current)==null||t.call(c,n),i.current=n)},[n,i]),[n,o,c]}function nr(r){return typeof r=="function"}var or=a.createContext(void 0);function Be(r){const s=a.useContext(or);return r||s||"ltr"}var Ae="rovingFocusGroup.onEntryFocus",ar={bubbles:!1,cancelable:!0},ie="RovingFocusGroup",[ze,Ke,ir]=Qt(ie),[cr,We]=we(ie,[ir]),[dr,lr]=cr(ie),Ve=a.forwardRef((r,s)=>e.jsx(ze.Provider,{scope:r.__scopeRovingFocusGroup,children:e.jsx(ze.Slot,{scope:r.__scopeRovingFocusGroup,children:e.jsx(ur,{...r,ref:s})})}));Ve.displayName=ie;var ur=a.forwardRef((r,s)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:i=!1,dir:c,currentTabStopId:t,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:f,onEntryFocus:u,preventScrollOnEntryFocus:m=!1,...b}=r,g=a.useRef(null),p=H(s,g),v=Be(c),[w,x]=Ye({prop:t,defaultProp:l??null,onChange:f,caller:ie}),[S,P]=a.useState(!1),j=tr(u),C=Ke(n),L=a.useRef(!1),[O,W]=a.useState(0);return a.useEffect(()=>{const T=g.current;if(T)return T.addEventListener(Ae,j),()=>T.removeEventListener(Ae,j)},[j]),e.jsx(dr,{scope:n,orientation:o,dir:v,loop:i,currentTabStopId:w,onItemFocus:a.useCallback(T=>x(T),[x]),onItemShiftTab:a.useCallback(()=>P(!0),[]),onFocusableItemAdd:a.useCallback(()=>W(T=>T+1),[]),onFocusableItemRemove:a.useCallback(()=>W(T=>T-1),[]),children:e.jsx(Z.div,{tabIndex:S||O===0?-1:0,"data-orientation":o,...b,ref:p,style:{outline:"none",...r.style},onMouseDown:G(r.onMouseDown,()=>{L.current=!0}),onFocus:G(r.onFocus,T=>{const je=!L.current;if(T.target===T.currentTarget&&je&&!S){const ce=new CustomEvent(Ae,ar);if(T.currentTarget.dispatchEvent(ce),!ce.defaultPrevented){const J=C().filter(U=>U.focusable),Ne=J.find(U=>U.active),ke=J.find(U=>U.id===w),de=[Ne,ke,...J].filter(Boolean).map(U=>U.ref.current);Je(de,m)}}L.current=!1}),onBlur:G(r.onBlur,()=>P(!1))})})}),Xe="RovingFocusGroupItem",He=a.forwardRef((r,s)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:i=!1,tabStopId:c,children:t,...l}=r,f=er(),u=c||f,m=lr(Xe,n),b=m.currentTabStopId===u,g=Ke(n),{onFocusableItemAdd:p,onFocusableItemRemove:v,currentTabStopId:w}=m;return a.useEffect(()=>{if(o)return p(),()=>v()},[o,p,v]),e.jsx(ze.ItemSlot,{scope:n,id:u,focusable:o,active:i,children:e.jsx(Z.span,{tabIndex:b?0:-1,"data-orientation":m.orientation,...l,ref:s,onMouseDown:G(r.onMouseDown,x=>{o?m.onItemFocus(u):x.preventDefault()}),onFocus:G(r.onFocus,()=>m.onItemFocus(u)),onKeyDown:G(r.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){m.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const S=pr(x,m.orientation,m.dir);if(S!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let j=g().filter(C=>C.focusable).map(C=>C.ref.current);if(S==="last")j.reverse();else if(S==="prev"||S==="next"){S==="prev"&&j.reverse();const C=j.indexOf(x.currentTarget);j=m.loop?xr(j,C+1):j.slice(C+1)}setTimeout(()=>Je(j))}}),children:typeof t=="function"?t({isCurrentTabStop:b,hasTabStop:w!=null}):t})})});He.displayName=Xe;var mr={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fr(r,s){return s!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function pr(r,s,n){const o=fr(r.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return mr[o]}function Je(r,s=!1){const n=document.activeElement;for(const o of r)if(o===n||(o.focus({preventScroll:s}),document.activeElement!==n))return}function xr(r,s){return r.map((n,o)=>r[(s+o)%r.length])}var br=Ve,hr=He;function gr(r){const[s,n]=a.useState(void 0);return ae(()=>{if(r){n({width:r.offsetWidth,height:r.offsetHeight});const o=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const c=i[0];let t,l;if("borderBoxSize"in c){const f=c.borderBoxSize,u=Array.isArray(f)?f[0]:f;t=u.inlineSize,l=u.blockSize}else t=r.offsetWidth,l=r.offsetHeight;n({width:t,height:l})});return o.observe(r,{box:"border-box"}),()=>o.unobserve(r)}else n(void 0)},[r]),s}function wr(r){const s=a.useRef({value:r,previous:r});return a.useMemo(()=>(s.current.value!==r&&(s.current.previous=s.current.value,s.current.value=r),s.current.previous),[r])}function vr(r,s){return a.useReducer((n,o)=>s[n][o]??n,r)}var Qe=r=>{const{present:s,children:n}=r,o=jr(s),i=typeof n=="function"?n({present:o.isPresent}):a.Children.only(n),c=H(o.ref,Nr(i));return typeof n=="function"||o.isPresent?a.cloneElement(i,{ref:c}):null};Qe.displayName="Presence";function jr(r){const[s,n]=a.useState(),o=a.useRef(null),i=a.useRef(r),c=a.useRef("none"),t=r?"mounted":"unmounted",[l,f]=vr(t,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const u=ge(o.current);c.current=l==="mounted"?u:"none"},[l]),ae(()=>{const u=o.current,m=i.current;if(m!==r){const g=c.current,p=ge(u);r?f("MOUNT"):p==="none"||(u==null?void 0:u.display)==="none"?f("UNMOUNT"):f(m&&g!==p?"ANIMATION_OUT":"UNMOUNT"),i.current=r}},[r,f]),ae(()=>{if(s){let u;const m=s.ownerDocument.defaultView??window,b=p=>{const w=ge(o.current).includes(CSS.escape(p.animationName));if(p.target===s&&w&&(f("ANIMATION_END"),!i.current)){const x=s.style.animationFillMode;s.style.animationFillMode="forwards",u=m.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=x)})}},g=p=>{p.target===s&&(c.current=ge(o.current))};return s.addEventListener("animationstart",g),s.addEventListener("animationcancel",b),s.addEventListener("animationend",b),()=>{m.clearTimeout(u),s.removeEventListener("animationstart",g),s.removeEventListener("animationcancel",b),s.removeEventListener("animationend",b)}}else f("ANIMATION_END")},[s,f]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:a.useCallback(u=>{o.current=u?getComputedStyle(u):null,n(u)},[])}}function ge(r){return(r==null?void 0:r.animationName)||"none"}function Nr(r){var o,i;let s=(o=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:o.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?r.ref:(s=(i=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:i.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}var De="Radio",[kr,Ze]=we(De),[_r,yr]=kr(De),qe=a.forwardRef((r,s)=>{const{__scopeRadio:n,name:o,checked:i=!1,required:c,disabled:t,value:l="on",onCheck:f,form:u,...m}=r,[b,g]=a.useState(null),p=H(s,x=>g(x)),v=a.useRef(!1),w=b?u||!!b.closest("form"):!0;return e.jsxs(_r,{scope:n,checked:i,disabled:t,children:[e.jsx(Z.button,{type:"button",role:"radio","aria-checked":i,"data-state":st(i),"data-disabled":t?"":void 0,disabled:t,value:l,...m,ref:p,onClick:G(r.onClick,x=>{i||f==null||f(),w&&(v.current=x.isPropagationStopped(),v.current||x.stopPropagation())})}),w&&e.jsx(rt,{control:b,bubbles:!v.current,name:o,value:l,checked:i,required:c,disabled:t,form:u,style:{transform:"translateX(-100%)"}})]})});qe.displayName=De;var et="RadioIndicator",tt=a.forwardRef((r,s)=>{const{__scopeRadio:n,forceMount:o,...i}=r,c=yr(et,n);return e.jsx(Qe,{present:o||c.checked,children:e.jsx(Z.span,{"data-state":st(c.checked),"data-disabled":c.disabled?"":void 0,...i,ref:s})})});tt.displayName=et;var Cr="RadioBubbleInput",rt=a.forwardRef(({__scopeRadio:r,control:s,checked:n,bubbles:o=!0,...i},c)=>{const t=a.useRef(null),l=H(t,c),f=wr(n),u=gr(s);return a.useEffect(()=>{const m=t.current;if(!m)return;const b=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(b,"checked").set;if(f!==n&&p){const v=new Event("click",{bubbles:o});p.call(m,n),m.dispatchEvent(v)}},[f,n,o]),e.jsx(Z.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:l,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});rt.displayName=Cr;function st(r){return r?"checked":"unchecked"}var Sr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ve="RadioGroup",[Rr,Rs]=we(ve,[We,Ze]),nt=We(),ot=Ze(),[Ar,Ir]=Rr(ve),at=a.forwardRef((r,s)=>{const{__scopeRadioGroup:n,name:o,defaultValue:i,value:c,required:t=!1,disabled:l=!1,orientation:f,dir:u,loop:m=!0,onValueChange:b,...g}=r,p=nt(n),v=Be(u),[w,x]=Ye({prop:c,defaultProp:i??null,onChange:b,caller:ve});return e.jsx(Ar,{scope:n,name:o,required:t,disabled:l,value:w,onValueChange:x,children:e.jsx(br,{asChild:!0,...p,orientation:f,dir:v,loop:m,children:e.jsx(Z.div,{role:"radiogroup","aria-required":t,"aria-orientation":f,"data-disabled":l?"":void 0,dir:v,...g,ref:s})})})});at.displayName=ve;var it="RadioGroupItem",ct=a.forwardRef((r,s)=>{const{__scopeRadioGroup:n,disabled:o,...i}=r,c=Ir(it,n),t=c.disabled||o,l=nt(n),f=ot(n),u=a.useRef(null),m=H(s,u),b=c.value===i.value,g=a.useRef(!1);return a.useEffect(()=>{const p=w=>{Sr.includes(w.key)&&(g.current=!0)},v=()=>g.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",v)}},[]),e.jsx(hr,{asChild:!0,...l,focusable:!t,active:b,children:e.jsx(qe,{disabled:t,required:c.required,checked:b,...f,...i,name:c.name,ref:m,onCheck:()=>c.onValueChange(i.value),onKeyDown:G(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:G(i.onFocus,()=>{var p;g.current&&((p=u.current)==null||p.click())})})})});ct.displayName=it;var zr="RadioGroupIndicator",dt=a.forwardRef((r,s)=>{const{__scopeRadioGroup:n,...o}=r,i=ot(n);return e.jsx(tt,{...i,...o,ref:s})});dt.displayName=zr;var lt=at,ut=ct,Dr=dt;const mt=a.forwardRef(({className:r,...s},n)=>e.jsx(lt,{className:Ge("grid gap-2",r),...s,ref:n}));mt.displayName=lt.displayName;const oe=a.forwardRef(({className:r,...s},n)=>e.jsx(ut,{ref:n,className:Ge("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...s,children:e.jsx(Dr,{className:"flex items-center justify-center",children:e.jsx(Vt,{className:"h-2.5 w-2.5 fill-current text-current"})})}));oe.displayName=ut.displayName;X.extend(Tt);const Tr=[{title:"Dashboard",href:"/dashboard"},{title:"Defense Requirements",href:"/defense-requirements"}];function As(){const{props:r}=Nt(),{defenseRequirements:s=[],defenseRequest:n,acceptDefense:o=!0}=r,[i,c]=a.useState(!o),[t,l]=a.useState(n||null),[f,u]=a.useState(X().format("h:mm A")),[m,b]=a.useState(!1),p=!!t&&!new Set(["cancelled","adviser-rejected","coordinator-rejected","completed"]).has((t.workflow_state||"").toLowerCase()),[v,w]=a.useState(!1),[x,S]=a.useState(!1),[P,j]=a.useState(!1),[C,L]=a.useState(""),[O,W]=a.useState(""),[T,je]=a.useState(null),[ce,J]=a.useState(!1),[Ne,ke]=a.useState(null),_e=["submitted","adviser-approved","coordinator-approved","panels-assigned","scheduled","completed"];function de(d){if(!d)return null;const h=d.toLowerCase();return h==="submitted"||h==="adviser-review"?"submitted":h==="adviser-approved"||h==="coordinator-review"?"adviser-approved":h==="coordinator-approved"?"coordinator-approved":h==="panels-assigned"||h==="panel-assigned"?"panels-assigned":h==="scheduled"?"scheduled":h==="completed"?"completed":null}function U(d){if(!d)return 0;if(d.panels_assigned_at&&!["panels-assigned","scheduled","completed"].includes(d.workflow_state||""))return _e.indexOf("panels-assigned");const h=de(d.workflow_state);return h?_e.indexOf(h):0}a.useEffect(()=>{if(!t)return;const d=setInterval(async()=>{try{const h=await fetch(`/api/defense-request/${t.id}`);if(h.ok){const N=await h.json();if(N.workflow_state!==t.workflow_state&&(l(N),u(X().format("h:mm A")),console.log("Defense request status updated:",N.workflow_state)),["adviser-rejected","coordinator-rejected"].includes(N.workflow_state)){const k=s.map(_=>_.thesis_title===N.thesis_title?{..._,status:"Rejected"}:_)}}}catch(h){console.error("Failed to poll defense request updates:",h)}},1e4);return()=>clearInterval(d)},[t==null?void 0:t.id,t==null?void 0:t.workflow_state]);function ft(){S(!0)}function Te(d,h){var k,_,z;if(!h)return((k=d.status)==null?void 0:k.toLowerCase())==="pending";const N=["pending","submitted","adviser-review"];return((_=d.status)==null?void 0:_.toLowerCase())==="cancelled"||h.thesis_title===d.thesis_title&&h.workflow_state==="cancelled"?!1:((z=d.status)==null?void 0:z.toLowerCase())==="pending"||h.thesis_title===d.thesis_title&&N.includes(h.workflow_state)}function pt(d){const h=(d.workflow_state||"").toLowerCase();if((!t||t.thesis_title!==d.thesis_title)&&h==="completed")return{progress:100,title:"Defense Completed",description:"ðŸŽ“ Congratulations! Your defense has been completed successfully.",color:"text-green-600",icon:e.jsx(Q,{className:"h-4 w-4 text-green-600"}),bg:"bg-green-50",progressColor:"bg-green-500"};if((!t||t.thesis_title!==d.thesis_title)&&h==="scheduled")return{progress:100,title:"Defense Scheduled",description:"Your defense has been scheduled. Prepare your presentation.",color:"text-green-600",icon:e.jsx(re,{className:"h-4 w-4 text-green-600"}),bg:"bg-green-50",progressColor:"bg-green-500"};if((!t||t.thesis_title!==d.thesis_title)&&["adviser-rejected","coordinator-rejected"].includes(h))return{progress:100,title:h==="adviser-rejected"?"Rejected by Adviser":"Rejected by Coordinator",description:"This defense request was rejected. You may submit a new one after addressing feedback.",color:"text-red-600",icon:e.jsx($,{className:"h-4 w-4 text-red-600"}),bg:"bg-red-50",progressColor:"bg-red-500"};let N=0,k="Submitted",_="Your defense requirements have been submitted and are awaiting review.",z="text-muted-foreground",E=e.jsx(se,{className:"h-4 w-4 opacity-60"}),M="bg-secondary",D="bg-blue-500";if(t&&t.thesis_title===d.thesis_title&&t.school_id===r.auth.user.school_id){const q=t.workflow_state;switch(q){case"submitted":case"adviser-review":N=20,k="Under Adviser Review",_="Your defense requirements are currently being <b>reviewed by your Adviser</b>. You will be notified once the review is complete.",z="text-blue-600",E=e.jsx(Le,{className:"h-4 w-4 text-blue-600"}),M="bg-blue-50",D="bg-blue-500";break;case"adviser-approved":case"coordinator-review":N=50,k="Approved by Adviser - Under Coordinator Review",_="Great! Your adviser has <b>approved</b> your defense requirements. The request is now being <b>reviewed by the Coordinator</b> for final approval and scheduling.",z="text-orange-600",E=e.jsx(K,{className:"h-4 w-4 text-orange-600"}),M="bg-orange-50",D="bg-orange-500";break;case"coordinator-approved":N=75,k="Approved - Panel Assignment in Progress",_="Excellent! Your defense request has been <b>approved by the Coordinator</b>. Defense panel members are currently being assigned.",z="text-green-600",E=e.jsx(ne,{className:"h-4 w-4 text-green-600"}),M="bg-green-50",D="bg-green-500";break;case"scheduled":N=100,k="Defense Scheduled";const le=t.defense_chairperson||"Chairperson not assigned",ue=[t.defense_panelist1,t.defense_panelist2,t.defense_panelist3,t.defense_panelist4].filter(Boolean),Y=ue.length?ue.map((B,R)=>`<br/>â€¢ <b>${B}</b> (Panelist ${R+1})`).join(""):"<br/>â€¢ Panel members not yet assigned.";let ee="";t.scheduled_date&&t.formatted_time_range?ee=`<br/><br/><div class="mt-3 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                            <h4 class="font-semibold text-blue-800 mb-2">ðŸ“… Defense Schedule</h4>
                            <p><b>Date:</b> ${X(t.scheduled_date).format("MMMM D, YYYY")}</p>
                            <p><b>Time:</b> ${t.formatted_time_range}</p>
                            ${t.defense_venue?`<p><b>Venue:</b> ${t.defense_venue}</p>`:""}
                            ${t.defense_mode?`<p><b>Mode:</b> ${t.defense_mode}</p>`:""}
                        </div>`:t.date_of_defense&&(ee=`<br/><br/><div class="mt-3 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                            <h4 class="font-semibold text-blue-800 mb-2">ðŸ“… Defense Schedule</h4>
                            <p><b>Date:</b> ${X(t.date_of_defense).format("MMMM D, YYYY")}</p>
                            <p><em>Time and venue details will be announced soon.</em></p>
                        </div>`),_=`ðŸŽ‰ <b>Congratulations!</b> Your defense has been fully scheduled and approved. 
                        <br/><br/><h4 class="font-semibold text-green-800 mb-2">ðŸ‘¥ Defense Panel</h4>
                        â€¢ <b>${le}</b> (Chairperson)${Y}${ee}
                        <br/><br/><p class="text-sm text-gray-600 mt-3">ðŸ’¡ <b>Next Steps:</b> Prepare your defense presentation and materials. You will receive email notifications with additional details.</p>`,z="text-green-600",E=e.jsx(re,{className:"h-4 w-4 text-green-600"}),M="bg-green-50",D="bg-green-500";break;case"adviser-rejected":N=100,k="Rejected by Adviser",_=`Your defense request has been <b>rejected by your Adviser</b>. 
                        ${t.adviser_comments?`<br/><br/><b>Feedback:</b> "${t.adviser_comments}"`:""}
                        <br/><br/>Please address the feedback and submit a new set of requirements if needed.`,z="text-red-600",E=e.jsx($,{className:"h-4 w-4 text-red-600"}),M="bg-red-50",D="bg-red-500";break;case"coordinator-rejected":N=100,k="Rejected by Coordinator",_=`Your defense request has been <b>rejected by the Coordinator</b>. 
                        ${t.coordinator_comments?`<br/><br/><b>Feedback:</b> "${t.coordinator_comments}"`:""}
                        <br/><br/>Please address the feedback and resubmit if allowed.`,z="text-red-600",E=e.jsx($,{className:"h-4 w-4 text-red-600"}),M="bg-red-50",D="bg-red-500";break;case"completed":N=100,k="Defense Completed",_="ðŸŽ“ Congratulations! Your defense has been completed successfully.",z="text-green-600",E=e.jsx(Q,{className:"h-4 w-4 text-green-600"}),M="bg-green-50",D="bg-green-500";break;default:N=10,k="Processing",_="Your defense request is being processed. Current status: "+(t.workflow_state_display||q),z="text-gray-600",E=e.jsx(se,{className:"h-4 w-4 text-gray-600"}),M="bg-gray-50",D="bg-gray-500";break}}return{progress:N,title:k,description:_,color:z,icon:E,bg:M,progressColor:D}}return e.jsxs(_t,{breadcrumbs:Tr,children:[e.jsx(kt,{title:"Defense Requirements"}),m?e.jsxs("div",{className:"w-full min-h-[70vh] bg-zinc-100 dark:bg-zinc-900 flex flex-col gap-4 p-0 m-0",children:[e.jsx(be,{className:"h-6 w-1/6 rounded bg-zinc-300 dark:bg-zinc-800 mt-8 mx-8"}),e.jsx(be,{className:"h-12 w-3/4 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(be,{className:"h-12 w-2/3 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(be,{className:"h-[500px] w-full rounded bg-zinc-300 dark:bg-zinc-800 mt-4"})]}):e.jsxs("div",{className:"flex flex-col px-7 pt-5 pb-5 w-full",children:[!o&&i&&e.jsxs(Ut,{className:"bg-yellow-50 dark:bg-yellow-950 border-yellow-200 dark:border-yellow-900 text-yellow-900 dark:text-yellow-100 flex items-start gap-3 px-6 py-5 rounded-xl mb-4 relative",children:[e.jsx(Fe,{className:"h-5 w-5 text-yellow-500 dark:text-yellow-400 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx($t,{className:"font-semibold mb-1",children:"Defense Requirement Submissions Closed"}),e.jsx(Gt,{children:"The defense requirement submission period is currently closed. Please contact your coordinator for more information."})]}),e.jsx("button",{type:"button",className:"absolute top-2 right-2 text-yellow-900 dark:text-yellow-100 hover:text-yellow-700 dark:hover:text-yellow-300 rounded p-1","aria-label":"Close",onClick:()=>c(!1),children:e.jsx($,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"w-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between w-full p-3 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-full bg-rose-500/10 dark:bg-rose-500/20 border border-rose-500 dark:border-rose-700",children:e.jsx(Q,{className:"h-5 w-5 text-rose-400 dark:text-rose-300"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold dark:text-white",children:"Defense Requirements"}),e.jsx("p",{className:"block text-xs text-muted-foreground dark:text-zinc-400",children:"This sections shows all your submitted defense requirements and their current status."})]})]}),e.jsx(xe,{className:"bg-rose-500 text-sm px-5 rounded-md dark:bg-rose-600 disabled:opacity-60",onClick:()=>w(!0),disabled:p||!o,title:o?p?"You already have an active defense workflow. Finish (or reach a terminal state) before submitting another.":"Submit new defense requirements":"Defense requirement submissions are currently closed.",children:"Submit requirements"}),e.jsx(Pt,{open:v,onOpenChange:w,onFinish:ft,acceptDefense:o})]}),s.length===0?e.jsx("div",{className:"p-6 text-center text-sm text-muted-foreground dark:text-zinc-400",children:"No defense requirements submitted yet."}):[...s].sort((d,h)=>{const N=d.created_at?new Date(d.created_at).getTime():0;return(h.created_at?new Date(h.created_at).getTime():0)-N}).map(d=>{var Pe;pt(d);const h=Ne===d.id,N=d.created_at?X(d.created_at).fromNow():"Unknown",k=[{key:"submitted",label:"Submitted",icon:e.jsx(se,{className:"w-4 h-4"})},{key:"adviser-approved",label:"Adviser Approved",icon:e.jsx(K,{className:"w-4 h-4"})},{key:"coordinator-approved",label:"Coordinator Approved",icon:e.jsx(K,{className:"w-4 h-4"})},{key:"panels-assigned",label:"Panels Assigned",icon:e.jsx(ne,{className:"w-4 h-4"})},{key:"scheduled",label:"Scheduled",icon:e.jsx(re,{className:"w-4 h-4"})},{key:"completed",label:"Completed",icon:e.jsx(Q,{className:"w-4 h-4"})}],_=t&&t.thesis_title===d.thesis_title?t:d.workflow_state?{workflow_state:d.workflow_state}:t,z=U(_),E=t==null?void 0:t.workflow_state,M=t?de(E):null,D=!!t&&t.thesis_title===d.thesis_title&&["adviser-rejected","coordinator-rejected"].includes(t.workflow_state||""),q=D&&(t==null?void 0:t.workflow_state)==="coordinator-rejected",le=D&&(t==null?void 0:t.workflow_state)==="adviser-rejected";q?t==null||t.coordinator_comments:le&&(t==null||t.adviser_comments);const ue=q?"Rejected by Coordinator":le?"Rejected by Adviser":"Rejected",Y=((Pe=d.status)==null?void 0:Pe.toLowerCase())==="cancelled"||t&&t.thesis_title===d.thesis_title&&t.workflow_state==="cancelled",ee=(d.workflow_state||"").toLowerCase(),B=t&&t.thesis_title===d.thesis_title&&t.workflow_state==="completed"||ee==="completed";let R=0,A="Submitted",I=e.jsx(se,{className:"h-4 w-4 opacity-60 dark:text-zinc-400"});const xt=t&&t.thesis_title===d.thesis_title&&t.school_id===r.auth.user.school_id,ye=(d.workflow_state||"").toLowerCase();if(!xt&&ye)switch(ye){case"completed":R=k.length-1,A="Defense Completed",I=e.jsx(Q,{className:"h-4 w-4 text-green-600"});break;case"scheduled":R=k.findIndex(y=>y.key==="scheduled"),A="Defense Scheduled",I=e.jsx(re,{className:"h-4 w-4 text-green-600"});break;case"panels-assigned":R=k.findIndex(y=>y.key==="panels-assigned"),A="Panels Assigned",I=e.jsx(ne,{className:"h-4 w-4 text-orange-600"});break;case"coordinator-approved":R=k.findIndex(y=>y.key==="coordinator-approved"),A="Coordinator Approved",I=e.jsx(K,{className:"h-4 w-4 text-green-600"});break;case"adviser-approved":R=k.findIndex(y=>y.key==="adviser-approved"),A="Adviser Approved",I=e.jsx(K,{className:"h-4 w-4 text-orange-600"});break;case"adviser-rejected":case"coordinator-rejected":R=0,A=ye==="adviser-rejected"?"Rejected by Adviser":"Rejected by Coordinator",I=e.jsx($,{className:"h-4 w-4 text-red-600"});break}if(Y)R=0,A="Cancelled",I=e.jsx($,{className:"h-4 w-4 text-red-600"});else if(D)R=0,A=ue,I=e.jsx($,{className:"h-4 w-4 text-red-600"});else if(t&&t.thesis_title===d.thesis_title&&t.school_id===r.auth.user.school_id){switch(M){case"submitted":R=0,A="Under Adviser Review",I=e.jsx(Le,{className:"h-4 w-4 text-blue-600"});break;case"adviser-approved":R=1,A="Adviser Approved",I=e.jsx(K,{className:"h-4 w-4 text-orange-600"});break;case"coordinator-approved":R=2,A="Coordinator Approved",I=e.jsx(K,{className:"h-4 w-4 text-green-600"});break;case"panels-assigned":R=3,A="Panels Assigned",I=e.jsx(ne,{className:"h-4 w-4 text-orange-600"});break;case"scheduled":R=4,A="Defense Scheduled",I=e.jsx(re,{className:"h-4 w-4 text-green-600"});break;case"completed":R=5,A="Defense Completed",I=e.jsx(Q,{className:"h-4 w-4 text-green-600"});break;default:R=0,A="Processing",I=e.jsx(se,{className:"h-4 w-4 text-gray-600"})}!Y&&(t!=null&&t.panels_assigned_at)&&R<3&&(R=3,A="Panels Assigned",I=e.jsx(ne,{className:"h-4 w-4 text-orange-600"}))}const bt=!Y&&!D&&!B;return e.jsxs(F.Fragment,{children:[e.jsx("div",{className:"border-b border-zinc-200 dark:border-zinc-800 w-full"}),e.jsxs(It,{open:h,onOpenChange:y=>ke(y?d.id:null),children:[e.jsx(zt,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer bg-white dark:bg-zinc-900 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors",children:[e.jsx(Yt,{className:`transition-transform duration-200 h-4 w-4 text-muted-foreground dark:text-zinc-400 mr-3 ${h?"rotate-180":""}`}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[Y||D?e.jsx($,{className:"h-4 w-4 text-red-600"}):B?e.jsx(K,{className:"h-4 w-4 text-green-600"}):F.cloneElement(I,{className:"h-4 w-4 text-muted-foreground dark:text-zinc-300"}),e.jsx("span",{className:`font-semibold text-xs ${Y||D?"text-red-600":B?"text-green-600":"text-muted-foreground dark:text-zinc-300"}`,children:A})]}),e.jsx("div",{className:"flex items-center w-64 justify-end",children:bt?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"flex items-center gap-0",children:k.map((y,V)=>{const te=V<=z?"bg-rose-500 text-white border-rose-500 dark:bg-rose-600 dark:border-rose-700":"bg-zinc-100 text-zinc-400 border-zinc-200 dark:bg-zinc-800 dark:text-zinc-500 dark:border-zinc-700";return e.jsxs(F.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:`rounded-full p-1 border ${te}`,children:y.icon})}),V<k.length-1&&e.jsx("div",{className:`h-1 w-6 ${V<z?"bg-rose-500 dark:bg-rose-700":"bg-zinc-200 dark:bg-zinc-700"}`})]},y.key)})})]}):e.jsx("div",{className:"flex items-center justify-center",children:B?e.jsx("div",{className:"rounded-full p-2 border bg-green-500 text-white border-green-500",children:e.jsx(Bt,{className:"w-4 h-4"})}):e.jsx("div",{className:"rounded-full p-2 border bg-red-500 text-white border-red-500",children:e.jsx($,{className:"w-4 h-4"})})})})]})}),e.jsx(Dt,{children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"mb-3 p-3 rounded border bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 flex flex-col gap-2 rounded-md relative",children:[e.jsxs("div",{className:"flex flex-row gap-6 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-xs text-zinc-500 dark:text-zinc-400",children:"Thesis Title:"}),e.jsx("div",{className:"text-sm font-medium text-zinc-800 dark:text-white",children:d.thesis_title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-xs text-zinc-500 dark:text-zinc-400",children:"Student Name:"}),e.jsxs("div",{className:"text-sm text-zinc-800 dark:text-white",children:[d.first_name," ",d.last_name]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-xs text-zinc-500 dark:text-zinc-400",children:"Adviser:"}),e.jsx("div",{className:"text-sm text-zinc-800 dark:text-white",children:t&&t.thesis_title===d.thesis_title&&t.defense_adviser?t.defense_adviser:d.adviser||"â€”"})]})]}),e.jsxs("div",{className:"flex flex-row gap-2 mt-2 flex-wrap",children:[(t==null?void 0:t.manuscript_proposal)&&e.jsxs("a",{href:t.manuscript_proposal,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[e.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:e.jsx(he,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Manuscript"}),e.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:t.manuscript_proposal.split("/").pop()})]})]}),(t==null?void 0:t.similarity_index)&&e.jsxs("a",{href:t.similarity_index,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[e.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:e.jsx(he,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Similarity"}),e.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:t.similarity_index.split("/").pop()})]})]}),(t==null?void 0:t.rec_endorsement)&&e.jsxs("a",{href:t.rec_endorsement,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[e.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:e.jsx(he,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Endorsement"}),e.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:t.rec_endorsement.split("/").pop()})]})]}),(t==null?void 0:t.proof_of_payment)&&e.jsxs("a",{href:t.proof_of_payment,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[e.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:e.jsx(he,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Payment"}),e.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:t.proof_of_payment.split("/").pop()})]})]})]}),t&&t.thesis_title===d.thesis_title&&e.jsxs("div",{className:"mt-2 w-full border border-zinc-200 dark:border-zinc-700 rounded-md p-3 bg-zinc-50 dark:bg-zinc-800/40",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-zinc-600 dark:text-zinc-300 flex items-center gap-1",children:[e.jsx(Fe,{className:"w-3 h-3 text-rose-500"})," Defense Information"]}),e.jsxs("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400",children:["State: ",t.workflow_state]})]}),(()=>{const y=t.workflow_state,V=t.defense_chairperson,me=t.defense_panelist1,te=t.defense_panelist2,Ce=t.defense_panelist3,Se=t.defense_panelist4,Ee=[V,me,te,Ce,Se].some(Boolean),fe=t.scheduled_date?X(t.scheduled_date).format("MMMM D, YYYY"):null,ht=t.formatted_time_range?t.formatted_time_range:t.scheduled_time&&t.scheduled_end_time?`${t.scheduled_time} - ${t.scheduled_end_time}`:null,pe=t.defense_mode||t.mode_defense,Me=t.defense_venue,Oe=t.scheduling_notes,gt=e.jsx("div",{className:"text-[11px] text-zinc-600 dark:text-zinc-400",children:"Awaiting adviser review. No coordinator actions yet."}),wt=e.jsx("div",{className:"text-[11px] text-zinc-600 dark:text-zinc-400",children:"Adviser approved. Awaiting coordinator review / panel assignment."}),vt=e.jsx("div",{className:"text-[11px] text-zinc-600 dark:text-zinc-400",children:"Coordinator approved. Panel assignment pending."}),jt=e.jsx("div",{className:"text-[11px] text-zinc-600 dark:text-zinc-400",children:"Panel assigned. Scheduling in progress."});return["adviser-rejected","coordinator-rejected","cancelled"].includes(y)?e.jsxs("div",{className:"text-[11px] text-red-600",children:["No further defense information (request ",y.replace("-"," "),")."]}):e.jsxs("div",{className:"space-y-3",children:[["panels-assigned","scheduled","completed"].includes(y)&&Ee&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold text-zinc-700 dark:text-zinc-300 mb-1",children:"Committee"}),e.jsxs("ul",{className:"pl-3 list-disc space-y-0.5",children:[V&&e.jsxs("li",{className:"text-[11px] text-zinc-700 dark:text-zinc-300",children:[e.jsx("b",{children:V})," (Chairperson)"]}),me&&e.jsxs("li",{className:"text-[11px] text-zinc-700 dark:text-zinc-300",children:[me," (Panelist 1)"]}),te&&e.jsxs("li",{className:"text-[11px] text-zinc-700 dark:text-zinc-300",children:[te," (Panelist 2)"]}),Ce&&e.jsxs("li",{className:"text-[11px] text-zinc-700 dark:text-zinc-300",children:[Ce," (Panelist 3)"]}),Se&&e.jsxs("li",{className:"text-[11px] text-zinc-700 dark:text-zinc-300",children:[Se," (Panelist 4)"]})]})]}),["scheduled","completed"].includes(y)&&e.jsxs("div",{className:"rounded-md border border-blue-200 dark:border-blue-600/40 bg-blue-50 dark:bg-blue-900/20 p-2.5",children:[e.jsx("div",{className:"text-[11px] font-semibold text-blue-700 dark:text-blue-300 mb-1",children:"Schedule"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:[e.jsx("b",{children:"Date:"})," ",fe||"TBD"]}),e.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:[e.jsx("b",{children:"Time:"})," ",ht||"TBD"]}),pe&&e.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:[e.jsx("b",{children:"Mode:"})," ",pe]}),Me&&e.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:[e.jsx("b",{children:"Venue:"})," ",Me]}),Oe&&e.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:[e.jsx("b",{children:"Notes:"})," ",Oe]})]})]}),["submitted","adviser-review"].includes(y)&&gt,["adviser-approved","coordinator-review"].includes(y)&&wt,y==="coordinator-approved"&&!Ee&&vt,y==="panels-assigned"&&!fe&&jt,e.jsxs("div",{className:"pt-1 border-t border-dashed border-zinc-200 dark:border-zinc-700 mt-2 text-[10px] text-muted-foreground dark:text-zinc-500",children:["Last workflow state: ",y,fe&&` â€¢ Scheduled for ${fe}`,pe&&` â€¢ Mode: ${pe}`]})]})})()]}),e.jsxs("div",{className:"absolute right-3 top-2 flex items-center gap-2",children:[e.jsxs("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 whitespace-nowrap",children:["Submitted ",N]}),e.jsxs(Et,{children:[e.jsx(Mt,{asChild:!0,children:e.jsx(xe,{variant:"outline",size:"icon",className:"h-6 w-6 p-0",disabled:!!Y,children:e.jsx(Kt,{className:"h-4 w-4"})})}),e.jsxs(Ot,{align:"end",children:[e.jsx(Re,{disabled:!Te(d,t),onSelect:y=>{y.preventDefault(),Te(d,t)&&(je(d.id),L(""),W(""),j(!0))},children:"Unsubmit"}),e.jsx(Re,{children:"View Details"}),e.jsx(Re,{children:"Download"})]})]})]})]})})})]})]},d.id)})]}),e.jsx(yt,{open:P,onOpenChange:j,children:e.jsxs(Ct,{children:[e.jsxs(St,{children:[e.jsx(Rt,{children:"Are you sure?"}),e.jsx(At,{children:"Please select a reason for unsubmission."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(mt,{value:C,onValueChange:L,children:[e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(oe,{value:"mistake",id:"reason-mistake"}),e.jsx("label",{htmlFor:"reason-mistake",className:"text-sm",children:"I made a mistake in filling up the forms"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(oe,{value:"cancel",id:"reason-cancel"}),e.jsx("label",{htmlFor:"reason-cancel",className:"text-sm",children:"I'd like to just cancel the submission"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(oe,{value:"outdated",id:"reason-outdated"}),e.jsx("label",{htmlFor:"reason-outdated",className:"text-sm",children:"The submission was outdated"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(oe,{value:"other",id:"reason-other"}),e.jsx("label",{htmlFor:"reason-other",className:"text-sm",children:"Other..."})]})]}),C==="other"&&e.jsx(Lt,{placeholder:"Enter your reason",value:O,onChange:d=>W(d.target.value),className:"text-sm"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(xe,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(xe,{disabled:ce||!C||C==="other"&&!O,onClick:async()=>{var d,h;J(!0);try{const N=((d=window.Laravel)==null?void 0:d.csrfToken)||((h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content")),k=await fetch(`/defense-requirements/${T}/unsubmit`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":N||""},body:JSON.stringify({reason:C==="other"?O:C,_token:N||""})});if(k.ok)j(!1),window.location.reload();else{let _={};try{_=await k.json()}catch{}alert(typeof _=="object"&&_!==null&&"message"in _?_.message:"Failed to unsubmit. You can only unsubmit requirements that are still pending or under adviser review.")}}catch{alert("Network error. Please try again.")}finally{J(!1)}},children:"Submit"})]})]})]})})]})]})}export{As as default};
