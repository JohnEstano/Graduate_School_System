import{K as v,r,j as e}from"./app-c5ij2Uy8.js";import w from"./reminders-widget-BdkcxMQ_.js";import D from"./upcomming-schedules-widget-DluQHeRx.js";import S from"./defense-status-widget-BLshFfOc.js";import N from"./weekly-defense-schedule-widget-FcVgnzbC.js";import R from"./quick-actions-widget-CIWsSLl7.js";import q from"./exam-eligibility-widget-Cqck4_k8.js";import{S as k,M as E}from"./sun-C9b2snPL.js";import"./graduation-cap-tQeZTHqc.js";import"./createLucideIcon-QXbACLHs.js";import"./chevron-right-Ck80R1L5.js";import"./hourglass-DW1qvNOb.js";import"./x-b-iKzdpp.js";import"./check--NhZ1PHA.js";import"./calendar-2wm08bbg.js";import"./users-pq8v5pDb.js";import"./skeleton-CGx7kAgr.js";import"./utils-jAU0Cazi.js";import"./format-C3S3_MiX.js";import"./isSameDay-BpBRZswP.js";import"./parseISO-Dx9MyA3S.js";import"./tooltip-83sBEdgp.js";import"./index-DQWsGEEw.js";import"./index-C6aQ0K-7.js";import"./floating-ui.react-dom-Dei2gU0X.js";import"./receipt-Cb46pmdQ.js";import"./settings-DxBpoil_.js";function W(){return new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function _(){const o=new Date().getHours();return o>=6&&o<18}function xe(){const o=v().props,{auth:{user:t},defenseRequirement:z,defenseRequest:A}=o,i=o.defenseRequests??[],[m,x]=r.useState([]),[T,F]=r.useState([]),[f,H]=r.useState([]),[d,p]=r.useState(!0),[u,g]=r.useState(new Date().getDay()),h=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];r.useEffect(()=>{const j=s=>{let a=s.filter(n=>{const l=n.submitted_by;return l===(t==null?void 0:t.id)||l===String(t==null?void 0:t.id)});a.length===0&&(a=s);const c=[...a].sort((n,l)=>{const b=n.created_at?new Date(n.created_at).getTime():0;return(l.created_at?new Date(l.created_at).getTime():0)-b});x(c)};(async()=>{p(!0);try{const s=await fetch("/defense-request",{headers:{Accept:"application/json"}});if(!s.ok)throw new Error("bad");const a=await s.json(),c=Array.isArray(a)?a:a.defenseRequests??[];j(c)}catch(s){console.error("fetch defense requests failed",s),x([])}finally{p(!1)}})()},[t==null?void 0:t.id]);const y=i&&i.length>0?i:m;return e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-auto rounded-xl pt-5",children:[e.jsxs("div",{className:"mb-4 mt-3 flex flex-row justify-between items-center relative overflow-hidden",style:{minHeight:"120px"},children:[e.jsxs("div",{className:"flex flex-col pr-8 pl-7",children:[e.jsxs("span",{className:"flex items-center text-xs font-semibold text-gray-700 dark:text-gray-200 mb-1 relative z-10",children:[_()?e.jsx(k,{className:"mr-1 size-4 text-yellow-500"}):e.jsx(E,{className:"mr-1 size-4 text-blue-500"}),W()]}),e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white relative z-10",children:["Hi, ",t==null?void 0:t.name,"!"]}),e.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 relative z-10",children:[(t==null?void 0:t.role)??"Student",(t==null?void 0:t.school_id)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-1",children:"/"}),e.jsx("span",{className:"text-rose-500 font-bold",children:t.school_id})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-px mx-4 bg-gray-300 dark:bg-gray-700 opacity-60"}),e.jsx(R,{})]})]}),e.jsxs("div",{className:"flex flex-col gap-6 bg-gray-100 ms-4 me-4 rounded-xl mt-2  px-5 py-8",children:[e.jsxs("div",{className:"w-full mb-2 flex flex-col md:flex-row gap-4",children:[e.jsx(S,{recentRequests:m,loading:d}),e.jsx(N,{weekDays:h,selectedDay:u,setSelectedDay:g,approvedDefenses:y,referenceDate:new Date,loading:d,studentId:t==null?void 0:t.id})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(w,{}),e.jsx(D,{loading:d,todayEvents:f}),e.jsx(q,{})]})]})]})}export{xe as default};
