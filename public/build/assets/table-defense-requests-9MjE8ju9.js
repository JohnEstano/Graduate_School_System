import{j as e,S as L}from"./app-BFhJ_rhz.js";import{B as j}from"./button-CKae6SRa.js";import{T,a as H,b as g,c as d,d as q,e as i}from"./table-qP7NH3UJ.js";import{C as y}from"./checkbox-MXmJcexu.js";import{B as k}from"./badge-WiooCdVb.js";import{D as U,a as I,b as E,c as u}from"./dropdown-menu-ClRvripl.js";import{c as F,T as R,a as X,b as O}from"./tooltip-I1_k_sJu.js";import{c as M}from"./createLucideIcon-KZz7-iiu.js";import{C as G}from"./chevrons-up-down-COq0GsTe.js";import{F as J}from"./file-text-DZ3MZZ0V.js";import{f as K}from"./formatDistanceToNowStrict-CG62KDbP.js";import{C}from"./circle-check-big-B-7ETsgn.js";import{C as Q}from"./circle-x-DEwAB-7S.js";import{C as V}from"./circle-arrow-left-DDPgs7Aa.js";import{C as W}from"./check-C9G5qvCx.js";import{X as Y}from"./x-CnUa_NpO.js";import{C as Z}from"./circle-alert-D1cIR00J.js";import{f as ee}from"./format-HX8DKPSU.js";import"./index-XUnuFccv.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";import"./index-DECR1Bfi.js";import"./index-BxKqTWPD.js";import"./index-Cts8AH-1.js";import"./index-C9pixpqP.js";import"./index-D4LukQ_D.js";import"./index-Bdmt_zOQ.js";import"./index-C_D7lUP4.js";import"./floating-ui.react-dom-cBbMY6yK.js";import"./index-D0wd6wGz.js";import"./constructNow-Chb2L4Vx.js";import"./en-US-BA9orzCf.js";import"./getRoundingMethod-Btu-7J5l.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],se=M("ArrowDown",te);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ae=M("ArrowUp",re);function qe({paged:N,columns:s,selected:D,toggleSelectOne:z,headerChecked:P,toggleSelectAll:A,toggleSort:S,sortDir:x,onPriorityChange:m,tabType:a,onViewDetails:b,onRowApprove:w,onRowReject:v,onRowRetrieve:_,highlightMissingDateMode:$,hideActions:h,hideSelect:f}){function B(t){const c=Array.isArray(t.panelists)&&t.panelists.filter(o=>typeof o=="string"&&o.trim().length>0).length>0,p=!!(t.date_of_defense||t.scheduled_date);let n,l;c&&p?(n=e.jsx(C,{size:18}),l="bg-green-500"):(n=e.jsx(Z,{size:18}),l="bg-red-500");const r=[{label:"Approved",checked:!0},{label:"Assigned panelists",checked:c},{label:"Scheduled date",checked:p}];return e.jsx(F,{children:e.jsxs(R,{children:[e.jsx(X,{asChild:!0,children:e.jsx("span",{className:`inline-flex items-center justify-center rounded-full ${l} text-white h-7 w-7 cursor-pointer`,children:n})}),e.jsx(O,{side:"right",className:"bg-white text-black border border-border shadow-lg p-2 min-w-[160px]",children:e.jsx("div",{className:"flex flex-col gap-1",children:r.map(o=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:`inline-flex items-center justify-center rounded-full ${o.checked?"bg-green-500":"bg-red-500"} text-white w-4 h-4`,children:o.checked?e.jsx(W,{size:12}):e.jsx(Y,{size:12})}),e.jsx("span",{children:o.label})]},o.label))})})]})})}return e.jsx("div",{className:"relative w-full",children:e.jsx("div",{className:"overflow-x-auto w-full rounded-md border border-border bg-background",children:e.jsxs(T,{className:"w-full text-sm table-auto",children:[e.jsx(H,{children:e.jsxs(g,{children:[a==="approved"&&e.jsx(d,{className:"w-[48px] text-center",children:"Status"}),!f&&e.jsx(d,{className:"w-[40px] py-2",children:e.jsx(y,{checked:P,onCheckedChange:A})}),s.title&&e.jsx(d,{className:"px-2",children:"Title"}),s.presenter&&e.jsx(d,{className:"px-2",children:"Presenter"}),a!=="approved"&&s.adviser&&e.jsx(d,{className:"px-2",children:"Adviser"}),a!=="approved"&&s.program&&e.jsx(d,{className:"px-2",children:"Program"}),a!=="approved"&&s.submitted_at&&e.jsx(d,{className:"px-2",children:"Submitted"}),a==="approved"&&s.date&&e.jsx(d,{className:"text-center cursor-pointer px-1 py-2",onClick:S,children:e.jsxs("div",{className:"flex justify-center items-center gap-1",children:[e.jsx("span",{children:"Date"}),x==="asc"&&e.jsx(ae,{size:12}),x==="desc"&&e.jsx(se,{size:12}),!x&&e.jsx(G,{size:12,className:"opacity-60"})]})}),a==="approved"&&s.mode&&e.jsx(d,{className:"text-center px-1 py-2",children:"Mode"}),s.type&&e.jsx(d,{className:"text-center px-1 py-2",children:"Type"}),s.priority&&e.jsx(d,{className:"text-center px-1 py-2",children:"Priority"}),!h&&e.jsx(d,{className:"text-center px-1 py-2",children:"Actions"})]})}),e.jsxs(q,{children:[N.slice().sort((t,c)=>{const p=t.date_of_defense||t.scheduled_date,n=c.date_of_defense||c.scheduled_date,l=p?new Date(p).getTime():0;return(n?new Date(n).getTime():0)-l}).map(t=>{var l;const c=D.includes(t.id),p=$&&a==="approved"&&(!t.date_of_defense&&!t.scheduled_date||!(t.mode_defense||t.defense_mode)),n=r=>{const o=r.target.tagName;o==="BUTTON"||o==="INPUT"||o==="SELECT"||r.target.closest(".action-btn")||r.target.closest(".priority-dropdown")||(b?b(t.id):L.visit(`/coordinator/defense-requests/${t.id}/details`))};return e.jsxs(g,{className:`hover:bg-muted/40 ${p?"bg-yellow-50 dark:bg-yellow-900/20":""} cursor-pointer`,onClick:n,children:[a==="approved"&&e.jsx(i,{className:"text-center",children:B(t)}),!f&&e.jsx(i,{className:"px-2 py-2",children:e.jsx(y,{checked:c,onCheckedChange:()=>z(t.id),className:"action-btn",onClick:r=>r.stopPropagation()})}),s.title&&e.jsx(i,{className:"px-2 py-2 font-medium truncate leading-tight",title:t.thesis_title,children:e.jsxs("span",{className:"inline-flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center justify-center rounded-md bg-rose-500 text-white h-8 w-8",children:e.jsx(J,{size:20})}),e.jsx("span",{className:"truncate align-middle",children:t.thesis_title})]})}),s.presenter&&e.jsxs(i,{className:"px-2 py-2 text-xs text-muted-foreground whitespace-nowrap",title:`${t.first_name} ${t.middle_name?t.middle_name+" ":""}${t.last_name}`,children:[t.first_name," ",t.middle_name?t.middle_name[0]+". ":"",t.last_name]}),a!=="approved"&&s.adviser&&e.jsx(i,{className:"px-2 py-2 text-xs text-muted-foreground whitespace-nowrap",children:t.adviser||"—"}),a!=="approved"&&s.program&&e.jsx(i,{className:"px-2 py-2 text-xs text-muted-foreground whitespace-nowrap",children:t.program||"—"}),a!=="approved"&&s.submitted_at&&e.jsx(i,{className:"px-2 py-2 text-xs text-muted-foreground whitespace-nowrap",children:t.submitted_at?`${K(new Date(t.submitted_at),{addSuffix:!0})}`:"—"}),a==="approved"&&s.date&&e.jsx(i,{className:"px-1 py-2 text-center whitespace-nowrap",children:(()=>{const r=t.date_of_defense||t.scheduled_date;return r&&!isNaN(new Date(r).getTime())?ee(new Date(r),"MMM dd, yyyy"):e.jsx("span",{className:"text-amber-600 font-semibold",children:"Missing"})})()}),a==="approved"&&s.mode&&e.jsx(i,{className:"px-1 py-2 text-center capitalize",children:t.mode_defense||t.defense_mode?(l=t.mode_defense||t.defense_mode)==null?void 0:l.replace("-"," "):e.jsx("span",{className:"text-amber-600 font-semibold",children:"Missing"})}),s.type&&e.jsx(i,{className:"px-1 py-2 text-center",children:e.jsx(k,{variant:"outline",children:t.defense_type||"—"})}),s.priority&&e.jsx(i,{className:"px-1 py-2 text-center priority-dropdown",children:e.jsxs(U,{children:[e.jsx(I,{asChild:!0,children:e.jsx(k,{className:"cursor-pointer select-none "+(t.priority==="High"?"bg-rose-100 text-rose-700 border-rose-200":t.priority==="Low"?"bg-sky-100 text-sky-700 border-sky-200":"bg-amber-100 text-amber-700 border-amber-200"),variant:"outline",onClick:r=>r.stopPropagation(),children:t.priority})}),e.jsxs(E,{align:"center",onClick:r=>r.stopPropagation(),children:[e.jsx(u,{onClick:()=>m(t.id,"High"),className:t.priority==="High"?"font-bold text-rose-700":"",children:"High"}),e.jsx(u,{onClick:()=>m(t.id,"Medium"),className:t.priority==="Medium"?"font-bold text-amber-700":"",children:"Medium"}),e.jsx(u,{onClick:()=>m(t.id,"Low"),className:t.priority==="Low"?"font-bold text-sky-700":"",children:"Low"})]})]})}),!h&&e.jsx(i,{className:"px-1 py-2",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(j,{size:"lg",variant:"outline",className:"h-8 w-10 p-0 text-green-600 action-btn hover:text-green-600 hover:border-green-200 focus:text-green-600 focus:border-green-200",title:"Approve",onClick:r=>{r.stopPropagation(),w&&w(t.id)},children:e.jsx(C,{className:"h-5 w-5"})}),e.jsx(j,{size:"lg",variant:"outline",className:"h-8 w-10 p-0 text-red-600 action-btn hover:text-red-600 hover:border-red-200 focus:text-red-600 focus:border-red-200",title:"Reject",onClick:r=>{r.stopPropagation(),v&&v(t.id)},children:e.jsx(Q,{className:"h-5 w-5"})})]}),a==="rejected"&&e.jsx(j,{size:"lg",variant:"outline",className:"h-10 w-12 p-0 text-blue-600 action-btn hover:text-blue-600 hover:border-blue-200 focus:text-blue-600 focus:border-blue-200",title:"Retrieve (set back to Pending)",onClick:r=>{r.stopPropagation(),_&&_(t.id)},children:e.jsx(V,{className:"h-5 w-5"})})]})})]},t.id)}),N.length===0&&e.jsx(g,{children:e.jsx(i,{colSpan:(f?0:1)+(s.title?1:0)+(s.presenter?1:0)+(a!=="approved"&&s.adviser?1:0)+(a!=="approved"&&s.submitted_at?1:0)+(a!=="approved"&&s.program?1:0)+(a==="approved"&&s.date?1:0)+(a==="approved"&&s.mode?1:0)+(s.type?1:0)+(s.priority?1:0)+(h?0:1),className:"text-center py-10 text-muted-foreground",children:"No requests found."})})]})]})})})}export{qe as default};
