import{j as e}from"./app-CQngmq00.js";import{G as o}from"./graduation-cap-DHFIPOzN.js";import{C as y}from"./chevron-right-QGs8lTP5.js";import{H as i}from"./hourglass-Ck8E1KPu.js";import{X as d}from"./x-B3RMhnUQ.js";import{C as x}from"./check-BEGkAg7k.js";import{C as N}from"./calendar-Bi5dAEy5.js";import{U as w}from"./users-DZ67WViD.js";import"./createLucideIcon-pjYyoixj.js";const v=new Set(["cancelled","adviser-rejected","coordinator-rejected","completed"]),f={submitted:{label:"Submitted",icon:e.jsx(i,{className:"h-4 w-4 text-gray-500"})},"adviser-review":{label:"Under Adviser Review",icon:e.jsx(i,{className:"h-4 w-4 text-gray-500"})},"adviser-approved":{label:"Approved by Adviser",icon:e.jsx(x,{className:"h-4 w-4 text-gray-500"})},"coordinator-review":{label:"Coordinator Review",icon:e.jsx(i,{className:"h-4 w-4 text-gray-500"})},"coordinator-approved":{label:"Coordinator Approved",icon:e.jsx(x,{className:"h-4 w-4 text-gray-500"})},"panels-assigned":{label:"Panels Assigned",icon:e.jsx(w,{className:"h-4 w-4 text-gray-500"})},scheduled:{label:"Defense Scheduled",icon:e.jsx(N,{className:"h-4 w-4 text-gray-500"})},completed:{label:"Defense Completed",icon:e.jsx(o,{className:"h-4 w-4 text-gray-500"})},"adviser-rejected":{label:"Rejected (Adviser)",icon:e.jsx(d,{className:"h-4 w-4 text-gray-500"})},"coordinator-rejected":{label:"Rejected (Coordinator)",icon:e.jsx(d,{className:"h-4 w-4 text-gray-500"})},cancelled:{label:"Cancelled",icon:e.jsx(d,{className:"h-4 w-4 text-gray-500"})}};function u(r){const s=(r.workflow_state||"").toLowerCase();if(s&&f[s])return f[s];const n=(r.normalized_status||r.status||"").toLowerCase();return n.includes("reject")?{label:"Rejected",icon:e.jsx(d,{className:"h-4 w-4 text-gray-500"})}:n.includes("approve")?{label:"Approved",icon:e.jsx(x,{className:"h-4 w-4 text-gray-500"})}:n==="cancelled"?{label:"Cancelled",icon:e.jsx(d,{className:"h-4 w-4 text-gray-500"})}:{label:"Submitted",icon:e.jsx(i,{className:"h-4 w-4 text-gray-500"})}}const U=({recentRequests:r=[],loading:s=!1,compact:n=!1})=>{var g,b,p,j;const m=[...r].sort((t,l)=>{const c=t.created_at?new Date(t.created_at).getTime():0;return(l.created_at?new Date(l.created_at).getTime():0)-c}),h=m.find(t=>!v.has((t.workflow_state||"").toLowerCase()))||m[0],a=h?[h]:[];if(n){const{label:t,icon:l}=a[0]?u(a[0]):{label:"No Submission",icon:e.jsx(i,{className:"h-4 w-4 text-rose-500"})};return e.jsxs("div",{className:"col-span-1 rounded-xl border border-gray-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 shadow-sm flex flex-col justify-between p-0 min-h-0 h-[92px] transition hover:shadow-md",style:{minWidth:0},children:[e.jsxs("div",{className:"flex items-center justify-between px-5 pt-3 pb-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-200",children:"Defense Status"}),e.jsx("a",{href:"/defense-requirements",className:"font-semibold text-xs text-gray-900 dark:text-white hover:text-rose-500 transition",children:"View More"})]}),e.jsxs("div",{className:"flex items-end justify-between px-5 pb-2 pt-1",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-[1.1rem] font-bold text-gray-900 dark:text-white flex items-center gap-1",children:[l,s?e.jsx("span",{className:"animate-pulse bg-gray-200 dark:bg-zinc-800 rounded w-16 h-5 inline-block"}):e.jsx("span",{children:t})]})}),e.jsx("div",{className:"text-xs italic text-gray-400 dark:text-gray-500 mt-0.5 leading-tight max-w-[140px] truncate",children:(g=a[0])!=null&&g.thesis_title?((b=a[0])==null?void 0:b.thesis_title.length)>22?((p=a[0])==null?void 0:p.thesis_title.slice(0,22))+"â€¦":(j=a[0])==null?void 0:j.thesis_title:"Untitled Thesis"})]}),e.jsx("div",{className:"rounded-full bg-gray-50 dark:bg-zinc-800 p-1.5 flex items-center justify-center",children:e.jsx(o,{className:"size-4 text-rose-500 dark:text-rose-400"})})]})]})}return e.jsxs("div",{className:"flex-1 border-sidebar-border/70 dark:border-sidebar-border rounded-xl border p-5 bg-white dark:bg-zinc-900 flex flex-col min-h-[180px]",children:[e.jsxs("a",{href:"/defense-requirements",className:"group flex items-center justify-between mb-4 focus:outline-none focus:ring-2 focus:ring-rose-400/50 rounded-md",children:[e.jsxs("span",{className:"flex flex-col",children:[e.jsx("span",{className:"text-base md:text-lg font-semibold leading-tight text-gray-800 dark:text-gray-100",children:"Defense Submissions"}),e.jsx("span",{className:"mt-0.5 text-[10px] leading-snug text-gray-500 dark:text-gray-400 font-normal",children:"Showing your most recent active submission status"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"hidden md:inline-block px-2 py-1 rounded-full bg-gray-100 dark:bg-zinc-800 text-[10px] font-medium text-gray-600 dark:text-gray-300",children:[r.length," total"]}),e.jsx("div",{className:"h-12 w-12 rounded-full bg-rose-500 flex items-center justify-center shadow-sm",children:e.jsx(o,{className:"h-7 w-7 text-white"})}),e.jsx(y,{className:"h-6 w-6 text-rose-400 transition-all duration-200 group-hover:text-rose-500 group-hover:translate-x-1"})]})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400 pb-2",children:"Thesis Title"}),e.jsx("th",{className:"text-left text-[11px] font-semibold text-gray-500 dark:text-gray-400 pb-2 w-40",children:"Status"})]})}),e.jsxs("tbody",{children:[s&&e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"py-2",children:e.jsx("div",{className:"h-3 w-48 rounded bg-gray-100 dark:bg-zinc-800"})}),e.jsx("td",{className:"py-2",children:e.jsx("div",{className:"h-3 w-28 rounded bg-gray-100 dark:bg-zinc-800"})})]}),!s&&a.length===0&&e.jsxs("tr",{children:[e.jsx("td",{className:"py-3 italic text-[12px] text-gray-400 dark:text-gray-500",children:"None"}),e.jsxs("td",{className:"py-3 flex items-center gap-1 text-[12px] text-gray-500",children:[e.jsx(i,{className:"h-4 w-4"})," No Submission"]})]}),!s&&a.map(t=>{const{label:l,icon:c}=u(t);return e.jsxs("tr",{onClick:()=>{window.location.href="/defense-requirements"},className:"cursor-pointer border-b last:border-b-0 border-gray-100 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-zinc-800/60 transition",children:[e.jsxs("td",{className:"py-2 pr-3",children:[e.jsx("span",{title:t.thesis_title,className:"text-[12px] font-medium line-clamp-1 text-gray-700 dark:text-gray-200",children:t.thesis_title||e.jsx("span",{className:"italic text-gray-400",children:"Untitled"})}),t.created_at&&e.jsx("div",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-1 text-[12px] font-medium text-gray-600 dark:text-gray-300",children:[c,l]})})]},t.id)})]})]})})]})};export{U as default};
