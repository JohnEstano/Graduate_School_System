import{r as t,j as e,L as w}from"./app-BDkuJsct.js";import{S as N}from"./switch-Bc2d3XcB.js";import{D as k,a as D,d as O,b as L,c as R,e as T}from"./dialog-DeUj0iLU.js";import{B as r}from"./button-DggClj9M.js";import{I as E}from"./input-BmPXXlp0.js";import{t as u}from"./index-By5vkq0G.js";import{A as F}from"./app-layout-Cr_DtTkJ.js";import{S as I}from"./layout-mcRTRgvL.js";import"./index-BhbofC_p.js";import"./index-B_a1aFVM.js";import"./utils-jAU0Cazi.js";import"./index-CWqpdCTP.js";import"./index-D-bfryUZ.js";import"./x-CtfT_1vN.js";import"./createLucideIcon-CEmaZ7tj.js";import"./index-DZZQifJx.js";import"./tooltip-CWM4FSMS.js";import"./floating-ui.react-dom-w0Q93DA2.js";import"./separator-DaKqQg6m.js";import"./index-LRezjsDo.js";import"./chevron-right-BpKiIXqV.js";import"./dropdown-menu-B7sOazTG.js";import"./index-DMsjTEK4.js";import"./index-BdhkuEJx.js";import"./index-BKBXBDOv.js";import"./index-QFmRa-KD.js";import"./check-BUlQxyEc.js";import"./avatar-DpsgA3Kf.js";import"./settings-BITCJcnj.js";import"./users-BTr8E8QO.js";import"./graduation-cap-Cszrlop1.js";import"./file-text-rxgzo2tt.js";import"./dollar-sign-CSALIIUa.js";import"./send-9CEFXyiZ.js";import"./credit-card-CM3Zlvhr.js";import"./tabs-BOuSS6lC.js";import"./badge-BJdX7_A9.js";import"./circle-check-big-CKfkcUFR.js";import"./info-DwFda8kE.js";import"./sun-B3PIUh1_.js";function Se({initialAutoAccept:n,initialAdviserCode:h}){const[x,g]=t.useState(n),[o,f]=t.useState(n),[v,i]=t.useState(!1),[c,d]=t.useState(!1),[j,y]=t.useState(h),[m,l]=t.useState(!1);function A(s){f(s),i(!0)}async function S(){var a;d(!0),i(!1),g(o);const s=(a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content");await fetch("/settings/adviser/auto-accept",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""},body:JSON.stringify({autoAccept:o})}),u.success("Auto-accept setting updated!"),d(!1)}async function C(){var p;l(!0);const s=(p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content"),b=await(await fetch("/settings/adviser/reset-code",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""}})).json();y(b.adviser_code),u.success("Adviser code reset!"),l(!1)}return e.jsxs(F,{breadcrumbs:[{title:"Adviser Settings",href:"/settings/adviser"}],children:[e.jsx(w,{title:"Adviser Settings"}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Adviser Code Management"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Your Adviser Code"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{value:j,disabled:!0,className:"w-40 font-mono"}),e.jsx(r,{onClick:C,disabled:m,variant:"destructive",children:m?"Resetting...":"Reset Code"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Share this code with your students so they can register you as their adviser. If you suspect your code is compromised, reset it here."})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{checked:x,onCheckedChange:A,disabled:c,"aria-label":"Auto-accept students"}),e.jsx("span",{className:"text-base font-medium",children:"Auto-accept students who enter your adviser code"})]}),e.jsx("div",{className:"text-muted-foreground text-sm max-w-lg",children:"When enabled, students who enter your code are automatically linked to you. When disabled, you must manually approve each student."})]}),e.jsx(k,{open:v,onOpenChange:i,children:e.jsxs(D,{children:[e.jsxs(O,{children:[e.jsx(L,{children:o?"Enable Auto-Accept?":"Disable Auto-Accept?"}),e.jsx(R,{children:o?"Students who enter your adviser code will be automatically linked to you.":"You will need to manually approve each student who enters your adviser code."})]}),e.jsxs(T,{children:[e.jsx(r,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(r,{onClick:S,disabled:c,children:"Confirm"})]})]})})]})})]})}export{Se as default};
