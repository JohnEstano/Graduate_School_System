import{r as t,j as e,L as w}from"./app-BubHmeqC.js";import{S as N}from"./switch-B7mWBhyA.js";import{D as k,a as D,e as O,b as L,c as R,f as T}from"./dialog-ywfV6j7b.js";import{B as r}from"./button-CX84Ig4W.js";import{I as E}from"./input-y4wBi6jo.js";import{t as u}from"./index-Bqixm_LI.js";import{A as F}from"./app-layout-yLDvQPzP.js";import{S as I}from"./layout-BSBN1SyW.js";import"./index-PQN_369Y.js";import"./index-CAAZlwhj.js";import"./utils-jAU0Cazi.js";import"./index-Bsel9b7o.js";import"./index-DyQT7xcZ.js";import"./x-DS6n0ElR.js";import"./createLucideIcon-Biu-y2hB.js";import"./index-DZZQifJx.js";import"./tooltip-tJz5bvEu.js";import"./floating-ui.react-dom-DwEbxQiH.js";import"./separator-B1kTuyS6.js";import"./index-1EFpZ92o.js";import"./chevron-right-BRo8ahWW.js";import"./dropdown-menu-BExp8GpF.js";import"./index-6aAr3Pmv.js";import"./index-CVQNv_Nf.js";import"./index-CBu7v5lz.js";import"./index-Zto0mrax.js";import"./check-CZ9c_sEg.js";import"./avatar-DijVPJCE.js";import"./settings-Uvo0cGb6.js";import"./users-wdb3-6X2.js";import"./graduation-cap-B7M__5Eh.js";import"./file-text-B1gFNyH7.js";import"./dollar-sign-DESWnaQ9.js";import"./send-DnHCHsKV.js";import"./credit-card-DhKiqKDR.js";import"./tabs-DVolEiAR.js";import"./badge-Dd_ET0uG.js";import"./circle-check-big-BRigqRsr.js";import"./info-DGWfuZKp.js";import"./sun-BLOPCje7.js";function Se({initialAutoAccept:n,initialAdviserCode:h}){const[x,f]=t.useState(n),[o,g]=t.useState(n),[v,i]=t.useState(!1),[c,d]=t.useState(!1),[j,y]=t.useState(h),[m,l]=t.useState(!1);function A(s){g(s),i(!0)}async function S(){var a;d(!0),i(!1),f(o);const s=(a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content");await fetch("/settings/adviser/auto-accept",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""},body:JSON.stringify({autoAccept:o})}),u.success("Auto-accept setting updated!"),d(!1)}async function C(){var p;l(!0);const s=(p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content"),b=await(await fetch("/settings/adviser/reset-code",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""}})).json();y(b.adviser_code),u.success("Adviser code reset!"),l(!1)}return e.jsxs(F,{breadcrumbs:[{title:"Adviser Settings",href:"/settings/adviser"}],children:[e.jsx(w,{title:"Adviser Settings"}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Adviser Code Management"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Your Adviser Code"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{value:j,disabled:!0,className:"w-40 font-mono"}),e.jsx(r,{onClick:C,disabled:m,variant:"destructive",children:m?"Resetting...":"Reset Code"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Share this code with your students so they can register you as their adviser. If you suspect your code is compromised, reset it here."})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{checked:x,onCheckedChange:A,disabled:c,"aria-label":"Auto-accept students"}),e.jsx("span",{className:"text-base font-medium",children:"Auto-accept students who enter your adviser code"})]}),e.jsx("div",{className:"text-muted-foreground text-sm max-w-lg",children:"When enabled, students who enter your code are automatically linked to you. When disabled, you must manually approve each student."})]}),e.jsx(k,{open:v,onOpenChange:i,children:e.jsxs(D,{children:[e.jsxs(O,{children:[e.jsx(L,{children:o?"Enable Auto-Accept?":"Disable Auto-Accept?"}),e.jsx(R,{children:o?"Students who enter your adviser code will be automatically linked to you.":"You will need to manually approve each student who enters your adviser code."})]}),e.jsxs(T,{children:[e.jsx(r,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(r,{onClick:S,disabled:c,children:"Confirm"})]})]})})]})})]})}export{Se as default};
