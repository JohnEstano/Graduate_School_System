import{K as w,r,j as e,L as k}from"./app-c5ij2Uy8.js";import{A as _}from"./app-layout-CoKXZjt7.js";import{B as n}from"./button-Bw6OnloJ.js";import E from"./display-applications-B9bAzt1r.js";import O from"./compre-exam-form-CDMkdtd6.js";import{D,a as S,b as B,c as M,d as z,e as A}from"./dialog-BwPQxLPS.js";import{B as f}from"./badge-B7RMVcXi.js";import{G as L}from"./graduation-cap-tQeZTHqc.js";import{c as x}from"./createLucideIcon-QXbACLHs.js";import{R as I}from"./refresh-ccw-DKjL0HBN.js";import{I as R}from"./info-DAOKqyYD.js";import"./index-C6aQ0K-7.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";import"./input-CzpjdScL.js";import"./index-DMzRbVW9.js";import"./index-DQWsGEEw.js";import"./index-CQBUWWAm.js";import"./x-b-iKzdpp.js";import"./tooltip-83sBEdgp.js";import"./floating-ui.react-dom-Dei2gU0X.js";import"./separator-D3p5J1Rh.js";import"./index-B09PGLNS.js";import"./chevron-right-Ck80R1L5.js";import"./dropdown-menu-BwXzysW_.js";import"./index-CV-6as2J.js";import"./index-bpbdPemA.js";import"./index-k7YYal9B.js";import"./settings-DxBpoil_.js";import"./chevrons-up-down-D9rV0uwe.js";import"./file-text-DKQ02F9u.js";import"./users-pq8v5pDb.js";import"./credit-card-Dc2ElWmq.js";import"./circle-check-big-REqj7tp6.js";import"./chevron-down-DGQt6VpT.js";import"./hourglass-DW1qvNOb.js";import"./circle-x-CAYAF0N4.js";import"./badge-check-CO5k3EbP.js";import"./formatDistanceToNow-BgE947HP.js";import"./constructNow-bMnG1Fhl.js";import"./format-C3S3_MiX.js";import"./differenceInCalendarMonths-DPjP5_IA.js";import"./endOfDay-BVBcANM3.js";import"./endOfMonth-CYiy1H1z.js";import"./heading-small-biE9tSn4.js";import"./label-BNkzA3Iq.js";import"./Stepper-CGGLkoax.js";import"./calendar-Bx5rz3fW.js";import"./endOfWeek-KFoFvLmK.js";import"./normalizeInterval-vmjBzA5w.js";import"./isSameDay-BpBRZswP.js";import"./isSameMonth-cQo4_rH8.js";import"./chevron-left-bO_x8oOH.js";import"./calendar-2wm08bbg.js";import"./plus-v-Uc79PJ.js";import"./check--NhZ1PHA.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m14 14-4 4",key:"rymu2i"}],["path",{d:"m10 14 4 4",key:"3sz06r"}]],P=x("CalendarX",G);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],F=x("ShieldAlert",$);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],U=x("ShieldCheck",K),V=[{title:"Dashboard",href:"/dashboard"},{title:"Comprehensive Exam",href:"/comprehensive-exam"}],c={examOpen:!0,gradesComplete:!0,documentsComplete:!0,noOutstandingBalance:!0};function He(){var h;const{props:b}=w(),{application:t}=b,[j,p]=r.useState(!1),[s,C]=r.useState({examOpen:null,gradesComplete:null,documentsComplete:null,noOutstandingBalance:null,loading:!0,error:null}),[y,l]=r.useState(!1);async function u(){{const a=typeof window<"u"?new URLSearchParams(window.location.search):null,i=(g,v)=>a!=null&&a.has(g)?a.get(g)==="1":v;C({examOpen:i("open",c.examOpen),gradesComplete:i("grades",c.gradesComplete),documentsComplete:i("docs",c.documentsComplete),noOutstandingBalance:i("bal",c.noOutstandingBalance),loading:!1,error:null});return}}r.useEffect(()=>{u()},[]);const o=r.useMemo(()=>!!(s.examOpen&&s.gradesComplete&&s.documentsComplete&&s.noOutstandingBalance),[s]),d=s.examOpen===!1,m=t?((h=t.final_approval_status)==null?void 0:h.toLowerCase())==="pending":!1,N=r.useMemo(()=>[{label:"Exam window is open",ok:s.examOpen},{label:"Complete grades (registrar verified)",ok:s.gradesComplete},{label:"Complete documents submitted",ok:s.documentsComplete},{label:"No outstanding tuition balance",ok:s.noOutstandingBalance}],[s]);return e.jsxs(_,{breadcrumbs:V,children:[e.jsx(k,{title:"Comprehensive Exam"}),e.jsx("div",{className:"flex flex-col px-7 pt-5 pb-5 w-full",children:e.jsxs("div",{className:"w-full bg-white border border-zinc-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"flex flex-row items-center justify-between w-full p-3 border-b",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-full bg-rose-500/10 border border-rose-500",children:e.jsx(L,{className:"h-5 w-5 text-rose-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:"Comprehensive Exam"}),e.jsx("p",{className:"block text-xs text-muted-foreground",children:"Submit and track your comprehensive exam application."}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(f,{variant:o?"secondary":"outline",className:d?"border-rose-300 text-rose-700 bg-rose-50":o?"border-green-300 text-green-700 bg-green-50":"",children:d?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"h-3.5 w-3.5"}),"Closed"]}):o?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"h-3.5 w-3.5"}),"Eligible"]}):e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"h-3.5 w-3.5"}),"Not eligible"]})}),e.jsxs(n,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",onClick:u,disabled:s.loading,children:[e.jsx(I,{className:`h-3.5 w-3.5 mr-1 ${s.loading?"animate-spin":""}`}),"Refresh"]}),e.jsxs(n,{size:"sm",variant:"ghost",className:"h-7 px-2 text-xs",onClick:()=>l(!0),children:[e.jsx(R,{className:"h-3.5 w-3.5 mr-1"}),"Details"]})]})]})]})}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(n,{className:"bg-rose-500 text-sm px-5 rounded-md",onClick:()=>p(!0),disabled:!o||!!t&&m,title:d?"Exam is closed":o?m?"Application pending":"Submit application":"You are not eligible yet",children:"Submit application"}),e.jsx(O,{open:j,onOpenChange:p}),e.jsx("div",{children:t?e.jsx(E,{application:{id:t.application_id,first_name:t.first_name,middle_initial:t.middle_name?t.middle_name[0]:null,last_name:t.last_name,program:t.program,school_year:t.school_year,office_address:t.office_address??null,mobile_no:t.contact_number??null,telephone_no:t.telephone_number??null,email:t.email,status:t.final_approval_status||"Pending",subjects:t.subjects,created_at:t.created_at??null}}):e.jsx("div",{className:"p-6 text-center text-sm text-muted-foreground",children:"No application submitted yet."})})]}),e.jsx(D,{open:y,onOpenChange:l,children:e.jsxs(S,{className:"sm:max-w-md",children:[e.jsxs(B,{children:[e.jsx(M,{children:"Comprehensive Exam Eligibility"}),e.jsx(z,{children:"You must meet all the requirements below before you can submit an application."})]}),e.jsx("div",{className:"space-y-2",children:N.map((a,i)=>e.jsxs("div",{className:"flex items-center justify-between rounded border px-3 py-2",children:[e.jsx("span",{className:"text-sm",children:a.label}),e.jsx(f,{variant:"outline",className:a.ok===!0?"border-green-300 text-green-700 bg-green-50":a.ok===!1?"border-rose-300 text-rose-700 bg-rose-50":"text-zinc-600",children:a.ok===!0?"OK":a.ok===!1?"Missing":"Unknown"})]},i))}),e.jsxs(A,{className:"mt-2",children:[e.jsx(n,{variant:"outline",onClick:()=>l(!1),children:"Close"}),e.jsx(n,{onClick:()=>{l(!1),o&&!m&&p(!0)},disabled:!o||m,children:"Apply Now"})]})]})})]})})]})}export{He as default};
