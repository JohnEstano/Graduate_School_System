import{r as n,m as G,j as e,L as V,S as c}from"./app-BubHmeqC.js";import{A as J}from"./app-layout-yLDvQPzP.js";import K from"./individual-records-BAjkwy7-.js";import Q from"./edit-student-record-D7Nz6CPl.js";import U from"./delete-prompt----7jnW_.js";import{B as r}from"./button-CX84Ig4W.js";import{P as S,a as k,b as _}from"./popover-DbNLJDwL.js";import{C as P,a as R,b as A,c as T,d as D,e as p}from"./command-BtB-gsVk.js";import{T as W,a as X,b as g,c as o,d as Z,e as l}from"./table-CLIx8tAs.js";import{A as $,a as ee}from"./avatar-DijVPJCE.js";import{c as N}from"./utils-jAU0Cazi.js";import{S as se,B as te}from"./search-input-DcvYDg-V.js";import{C as ae}from"./calendar-B4x-YT-4.js";import{C as v}from"./check-CZ9c_sEg.js";import{E as re}from"./eye-FNn8FHF8.js";import{S as ne}from"./square-pen-DrBcbg_a.js";import{T as le}from"./trash-2-5b2iJYSr.js";import{C as ie,a as oe}from"./chevrons-right-DTAmkult.js";import{C as me}from"./chevron-left-BtmPIa6j.js";import{C as ce}from"./chevron-right-BRo8ahWW.js";import"./index-CAAZlwhj.js";import"./index-DZZQifJx.js";import"./input-y4wBi6jo.js";import"./index-Bsel9b7o.js";import"./index-PQN_369Y.js";import"./index-DyQT7xcZ.js";import"./x-DS6n0ElR.js";import"./createLucideIcon-Biu-y2hB.js";import"./tooltip-tJz5bvEu.js";import"./floating-ui.react-dom-DwEbxQiH.js";import"./separator-B1kTuyS6.js";import"./index-1EFpZ92o.js";import"./dropdown-menu-BExp8GpF.js";import"./index-6aAr3Pmv.js";import"./index-CVQNv_Nf.js";import"./index-CBu7v5lz.js";import"./index-Zto0mrax.js";import"./settings-Uvo0cGb6.js";import"./users-wdb3-6X2.js";import"./graduation-cap-B7M__5Eh.js";import"./file-text-B1gFNyH7.js";import"./dollar-sign-DESWnaQ9.js";import"./send-DnHCHsKV.js";import"./credit-card-DhKiqKDR.js";import"./tabs-DVolEiAR.js";import"./badge-Dd_ET0uG.js";import"./circle-check-big-BRigqRsr.js";import"./info-DGWfuZKp.js";import"./sun-BLOPCje7.js";import"./user-DRyx2ySC.js";import"./success-prompt-CRXMV9o9.js";import"./alert-dialog-CR9FQUky.js";import"./circle-check-xWUFCjm8.js";import"./search-BpG6I48V.js";const de=[{title:"Student Records",href:"/student-records"}],pe=["MIT","MBA","MCS","MAED"];function xs({records:t,filters:x}){const[E,w]=n.useState(!1),[b,y]=n.useState(!1),[I,h]=n.useState(!1),[i,d]=n.useState(null),{data:a,setData:m,get:O}=G({search:x.search||"",year:x.year||null,program:x.program||null}),[z,u]=n.useState(!1),[M,j]=n.useState(!1);n.useEffect(()=>{const s=setTimeout(()=>{O(route("student-records.index"),{preserveState:!0,replace:!0})},300);return()=>clearTimeout(s)},[a]);const B=s=>{d(s),y(!0)},L=s=>{d(s),h(!0)},Y=()=>{i&&c.delete(route("student-records.destroy",i.id),{onSuccess:()=>{h(!1),d(null)}})},F=s=>{d(s),w(!0)},H=(s=2020,q=new Date().getFullYear())=>{const C=[];for(let f=q;f>=s;f--)C.push(f.toString());return C};return e.jsxs(J,{breadcrumbs:de,children:[e.jsx(V,{title:"Student Records"}),e.jsxs("div",{className:"container mx-auto p-6 dark:bg-[#0a0a0a] min-h-screen",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Student Records"})}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-4 gap-4",children:[e.jsx(se,{placeholder:"Search Student Name or ID...",className:"w-full md:w-1/3",value:a.search,onChange:s=>m("search",s.target.value)}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Filter:"}),e.jsxs(S,{open:z,onOpenChange:u,children:[e.jsx(k,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"w-[150px] justify-start text-left font-normal",children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),a.year??"All Years"]})}),e.jsx(_,{className:"w-[200px] p-0",align:"start",children:e.jsxs(P,{children:[e.jsx(R,{placeholder:"Search years..."}),e.jsxs(A,{children:[e.jsx(T,{children:"No year found."}),e.jsxs(D,{children:[e.jsxs(p,{onSelect:()=>{m("year",null),u(!1)},children:[e.jsx(v,{className:N("mr-2 h-4 w-4",a.year===null?"opacity-100":"opacity-0")}),"All Years"]}),H(2020,2025).map(s=>e.jsxs(p,{onSelect:()=>{m("year",s),u(!1)},children:[e.jsx(v,{className:N("mr-2 h-4 w-4",a.year===s?"opacity-100":"opacity-0")}),s]},s))]})]})]})})]}),e.jsxs(S,{open:M,onOpenChange:j,children:[e.jsx(k,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"w-[180px] justify-start text-left font-normal",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),a.program??"All Programs"]})}),e.jsx(_,{className:"w-[200px] p-0",align:"start",children:e.jsxs(P,{children:[e.jsx(R,{placeholder:"Filter program..."}),e.jsxs(A,{children:[e.jsx(T,{children:"No program found."}),e.jsx(D,{children:pe.map(s=>e.jsxs(p,{onSelect:()=>{m("program",s),j(!1)},children:[e.jsx(v,{className:N("mr-2 h-4 w-4",a.program===s?"opacity-100":"opacity-0")}),s]},s))}),e.jsx(p,{onSelect:()=>{m("program",null),j(!1)},className:"text-red-500",children:"Clear Filter"})]})]})})]})]})]}),e.jsx("div",{className:"rounded-md overflow-x-auto border border-border bg-white dark:bg-[#121212] p-2",children:e.jsxs(W,{className:"min-w-full text-sm",children:[e.jsx(X,{children:e.jsxs(g,{children:[e.jsx(o,{className:"w-[30%] px-1 py-2",children:"Student"}),e.jsx(o,{className:"w-[15%] px-1 py-2 text-center",children:"Program"}),e.jsx(o,{className:"w-[15%] px-1 py-2 text-center",children:"OR Number"}),e.jsx(o,{className:"w-[15%] px-1 py-2 text-center",children:"Payment Date"}),e.jsx(o,{className:"w-[10%] px-1 py-2 text-center",children:"Records"}),e.jsx(o,{className:"w-[15%] px-1 py-2 text-center",children:"Actions"})]})}),e.jsx(Z,{children:t.data.length>0?t.data.map(s=>e.jsxs(g,{className:"hover:bg-muted/50",children:[e.jsxs(l,{className:"flex items-center space-x-4 px-1 py-2",children:[e.jsx($,{className:"h-10 w-10 flex-shrink-0 bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300",children:e.jsx(ee,{children:s.first_name.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[s.first_name," ",s.middle_name?s.middle_name.charAt(0)+".":""," ",s.last_name]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.student_id})]})]}),e.jsx(l,{className:"px-1 py-2 text-center",children:s.program}),e.jsx(l,{className:"px-1 py-2 text-center",children:s.or_number}),e.jsx(l,{className:"px-1 py-2 text-center",children:s.payment_date}),e.jsx(l,{className:"px-1 py-2 text-center",children:e.jsxs(r,{variant:"outline",size:"sm",className:"rounded-md px-3 py-2 h-auto text-xs flex items-center gap-1",onClick:()=>F(s),children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline-block",children:"View"})]})}),e.jsx(l,{className:"px-1 py-2 text-center",children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(r,{variant:"outline",size:"icon",className:"rounded-md h-auto p-2",onClick:()=>B(s),children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"icon",className:"rounded-md h-auto p-2",onClick:()=>L(s),children:e.jsx(le,{className:"w-4 h-4"})})]})})]},s.id)):e.jsx(g,{children:e.jsx(l,{colSpan:6,className:"h-24 text-center",children:"No results found."})})})]})}),t.last_page>1&&e.jsxs("div",{className:"mt-4 flex justify-end items-center space-x-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Page ",t.current_page," of ",t.last_page]}),e.jsx(r,{variant:"outline",size:"icon",disabled:t.current_page===1,onClick:()=>c.get(route("student-records.index",{...a,page:1})),children:e.jsx(ie,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"icon",disabled:t.current_page===1,onClick:()=>c.get(route("student-records.index",{...a,page:t.current_page-1})),children:e.jsx(me,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"icon",disabled:t.current_page===t.last_page,onClick:()=>c.get(route("student-records.index",{...a,page:t.current_page+1})),children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx(r,{variant:"outline",size:"icon",disabled:t.current_page===t.last_page,onClick:()=>c.get(route("student-records.index",{...a,page:t.last_page})),children:e.jsx(oe,{className:"w-4 h-4"})})]}),E&&i&&e.jsx("div",{className:"fixed inset-0 z-50 flex justify-center items-center bg-black/80",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 w-1/2 max-h-[80vh] min-h-[40vh] rounded-lg shadow-lg overflow-auto p-2",children:[e.jsx(K,{record:i}),e.jsx("div",{className:"text-right",children:e.jsx(r,{onClick:()=>w(!1),className:"bg-rose-500 hover:bg-rose-600 text-white px-6 py-2 rounded",children:"Close"})})]})}),b&&i&&e.jsx(Q,{isOpen:b,onClose:()=>y(!1),record:i}),e.jsx(U,{isOpen:I,onClose:()=>h(!1),onDelete:Y})]})]})}export{xs as default};
