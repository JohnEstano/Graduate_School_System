const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/server.browser-D5wvACmI.js","assets/app-DVscOEu2.js","assets/app-DXXZ3F2V.css"])))=>i.map(i=>d[i]);
import{R as n,r as z,j as a,_ as oe}from"./app-DVscOEu2.js";import{B as I}from"./button-Ce0hhOYY.js";import{C as re,d as ie,e as le}from"./card-d-byv3Vx.js";import{C as Pt}from"./checkbox-Ewx9Ikyi.js";import{I as de}from"./input-r876wPDn.js";import{P as At,a as It,b as Ot}from"./popover-B9FLRTwP.js";import{S as Et}from"./separator-D0jXpuQ_.js";import ce from"./table-defense-requests-D9c4zfwB.js";import{D as ue,a as pe}from"./dialog-Gw886jlU.js";import{R as me}from"./index-Bje6bX72.js";import{SummaryCards as fe}from"./summary-cards-DlwrTLNn.js";import{B as Kt}from"./badge-CoIL-rL9.js";import{PrintSelected as he}from"./print-selected-CtXdenip.js";import{S as qt}from"./search-DGUjJ3eE.js";import{C as Jt}from"./circle-plus-BEgysSu-.js";import{X as zt}from"./x-DOc550yR.js";import{c as Ft}from"./createLucideIcon-D7oluGz7.js";import{C as ge}from"./info-Ca050nbh.js";import{C as ye}from"./circle-check-big-DM3V3plD.js";import{C as be}from"./circle-x-BRNFXNZR.js";import"./index-DZo2EVCJ.js";import"./utils-jAU0Cazi.js";import"./index-y5_JTaNr.js";import"./index-DMoMDHfQ.js";import"./index-C2BJiM1j.js";import"./index-BkWARksf.js";import"./floating-ui.react-dom-B8YvmuRi.js";import"./Combination-h-yS1RMD.js";import"./details-rOvlcSFL.js";import"./ellipsis--9eXdf3r.js";import"./message-square-XNRLjw0M.js";import"./chevron-left-d3axuDxa.js";import"./chevron-right-BTIB9cEh.js";import"./paperclip-BAL1sxRt.js";import"./format-CbXpjz9O.js";import"./dropdown-menu-COhy0mIG.js";import"./circle-Y7dAM8SF.js";import"./index-Cf9FYmS9.js";import"./circle-alert-IqxqnLVa.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],ve=Ft("Printer",xe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],_e=Ft("Settings2",we);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],je=Ft("Trash2",ke);function Ne(m){if(typeof document>"u")return;let o=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",o.appendChild(e),e.styleSheet?e.styleSheet.cssText=m:e.appendChild(document.createTextNode(m))}const Se=m=>{switch(m){case"success":return Te;case"info":return De;case"warning":return Re;case"error":return Me;default:return null}},Ce=Array(12).fill(0),Ee=({visible:m,className:o})=>n.createElement("div",{className:["sonner-loading-wrapper",o].filter(Boolean).join(" "),"data-visible":m},n.createElement("div",{className:"sonner-spinner"},Ce.map((e,l)=>n.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${l}`})))),Te=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),Re=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),De=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Me=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},n.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Be=n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},n.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),Pe=()=>{const[m,o]=n.useState(document.hidden);return n.useEffect(()=>{const e=()=>{o(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),m};let Ht=1;class Ae{constructor(){this.subscribe=o=>(this.subscribers.push(o),()=>{const e=this.subscribers.indexOf(o);this.subscribers.splice(e,1)}),this.publish=o=>{this.subscribers.forEach(e=>e(o))},this.addToast=o=>{this.publish(o),this.toasts=[...this.toasts,o]},this.create=o=>{var e;const{message:l,...D}=o,b=typeof(o==null?void 0:o.id)=="number"||((e=o.id)==null?void 0:e.length)>0?o.id:Ht++,j=this.toasts.find(f=>f.id===b),M=o.dismissible===void 0?!0:o.dismissible;return this.dismissedToasts.has(b)&&this.dismissedToasts.delete(b),j?this.toasts=this.toasts.map(f=>f.id===b?(this.publish({...f,...o,id:b,title:l}),{...f,...o,id:b,dismissible:M,title:l}):f):this.addToast({title:l,...D,dismissible:M,id:b}),b},this.dismiss=o=>(o?(this.dismissedToasts.add(o),requestAnimationFrame(()=>this.subscribers.forEach(e=>e({id:o,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(l=>l({id:e.id,dismiss:!0}))}),o),this.message=(o,e)=>this.create({...e,message:o}),this.error=(o,e)=>this.create({...e,message:o,type:"error"}),this.success=(o,e)=>this.create({...e,type:"success",message:o}),this.info=(o,e)=>this.create({...e,type:"info",message:o}),this.warning=(o,e)=>this.create({...e,type:"warning",message:o}),this.loading=(o,e)=>this.create({...e,type:"loading",message:o}),this.promise=(o,e)=>{if(!e)return;let l;e.loading!==void 0&&(l=this.create({...e,promise:o,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));const D=Promise.resolve(o instanceof Function?o():o);let b=l!==void 0,j;const M=D.then(async p=>{if(j=["resolve",p],n.isValidElement(p))b=!1,this.create({id:l,type:"default",message:p});else if(Oe(p)&&!p.ok){b=!1;const t=typeof e.error=="function"?await e.error(`HTTP error! status: ${p.status}`):e.error,C=typeof e.description=="function"?await e.description(`HTTP error! status: ${p.status}`):e.description,_=typeof t=="object"&&!n.isValidElement(t)?t:{message:t};this.create({id:l,type:"error",description:C,..._})}else if(p instanceof Error){b=!1;const t=typeof e.error=="function"?await e.error(p):e.error,C=typeof e.description=="function"?await e.description(p):e.description,_=typeof t=="object"&&!n.isValidElement(t)?t:{message:t};this.create({id:l,type:"error",description:C,..._})}else if(e.success!==void 0){b=!1;const t=typeof e.success=="function"?await e.success(p):e.success,C=typeof e.description=="function"?await e.description(p):e.description,_=typeof t=="object"&&!n.isValidElement(t)?t:{message:t};this.create({id:l,type:"success",description:C,..._})}}).catch(async p=>{if(j=["reject",p],e.error!==void 0){b=!1;const E=typeof e.error=="function"?await e.error(p):e.error,t=typeof e.description=="function"?await e.description(p):e.description,L=typeof E=="object"&&!n.isValidElement(E)?E:{message:E};this.create({id:l,type:"error",description:t,...L})}}).finally(()=>{b&&(this.dismiss(l),l=void 0),e.finally==null||e.finally.call(e)}),f=()=>new Promise((p,E)=>M.then(()=>j[0]==="reject"?E(j[1]):p(j[1])).catch(E));return typeof l!="string"&&typeof l!="number"?{unwrap:f}:Object.assign(l,{unwrap:f})},this.custom=(o,e)=>{const l=(e==null?void 0:e.id)||Ht++;return this.create({jsx:o(l),id:l,...e}),l},this.getActiveToasts=()=>this.toasts.filter(o=>!this.dismissedToasts.has(o.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const F=new Ae,Ie=(m,o)=>{const e=(o==null?void 0:o.id)||Ht++;return F.addToast({title:m,...o,id:e}),e},Oe=m=>m&&typeof m=="object"&&"ok"in m&&typeof m.ok=="boolean"&&"status"in m&&typeof m.status=="number",ze=Ie,He=()=>F.toasts,Fe=()=>F.getActiveToasts(),ct=Object.assign(ze,{success:F.success,info:F.info,warning:F.warning,error:F.error,custom:F.custom,message:F.message,promise:F.promise,dismiss:F.dismiss,loading:F.loading},{getHistory:He,getToasts:Fe});Ne("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Tt(m){return m.label!==void 0}const Le=3,$e="24px",Ye="16px",Gt=4e3,Ve=356,Ue=14,Xe=45,We=200;function nt(...m){return m.filter(Boolean).join(" ")}function Ke(m){const[o,e]=m.split("-"),l=[];return o&&l.push(o),e&&l.push(e),l}const qe=m=>{var o,e,l,D,b,j,M,f,p;const{invert:E,toast:t,unstyled:C,interacting:L,setHeights:_,visibleToasts:ut,heights:x,index:J,toasts:et,expanded:$,removeToast:pt,defaultRichColors:Y,closeButton:h,style:st,cancelButtonStyle:rt,actionButtonStyle:at,className:it="",descriptionClassName:X="",duration:G,position:mt,gap:_t,expandByDefault:W,classNames:g,icons:V,closeButtonAriaLabel:Q="Close toast"}=m,[B,ft]=n.useState(null),[y,k]=n.useState(null),[v,H]=n.useState(!1),[ot,w]=n.useState(!1),[ht,lt]=n.useState(!1),[gt,yt]=n.useState(!1),[Rt,kt]=n.useState(!1),[s,r]=n.useState(0),[i,d]=n.useState(0),c=n.useRef(t.duration||G||Gt),S=n.useRef(null),O=n.useRef(null),jt=J===0,K=J+1<=ut,N=t.type,P=t.dismissible!==!1,xt=t.className||"",Dt=t.descriptionClassName||"",Nt=n.useMemo(()=>x.findIndex(u=>u.toastId===t.id)||0,[x,t.id]),Zt=n.useMemo(()=>{var u;return(u=t.closeButton)!=null?u:h},[t.closeButton,h]),Lt=n.useMemo(()=>t.duration||G||Gt,[t.duration,G]),Mt=n.useRef(0),vt=n.useRef(0),$t=n.useRef(0),wt=n.useRef(null),[te,ee]=mt.split("-"),Yt=n.useMemo(()=>x.reduce((u,T,A)=>A>=Nt?u:u+T.height,0),[x,Nt]),Vt=Pe(),se=t.invert||E,Bt=N==="loading";vt.current=n.useMemo(()=>Nt*_t+Yt,[Nt,Yt]),n.useEffect(()=>{c.current=Lt},[Lt]),n.useEffect(()=>{H(!0)},[]),n.useEffect(()=>{const u=O.current;if(u){const T=u.getBoundingClientRect().height;return d(T),_(A=>[{toastId:t.id,height:T,position:t.position},...A]),()=>_(A=>A.filter(U=>U.toastId!==t.id))}},[_,t.id]),n.useLayoutEffect(()=>{if(!v)return;const u=O.current,T=u.style.height;u.style.height="auto";const A=u.getBoundingClientRect().height;u.style.height=T,d(A),_(U=>U.find(R=>R.toastId===t.id)?U.map(R=>R.toastId===t.id?{...R,height:A}:R):[{toastId:t.id,height:A,position:t.position},...U])},[v,t.title,t.description,_,t.id,t.jsx,t.action,t.cancel]);const dt=n.useCallback(()=>{w(!0),r(vt.current),_(u=>u.filter(T=>T.toastId!==t.id)),setTimeout(()=>{pt(t)},We)},[t,pt,_,vt]);n.useEffect(()=>{if(t.promise&&N==="loading"||t.duration===1/0||t.type==="loading")return;let u;return $||L||Vt?(()=>{if($t.current<Mt.current){const U=new Date().getTime()-Mt.current;c.current=c.current-U}$t.current=new Date().getTime()})():(()=>{c.current!==1/0&&(Mt.current=new Date().getTime(),u=setTimeout(()=>{t.onAutoClose==null||t.onAutoClose.call(t,t),dt()},c.current))})(),()=>clearTimeout(u)},[$,L,t,N,Vt,dt]),n.useEffect(()=>{t.delete&&(dt(),t.onDismiss==null||t.onDismiss.call(t,t))},[dt,t.delete]);function ae(){var u;if(V!=null&&V.loading){var T;return n.createElement("div",{className:nt(g==null?void 0:g.loader,t==null||(T=t.classNames)==null?void 0:T.loader,"sonner-loader"),"data-visible":N==="loading"},V.loading)}return n.createElement(Ee,{className:nt(g==null?void 0:g.loader,t==null||(u=t.classNames)==null?void 0:u.loader),visible:N==="loading"})}const ne=t.icon||(V==null?void 0:V[N])||Se(N);var Ut,Xt;return n.createElement("li",{tabIndex:0,ref:O,className:nt(it,xt,g==null?void 0:g.toast,t==null||(o=t.classNames)==null?void 0:o.toast,g==null?void 0:g.default,g==null?void 0:g[N],t==null||(e=t.classNames)==null?void 0:e[N]),"data-sonner-toast":"","data-rich-colors":(Ut=t.richColors)!=null?Ut:Y,"data-styled":!(t.jsx||t.unstyled||C),"data-mounted":v,"data-promise":!!t.promise,"data-swiped":Rt,"data-removed":ot,"data-visible":K,"data-y-position":te,"data-x-position":ee,"data-index":J,"data-front":jt,"data-swiping":ht,"data-dismissible":P,"data-type":N,"data-invert":se,"data-swipe-out":gt,"data-swipe-direction":y,"data-expanded":!!($||W&&v),style:{"--index":J,"--toasts-before":J,"--z-index":et.length-J,"--offset":`${ot?s:vt.current}px`,"--initial-height":W?"auto":`${i}px`,...st,...t.style},onDragEnd:()=>{lt(!1),ft(null),wt.current=null},onPointerDown:u=>{u.button!==2&&(Bt||!P||(S.current=new Date,r(vt.current),u.target.setPointerCapture(u.pointerId),u.target.tagName!=="BUTTON"&&(lt(!0),wt.current={x:u.clientX,y:u.clientY})))},onPointerUp:()=>{var u,T,A;if(gt||!P)return;wt.current=null;const U=Number(((u=O.current)==null?void 0:u.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),St=Number(((T=O.current)==null?void 0:T.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),R=new Date().getTime()-((A=S.current)==null?void 0:A.getTime()),q=B==="x"?U:St,Ct=Math.abs(q)/R;if(Math.abs(q)>=Xe||Ct>.11){r(vt.current),t.onDismiss==null||t.onDismiss.call(t,t),k(B==="x"?U>0?"right":"left":St>0?"down":"up"),dt(),yt(!0);return}else{var Z,tt;(Z=O.current)==null||Z.style.setProperty("--swipe-amount-x","0px"),(tt=O.current)==null||tt.style.setProperty("--swipe-amount-y","0px")}kt(!1),lt(!1),ft(null)},onPointerMove:u=>{var T,A,U;if(!wt.current||!P||((T=window.getSelection())==null?void 0:T.toString().length)>0)return;const R=u.clientY-wt.current.y,q=u.clientX-wt.current.x;var Ct;const Z=(Ct=m.swipeDirections)!=null?Ct:Ke(mt);!B&&(Math.abs(q)>1||Math.abs(R)>1)&&ft(Math.abs(q)>Math.abs(R)?"x":"y");let tt={x:0,y:0};const Wt=bt=>1/(1.5+Math.abs(bt)/20);if(B==="y"){if(Z.includes("top")||Z.includes("bottom"))if(Z.includes("top")&&R<0||Z.includes("bottom")&&R>0)tt.y=R;else{const bt=R*Wt(R);tt.y=Math.abs(bt)<Math.abs(R)?bt:R}}else if(B==="x"&&(Z.includes("left")||Z.includes("right")))if(Z.includes("left")&&q<0||Z.includes("right")&&q>0)tt.x=q;else{const bt=q*Wt(q);tt.x=Math.abs(bt)<Math.abs(q)?bt:q}(Math.abs(tt.x)>0||Math.abs(tt.y)>0)&&kt(!0),(A=O.current)==null||A.style.setProperty("--swipe-amount-x",`${tt.x}px`),(U=O.current)==null||U.style.setProperty("--swipe-amount-y",`${tt.y}px`)}},Zt&&!t.jsx&&N!=="loading"?n.createElement("button",{"aria-label":Q,"data-disabled":Bt,"data-close-button":!0,onClick:Bt||!P?()=>{}:()=>{dt(),t.onDismiss==null||t.onDismiss.call(t,t)},className:nt(g==null?void 0:g.closeButton,t==null||(l=t.classNames)==null?void 0:l.closeButton)},(Xt=V==null?void 0:V.close)!=null?Xt:Be):null,(N||t.icon||t.promise)&&t.icon!==null&&((V==null?void 0:V[N])!==null||t.icon)?n.createElement("div",{"data-icon":"",className:nt(g==null?void 0:g.icon,t==null||(D=t.classNames)==null?void 0:D.icon)},t.promise||t.type==="loading"&&!t.icon?t.icon||ae():null,t.type!=="loading"?ne:null):null,n.createElement("div",{"data-content":"",className:nt(g==null?void 0:g.content,t==null||(b=t.classNames)==null?void 0:b.content)},n.createElement("div",{"data-title":"",className:nt(g==null?void 0:g.title,t==null||(j=t.classNames)==null?void 0:j.title)},t.jsx?t.jsx:typeof t.title=="function"?t.title():t.title),t.description?n.createElement("div",{"data-description":"",className:nt(X,Dt,g==null?void 0:g.description,t==null||(M=t.classNames)==null?void 0:M.description)},typeof t.description=="function"?t.description():t.description):null),n.isValidElement(t.cancel)?t.cancel:t.cancel&&Tt(t.cancel)?n.createElement("button",{"data-button":!0,"data-cancel":!0,style:t.cancelButtonStyle||rt,onClick:u=>{Tt(t.cancel)&&P&&(t.cancel.onClick==null||t.cancel.onClick.call(t.cancel,u),dt())},className:nt(g==null?void 0:g.cancelButton,t==null||(f=t.classNames)==null?void 0:f.cancelButton)},t.cancel.label):null,n.isValidElement(t.action)?t.action:t.action&&Tt(t.action)?n.createElement("button",{"data-button":!0,"data-action":!0,style:t.actionButtonStyle||at,onClick:u=>{Tt(t.action)&&(t.action.onClick==null||t.action.onClick.call(t.action,u),!u.defaultPrevented&&dt())},className:nt(g==null?void 0:g.actionButton,t==null||(p=t.classNames)==null?void 0:p.actionButton)},t.action.label):null)};function Qt(){if(typeof window>"u"||typeof document>"u")return"ltr";const m=document.documentElement.getAttribute("dir");return m==="auto"||!m?window.getComputedStyle(document.documentElement).direction:m}function Je(m,o){const e={};return[m,o].forEach((l,D)=>{const b=D===1,j=b?"--mobile-offset":"--offset",M=b?Ye:$e;function f(p){["top","right","bottom","left"].forEach(E=>{e[`${j}-${E}`]=typeof p=="number"?`${p}px`:p})}typeof l=="number"||typeof l=="string"?f(l):typeof l=="object"?["top","right","bottom","left"].forEach(p=>{l[p]===void 0?e[`${j}-${p}`]=M:e[`${j}-${p}`]=typeof l[p]=="number"?`${l[p]}px`:l[p]}):f(M)}),e}const Ge=n.forwardRef(function(o,e){const{invert:l,position:D="bottom-right",hotkey:b=["altKey","KeyT"],expand:j,closeButton:M,className:f,offset:p,mobileOffset:E,theme:t="light",richColors:C,duration:L,style:_,visibleToasts:ut=Le,toastOptions:x,dir:J=Qt(),gap:et=Ue,icons:$,containerAriaLabel:pt="Notifications"}=o,[Y,h]=n.useState([]),st=n.useMemo(()=>Array.from(new Set([D].concat(Y.filter(y=>y.position).map(y=>y.position)))),[Y,D]),[rt,at]=n.useState([]),[it,X]=n.useState(!1),[G,mt]=n.useState(!1),[_t,W]=n.useState(t!=="system"?t:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),g=n.useRef(null),V=b.join("+").replace(/Key/g,"").replace(/Digit/g,""),Q=n.useRef(null),B=n.useRef(!1),ft=n.useCallback(y=>{h(k=>{var v;return(v=k.find(H=>H.id===y.id))!=null&&v.delete||F.dismiss(y.id),k.filter(({id:H})=>H!==y.id)})},[]);return n.useEffect(()=>F.subscribe(y=>{if(y.dismiss){requestAnimationFrame(()=>{h(k=>k.map(v=>v.id===y.id?{...v,delete:!0}:v))});return}setTimeout(()=>{me.flushSync(()=>{h(k=>{const v=k.findIndex(H=>H.id===y.id);return v!==-1?[...k.slice(0,v),{...k[v],...y},...k.slice(v+1)]:[y,...k]})})})}),[Y]),n.useEffect(()=>{if(t!=="system"){W(t);return}if(t==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;const y=window.matchMedia("(prefers-color-scheme: dark)");try{y.addEventListener("change",({matches:k})=>{W(k?"dark":"light")})}catch{y.addListener(({matches:v})=>{try{W(v?"dark":"light")}catch(H){console.error(H)}})}},[t]),n.useEffect(()=>{Y.length<=1&&X(!1)},[Y]),n.useEffect(()=>{const y=k=>{var v;if(b.every(w=>k[w]||k.code===w)){var ot;X(!0),(ot=g.current)==null||ot.focus()}k.code==="Escape"&&(document.activeElement===g.current||(v=g.current)!=null&&v.contains(document.activeElement))&&X(!1)};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[b]),n.useEffect(()=>{if(g.current)return()=>{Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null,B.current=!1)}},[g.current]),n.createElement("section",{ref:e,"aria-label":`${pt} ${V}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},st.map((y,k)=>{var v;const[H,ot]=y.split("-");return Y.length?n.createElement("ol",{key:y,dir:J==="auto"?Qt():J,tabIndex:-1,ref:g,className:f,"data-sonner-toaster":!0,"data-sonner-theme":_t,"data-y-position":H,"data-x-position":ot,style:{"--front-toast-height":`${((v=rt[0])==null?void 0:v.height)||0}px`,"--width":`${Ve}px`,"--gap":`${et}px`,..._,...Je(p,E)},onBlur:w=>{B.current&&!w.currentTarget.contains(w.relatedTarget)&&(B.current=!1,Q.current&&(Q.current.focus({preventScroll:!0}),Q.current=null))},onFocus:w=>{w.target instanceof HTMLElement&&w.target.dataset.dismissible==="false"||B.current||(B.current=!0,Q.current=w.relatedTarget)},onMouseEnter:()=>X(!0),onMouseMove:()=>X(!0),onMouseLeave:()=>{G||X(!1)},onDragEnd:()=>X(!1),onPointerDown:w=>{w.target instanceof HTMLElement&&w.target.dataset.dismissible==="false"||mt(!0)},onPointerUp:()=>mt(!1)},Y.filter(w=>!w.position&&k===0||w.position===y).map((w,ht)=>{var lt,gt;return n.createElement(qe,{key:w.id,icons:$,index:ht,toast:w,defaultRichColors:C,duration:(lt=x==null?void 0:x.duration)!=null?lt:L,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:l,visibleToasts:ut,closeButton:(gt=x==null?void 0:x.closeButton)!=null?gt:M,interacting:G,position:y,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,closeButtonAriaLabel:x==null?void 0:x.closeButtonAriaLabel,removeToast:ft,toasts:Y.filter(yt=>yt.position==w.position),heights:rt.filter(yt=>yt.position==w.position),setHeights:at,expandByDefault:j,gap:et,expanded:it,swipeDirections:o.swipeDirections})})):null}))});function zs({defenseRequests:m,onStatusChange:o}){const[e,l]=z.useState(m),[D,b]=z.useState(""),[j,M]=z.useState(1),[f,p]=z.useState([]),[E,t]=z.useState(null),[C,L]=z.useState([]),[_,ut]=z.useState([]),[x,J]=z.useState(0),[et,$]=z.useState(null),[pt,Y]=z.useState({title:!0,presenter:!0,date:!0,mode:!0,status:!0,priority:!0}),[h,st]=z.useState({open:!1,type:null}),rt=10;z.useEffect(()=>{l(m)},[m]);const at=z.useMemo(()=>{let s=e;if(D){const r=D.toLowerCase();s=s.filter(i=>`${i.first_name} ${i.last_name} ${i.thesis_title}`.toLowerCase().includes(r))}return C.length&&(s=s.filter(r=>C.includes(r.status||"Pending"))),_.length&&(s=s.filter(r=>r.priority&&_.includes(r.priority))),s},[D,C,_,e]),it=z.useMemo(()=>E?[...at].sort((s,r)=>{const i=new Date(s.date_of_defense).getTime(),d=new Date(r.date_of_defense).getTime();return E==="asc"?i-d:d-i}):at,[at,E]),X=Math.ceil(at.length/rt),G=z.useMemo(()=>{const s=(j-1)*rt;return Array.isArray(it)?it.slice(s,s+rt):[]},[it,j]);function mt(s){return s?new Date(s).toLocaleString():""}const _t=f.length===G.length,W=()=>p(s=>s.length===G.length?[]:G.map(r=>r.id)),g=s=>p(r=>r.includes(s)?r.filter(i=>i!==s):[...r,s]),V=()=>t(s=>s==="asc"?"desc":s==="desc"?null:"asc"),Q=s=>{Y(r=>({...r,[s]:!r[s]}))};function B(){var s;return(s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.content}const ft=async(s,r)=>{const i=await fetch(`/defense-requests/${s}/status`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":B(),Accept:"application/json"},body:JSON.stringify({status:r})});if(i.ok){const d=await i.json();l(c=>c.map(S=>S.id===s?{...S,status:d.status,last_status_updated_by:d.last_status_updated_by,last_status_updated_at:d.last_status_updated_at}:S)),$(c=>c&&c.id===s?{...c,status:d.status,last_status_updated_by:d.last_status_updated_by,last_status_updated_at:d.last_status_updated_at}:c),et&&et.id===s&&$(c=>c&&{...c,status:d.status,last_status_updated_by:d.last_status_updated_by,last_status_updated_at:d.last_status_updated_at}),ct.success("Status updated!",{position:"bottom-right"})}else ct.error("Failed to update status",{position:"bottom-right"})},y=async(s,r)=>{const i=await fetch(`/defense-requests/${s}/priority`,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":B(),Accept:"application/json"},body:JSON.stringify({priority:r})});if(i.ok){const d=await i.json();l(c=>c.map(S=>S.id===s?{...S,priority:d.priority,last_status_updated_by:d.last_status_updated_by,last_status_updated_at:d.last_status_updated_at}:S)),$(c=>c&&c.id===s?{...c,priority:d.priority,last_status_updated_by:d.last_status_updated_by,last_status_updated_at:d.last_status_updated_at}:c),et&&et.id===s&&$(c=>c&&{...c,priority:d.priority,last_status_updated_by:d.last_status_updated_by,last_status_updated_at:d.last_status_updated_at}),ct.success("Priority updated!",{position:"bottom-right"})}else ct.error("Failed to update priority",{position:"bottom-right"})},k=async s=>{const r=await fetch("/defense-requests/bulk-status",{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":B(),Accept:"application/json"},body:JSON.stringify({ids:f,status:s})});let i=[],d=!1,c="",S="";try{c=await r.clone().text(),i=JSON.parse(c),d=!0}catch{console.warn("Bulk status raw response (parse error):",c)}if(console.log("Bulk status response:",{raw:c,updated:i}),r.ok){const O=(window==null?void 0:window.currentUserName)||"You",jt=new Date().toISOString();l(K=>{let N;return d&&Array.isArray(i)?N=K.map(P=>{const xt=i.find(Dt=>Dt.id===P.id);return xt?{...P,status:xt.status,last_status_updated_by:xt.last_status_updated_by,last_status_updated_at:xt.last_status_updated_at}:P}):N=K.map(P=>f.includes(P.id)?{...P,status:s,last_status_updated_by:O,last_status_updated_at:jt}:P),[...N]}),$(K=>{if(!K)return K;if(d&&Array.isArray(i)){const N=i.find(P=>P.id===K.id);if(N)return{...K,status:N.status,last_status_updated_by:N.last_status_updated_by,last_status_updated_at:N.last_status_updated_at}}return f.includes(K.id)?{...K,status:s,last_status_updated_by:O,last_status_updated_at:jt}:K}),p([]),ct.success("Status updated!",{position:"bottom-right"}),setTimeout(()=>{console.log("DefenseRequests after bulk update:",e)},100)}else d&&i&&i.error?S=i.error:S="Failed to update status",ct.error(S,{position:"bottom-right"})},v=async s=>{const r=await fetch("/defense-requests/bulk-priority",{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":B(),Accept:"application/json"},body:JSON.stringify({ids:f,priority:s})});if(r.ok){const i=await r.json();l(d=>d.map(c=>{if(Array.isArray(i)){const S=i.find(O=>O.id===c.id);if(S)return{...c,priority:S.priority,last_status_updated_by:S.last_status_updated_by,last_status_updated_at:S.last_status_updated_at}}return f.includes(c.id)?{...c,priority:s,last_status_updated_by:(i==null?void 0:i.last_status_updated_by)??c.last_status_updated_by,last_status_updated_at:(i==null?void 0:i.last_status_updated_at)??c.last_status_updated_at}:c})),$(d=>{if(d&&f.includes(d.id)){if(Array.isArray(i)){const c=i.find(S=>S.id===d.id);if(c)return{...d,priority:c.priority,last_status_updated_by:c.last_status_updated_by,last_status_updated_at:c.last_status_updated_at}}return{...d,priority:s,last_status_updated_by:(i==null?void 0:i.last_status_updated_by)??d.last_status_updated_by,last_status_updated_at:(i==null?void 0:i.last_status_updated_at)??d.last_status_updated_at}}return d}),p([]),ct.success("Bulk priority updated!",{position:"bottom-right"})}else ct.error("Failed to update priority",{position:"bottom-right"})},H=async(s,r)=>{st({open:!0,type:"status",id:s,value:r})},ot=async(s,r)=>{st({open:!0,type:"priority",id:s,value:r})},w=s=>{st({open:!0,type:"bulk-status",value:s})},ht=()=>{const s=e.filter(i=>f.includes(i.id)),r=window.open("","_blank","width=900,height=700");r&&(r.document.write(`
              <html>
                <head>
                  <title>Graduate School Defense Requests</title>
                  <style>
                    body { font-family: Arial, sans-serif; }
                    table { width: 100%; border-collapse: collapse; font-size: 13px; }
                    th, td { border: 1px solid #ddd; padding: 8px; }
                    th { background: #f5f5f5; }
                  </style>
                </head>
                <body>
                  <div id="print-root"></div>
                </body>
              </html>
            `),r.document.close(),oe(async()=>{const{renderToStaticMarkup:i}=await import("./server.browser-D5wvACmI.js").then(d=>d.s);return{renderToStaticMarkup:i}},__vite__mapDeps([0,1,2])).then(({renderToStaticMarkup:i})=>{const d=i(a.jsx(he,{rows:s}));r.document.getElementById("print-root").innerHTML=d,setTimeout(()=>r.print(),500)}))},lt=e.length,gt=e.filter(s=>s.status==="Pending").length,yt=e.filter(s=>s.status==="In progress").length,Rt=e.filter(s=>s.status==="Approved").length,kt=e.filter(s=>s.status==="Rejected").length;return a.jsxs("div",{className:"h-screen p-2 flex flex-col gap-2",children:[a.jsx(fe,{total:lt,pending:gt,inProgress:yt,approved:Rt,rejected:kt}),a.jsx(Ge,{position:"top-right",richColors:!0}),a.jsxs(re,{className:"flex-1 flex flex-col shadow-md  rounded-lg p-2",children:[a.jsx("div",{className:"flex flex-wrap items-center justify-between px-2 pt-2",children:a.jsxs("div",{className:"flex flex-1 justify-between items-center flex-wrap gap-2 px-2 pt-2",children:[a.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[a.jsxs("div",{className:"relative",children:[a.jsx(qt,{className:"absolute left-2 top-2 h-4 w-4 text-muted-foreground"}),a.jsx(de,{placeholder:"Search...",startIcon:qt,value:D,onChange:s=>{b(s.currentTarget.value),M(1)},className:"pl-8 h-8 text-sm w-[300px]"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(At,{children:[a.jsx(It,{asChild:!0,children:a.jsxs(I,{variant:"outline",className:"rounded-md border-dashed text-xs h-8 px-3 flex items-center gap-1",children:[a.jsx(Jt,{})," Status",C.length>0&&a.jsx(Kt,{variant:"secondary",className:"ml-1 px-2 py-0.5 rounded-full text-xs bg-accent text-accent-foreground",children:C.length>1?`${C.length} selected`:C[0]})]})}),a.jsxs(Ot,{className:"w-44 p-1",side:"bottom",align:"start",children:[["Pending","In progress","Approved","Rejected"].map(s=>a.jsxs("div",{onClick:()=>L(r=>r.includes(s)?r.filter(i=>i!==s):[...r,s]),className:"flex items-center gap-2 p-2 rounded hover:bg-muted cursor-pointer",children:[a.jsx(Pt,{checked:C.includes(s)}),a.jsx("span",{className:"text-sm",children:s.replace("-"," ")})]},s)),a.jsx(Et,{className:"my-2"}),a.jsxs(I,{size:"sm",variant:"ghost",className:"w-full",onClick:()=>L([]),children:[a.jsx(zt,{}),"  Clear Filters"]})]})]}),a.jsxs(At,{children:[a.jsx(It,{asChild:!0,children:a.jsxs(I,{variant:"outline",className:"rounded-md border-dashed text-xs h-8 px-3 flex items-center gap-1",children:[a.jsx(Jt,{})," Priority",_.length>0&&a.jsx(Kt,{variant:"secondary",className:"ml-1 px-2 py-0.5 rounded-full text-xs bg-accent text-accent-foreground",children:_.length>1?`${_.length} selected`:_[0]})]})}),a.jsxs(Ot,{className:"w-44 p-1",side:"bottom",align:"start",children:[["Low","Medium","High"].map(s=>a.jsxs("div",{onClick:()=>ut(r=>r.includes(s)?r.filter(i=>i!==s):[...r,s]),className:"flex items-center gap-2 p-2 rounded hover:bg-muted cursor-pointer",children:[a.jsx(Pt,{checked:_.includes(s)}),a.jsx("span",{className:"text-sm",children:s.charAt(0).toUpperCase()+s.slice(1)})]},s)),a.jsx(Et,{className:"my-2"}),a.jsxs(I,{size:"sm",variant:"ghost",className:"w-full",onClick:()=>ut([]),children:[a.jsx(zt,{})," Clear Filters"]})]})]}),(C.length>0||_.length>0)&&a.jsxs(I,{variant:"ghost",size:"sm",className:"h-8 px-3 flex items-center gap-1",onClick:()=>{L([]),ut([])},"aria-label":"Reset all filters",children:[a.jsx(zt,{className:"w-4 h-4 rose-500"}),"Reset"]})]})]}),a.jsx("div",{children:a.jsxs(At,{children:[a.jsx(It,{asChild:!0,children:a.jsxs(I,{variant:"outline",className:"rounded-md border-dashed text-xs h-8 px-3",children:[a.jsx(_e,{})," View"]})}),a.jsxs(Ot,{className:"w-48 p-1",side:"bottom",align:"end",children:[[{key:"title",label:"Title"},{key:"presenter",label:"Presenter"},{key:"date",label:"Scheduled Date"},{key:"mode",label:"Mode"},{key:"status",label:"Status"},{key:"priority",label:"Priority"}].map(({key:s,label:r})=>a.jsxs("div",{onClick:()=>Q(s),className:"flex items-center gap-2 p-2 rounded hover:bg-muted cursor-pointer",children:[a.jsx(Pt,{checked:pt[s]}),a.jsx("span",{className:"text-sm",children:r})]},s)),a.jsx(Et,{className:"my-2"}),a.jsx(I,{size:"sm",variant:"ghost",className:"w-full",onClick:()=>Y({title:!0,presenter:!0,date:!0,mode:!0,status:!0,priority:!0}),children:"Show all"})]})]})})]})}),a.jsxs(ie,{className:"flex-1 overflow-auto",children:[a.jsx(Et,{className:"mb-2"}),a.jsxs("div",{className:"flex gap-1 pb-2 flex-wrap text-xs",children:[a.jsxs(I,{variant:"outline",className:"rounded-full px-3 py-2 h-auto text-xs flex items-center gap-1",onClick:()=>{f.length!==0&&w("In progress")},disabled:f.length===0,children:[a.jsx(ge,{size:12})," Mark as In Progress"]}),a.jsxs(I,{variant:"outline",className:"rounded-full px-3 py-2 h-auto text-xs flex items-center gap-1",onClick:()=>{f.length!==0&&w("Approved")},disabled:f.length===0,children:[a.jsx(ye,{size:12,className:"text-green-500"})," Mark as Approved"]}),a.jsxs(I,{variant:"outline",className:"rounded-full px-3 py-2 h-auto text-xs flex items-center gap-1",onClick:()=>{f.length!==0&&w("Rejected")},disabled:f.length===0,children:[a.jsx(be,{size:12,className:"text-red-500"})," Mark as Rejected"]}),a.jsxs(I,{variant:"outline",className:"rounded-full px-3 py-2 h-auto text-xs flex items-center gap-1",disabled:f.length===0,children:[a.jsx(je,{size:12})," Delete"]}),a.jsxs(I,{variant:"outline",className:"rounded-full px-3 py-2 h-auto text-xs flex items-center gap-1",onClick:ht,disabled:f.length===0,children:[a.jsx(ve,{size:12})," Print"]})]}),a.jsx(ce,{paged:G,columns:pt,selected:f,toggleSelectOne:g,headerChecked:_t,toggleSelectAll:W,toggleSort:V,sortDir:E,setSelectedRequest:s=>$(s),setSelectedIndex:J,sorted:it,selectedRequest:et,selectedIndex:x,onStatusChange:H,onPriorityChange:ot,formatLocalDateTime:mt})]}),a.jsxs(le,{className:"flex justify-between items-center text-sm px-2 pt-3 pb-2",children:[a.jsxs("div",{children:[at.length," request",at.length!==1&&"s"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(I,{size:"sm",variant:"outline",disabled:j===1,onClick:()=>M(s=>s-1),children:"Prev"}),a.jsxs("span",{children:["Page ",j," / ",X]}),a.jsx(I,{size:"sm",variant:"outline",disabled:j===X,onClick:()=>M(s=>s+1),children:"Next"})]})]})]}),a.jsx(ue,{open:h.open,onOpenChange:s=>st(r=>({...r,open:s})),children:a.jsx(pe,{className:"max-w-sm p-6",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"font-bold text-lg",children:[h.type==="status"&&"Confirm Status Update",h.type==="priority"&&"Confirm Priority Update",h.type==="bulk-status"&&"Confirm Bulk Status Update",h.type==="bulk-priority"&&"Confirm Bulk Priority Update"]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[h.type==="status"&&a.jsxs(a.Fragment,{children:["Change status to ",a.jsx("span",{className:"font-semibold",children:h.value})," for this request?"]}),h.type==="priority"&&a.jsxs(a.Fragment,{children:["Change priority to ",a.jsx("span",{className:"font-semibold",children:h.value})," for this request?"]}),h.type==="bulk-status"&&a.jsxs(a.Fragment,{children:["Update status to ",a.jsx("span",{className:"font-semibold",children:h.value})," for ",a.jsx("span",{className:"font-semibold",children:f.length})," selected requests?"]}),h.type==="bulk-priority"&&a.jsxs(a.Fragment,{children:["Update priority to ",a.jsx("span",{className:"font-semibold",children:h.value})," for ",a.jsx("span",{className:"font-semibold",children:f.length})," selected requests?"]})]}),a.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[a.jsx(I,{variant:"outline",onClick:()=>st({open:!1,type:null}),children:"Cancel"}),a.jsx(I,{variant:"default",onClick:async()=>{st({open:!1,type:null}),h.type==="status"&&h.id&&h.value&&await ft(h.id,h.value),h.type==="priority"&&h.id&&h.value&&await y(h.id,h.value),h.type==="bulk-status"&&h.value&&await k(h.value),h.type==="bulk-priority"&&h.value&&await v(h.value)},children:"Confirm"})]})]})})})]})}export{zs as default};
