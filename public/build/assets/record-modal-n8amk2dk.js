import{r,j as e}from"./app-BAKMM9W6.js";import{D as B,a as G,e as F,b as W,c as K}from"./dialog-Fyk91gvx.js";import{T as O,a as V,b as L,c as R,d as X,e as w}from"./table-B43wWAfS.js";import{A as Z,a as q}from"./avatar-BvAeIlgK.js";import{b as J,B as Q}from"./button-CVeIta7K.js";import{c as P}from"./utils-jAU0Cazi.js";import{C as Y}from"./chevron-left-E1732S1e.js";import{C as ee}from"./chevron-right-DZ7e7qvM.js";import{D as te}from"./download-DfuOgvsT.js";import{M as ne,i as se,u as H,P as ae,a as ie,b as oe,L as re,m as le}from"./proxy-DdjMGZgw.js";import"./index-Chzm2fti.js";import"./index-CUQ5MhIm.js";import"./index-CEqJL0NP.js";import"./index-DScCZkqp.js";import"./x-BVoq4DiS.js";import"./createLucideIcon-BSNBS9Xz.js";import"./index-DUmeJSti.js";import"./index-BHprz6Pm.js";import"./index-DZZQifJx.js";function z(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function ce(...t){return s=>{let n=!1;const o=t.map(l=>{const a=z(l,s);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let l=0;l<o.length;l++){const a=o[l];typeof a=="function"?a():z(t[l],null)}}}}function de(...t){return r.useCallback(ce(...t),t)}class ue extends r.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const o=n.offsetParent,l=se(o)&&o.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=l-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function pe({children:t,isPresent:s,anchorX:n,root:o}){const l=r.useId(),a=r.useRef(null),f=r.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:C}=r.useContext(ne),y=de(a,t==null?void 0:t.ref);return r.useInsertionEffect(()=>{const{width:d,height:x,top:i,left:c,right:h}=f.current;if(s||!a.current||!d||!x)return;const g=n==="left"?`left: ${c}`:`right: ${h}`;a.current.dataset.motionPopId=l;const u=document.createElement("style");C&&(u.nonce=C);const b=o??document.head;return b.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${l}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${x}px !important;
            ${g}px !important;
            top: ${i}px !important;
          }
        `),()=>{b.contains(u)&&b.removeChild(u)}},[s]),e.jsx(ue,{isPresent:s,childRef:a,sizeRef:f,children:r.cloneElement(t,{ref:y})})}const me=({children:t,initial:s,isPresent:n,onExitComplete:o,custom:l,presenceAffectsLayout:a,mode:f,anchorX:C,root:y})=>{const d=H(fe),x=r.useId();let i=!0,c=r.useMemo(()=>(i=!1,{id:x,initial:s,isPresent:n,custom:l,onExitComplete:h=>{d.set(h,!0);for(const g of d.values())if(!g)return;o&&o()},register:h=>(d.set(h,!1),()=>d.delete(h))}),[n,d,o]);return a&&i&&(c={...c}),r.useMemo(()=>{d.forEach((h,g)=>d.set(g,!1))},[n]),r.useEffect(()=>{!n&&!d.size&&o&&o()},[n]),f==="popLayout"&&(t=e.jsx(pe,{isPresent:n,anchorX:C,root:y,children:t})),e.jsx(ae.Provider,{value:c,children:t})};function fe(){return new Map}const k=t=>t.key||"";function S(t){const s=[];return r.Children.forEach(t,n=>{r.isValidElement(n)&&s.push(n)}),s}const he=({children:t,custom:s,initial:n=!0,onExitComplete:o,presenceAffectsLayout:l=!0,mode:a="sync",propagate:f=!1,anchorX:C="left",root:y})=>{const[d,x]=ie(f),i=r.useMemo(()=>S(t),[t]),c=f&&!d?[]:i.map(k),h=r.useRef(!0),g=r.useRef(i),u=H(()=>new Map),[b,v]=r.useState(i),[p,T]=r.useState(i);oe(()=>{h.current=!1,g.current=i;for(let j=0;j<p.length;j++){const m=k(p[j]);c.includes(m)?u.delete(m):u.get(m)!==!0&&u.set(m,!1)}},[p,c.length,c.join("-")]);const D=[];if(i!==b){let j=[...i];for(let m=0;m<p.length;m++){const N=p[m],_=k(N);c.includes(_)||(j.splice(m,0,N),D.push(N))}return a==="wait"&&D.length&&(j=D),T(S(j)),v(i),null}const{forceRender:E}=r.useContext(re);return e.jsx(e.Fragment,{children:p.map(j=>{const m=k(j),N=f&&!d?!1:i===p||c.includes(m),_=()=>{if(u.has(m))u.set(m,!0);else return;let $=!0;u.forEach(U=>{U||($=!1)}),$&&(E==null||E(),T(g.current),f&&(x==null||x()),o&&o())};return e.jsx(me,{isPresent:N,initial:!h.current||n?void 0:!1,custom:s,presenceAffectsLayout:l,mode:a,root:y,onExitComplete:N?void 0:_,anchorX:C,children:j},m)})})};function xe({className:t,...s}){return e.jsx("nav",{role:"navigation","aria-label":"pagination","data-slot":"pagination",className:P("mx-auto flex w-full justify-center",t),...s})}function ge({className:t,...s}){return e.jsx("ul",{"data-slot":"pagination-content",className:P("flex flex-row items-center gap-1",t),...s})}function M({...t}){return e.jsx("li",{"data-slot":"pagination-item",...t})}function A({className:t,isActive:s,size:n="icon",...o}){return e.jsx("a",{"aria-current":s?"page":void 0,"data-slot":"pagination-link","data-active":s,className:P(J({variant:s?"outline":"ghost",size:n}),t),...o})}function je({className:t,...s}){return e.jsxs(A,{"aria-label":"Go to previous page",size:"default",className:P("gap-1 px-2.5 sm:pl-2.5",t),...s,children:[e.jsx(Y,{}),e.jsx("span",{className:"hidden sm:block",children:"Previous"})]})}function Ce({className:t,...s}){return e.jsxs(A,{"aria-label":"Go to next page",size:"default",className:P("gap-1 px-2.5 sm:pr-2.5",t),...s,children:[e.jsx("span",{className:"hidden sm:block",children:"Next"}),e.jsx(ee,{})]})}const I=5;function He({show:t,onClose:s,record:n}){const[o,l]=r.useState(1);if(!n)return null;const a=n.payments||[],f=Math.ceil(a.length/I),C=(o-1)*I,y=C+I,d=a.slice(C,y),x=()=>{if(!n)return;const i=`${n.name}_panelists.csv`,c=[[`Program: ${n.name}`],[`Date Edited: ${n.date_edited}`],[""]],h=["Panelist","Role","Defense Status","Received Date","Amount"],g=a.map(p=>[p.panelist_name||"",p.role||"",p.defense_status||"",p.payment_date||"",p.amount]);let u="data:text/csv;charset=utf-8,"+[...c,h,...g].map(p=>p.join(",")).join(`
`);const b=encodeURI(u),v=document.createElement("a");v.setAttribute("href",b),v.setAttribute("download",i),document.body.appendChild(v),v.click(),document.body.removeChild(v)};return e.jsx(B,{open:t,onOpenChange:s,children:e.jsxs(G,{className:"max-w-3xl min-w-260 min-h-90 w-full max-h-[90vh]",children:[e.jsxs(F,{className:"mb-2",children:[e.jsx(W,{className:"text-2xl font-bold",children:n.name}),e.jsxs(K,{children:["Honorarium summary for the ",n.program," program. Last updated on ",n.date_edited,"."]}),e.jsx("div",{className:"flex justify-end space-x-2 pt-2",children:e.jsxs(Q,{onClick:x,variant:"outline",className:"rounded-md px-3 py-2 h-auto text-xs flex items-center gap-1",children:[e.jsx(te,{size:16}),"Download"]})})]}),e.jsx("div",{className:"rounded-md overflow-x-auto border border-border p-2 bg-white dark:bg-card",children:e.jsx("div",{className:"max-h-[65vh] overflow-y-auto px-1",children:e.jsxs(O,{className:"min-w-full text-sm",children:[e.jsx(V,{children:e.jsxs(L,{className:"hover:bg-muted/50",children:[e.jsx(R,{className:"w-[40%] px-1 py-2",children:"Panelist"}),e.jsx(R,{className:"w-[15%] px-1 py-2",children:"Defense Type"}),e.jsx(R,{className:"w-[20%] px-1 py-2",children:"Received Date"}),e.jsx(R,{className:"w-[15%] text-right px-1 py-2",children:"Amount"})]})}),e.jsx(X,{children:e.jsx(he,{children:d.length>0?d.map(i=>e.jsxs(le.tr,{className:"hover:bg-muted/50",layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},children:[e.jsx(w,{className:"px-1 py-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"w-9 h-9 bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-300",children:e.jsx(q,{children:typeof i.panelist_name=="string"&&i.panelist_name.charAt(0)||"?"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.panelist_name??"Unknown"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.role??""})]})]})}),e.jsx(w,{className:"px-1 py-2",children:i.defense_type??i.defense_status??""}),e.jsx(w,{className:"px-1 py-2",children:i.payment_date||""}),e.jsxs(w,{className:"text-right px-1 py-2",children:["â‚±",Number(i.amount).toFixed(2)]})]},i.id)):e.jsx(L,{children:e.jsx(w,{colSpan:4,className:"h-24 text-center",children:"No honorarium records found for this program."})})})})]})})}),f>1&&e.jsx(xe,{className:"mt-4",children:e.jsxs(ge,{children:[e.jsx(M,{children:e.jsx(je,{onClick:()=>l(Math.max(1,o-1))})}),[...Array(f)].map((i,c)=>e.jsx(M,{children:e.jsx(A,{isActive:o===c+1,onClick:()=>l(c+1),children:c+1})},c)),e.jsx(M,{children:e.jsx(Ce,{onClick:()=>l(Math.min(f,o+1))})})]})})]})})}export{He as default};
