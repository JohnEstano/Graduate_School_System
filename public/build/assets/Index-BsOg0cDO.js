import{g as q,R as H,r as C,j as l,L as $}from"./app-DdPj2m7B.js";import{A as V}from"./app-layout-CZ3kZ0t2.js";import{S as X}from"./layout-BZxyRDf-.js";import{H as Y}from"./heading-small-h3Z97KlJ.js";import{B as S}from"./button-C4XkiM_B.js";import{P as b}from"./index-Bt9ylsuM.js";import{D as G,a as J,e as K,b as Q}from"./dialog-BeApitpu.js";import{T as Z,a as tt,b as W,c as U}from"./tabs-BvzTftzm.js";import{t as D}from"./index-B2MlTwnV.js";import{S as et}from"./signature-HJa2c2uW.js";import{c as rt}from"./createLucideIcon-B8qZ3ylK.js";import{T as nt}from"./trash-2-oufS_Sxw.js";import"./index-DYEC1Owk.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";import"./input-DCrn1t-u.js";import"./index-DDxX9UbU.js";import"./index-C0AcbnKJ.js";import"./index-DRr-UIpQ.js";import"./x-gfWO9KfB.js";import"./tooltip-YyHP33lU.js";import"./floating-ui.react-dom-qFQCHW7g.js";import"./separator-DAbYQnLI.js";import"./index-DxK34XW3.js";import"./chevron-right-BZod6iQK.js";import"./dropdown-menu-sYZpN2tC.js";import"./index-DGKk-Zer.js";import"./index-ATT6OHxL.js";import"./index-MX9TSR8D.js";import"./index-BdQOngYf.js";import"./check-BgnkF1LW.js";import"./avatar-Cz3zvE7t.js";import"./settings-CYIvZ_Tn.js";import"./users-Bi2Lh05r.js";import"./graduation-cap-BxuxjmnL.js";import"./file-text-Dl_aF8u0.js";import"./dollar-sign-DEGfV_co.js";import"./send-ChQ392yu.js";import"./credit-card-BvkjxVWT.js";import"./badge-ofr1GoIX.js";import"./circle-check-big-CKCqbWb4.js";import"./info-BWBV8Gn3.js";import"./sun-CPhm4DAg.js";import"./index-Chjiymov.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],B=rt("CloudUpload",at);function k(){return k=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)({}).hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},k.apply(null,arguments)}function it(e,r){if(e==null)return{};var n={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(r.indexOf(t)!==-1)continue;n[t]=e[t]}return n}function M(e,r){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},M(e,r)}function ot(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e,r){if(e==null)return{};var n,t,a=it(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function R(e){"@babel/helpers - typeof";return R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},R(e)}function ct(e,r,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function lt(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function ut(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&M(e,r)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},E(e)}function F(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F=function(){return!!e})()}function ht(e,r){if(r&&(R(r)=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ot(e)}function dt(e){var r=F();return function(){var n,t=E(e);if(r){var a=E(this).constructor;n=Reflect.construct(t,arguments,a)}else n=t.apply(this,arguments);return ht(this,n)}}/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bézier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bézier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */function j(e,r,n){this.x=e,this.y=r,this.time=n||new Date().getTime()}j.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1};j.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))};j.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time};function L(e,r,n,t){this.startPoint=e,this.control1=r,this.control2=n,this.endPoint=t}L.prototype.length=function(){for(var e=10,r=0,n=void 0,t=void 0,a=0;a<=e;a+=1){var o=a/e,u=this._point(o,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),i=this._point(o,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(a>0){var d=u-n,s=i-t;r+=Math.sqrt(d*d+s*s)}n=u,t=i}return r};L.prototype._point=function(e,r,n,t,a){return r*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*t*(1-e)*e*e+a*e*e*e};function ft(e,r,n){var t,a,o,u=null,i=0;n||(n={});var d=function(){i=n.leading===!1?0:Date.now(),u=null,o=e.apply(t,a),u||(t=a=null)};return function(){var s=Date.now();!i&&n.leading===!1&&(i=s);var h=r-(s-i);return t=this,a=arguments,h<=0||h>r?(u&&(clearTimeout(u),u=null),i=s,o=e.apply(t,a),u||(t=a=null)):!u&&n.trailing!==!1&&(u=setTimeout(d,h)),o}}function v(e,r){var n=this,t=r||{};this.velocityFilterWeight=t.velocityFilterWeight||.7,this.minWidth=t.minWidth||.5,this.maxWidth=t.maxWidth||2.5,this.throttle="throttle"in t?t.throttle:16,this.minDistance="minDistance"in t?t.minDistance:5,this.throttle?this._strokeMoveUpdate=ft(v.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=v.prototype._strokeUpdate,this.dotSize=t.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=t.penColor||"black",this.backgroundColor=t.backgroundColor||"rgba(0,0,0,0)",this.onBegin=t.onBegin,this.onEnd=t.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(a){a.which===1&&(n._mouseButtonDown=!0,n._strokeBegin(a))},this._handleMouseMove=function(a){n._mouseButtonDown&&n._strokeMoveUpdate(a)},this._handleMouseUp=function(a){a.which===1&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(a))},this._handleTouchStart=function(a){if(a.targetTouches.length===1){var o=a.changedTouches[0];n._strokeBegin(o)}},this._handleTouchMove=function(a){a.preventDefault();var o=a.targetTouches[0];n._strokeMoveUpdate(o)},this._handleTouchEnd=function(a){var o=a.target===n._canvas;o&&(a.preventDefault(),n._strokeEnd(a))},this.on()}v.prototype.clear=function(){var e=this._ctx,r=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,r.width,r.height),e.fillRect(0,0,r.width,r.height),this._data=[],this._reset(),this._isEmpty=!0};v.prototype.fromDataURL=function(e){var r=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=new Image,a=n.ratio||window.devicePixelRatio||1,o=n.width||this._canvas.width/a,u=n.height||this._canvas.height/a;this._reset(),t.src=e,t.onload=function(){r._ctx.drawImage(t,0,0,o,u)},this._isEmpty=!1};v.prototype.toDataURL=function(e){var r;switch(e){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,t=Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];return(r=this._canvas).toDataURL.apply(r,[e].concat(t))}};v.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()};v.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)};v.prototype.isEmpty=function(){return this._isEmpty};v.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),typeof this.onBegin=="function"&&this.onBegin(e)};v.prototype._strokeUpdate=function(e){var r=e.clientX,n=e.clientY,t=this._createPoint(r,n),a=this._data[this._data.length-1],o=a&&a[a.length-1],u=o&&t.distanceTo(o)<this.minDistance;if(!(o&&u)){var i=this._addPoint(t),d=i.curve,s=i.widths;d&&s&&this._drawCurve(d,s.start,s.end),this._data[this._data.length-1].push({x:t.x,y:t.y,time:t.time,color:this.penColor})}};v.prototype._strokeEnd=function(e){var r=this.points.length>2,n=this.points[0];if(!r&&n&&this._drawDot(n),n){var t=this._data[this._data.length-1],a=t[t.length-1];n.equals(a)||t.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}typeof this.onEnd=="function"&&this.onEnd(e)};v.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)};v.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)};v.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor};v.prototype._createPoint=function(e,r,n){var t=this._canvas.getBoundingClientRect();return new j(e-t.left,r-t.top,n||new Date().getTime())};v.prototype._addPoint=function(e){var r=this.points,n=void 0;if(r.push(e),r.length>2){r.length===3&&r.unshift(r[0]),n=this._calculateCurveControlPoints(r[0],r[1],r[2]);var t=n.c2;n=this._calculateCurveControlPoints(r[1],r[2],r[3]);var a=n.c1,o=new L(r[1],t,a,r[2]),u=this._calculateCurveWidths(o);return r.shift(),{curve:o,widths:u}}return{}};v.prototype._calculateCurveControlPoints=function(e,r,n){var t=e.x-r.x,a=e.y-r.y,o=r.x-n.x,u=r.y-n.y,i={x:(e.x+r.x)/2,y:(e.y+r.y)/2},d={x:(r.x+n.x)/2,y:(r.y+n.y)/2},s=Math.sqrt(t*t+a*a),h=Math.sqrt(o*o+u*u),f=i.x-d.x,m=i.y-d.y,g=h/(s+h),y={x:d.x+f*g,y:d.y+m*g},x=r.x-y.x,c=r.y-y.y;return{c1:new j(i.x+x,i.y+c),c2:new j(d.x+x,d.y+c)}};v.prototype._calculateCurveWidths=function(e){var r=e.startPoint,n=e.endPoint,t={start:null,end:null},a=this.velocityFilterWeight*n.velocityFrom(r)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(a);return t.start=this._lastWidth,t.end=o,this._lastVelocity=a,this._lastWidth=o,t};v.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)};v.prototype._drawPoint=function(e,r,n){var t=this._ctx;t.moveTo(e,r),t.arc(e,r,n,0,2*Math.PI,!1),this._isEmpty=!1};v.prototype._drawCurve=function(e,r,n){var t=this._ctx,a=n-r,o=Math.floor(e.length());t.beginPath();for(var u=0;u<o;u+=1){var i=u/o,d=i*i,s=d*i,h=1-i,f=h*h,m=f*h,g=m*e.startPoint.x;g+=3*f*i*e.control1.x,g+=3*h*d*e.control2.x,g+=s*e.endPoint.x;var y=m*e.startPoint.y;y+=3*f*i*e.control1.y,y+=3*h*d*e.control2.y,y+=s*e.endPoint.y;var x=r+s*a;this._drawPoint(g,y,x)}t.closePath(),t.fill()};v.prototype._drawDot=function(e){var r=this._ctx,n=typeof this.dotSize=="function"?this.dotSize():this.dotSize;r.beginPath(),this._drawPoint(e.x,e.y,n),r.closePath(),r.fill()};v.prototype._fromData=function(e,r,n){for(var t=0;t<e.length;t+=1){var a=e[t];if(a.length>1)for(var o=0;o<a.length;o+=1){var u=a[o],i=new j(u.x,u.y,u.time),d=u.color;if(o===0)this.penColor=d,this._reset(),this._addPoint(i);else if(o!==a.length-1){var s=this._addPoint(i),h=s.curve,f=s.widths;h&&f&&r(h,f,d)}}else{this._reset();var m=a[0];n(m)}}};v.prototype._toSVG=function(){var e=this,r=this._data,n=this._canvas,t=Math.max(window.devicePixelRatio||1,1),a=0,o=0,u=n.width/t,i=n.height/t,d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttributeNS(null,"width",n.width),d.setAttributeNS(null,"height",n.height),this._fromData(r,function(p,_,w){var P=document.createElement("path");if(!isNaN(p.control1.x)&&!isNaN(p.control1.y)&&!isNaN(p.control2.x)&&!isNaN(p.control2.y)){var O="M "+p.startPoint.x.toFixed(3)+","+p.startPoint.y.toFixed(3)+" "+("C "+p.control1.x.toFixed(3)+","+p.control1.y.toFixed(3)+" ")+(p.control2.x.toFixed(3)+","+p.control2.y.toFixed(3)+" ")+(p.endPoint.x.toFixed(3)+","+p.endPoint.y.toFixed(3));P.setAttribute("d",O),P.setAttribute("stroke-width",(_.end*2.25).toFixed(3)),P.setAttribute("stroke",w),P.setAttribute("fill","none"),P.setAttribute("stroke-linecap","round"),d.appendChild(P)}},function(p){var _=document.createElement("circle"),w=typeof e.dotSize=="function"?e.dotSize():e.dotSize;_.setAttribute("r",w),_.setAttribute("cx",p.x),_.setAttribute("cy",p.y),_.setAttribute("fill",p.color),d.appendChild(_)});var s="data:image/svg+xml;base64,",h='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"'+(' viewBox="'+a+" "+o+" "+u+" "+i+'"')+(' width="'+u+'"')+(' height="'+i+'"')+">",f=d.innerHTML;if(f===void 0){var m=document.createElement("dummy"),g=d.childNodes;m.innerHTML="";for(var y=0;y<g.length;y+=1)m.appendChild(g[y].cloneNode(!0));f=m.innerHTML}var x="</svg>",c=h+f+x;return s+btoa(c)};v.prototype.fromData=function(e){var r=this;this.clear(),this._fromData(e,function(n,t){return r._drawCurve(n,t.start,t.end)},function(n){return r._drawDot(n)}),this._data=e};v.prototype.toData=function(){return this._data};var N={exports:{}},pt=N.exports,A;function mt(){return A||(A=1,function(e,r){(function(n,t){e.exports=t()})(pt,function(){return function(n){function t(o){if(a[o])return a[o].exports;var u=a[o]={exports:{},id:o,loaded:!1};return n[o].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var a={};return t.m=n,t.c=a,t.p="",t(0)}([function(n,t){function a(s){var h=s.getContext("2d"),f=s.width,m=s.height,g=h.getImageData(0,0,f,m).data,y=i(!0,f,m,g),x=i(!1,f,m,g),c=d(!0,f,m,g),p=d(!1,f,m,g),_=p-c+1,w=x-y+1,P=h.getImageData(c,y,_,w);return s.width=_,s.height=w,h.clearRect(0,0,_,w),h.putImageData(P,0,0),s}function o(s,h,f,m){return{red:m[4*(f*h+s)],green:m[4*(f*h+s)+1],blue:m[4*(f*h+s)+2],alpha:m[4*(f*h+s)+3]}}function u(s,h,f,m){return o(s,h,f,m).alpha}function i(s,h,f,m){for(var g=s?1:-1,y=s?0:f-1,x=y;s?x<f:x>-1;x+=g)for(var c=0;c<h;c++)if(u(c,x,h,m))return x;return null}function d(s,h,f,m){for(var g=s?1:-1,y=s?0:h-1,x=y;s?x<h:x>-1;x+=g)for(var c=0;c<f;c++)if(u(x,c,h,m))return x;return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a}])})}(N)),N.exports}var vt=mt();const gt=q(vt);var xt=["canvasProps","clearOnResize"],T=function(e){ut(n,e);var r=dt(n);function n(){var t;lt(this,n);for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return t=r.call.apply(r,[this].concat(o)),t.staticThis=t.constructor,t._sigPad=null,t._canvas=null,t.setRef=function(i){t._canvas=i,t._canvas===null&&(t._sigPad=null)},t._excludeOurProps=function(){var i=t.props;i.canvasProps,i.clearOnResize;var d=st(i,xt);return d},t.componentDidMount=function(){var i=t.getCanvas();t._sigPad=new v(i,t._excludeOurProps()),t._resizeCanvas(),t.on()},t.componentWillUnmount=function(){t.off()},t.componentDidUpdate=function(){Object.assign(t._sigPad,t._excludeOurProps())},t.getCanvas=function(){if(t._canvas===null)throw t.staticThis.refNullError;return t._canvas},t.getTrimmedCanvas=function(){var i=t.getCanvas(),d=document.createElement("canvas");return d.width=i.width,d.height=i.height,d.getContext("2d").drawImage(i,0,0),gt(d)},t.getSignaturePad=function(){if(t._sigPad===null)throw t.staticThis.refNullError;return t._sigPad},t._checkClearOnResize=function(){t.props.clearOnResize&&t._resizeCanvas()},t._resizeCanvas=function(){var i,d,s=(i=t.props.canvasProps)!==null&&i!==void 0?i:{},h=s.width,f=s.height;if(!(typeof h<"u"&&typeof f<"u")){var m=t.getCanvas(),g=Math.max((d=window.devicePixelRatio)!==null&&d!==void 0?d:1,1);typeof h>"u"&&(m.width=m.offsetWidth*g),typeof f>"u"&&(m.height=m.offsetHeight*g),m.getContext("2d").scale(g,g),t.clear()}},t.render=function(){var i=t.props.canvasProps;return H.createElement("canvas",k({ref:t.setRef},i))},t.on=function(){return window.addEventListener("resize",t._checkClearOnResize),t.getSignaturePad().on()},t.off=function(){return window.removeEventListener("resize",t._checkClearOnResize),t.getSignaturePad().off()},t.clear=function(){return t.getSignaturePad().clear()},t.isEmpty=function(){return t.getSignaturePad().isEmpty()},t.fromDataURL=function(i,d){return t.getSignaturePad().fromDataURL(i,d)},t.toDataURL=function(i,d){return t.getSignaturePad().toDataURL(i,d)},t.fromData=function(i){return t.getSignaturePad().fromData(i)},t.toData=function(){return t.getSignaturePad().toData()},t}return ct(n)}(C.Component);T.propTypes={velocityFilterWeight:b.number,minWidth:b.number,maxWidth:b.number,minDistance:b.number,dotSize:b.oneOfType([b.number,b.func]),penColor:b.string,throttle:b.number,onEnd:b.func,onBegin:b.func,canvasProps:b.object,clearOnResize:b.bool};T.defaultProps={clearOnResize:!0};T.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");const yt=[{title:"E‑Signatures",href:"/settings/signatures"}];function ue(){const[e,r]=C.useState([]),[n,t]=C.useState(!1),[a,o]=C.useState(!1),[u,i]=C.useState("draw"),[d,s]=C.useState(!1),h=C.useRef(null);async function f(){s(!0);const c=await fetch("/api/signatures");c.ok&&r(await c.json()),s(!1)}C.useEffect(()=>{f()},[]);async function m(c){var w;if(!((w=c.target.files)!=null&&w[0]))return;t(!0);const p=new FormData;p.append("image",c.target.files[0]);const _=await fetch("/api/signatures",{method:"POST",body:p});t(!1),_.ok?(D.success("Signature uploaded!"),f()):D.error("Failed to upload signature.")}async function g(){var z;if(!h.current)return;const c=h.current.getCanvas(),p=c.toDataURL("image/png"),_=c.width,w=c.height,P="Drawn Signature",O=(z=document.querySelector('meta[name="csrf-token"]'))==null?void 0:z.content;t(!0);const I=await fetch("/api/signatures",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":O||""},body:JSON.stringify({image_base64:p,label:P,natural_width:_,natural_height:w})});t(!1),I.ok?(o(!1),h.current.clear(),D.success("Signature created!"),f()):D.error("Failed to save signature.")}async function y(c){s(!0);const p=await fetch(`/api/signatures/${c}/activate`,{method:"PATCH"});s(!1),p.ok?(D.success("Signature activated!"),f()):D.error("Failed to activate signature.")}function x(){if(h.current){const c=h.current.getCanvas(),p=c.getContext("2d");if(p){const w=c.height-80;p.save(),p.strokeStyle="#d1d5db",p.lineWidth=1,p.beginPath(),p.moveTo(40,w),p.lineTo(c.width-40,w),p.stroke(),p.restore()}}}return C.useEffect(()=>{a&&h.current&&(h.current.clear(),x())},[a]),l.jsxs(V,{breadcrumbs:yt,children:[l.jsx($,{title:"E‑Signatures"}),l.jsx(X,{children:l.jsxs("div",{className:"space-y-10",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx(Y,{title:"E‑Signatures",description:"Upload or draw your signature image."}),l.jsxs("div",{children:[l.jsx(S,{size:"sm",onClick:()=>o(!0),children:"Draw Signature"}),n&&l.jsx("span",{className:"ml-2 text-sm",children:"Uploading..."})]})]}),l.jsx("p",{className:"font-medium",children:"Active Signature"}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[e.map(c=>l.jsxs("div",{className:`border rounded p-3 flex flex-col items-center gap-2 bg-white ${c.active?"ring-2 ring-green-500":""}`,children:[l.jsx("img",{src:`/storage/${c.image_path}`,className:"max-h-24 object-contain"}),l.jsx(S,{size:"sm",variant:c.active?"secondary":"default",onClick:()=>y(c.id),children:c.active?"Active":"Set Active"})]},c.id)),!e.length&&l.jsx("p",{className:"text-sm col-span-full",children:"No signatures."})]}),l.jsx(G,{open:a,onOpenChange:o,children:l.jsxs(J,{className:"max-w-4xl w-full p-0",children:[l.jsxs("div",{className:"p-8 flex flex-col gap-6",children:[l.jsx(K,{children:l.jsx(Q,{className:"text-xl font-semibold mb-2",children:"Create Your Signature"})}),l.jsxs(Z,{value:u,onValueChange:c=>i(c),className:"w-full",children:[l.jsxs("div",{className:"flex items-center justify-between w-full",children:[l.jsxs(tt,{className:"flex gap-2",children:[l.jsxs(W,{value:"draw",className:"px-4 py-1 text-sm flex items-center gap-2",children:[l.jsx(et,{className:"w-4 h-4"})," Draw"]}),l.jsxs(W,{value:"upload",className:"px-4 py-1 text-sm flex items-center gap-2",children:[l.jsx(B,{className:"w-4 h-4"})," Upload"]})]}),u==="draw"&&l.jsxs(S,{size:"sm",variant:"secondary",className:"ml-4",onClick:()=>{var c;(c=h.current)==null||c.clear(),x()},children:[l.jsx(nt,{className:"w-4 h-4 inline"}),"Clear"]})]}),l.jsxs("div",{className:"w-full mt-4",children:[l.jsx(U,{value:"draw",className:"w-full flex flex-col justify-center items-center",children:l.jsx("div",{className:"w-full flex flex-col gap-2 items-center",children:l.jsx("div",{className:"flex justify-center w-full",children:l.jsx(T,{ref:h,penColor:"black",backgroundColor:"rgba(0,0,0,0)",canvasProps:{width:690,height:300,className:"border border-zinc-300 rounded bg-zinc-100 shadow-lg mx-auto",style:{cursor:"crosshair"}}})})})}),l.jsxs(U,{value:"upload",className:"w-full flex flex-col justify-center items-center",children:[l.jsxs("div",{className:"w-full h-[180px] border-2 border-dashed border-neutral-300 rounded flex flex-col items-center justify-center bg-neutral-50 cursor-pointer transition hover:border-primary",onDrop:c=>{var p;c.preventDefault(),(p=c.dataTransfer.files)!=null&&p[0]&&m({target:{files:c.dataTransfer.files}})},onDragOver:c=>c.preventDefault(),children:[l.jsx(B,{className:"w-8 h-8 mb-2 text-neutral-400"}),l.jsx("span",{className:"text-sm text-neutral-500 mb-2",children:"Drag & drop PNG here, or click to select"}),l.jsx("input",{id:"signature-upload",type:"file",accept:"image/png",onChange:m,className:"hidden"}),l.jsx(S,{size:"sm",variant:"outline",onClick:()=>{var c;return(c=document.getElementById("signature-upload"))==null?void 0:c.click()},children:"Browse"})]}),l.jsx("p",{className:"text-xs text-neutral-500 mt-2",children:"Upload transparent PNG (max 1MB)."})]})]})]}),l.jsxs("div",{className:"flex items-center justify-between w-full mt-4",children:[l.jsx("span",{className:"text-xs text-neutral-600",children:"I understand this is a legal representation of my signature."}),l.jsxs("div",{className:"flex gap-2",children:[u==="draw"&&l.jsx(S,{size:"sm",onClick:g,disabled:n,children:n?"Saving...":"Save Signature"}),l.jsx(S,{size:"sm",variant:"secondary",onClick:()=>o(!1),children:"Cancel"})]})]})]}),n&&l.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-70 flex items-center justify-center z-50 rounded-lg",children:l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsxs("svg",{className:"animate-spin h-8 w-8 text-primary mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]}),l.jsx("span",{className:"text-sm text-primary",children:"Saving signature..."})]})})]})})]})})]})}export{ue as default};
