import{K as E,r as l,j as e,R as q}from"./app-BAKMM9W6.js";import M from"./pending-defense-request-widget-DK9T70Nj.js";import F from"./weekly-defense-schedule-widget-Csr2IZH9.js";import L from"./quick-actions-widget-DxpEMJ3P.js";import{C as g,c as h}from"./card-DwLtnUhU.js";import{B as j}from"./button-CVeIta7K.js";import{S as c}from"./skeleton-tKFykgei.js";import B from"./defense-count-DGWHM4SK.js";import{T as H,a as W,b as v,c as b}from"./tabs-DJFs2CDd.js";import{StudentsPerProgramBarChart as _}from"./students-per-program-count-naMttDEV.js";import{NumberOfStudentsLineChart as U}from"./number-of-students-line-chart-BqeLhOMT.js";import{U as V}from"./users-t5r6UxGv.js";import{C as O}from"./calendar-days-6cPOye_8.js";import{C as w}from"./clipboard-list-BeCyxD2L.js";import{B as Y}from"./badge-dollar-sign-Ciqfzy1N.js";import{S as K,M as Q}from"./sun-D0NfJtcj.js";import"./graduation-cap-CyBvkmsT.js";import"./createLucideIcon-BSNBS9Xz.js";import"./chevron-right-DZ7e7qvM.js";import"./constructNow-Chb2L4Vx.js";import"./en-US-BA9orzCf.js";import"./getRoundingMethod-Btu-7J5l.js";import"./parseISO-CbXPh3Al.js";import"./utils-jAU0Cazi.js";import"./calendar-X1sSFtzx.js";import"./format-HX8DKPSU.js";import"./isSameDay-DUlCFK42.js";import"./tooltip-B2Ch4P2D.js";import"./index-CUQ5MhIm.js";import"./index-CEqJL0NP.js";import"./floating-ui.react-dom-CqLEll0E.js";import"./user-round-BXdc0yRX.js";import"./settings-CXr5fuO8.js";import"./receipt-Ze_0gq-C.js";import"./book-open-FnWChekc.js";import"./index-DZZQifJx.js";import"./generateCategoricalChart-CSROjKlA.js";import"./index-Ccrh7NPZ.js";import"./index-Chjiymov.js";import"./YAxis-CUr6tmIQ.js";import"./chart-DKVxUPLT.js";import"./trending-up-FSP76S9w.js";function G(){return new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function I(){const t=new Date().getHours();return t>=6&&t<18}function J(t){const a=new Set;let i=0;return t.forEach(n=>{Array.isArray(n.panelists)&&n.panelists.forEach(r=>{r!=null&&r.id&&(a.add(r.id),i++)})}),{totalPanelists:a.size,assignedPanelists:i}}function X(t){const a=new Date;return t.filter(i=>{if(!i.scheduled_date)return!1;const n=new Date(i.scheduled_date);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()&&n.getDate()===a.getDate()}).length}function Ve(){const{auth:{user:t}}=E().props,[a,i]=l.useState([]),[n,r]=l.useState([]),[Z,x]=l.useState([]),[m,y]=l.useState(!0),[N,u]=l.useState(0),[$,f]=l.useState(0),[D,S]=l.useState(new Date().getDay()),k=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];l.useEffect(()=>{fetch("/defense-requests",{headers:{Accept:"application/json"}}).then(s=>{if(!s.ok)throw new Error("Failed");return s.json()}).then(s=>{const o=Array.isArray(s)?s:s.defenseRequests??[];i(o);const A=o.filter(d=>(d.normalized_status||d.status)==="Pending");r(A);const R=new Date,T=o.filter(d=>{if(!d.scheduled_date)return!1;const p=(new Date(d.scheduled_date).getTime()-R.getTime())/(1e3*60*60*24);return p>=0&&p<3});x(T)}).catch(()=>{i([]),r([]),x([])}).finally(()=>y(!1)),fetch("/api/panelists/count",{headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():{count:0}).then(s=>{u(s.count??0)}).catch(()=>u(0)),fetch("/api/assigned-panelists/count",{headers:{Accept:"application/json"}}).then(s=>s.ok?s.json():{assignedPanelists:0}).then(s=>{f(s.assignedPanelists??0)}).catch(()=>f(0))},[]);const{assignedPanelists:z}=J(a),P=X(a),C=[{title:"Panelists Assignment",value:e.jsxs("span",{children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:z}),e.jsxs("span",{className:"text-base font-semibold text-gray-400 dark:text-gray-500 ml-1",children:["/ ",N]})]}),description:"Panelists assigned",icon:e.jsx(V,{className:"size-7"})},{title:"Today's Schedules",value:P,description:"Defenses scheduled for today",icon:e.jsx(O,{className:"size-7"})},{title:"Pending Defense Requests",value:n.length,description:"Awaiting coordinator action",icon:e.jsx(w,{className:"size-7"})},{title:"Pending Honorariums",value:7,description:"Honorariums not yet processed",icon:e.jsx(Y,{className:"size-7"})}];return e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-auto bg-white dark:bg-background",children:m?e.jsxs("div",{className:"w-full min-h-[70vh] bg-zinc-100 dark:bg-zinc-900 flex flex-col gap-4 p-0 m-0",children:[e.jsx(c,{className:"h-6 w-1/6 rounded bg-zinc-300 dark:bg-zinc-800 mt-8 mx-8"}),e.jsx(c,{className:"h-12 w-3/4 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(c,{className:"h-12 w-2/3 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(c,{className:"h-[500px] w-full rounded bg-zinc-300 dark:bg-zinc-800 mt-4"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-7 mt-3 pt-3 flex flex-row justify-between items-center relative overflow-hidden",style:{minHeight:"120px"},children:[e.jsxs("div",{className:"flex flex-col pr-8 pl-7",children:[e.jsxs("span",{className:"flex items-center text-xs font-semibold text-gray-700 dark:text-gray-200 mb-1 relative z-10",children:[I()?e.jsx(K,{className:"mr-1 size-4 text-yellow-500"}):e.jsx(Q,{className:"mr-1 size-4 text-blue-500"}),G()]}),e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white relative z-10",children:["Hi, ",t==null?void 0:t.name,"!"]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 relative z-10",children:(t==null?void 0:t.role)??"Dean"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-px mx-4 bg-gray-300 dark:bg-gray-700 opacity-60"}),e.jsx("div",{className:"mr-8",children:e.jsx(L,{userRole:t==null?void 0:t.role})})]})]}),e.jsxs(H,{defaultValue:"overview",className:"w-full px-7",children:[e.jsxs(W,{className:"mb-4",children:[e.jsx(v,{value:"overview",children:"Overview"}),e.jsx(v,{value:"detailed",children:"Analytics"})]}),e.jsxs(b,{value:"overview",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 mb-6",children:[e.jsx(B,{}),C.slice(0,2).map((s,o)=>e.jsxs(g,{className:"col-span-1 rounded-2xl shadow-none border flex flex-col justify-between p-0 min-h-[220px]",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 pt-5",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:s.title}),e.jsx(j,{variant:"ghost",size:"sm",className:"text-sm font-semibold px-3 py-1",type:"button",children:"View More"})]}),e.jsxs("div",{className:"px-6",children:[e.jsx("div",{className:"text-3xl font-bold leading-tight",children:s.value}),e.jsx("div",{className:"text-sm mt-1 mb-2 text-muted-foreground",children:s.description})]}),e.jsx(h,{className:"flex-1 flex items-end w-full p-0",children:e.jsx("div",{className:"flex items-center justify-end w-full pr-6 pb-4",children:q.cloneElement(s.icon,{className:"text-rose-500 dark:text-rose-400 size-7"})})})]},o)),e.jsxs(g,{className:"col-span-1 rounded-2xl shadow-none border flex flex-col justify-between p-0 min-h-[220px]",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 pt-5",children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Pending Defense Requests"}),e.jsx(j,{variant:"ghost",size:"sm",className:"text-sm font-semibold px-3 py-1",type:"button",children:"View More"})]}),e.jsxs("div",{className:"px-6",children:[e.jsx("div",{className:"text-3xl font-bold leading-tight text-gray-900 dark:text-white",children:n.length}),e.jsx("div",{className:"text-sm mt-1 mb-2 text-muted-foreground",children:"Awaiting coordinator action"})]}),e.jsx(h,{className:"flex-1 flex items-end w-full p-0",children:e.jsx("div",{className:"flex items-center justify-end w-full pr-6 pb-4",children:e.jsx(w,{className:"text-rose-500 dark:text-rose-400 size-7"})})})]})]}),e.jsx("div",{className:"flex flex-col gap-6 bg-gray-100 dark:bg-muted ms-4 me-4 rounded-xl mt-2 mb-2 px-5 py-8",children:e.jsxs("div",{className:"w-full mb-2 flex flex-col md:flex-row gap-4",children:[e.jsx(F,{weekDays:k,selectedDay:D,setSelectedDay:S,approvedDefenses:a,referenceDate:new Date,loading:m}),e.jsx(M,{pendingRequests:n,loading:m})]})})]}),e.jsx(b,{value:"detailed",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(_,{}),e.jsx(U,{})]})})]})]})})}export{Ve as default};
