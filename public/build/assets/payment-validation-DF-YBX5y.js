import{r as f,j as e}from"./app-BubHmeqC.js";import{S as p}from"./separator-B1kTuyS6.js";import{B as h}from"./badge-dollar-sign-BSVEc7FB.js";import{X as j}from"./x-DS6n0ElR.js";import{F as g}from"./file-text-B1gFNyH7.js";import"./index-1EFpZ92o.js";import"./index-PQN_369Y.js";import"./utils-jAU0Cazi.js";import"./createLucideIcon-Biu-y2hB.js";function _({details:t,resolveFileUrl:x}){var c;const[d,m]=f.useState(!1),s=(c=t==null?void 0:t.attachments)!=null&&c.proof_of_payment?x(t.attachments.proof_of_payment):null;function u(r){return r?/\.(jpg|jpeg|png|gif|webp)$/i.test(r):!1}function a(r){if(r==null||r==="")return"—";const l=typeof r=="string"?parseFloat(r):r;return isNaN(l)?"—":`₱${l.toLocaleString(void 0,{minimumFractionDigits:2})}`}const n=(t==null?void 0:t.amount)??null,o=(t==null?void 0:t.expected_rate)??null,i=n!==null&&o!==null&&Number(n)===Number(o);return e.jsxs("div",{className:"rounded-xl border p-8 bg-white dark:bg-zinc-900 space-y-6",children:[e.jsxs("h2",{className:"text-medium font-medium flex items-center gap-2 mb-4",children:[e.jsx(h,{className:"h-5 w-5"})," Payment Validation"]}),e.jsx(p,{className:"mb-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Proof of Payment"}),s?u(s)?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:s,alt:"Proof of Payment",className:"rounded border object-cover w-32 h-32 cursor-pointer transition hover:scale-105",onClick:()=>m(!0),style:{objectFit:"cover"}}),d&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80",onClick:()=>m(!1),children:e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s,alt:"Proof of Payment Full",className:"max-w-[90vw] max-h-[90vh] rounded shadow-lg"}),e.jsx("button",{className:"absolute top-2 right-2 bg-white/80 rounded-full p-1",onClick:r=>{r.stopPropagation(),m(!1)},children:e.jsx(j,{className:"h-5 w-5 text-black"})})]})})]}):e.jsxs("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 rounded-md border bg-white dark:bg-zinc-900 hover:bg-muted transition w-fit",children:[e.jsx(g,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Download"}),e.jsx("span",{className:"text-xs text-muted-foreground ml-2 truncate max-w-[180px]",children:s.split("/").pop()})]}):e.jsx("span",{className:"text-muted-foreground text-sm",children:"No file uploaded."})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Amount Paid"}),e.jsx("div",{className:"font-medium text-sm",children:a(n)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Expected Amount"}),e.jsxs("div",{className:`font-medium text-sm ${i?"text-green-700":"text-red-600"}`,children:[a(o),n!==null&&o!==null&&!i&&e.jsx("span",{className:"ml-2 text-xs text-red-600 font-semibold",children:"(Mismatch)"})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Reference No."}),e.jsx("div",{className:"font-medium text-sm",children:(t==null?void 0:t.reference_no)||"—"})]})]})}export{_ as default};
