import{K as N,r as a,j as e}from"./app-OOvd0qGy.js";import k from"./weekly-defense-schedule-widget-hQQZypoe.js";import S from"./quick-actions-widget-D28wCoFL.js";import z from"./immediate-action-defense-requests-widget-CCvn2Dws.js";import{C as D,a as C,b as q,c as R}from"./card-CMDgN0i6.js";import{S as r}from"./skeleton-bTWQssEl.js";import{C as E}from"./clipboard-list-DvS712Tz.js";import{C as T}from"./calendar-days-wo1nVefA.js";import{U as F}from"./users-EStqJIUY.js";import{S as W,M as A}from"./sun-Ch86N1Y-.js";import"./utils-jAU0Cazi.js";import"./calendar-h4nCOpBr.js";import"./createLucideIcon-Cvkj7Hkp.js";import"./chevron-right-BsU_TN8l.js";import"./graduation-cap-CCWiuwHf.js";import"./format-HX8DKPSU.js";import"./en-US-BA9orzCf.js";import"./isSameDay-DUlCFK42.js";import"./parseISO-CbXPh3Al.js";import"./tooltip-BFmjF_jJ.js";import"./index-DQ9rqnvl.js";import"./index-ChOW5_O6.js";import"./floating-ui.react-dom-BrG2AUyT.js";import"./user-round-gdLOB68d.js";import"./settings-BGemkvqC.js";import"./receipt-PJ839HEm.js";import"./badge-dollar-sign-B32tXB2N.js";import"./book-open-zOvnsNoh.js";function H(){return new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function L(){const t=new Date().getHours();return t>=6&&t<18}function xe(){const{auth:{user:t},studentsCount:d=0}=N().props,[c,m]=a.useState([]),[o,x]=a.useState([]),[p,u]=a.useState([]),[i,f]=a.useState(!0),[g,h]=a.useState(new Date().getDay()),b=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];a.useEffect(()=>{fetch("/adviser/defense-requests",{headers:{Accept:"application/json"}}).then(s=>s.json()).then(s=>{const l=s&&s.items?s.items:[];m(l);const v=l.filter(n=>{const w=(n.workflow_state||"").toLowerCase();return["","submitted","pending","adviser-pending","adviser-review"].includes(w)});x(v);const y=new Date().toISOString().slice(0,10);u(l.filter(n=>n.scheduled_date===y))}).catch(()=>{}).finally(()=>f(!1))},[]);const j=[{title:"Pending Defense Submissions",value:o.length,description:"Submitted requirements needing your review",icon:e.jsx(E,{className:"text-rose-500 size-7"})},{title:"Today's Schedules",value:p.length,description:"Events scheduled for today",icon:e.jsx(T,{className:"text-rose-500 size-7"})},{title:"Students",value:d,description:"Total students linked to you",icon:e.jsx(F,{className:"text-rose-500 size-7"})}];return e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-auto bg-white dark:bg-background",children:i?e.jsxs("div",{className:"w-full min-h-[70vh] bg-zinc-100 dark:bg-zinc-900 flex flex-col gap-4 p-0 m-0",children:[e.jsx(r,{className:"h-6 w-1/6 rounded bg-zinc-300 dark:bg-zinc-800 mt-8 mx-8"}),e.jsx(r,{className:"h-12 w-3/4 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(r,{className:"h-12 w-2/3 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(r,{className:"h-[500px] w-full rounded bg-zinc-300 dark:bg-zinc-800 mt-4"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-7 mt-5 flex flex-row justify-between items-center relative overflow-hidden",style:{minHeight:"120px"},children:[e.jsxs("div",{className:"flex flex-col pr-8 pl-7",children:[e.jsxs("span",{className:"flex items-center text-xs font-semibold text-gray-700 dark:text-gray-200 mb-1 relative z-10",children:[L()?e.jsx(W,{className:"mr-1 size-4 text-yellow-500"}):e.jsx(A,{className:"mr-1 size-4 text-blue-500"}),H()]}),e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white relative z-10",children:["Hi, ",t==null?void 0:t.name,"!"]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 relative z-10",children:(t==null?void 0:t.role)??"Faculty"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-px mx-4 bg-gray-300 dark:bg-gray-700 opacity-60"}),e.jsx("div",{className:"mr-8",children:e.jsx(S,{userRole:t==null?void 0:t.role})})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 px-7",children:j.map((s,l)=>e.jsxs(D,{className:"border border-1 bg-white dark:bg-muted rounded-xl shadow-none flex flex-row items-center min-h-[70px] py-4 px-5 w-full",children:[e.jsxs("div",{className:"flex flex-col justify-center flex-1",children:[e.jsx(C,{className:"pb-1 px-0",children:e.jsx(q,{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:s.title})}),e.jsxs(R,{className:"px-0 py-0",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white leading-tight",children:s.value}),e.jsx("div",{className:"text-[11px] text-gray-400 mt-0.5",children:s.description})]})]}),e.jsx("div",{className:"flex items-center justify-center ml-3 w-[40px] h-[40px]",children:s.icon})]},l))}),e.jsxs("div",{className:"flex flex-col gap-6 bg-gray-100 ms-4 me-4 rounded-xl mt-2 mb-2 px-5 py-8 dark:bg-zinc-900",children:[e.jsxs("div",{className:"w-full mb-2 flex flex-col md:flex-row gap-4",children:[e.jsx(z,{requests:o,loading:i}),e.jsx(k,{weekDays:b,selectedDay:g,setSelectedDay:h,approvedDefenses:c,referenceDate:new Date,loading:i})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2"})]})]})})}export{xe as default};
