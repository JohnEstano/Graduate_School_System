import{r as l,j as e,L as $}from"./app-BDkuJsct.js";import{A as H}from"./app-layout-Cr_DtTkJ.js";import{B as M}from"./button-DggClj9M.js";import{T as B,a as z,b as h,c as y,d as O,e as x}from"./table-CnA6sFiR.js";import{A as Q,a as U}from"./avatar-DpsgA3Kf.js";import{S as V}from"./search-input-BDV3126c.js";import q from"./panelist-individual-record-BWROr2hZ.js";import{C as G}from"./calendar-BhsmegxW.js";import{P as J,a as K,b as W}from"./popover-CxnVWzfd.js";import{c as X}from"./utils-jAU0Cazi.js";import{I as S}from"./input-BmPXXlp0.js";import{L as g}from"./label-MiJboLk1.js";import{C as Y}from"./calendar-CI-DWPmu.js";import{p as D}from"./parse-BrgCSArQ.js";import{f as o,i as C}from"./format-Cze4Gw5q.js";import"./index-B_a1aFVM.js";import"./index-DZZQifJx.js";import"./index-CWqpdCTP.js";import"./index-BhbofC_p.js";import"./index-D-bfryUZ.js";import"./x-CtfT_1vN.js";import"./createLucideIcon-CEmaZ7tj.js";import"./tooltip-CWM4FSMS.js";import"./floating-ui.react-dom-w0Q93DA2.js";import"./separator-DaKqQg6m.js";import"./index-LRezjsDo.js";import"./chevron-right-BpKiIXqV.js";import"./dropdown-menu-B7sOazTG.js";import"./index-DMsjTEK4.js";import"./index-BdhkuEJx.js";import"./index-BKBXBDOv.js";import"./index-QFmRa-KD.js";import"./check-BUlQxyEc.js";import"./settings-BITCJcnj.js";import"./users-BTr8E8QO.js";import"./graduation-cap-Cszrlop1.js";import"./file-text-rxgzo2tt.js";import"./dollar-sign-CSALIIUa.js";import"./send-9CEFXyiZ.js";import"./credit-card-CM3Zlvhr.js";import"./tabs-BOuSS6lC.js";import"./badge-BJdX7_A9.js";import"./circle-check-big-CKfkcUFR.js";import"./info-DwFda8kE.js";import"./sun-B3PIUh1_.js";import"./search-oqoQW3gm.js";import"./dialog-DeUj0iLU.js";import"./printer-CSDni_pD.js";import"./user-IY2-Ii15.js";import"./endOfWeek-BqBOMalL.js";import"./differenceInCalendarMonths-BlVIDW-K.js";import"./normalizeInterval-6lUcOLZ2.js";import"./endOfMonth-DvPI_8Ds.js";import"./isSameDay-DsAL-Hdb.js";import"./isSameMonth-C-hFGgGu.js";import"./chevron-down-DMxaecxw.js";const Z=[{title:"Honorarium Summary",href:"/honorarium"}];function st({record:n,panelists:k}){const P=k.map(t=>{const r=(t.students||[]).reduce((m,a)=>m+(a.payments||[]).reduce((p,u)=>p+Number(u.amount||0),0),0);return{...t,amount:r}}),[_,R]=l.useState(P),[j,T]=l.useState(""),[s,i]=l.useState(),[I,d]=l.useState(""),[L,c]=l.useState(""),[N,b]=l.useState(null),A=t=>{d(t);const r=D(t,"yyyy-MM-dd",new Date);C(r)&&i({from:r,to:s==null?void 0:s.to})},F=t=>{c(t);const r=D(t,"yyyy-MM-dd",new Date);C(r)&&i({from:s==null?void 0:s.from,to:r})},E=t=>{i(t),t!=null&&t.from?d(o(t.from,"yyyy-MM-dd")):d(""),t!=null&&t.to?c(o(t.to,"yyyy-MM-dd")):c("")},v=_.filter(t=>{const m=`${t.pfirst_name} ${t.pmiddle_name||""} ${t.plast_name}`.toLowerCase().includes(j.toLowerCase());if(s!=null&&s.from){const a=s.from,p=s.to||a,u=(t.students||[]).some(w=>{const f=w.defense_date?new Date(w.defense_date):null;return f?f>=a&&f<=p:!1});return m&&u}return m});return e.jsxs(H,{breadcrumbs:[...Z,{title:n.name,href:"#"}],children:[e.jsx($,{title:`Honorarium Summary - ${n.name}`}),e.jsxs("div",{className:"container mx-auto p-6 dark:bg-[#0a0a0a] min-h-screen",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:n.name}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[n.program," • ",n.category]})]})}),e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[e.jsx(V,{placeholder:"Search Panelist Name...",className:"w-full sm:w-1/3",value:j,onChange:t=>T(t.target.value)}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Filter:"}),e.jsxs(J,{children:[e.jsx(K,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:X("w-[280px] justify-start text-left font-normal",!s&&"text-muted-foreground"),children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),s!=null&&s.from?s.to?e.jsxs(e.Fragment,{children:[o(s.from,"MMM dd, yyyy")," -"," ",o(s.to,"MMM dd, yyyy")]}):o(s.from,"MMM dd, yyyy"):e.jsx("span",{children:"Pick a date range"})]})}),e.jsx(W,{className:"w-auto p-0",align:"start",children:e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(g,{htmlFor:"start-date",className:"text-xs font-medium text-muted-foreground",children:"From"}),e.jsx(S,{id:"start-date",type:"date",value:I,onChange:t=>A(t.target.value),className:"h-9 w-full",placeholder:"Start date"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(g,{htmlFor:"end-date",className:"text-xs font-medium text-muted-foreground",children:"To"}),e.jsx(S,{id:"end-date",type:"date",value:L,onChange:t=>F(t.target.value),className:"h-9 w-full",placeholder:"End date"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or select from calendar"})})]}),e.jsx(G,{mode:"range",defaultMonth:(s==null?void 0:s.from)||new Date,selected:s,onSelect:E,numberOfMonths:1,className:"rounded-md"}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[s!=null&&s.from?e.jsx("div",{className:"text-xs text-muted-foreground flex-1",children:s.to?e.jsxs("span",{className:"font-medium",children:[o(s.from,"MMM dd, yyyy")," - ",o(s.to,"MMM dd, yyyy")]}):e.jsx("span",{children:o(s.from,"MMM dd, yyyy")})}):e.jsx("div",{className:"text-xs text-muted-foreground",children:"No date selected"}),s&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{i(void 0),d(""),c("")},className:"h-8 px-2 text-xs",children:"Clear"})]})]})})]})]})]}),e.jsx("div",{id:"honorarium-details",className:"rounded-md border border-border bg-white dark:bg-[#121212] p-2 max-h-[68vh] overflow-y-auto",children:e.jsxs(B,{className:"min-w-full text-sm",children:[e.jsx(z,{className:"sticky top-0 bg-white dark:bg-[#121212] z-10 shadow-sm",children:e.jsxs(h,{children:[e.jsx(y,{className:"w-[50%] px-4 py-2",children:"Panelist Name"}),e.jsx(y,{className:"w-[25%] px-4 py-2 text-center",children:"Defense Date"}),e.jsx(y,{className:"w-[25%] px-4 py-2 text-center",children:"Receivable"})]})}),e.jsx(O,{children:v.length>0?v.map(t=>{const r=(t.students||[]).map(a=>a.defense_date?new Date(a.defense_date):null).filter(a=>a!==null),m=r.length>0?new Date(Math.max(...r.map(a=>a.getTime()))):null;return e.jsxs(h,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>b(t),children:[e.jsxs(x,{className:"flex items-center space-x-4 px-4 py-3",children:[e.jsx(Q,{className:"h-10 w-10 flex-shrink-0 bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300",children:e.jsx(U,{children:t.pfirst_name.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[t.pfirst_name," ",t.pmiddle_name||""," ",t.plast_name]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.role})]})]}),e.jsx(x,{className:"px-4 py-3 text-center",children:m?m.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"}),e.jsxs(x,{className:"px-4 py-3 text-center",children:["₱",t.amount.toLocaleString()]})]},t.id)}):e.jsx(h,{children:e.jsx(x,{colSpan:2,className:"h-24 text-center",children:"No panelists found."})})})]})})]}),N&&e.jsx(q,{panelist:N,onClose:()=>b(null)})]})}export{st as default};
