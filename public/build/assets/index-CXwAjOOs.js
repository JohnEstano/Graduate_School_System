import{K as L,r as o,j as e,L as E,S as f}from"./app-c5ij2Uy8.js";import{A as z}from"./app-layout-CoKXZjt7.js";import{B as h}from"./button-Bw6OnloJ.js";import{I as D}from"./input-CzpjdScL.js";import F from"./panelists-list-table-BJ_T7Qlz.js";import T from"./panelists-form-modal-RZ-H5_f5.js";import{T as B,t as a}from"./index-DQ8YIlvw.js";import{U}from"./users-pq8v5pDb.js";import{S as I}from"./search-m075N5SO.js";import{T as M}from"./trash-2-rjtEU3ND.js";import{C as q}from"./circle-check-big-REqj7tp6.js";import{C as O}from"./circle-x-CAYAF0N4.js";import{X}from"./x-b-iKzdpp.js";import"./index-C6aQ0K-7.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";import"./index-DMzRbVW9.js";import"./index-DQWsGEEw.js";import"./index-CQBUWWAm.js";import"./tooltip-83sBEdgp.js";import"./floating-ui.react-dom-Dei2gU0X.js";import"./createLucideIcon-QXbACLHs.js";import"./separator-D3p5J1Rh.js";import"./index-B09PGLNS.js";import"./chevron-right-Ck80R1L5.js";import"./dropdown-menu-BwXzysW_.js";import"./index-CV-6as2J.js";import"./index-bpbdPemA.js";import"./index-k7YYal9B.js";import"./settings-DxBpoil_.js";import"./chevrons-up-down-D9rV0uwe.js";import"./file-text-DKQ02F9u.js";import"./graduation-cap-tQeZTHqc.js";import"./credit-card-Dc2ElWmq.js";import"./badge-B7RMVcXi.js";import"./info-DAOKqyYD.js";import"./table-B_bp0TeV.js";import"./checkbox-CWSffrSs.js";import"./index-Dy381sfG.js";import"./check--NhZ1PHA.js";import"./dialog-BwPQxLPS.js";import"./label-BNkzA3Iq.js";import"./select-CdAxdG97.js";import"./chevron-down-DGQt6VpT.js";const $=[{title:"Dashboard",href:"/dashboard"},{title:"Panelists",href:"/panelists"}];function Fe(){const{panelists:b=[]}=L().props,[g,d]=o.useState(b),[n,c]=o.useState([]),[w,m]=o.useState(!1),[N,u]=o.useState(null),[j,y]=o.useState(""),[l,i]=o.useState(!1),[S,x]=o.useState(!1);o.useEffect(()=>{d(b)},[b]);const A=o.useMemo(()=>{const s=j.trim().toLowerCase();return s?g.filter(t=>t.name.toLowerCase().includes(s)||t.email.toLowerCase().includes(s)||t.status.toLowerCase().includes(s)):g},[j,g]);function C(s,t,r){x(!0),t?f.put(`/panelists/${t}`,s,{preserveScroll:!0,onSuccess:p=>{a.success("Panelist updated"),m(!1),u(null),d(Array.isArray(p.props.panelists)?p.props.panelists:[]),x(!1),r&&r()},onError:()=>{a.error("Failed to update panelist"),x(!1),r&&r()}}):f.post("/panelists",s,{preserveScroll:!0,onSuccess:p=>{a.success("Panelist added"),m(!1),u(null),d(Array.isArray(p.props.panelists)?p.props.panelists:[]),x(!1),r&&r()},onError:()=>{a.error("Failed to add panelist"),x(!1),r&&r()}})}function k(s){i(!0),f.delete(`/panelists/${s}`,{preserveScroll:!0,onSuccess:t=>{a.success("Panelist deleted"),c(r=>r.filter(p=>p!==s)),d(Array.isArray(t.props.panelists)?t.props.panelists:[]),i(!1)},onError:()=>{a.error("Failed to delete panelist"),i(!1)}})}function P(){n.length!==0&&window.confirm("Delete selected panelists?")&&(i(!0),f.post("/panelists/bulk-delete",{ids:n},{preserveScroll:!0,onSuccess:s=>{a.success("Panelists deleted"),c([]),d(Array.isArray(s.props.panelists)?s.props.panelists:[]),i(!1)},onError:()=>{a.error("Failed to bulk delete"),i(!1)}}))}function v(s){n.length!==0&&(i(!0),f.post("/panelists/bulk-status",{ids:n,status:s},{preserveScroll:!0,onSuccess:t=>{a.success("Panelists status updated"),c([]),d(Array.isArray(t.props.panelists)?t.props.panelists:[]),i(!1)},onError:()=>{a.error("Failed to update status"),i(!1)}}))}return e.jsxs(z,{breadcrumbs:$,children:[e.jsx(E,{title:"Panelists"}),e.jsx(B,{richColors:!0,position:"bottom-right"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-auto rounded-xl pt-5 pr-7 pl-7 relative",children:[e.jsxs("div",{className:"w-full bg-white border border-border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between w-full p-3 border-b bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-full bg-rose-500/10 border border-rose-500",children:e.jsx(U,{className:"h-5 w-5 text-rose-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:"Panelists"}),e.jsx("span",{className:"block text-xs text-muted-foreground",children:"This section shows all defense panelists. Add, search, and manage panelists."})]})]}),e.jsx(h,{onClick:()=>{m(!0),u(null)},disabled:S||l,children:S?"Loading...":"Add Panel"})]}),e.jsx("div",{className:"flex items-center px-4 py-3 border-b bg-white",children:e.jsx(D,{type:"text",startIcon:I,placeholder:"Search...",value:j,onChange:s=>y(s.target.value),className:"max-w-xs text-sm py-1 h-8",disabled:l})})]}),e.jsx(F,{panelists:A,onEdit:s=>{u(s),m(!0)},onDelete:k,selected:n,setSelected:c,loading:l}),n.length>0&&e.jsxs("div",{className:"fixed left-1/2 z-30 -translate-x-1/2 bottom-4 md:bottom-6 flex items-center gap-1 bg-white border border-border shadow-lg rounded-lg px-4 py-1 text-xs animate-in fade-in slide-in-from-bottom-2 dark:bg-muted dark:text-muted-foreground dark:border-border",children:[e.jsxs("span",{className:"font-semibold min-w-[70px] text-center",children:[n.length," selected"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(h,{variant:"ghost",size:"icon",className:"px-2 py-1 h-7 w-auto text-xs flex items-center gap-1",onClick:P,"aria-label":"Delete",disabled:l,children:[e.jsx(M,{size:13}),e.jsx("span",{className:"hidden sm:inline",children:l?"Deleting...":"Delete"})]}),e.jsxs(h,{variant:"ghost",size:"icon",className:"px-2 py-1 h-7 w-auto text-xs flex items-center gap-1",onClick:()=>v("Available"),"aria-label":"Set Available",disabled:l,children:[e.jsx(q,{size:13,className:"text-green-500"}),e.jsx("span",{className:"hidden sm:inline",children:l?"Updating...":"Set Available"})]}),e.jsxs(h,{variant:"ghost",size:"icon",className:"px-2 py-1 h-7 w-auto text-xs flex items-center gap-1",onClick:()=>v("Not Available"),"aria-label":"Set Not Available",disabled:l,children:[e.jsx(O,{size:13,className:"text-red-500"}),e.jsx("span",{className:"hidden sm:inline",children:l?"Updating...":"Set Not Available"})]}),e.jsx(h,{variant:"ghost",size:"icon",className:"px-1 py-1 h-7 w-auto text-xs flex items-center",onClick:()=>c([]),"aria-label":"Clear selection",children:e.jsx(X,{size:14})})]})]}),e.jsx(T,{open:w,editing:N,onClose:()=>{m(!1),u(null)},onSubmit:C,loading:S})]})]})}export{Fe as default};
