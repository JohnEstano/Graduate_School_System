import{K as w,r as a,j as e}from"./app-c5ij2Uy8.js";import D from"./reminders-widget-BdkcxMQ_.js";import b from"./upcomming-schedules-widget-DluQHeRx.js";import S from"./pending-defense-request-widget-D5wYJXqx.js";import N from"./weekly-defense-schedule-widget-FcVgnzbC.js";import k from"./quick-actions-widget-CIWsSLl7.js";import{S as q,M as R}from"./sun-C9b2snPL.js";import"./skeleton-CGx7kAgr.js";import"./utils-jAU0Cazi.js";import"./graduation-cap-tQeZTHqc.js";import"./createLucideIcon-QXbACLHs.js";import"./chevron-right-Ck80R1L5.js";import"./calendar-2wm08bbg.js";import"./format-C3S3_MiX.js";import"./isSameDay-BpBRZswP.js";import"./parseISO-Dx9MyA3S.js";import"./tooltip-83sBEdgp.js";import"./index-DQWsGEEw.js";import"./index-C6aQ0K-7.js";import"./floating-ui.react-dom-Dei2gU0X.js";import"./receipt-Cb46pmdQ.js";import"./settings-DxBpoil_.js";function E(){return new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function W(){const t=new Date().getHours();return t>=6&&t<18}function ee(){const{auth:{user:t}}=w().props,[c,o]=a.useState([]),[x,i]=a.useState([]),[u,d]=a.useState([]),[r,f]=a.useState(!0),[p,g]=a.useState(new Date().getDay()),h=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];return a.useEffect(()=>{fetch("/defense-requests",{headers:{Accept:"application/json"}}).then(s=>{if(!s.ok)throw new Error("Failed");return s.json()}).then(s=>{const n=Array.isArray(s)?s:s.defenseRequests??[];o(n);const v=n.filter(l=>(l.normalized_status||l.status)==="Pending");i(v);const y=new Date,j=n.filter(l=>{if(!l.scheduled_date)return!1;const m=(new Date(l.scheduled_date).getTime()-y.getTime())/(1e3*60*60*24);return m>=0&&m<3});d(j)}).catch(()=>{o([]),i([]),d([])}).finally(()=>f(!1))},[]),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-auto rounded-xl pt-5",children:[e.jsxs("div",{className:"mb-8 mt-3 flex flex-row justify-between items-center relative overflow-hidden",style:{minHeight:"120px"},children:[e.jsxs("div",{className:"flex flex-col pr-8 pl-7",children:[e.jsxs("span",{className:"flex items-center text-xs font-semibold text-gray-700 dark:text-gray-200 mb-1 relative z-10",children:[W()?e.jsx(q,{className:"mr-1 size-4 text-yellow-500"}):e.jsx(R,{className:"mr-1 size-4 text-blue-500"}),E()]}),e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white relative z-10",children:["Hi, ",t==null?void 0:t.name,"!"]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 relative z-10",children:(t==null?void 0:t.role)??"Student"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-px mx-4 bg-gray-300 dark:bg-gray-700 opacity-60"}),e.jsx(k,{})]})]}),e.jsxs("div",{className:"flex flex-col gap-6 bg-gray-100 ms-4 me-4 rounded-xl mt-2 mb-2 px-5 py-8",children:[e.jsxs("div",{className:"w-full mb-2 flex flex-col md:flex-row gap-4",children:[e.jsx(S,{pendingRequests:x,loading:r}),e.jsx(N,{weekDays:h,selectedDay:p,setSelectedDay:g,approvedDefenses:c,referenceDate:new Date,loading:r})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsx(D,{}),e.jsx(b,{loading:r,todayEvents:u})]})]})]})}export{ee as default};
