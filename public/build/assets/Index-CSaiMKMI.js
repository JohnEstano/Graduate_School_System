import{r as o,j as e,R as U,c as $e,K as vt,L as wt}from"./app-c5ij2Uy8.js";import{A as jt}from"./app-layout-CoKXZjt7.js";import{B as ve}from"./button-Bw6OnloJ.js";import{D as Nt,a as kt,b as yt,c as _t,d as Ct}from"./dialog-BwPQxLPS.js";import{d as H,C as St,a as Rt,b as At,r as It}from"./relativeTime-Bfo9Vxai.js";import zt from"./submit-defense-requirements-CnBfs7de.js";import{D as Pt,a as Dt,b as Tt,c as Re}from"./dropdown-menu-BwXzysW_.js";import"./index-DQWsGEEw.js";import{c as Ie}from"./index-C6aQ0K-7.js";import{c as Ue}from"./utils-jAU0Cazi.js";import{c as Et}from"./createLucideIcon-QXbACLHs.js";import{I as Mt}from"./input-CzpjdScL.js";import{G as Z}from"./graduation-cap-tQeZTHqc.js";import{C as Ot}from"./chevron-down-DGQt6VpT.js";import{X as K}from"./x-b-iKzdpp.js";import{C as W}from"./circle-check-big-REqj7tp6.js";import{C as Ft}from"./check--NhZ1PHA.js";import{P as we}from"./paperclip-BdB9cqmg.js";import{E as Lt}from"./ellipsis-vertical-CAvtD5in.js";import{C as ie}from"./calendar-2wm08bbg.js";import{H as ce}from"./hourglass-DW1qvNOb.js";import{U as de}from"./users-pq8v5pDb.js";import{E as Fe}from"./eye-D9zR09IO.js";import"./index-DZZQifJx.js";import"./index-DMzRbVW9.js";import"./index-CQBUWWAm.js";import"./tooltip-83sBEdgp.js";import"./floating-ui.react-dom-Dei2gU0X.js";import"./separator-D3p5J1Rh.js";import"./index-B09PGLNS.js";import"./chevron-right-Ck80R1L5.js";import"./index-CV-6as2J.js";import"./settings-DxBpoil_.js";import"./chevrons-up-down-D9rV0uwe.js";import"./file-text-DKQ02F9u.js";import"./credit-card-Dc2ElWmq.js";import"./badge-B7RMVcXi.js";import"./info-DAOKqyYD.js";import"./label-BNkzA3Iq.js";import"./Stepper-CGGLkoax.js";import"./index-bpbdPemA.js";import"./index-k7YYal9B.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ut=Et("Circle",$t);function G(r,s,{checkForDefaultPrevented:n=!0}={}){return function(a){if(r==null||r(a),n===!1||!a.defaultPrevented)return s==null?void 0:s(a)}}function Le(r,s){if(typeof r=="function")return r(s);r!=null&&(r.current=s)}function Yt(...r){return s=>{let n=!1;const t=r.map(a=>{const i=Le(a,s);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<t.length;a++){const i=t[a];typeof i=="function"?i():Le(r[a],null)}}}}function X(...r){return o.useCallback(Yt(...r),r)}function Ne(r,s=[]){let n=[];function t(i,d){const l=o.createContext(d),u=n.length;n=[...n,d];const m=h=>{var _;const{scope:g,children:b,...w}=h,v=((_=g==null?void 0:g[r])==null?void 0:_[u])||l,x=o.useMemo(()=>w,Object.values(w));return e.jsx(v.Provider,{value:x,children:b})};m.displayName=i+"Provider";function p(h,g){var v;const b=((v=g==null?void 0:g[r])==null?void 0:v[u])||l,w=o.useContext(b);if(w)return w;if(d!==void 0)return d;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[m,p]}const a=()=>{const i=n.map(d=>o.createContext(d));return function(l){const u=(l==null?void 0:l[r])||i;return o.useMemo(()=>({[`__scope${r}`]:{...l,[r]:u}}),[l,u])}};return a.scopeName=r,[t,Gt(a,...s)]}function Gt(...r){const s=r[0];if(r.length===1)return s;const n=()=>{const t=r.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const d=t.reduce((l,{useScope:u,scopeName:m})=>{const h=u(i)[`__scope${m}`];return{...l,...h}},{});return o.useMemo(()=>({[`__scope${s.scopeName}`]:d}),[d])}};return n.scopeName=s.scopeName,n}var Bt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],q=Bt.reduce((r,s)=>{const n=Ie(`Primitive.${s}`),t=o.forwardRef((a,i)=>{const{asChild:d,...l}=a,u=d?n:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...l,ref:i})});return t.displayName=`Primitive.${s}`,{...r,[s]:t}},{});function Kt(r){const s=r+"CollectionProvider",[n,t]=Ne(s),[a,i]=n(s,{collectionRef:{current:null},itemMap:new Map}),d=v=>{const{scope:x,children:_}=v,M=U.useRef(null),C=U.useRef(new Map).current;return e.jsx(a,{scope:x,itemMap:C,collectionRef:M,children:_})};d.displayName=s;const l=r+"CollectionSlot",u=Ie(l),m=U.forwardRef((v,x)=>{const{scope:_,children:M}=v,C=i(l,_),S=X(x,C.collectionRef);return e.jsx(u,{ref:S,children:M})});m.displayName=l;const p=r+"CollectionItemSlot",h="data-radix-collection-item",g=Ie(p),b=U.forwardRef((v,x)=>{const{scope:_,children:M,...C}=v,S=U.useRef(null),B=X(x,S),Y=i(p,_);return U.useEffect(()=>(Y.itemMap.set(S,{ref:S,...C}),()=>void Y.itemMap.delete(S))),e.jsx(g,{[h]:"",ref:B,children:M})});b.displayName=p;function w(v){const x=i(r+"CollectionConsumer",v);return U.useCallback(()=>{const M=x.collectionRef.current;if(!M)return[];const C=Array.from(M.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((Y,J)=>C.indexOf(Y.ref.current)-C.indexOf(J.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:d,Slot:m,ItemSlot:b},w,t]}var ue=globalThis!=null&&globalThis.document?o.useLayoutEffect:()=>{},Wt=$e[" useId ".trim().toString()]||(()=>{}),Vt=0;function Ht(r){const[s,n]=o.useState(Wt());return ue(()=>{n(t=>t??String(Vt++))},[r]),s?`radix-${s}`:""}function Xt(r){const s=o.useRef(r);return o.useEffect(()=>{s.current=r}),o.useMemo(()=>(...n)=>{var t;return(t=s.current)==null?void 0:t.call(s,...n)},[])}var Jt=$e[" useInsertionEffect ".trim().toString()]||ue;function Ye({prop:r,defaultProp:s,onChange:n=()=>{},caller:t}){const[a,i,d]=Qt({defaultProp:s,onChange:n}),l=r!==void 0,u=l?r:a;{const p=o.useRef(r!==void 0);o.useEffect(()=>{const h=p.current;h!==l&&console.warn(`${t} is changing from ${h?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=l},[l,t])}const m=o.useCallback(p=>{var h;if(l){const g=Zt(p)?p(r):p;g!==r&&((h=d.current)==null||h.call(d,g))}else i(p)},[l,r,i,d]);return[u,m]}function Qt({defaultProp:r,onChange:s}){const[n,t]=o.useState(r),a=o.useRef(n),i=o.useRef(s);return Jt(()=>{i.current=s},[s]),o.useEffect(()=>{var d;a.current!==n&&((d=i.current)==null||d.call(i,n),a.current=n)},[n,a]),[n,t,i]}function Zt(r){return typeof r=="function"}var qt=o.createContext(void 0);function Ge(r){const s=o.useContext(qt);return r||s||"ltr"}var Ae="rovingFocusGroup.onEntryFocus",er={bubbles:!1,cancelable:!0},me="RovingFocusGroup",[ze,Be,tr]=Kt(me),[rr,Ke]=Ne(me,[tr]),[sr,nr]=rr(me),We=o.forwardRef((r,s)=>e.jsx(ze.Provider,{scope:r.__scopeRovingFocusGroup,children:e.jsx(ze.Slot,{scope:r.__scopeRovingFocusGroup,children:e.jsx(or,{...r,ref:s})})}));We.displayName=me;var or=o.forwardRef((r,s)=>{const{__scopeRovingFocusGroup:n,orientation:t,loop:a=!1,dir:i,currentTabStopId:d,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:m,preventScrollOnEntryFocus:p=!1,...h}=r,g=o.useRef(null),b=X(s,g),w=Ge(i),[v,x]=Ye({prop:d,defaultProp:l??null,onChange:u,caller:me}),[_,M]=o.useState(!1),C=Xt(m),S=Be(n),B=o.useRef(!1),[Y,J]=o.useState(0);return o.useEffect(()=>{const O=g.current;if(O)return O.addEventListener(Ae,C),()=>O.removeEventListener(Ae,C)},[C]),e.jsx(sr,{scope:n,orientation:t,dir:w,loop:a,currentTabStopId:v,onItemFocus:o.useCallback(O=>x(O),[x]),onItemShiftTab:o.useCallback(()=>M(!0),[]),onFocusableItemAdd:o.useCallback(()=>J(O=>O+1),[]),onFocusableItemRemove:o.useCallback(()=>J(O=>O-1),[]),children:e.jsx(q.div,{tabIndex:_||Y===0?-1:0,"data-orientation":t,...h,ref:b,style:{outline:"none",...r.style},onMouseDown:G(r.onMouseDown,()=>{B.current=!0}),onFocus:G(r.onFocus,O=>{const pe=!B.current;if(O.target===O.currentTarget&&pe&&!_){const ee=new CustomEvent(Ae,er);if(O.currentTarget.dispatchEvent(ee),!ee.defaultPrevented){const te=S().filter(f=>f.focusable),ye=te.find(f=>f.active),fe=te.find(f=>f.id===v),c=[ye,fe,...te].filter(Boolean).map(f=>f.ref.current);Xe(c,p)}}B.current=!1}),onBlur:G(r.onBlur,()=>M(!1))})})}),Ve="RovingFocusGroupItem",He=o.forwardRef((r,s)=>{const{__scopeRovingFocusGroup:n,focusable:t=!0,active:a=!1,tabStopId:i,children:d,...l}=r,u=Ht(),m=i||u,p=nr(Ve,n),h=p.currentTabStopId===m,g=Be(n),{onFocusableItemAdd:b,onFocusableItemRemove:w,currentTabStopId:v}=p;return o.useEffect(()=>{if(t)return b(),()=>w()},[t,b,w]),e.jsx(ze.ItemSlot,{scope:n,id:m,focusable:t,active:a,children:e.jsx(q.span,{tabIndex:h?0:-1,"data-orientation":p.orientation,...l,ref:s,onMouseDown:G(r.onMouseDown,x=>{t?p.onItemFocus(m):x.preventDefault()}),onFocus:G(r.onFocus,()=>p.onItemFocus(m)),onKeyDown:G(r.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){p.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const _=cr(x,p.orientation,p.dir);if(_!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let C=g().filter(S=>S.focusable).map(S=>S.ref.current);if(_==="last")C.reverse();else if(_==="prev"||_==="next"){_==="prev"&&C.reverse();const S=C.indexOf(x.currentTarget);C=p.loop?dr(C,S+1):C.slice(S+1)}setTimeout(()=>Xe(C))}}),children:typeof d=="function"?d({isCurrentTabStop:h,hasTabStop:v!=null}):d})})});He.displayName=Ve;var ar={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function ir(r,s){return s!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function cr(r,s,n){const t=ir(r.key,n);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(t))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(t)))return ar[t]}function Xe(r,s=!1){const n=document.activeElement;for(const t of r)if(t===n||(t.focus({preventScroll:s}),document.activeElement!==n))return}function dr(r,s){return r.map((n,t)=>r[(s+t)%r.length])}var lr=We,ur=He;function mr(r){const[s,n]=o.useState(void 0);return ue(()=>{if(r){n({width:r.offsetWidth,height:r.offsetHeight});const t=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let d,l;if("borderBoxSize"in i){const u=i.borderBoxSize,m=Array.isArray(u)?u[0]:u;d=m.inlineSize,l=m.blockSize}else d=r.offsetWidth,l=r.offsetHeight;n({width:d,height:l})});return t.observe(r,{box:"border-box"}),()=>t.unobserve(r)}else n(void 0)},[r]),s}function pr(r){const s=o.useRef({value:r,previous:r});return o.useMemo(()=>(s.current.value!==r&&(s.current.previous=s.current.value,s.current.value=r),s.current.previous),[r])}function fr(r,s){return o.useReducer((n,t)=>s[n][t]??n,r)}var Je=r=>{const{present:s,children:n}=r,t=xr(s),a=typeof n=="function"?n({present:t.isPresent}):o.Children.only(n),i=X(t.ref,br(a));return typeof n=="function"||t.isPresent?o.cloneElement(a,{ref:i}):null};Je.displayName="Presence";function xr(r){const[s,n]=o.useState(),t=o.useRef(null),a=o.useRef(r),i=o.useRef("none"),d=r?"mounted":"unmounted",[l,u]=fr(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const m=je(t.current);i.current=l==="mounted"?m:"none"},[l]),ue(()=>{const m=t.current,p=a.current;if(p!==r){const g=i.current,b=je(m);r?u("MOUNT"):b==="none"||(m==null?void 0:m.display)==="none"?u("UNMOUNT"):u(p&&g!==b?"ANIMATION_OUT":"UNMOUNT"),a.current=r}},[r,u]),ue(()=>{if(s){let m;const p=s.ownerDocument.defaultView??window,h=b=>{const v=je(t.current).includes(CSS.escape(b.animationName));if(b.target===s&&v&&(u("ANIMATION_END"),!a.current)){const x=s.style.animationFillMode;s.style.animationFillMode="forwards",m=p.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=x)})}},g=b=>{b.target===s&&(i.current=je(t.current))};return s.addEventListener("animationstart",g),s.addEventListener("animationcancel",h),s.addEventListener("animationend",h),()=>{p.clearTimeout(m),s.removeEventListener("animationstart",g),s.removeEventListener("animationcancel",h),s.removeEventListener("animationend",h)}}else u("ANIMATION_END")},[s,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:o.useCallback(m=>{t.current=m?getComputedStyle(m):null,n(m)},[])}}function je(r){return(r==null?void 0:r.animationName)||"none"}function br(r){var t,a;let s=(t=Object.getOwnPropertyDescriptor(r.props,"ref"))==null?void 0:t.get,n=s&&"isReactWarning"in s&&s.isReactWarning;return n?r.ref:(s=(a=Object.getOwnPropertyDescriptor(r,"ref"))==null?void 0:a.get,n=s&&"isReactWarning"in s&&s.isReactWarning,n?r.props.ref:r.props.ref||r.ref)}var Pe="Radio",[hr,Qe]=Ne(Pe),[gr,vr]=hr(Pe),Ze=o.forwardRef((r,s)=>{const{__scopeRadio:n,name:t,checked:a=!1,required:i,disabled:d,value:l="on",onCheck:u,form:m,...p}=r,[h,g]=o.useState(null),b=X(s,x=>g(x)),w=o.useRef(!1),v=h?m||!!h.closest("form"):!0;return e.jsxs(gr,{scope:n,checked:a,disabled:d,children:[e.jsx(q.button,{type:"button",role:"radio","aria-checked":a,"data-state":rt(a),"data-disabled":d?"":void 0,disabled:d,value:l,...p,ref:b,onClick:G(r.onClick,x=>{a||u==null||u(),v&&(w.current=x.isPropagationStopped(),w.current||x.stopPropagation())})}),v&&e.jsx(tt,{control:h,bubbles:!w.current,name:t,value:l,checked:a,required:i,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});Ze.displayName=Pe;var qe="RadioIndicator",et=o.forwardRef((r,s)=>{const{__scopeRadio:n,forceMount:t,...a}=r,i=vr(qe,n);return e.jsx(Je,{present:t||i.checked,children:e.jsx(q.span,{"data-state":rt(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:s})})});et.displayName=qe;var wr="RadioBubbleInput",tt=o.forwardRef(({__scopeRadio:r,control:s,checked:n,bubbles:t=!0,...a},i)=>{const d=o.useRef(null),l=X(d,i),u=pr(n),m=mr(s);return o.useEffect(()=>{const p=d.current;if(!p)return;const h=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(h,"checked").set;if(u!==n&&b){const w=new Event("click",{bubbles:t});b.call(p,n),p.dispatchEvent(w)}},[u,n,t]),e.jsx(q.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:l,style:{...a.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});tt.displayName=wr;function rt(r){return r?"checked":"unchecked"}var jr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ke="RadioGroup",[Nr,bs]=Ne(ke,[Ke,Qe]),st=Ke(),nt=Qe(),[kr,yr]=Nr(ke),ot=o.forwardRef((r,s)=>{const{__scopeRadioGroup:n,name:t,defaultValue:a,value:i,required:d=!1,disabled:l=!1,orientation:u,dir:m,loop:p=!0,onValueChange:h,...g}=r,b=st(n),w=Ge(m),[v,x]=Ye({prop:i,defaultProp:a??null,onChange:h,caller:ke});return e.jsx(kr,{scope:n,name:t,required:d,disabled:l,value:v,onValueChange:x,children:e.jsx(lr,{asChild:!0,...b,orientation:u,dir:w,loop:p,children:e.jsx(q.div,{role:"radiogroup","aria-required":d,"aria-orientation":u,"data-disabled":l?"":void 0,dir:w,...g,ref:s})})})});ot.displayName=ke;var at="RadioGroupItem",it=o.forwardRef((r,s)=>{const{__scopeRadioGroup:n,disabled:t,...a}=r,i=yr(at,n),d=i.disabled||t,l=st(n),u=nt(n),m=o.useRef(null),p=X(s,m),h=i.value===a.value,g=o.useRef(!1);return o.useEffect(()=>{const b=v=>{jr.includes(v.key)&&(g.current=!0)},w=()=>g.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",w),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",w)}},[]),e.jsx(ur,{asChild:!0,...l,focusable:!d,active:h,children:e.jsx(Ze,{disabled:d,required:i.required,checked:h,...u,...a,name:i.name,ref:p,onCheck:()=>i.onValueChange(a.value),onKeyDown:G(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:G(a.onFocus,()=>{var b;g.current&&((b=m.current)==null||b.click())})})})});it.displayName=at;var _r="RadioGroupIndicator",ct=o.forwardRef((r,s)=>{const{__scopeRadioGroup:n,...t}=r,a=nt(n);return e.jsx(et,{...a,...t,ref:s})});ct.displayName=_r;var dt=ot,lt=it,Cr=ct;const ut=o.forwardRef(({className:r,...s},n)=>e.jsx(dt,{className:Ue("grid gap-2",r),...s,ref:n}));ut.displayName=dt.displayName;const le=o.forwardRef(({className:r,...s},n)=>e.jsx(lt,{ref:n,className:Ue("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...s,children:e.jsx(Cr,{className:"flex items-center justify-center",children:e.jsx(Ut,{className:"h-2.5 w-2.5 fill-current text-current"})})}));le.displayName=lt.displayName;H.extend(It);const Sr=[{title:"Dashboard",href:"/dashboard"},{title:"Defense Requirements",href:"/defense-requirements"}];function hs(){const{props:r}=vt(),{defenseRequirements:s=[],defenseRequest:n}=r,[t,a]=o.useState(n||null),[i,d]=o.useState(H().format("h:mm A")),u=!!t&&!new Set(["cancelled","adviser-rejected","coordinator-rejected","completed"]).has((t.workflow_state||"").toLowerCase()),[m,p]=o.useState(!1),[h,g]=o.useState(!1),[b,w]=o.useState(!1),[v,x]=o.useState(""),[_,M]=o.useState(""),[C,S]=o.useState(null),[B,Y]=o.useState(!1),[J,O]=o.useState(null),pe=["submitted","adviser-approved","coordinator-approved","panels-assigned","scheduled","completed"];function ee(c){if(!c)return null;const f=c.toLowerCase();return f==="submitted"||f==="adviser-review"?"submitted":f==="adviser-approved"||f==="coordinator-review"?"adviser-approved":f==="coordinator-approved"?"coordinator-approved":f==="panels-assigned"||f==="panel-assigned"?"panels-assigned":f==="scheduled"?"scheduled":f==="completed"?"completed":null}function te(c){if(!c)return 0;if(c.panels_assigned_at&&!["panels-assigned","scheduled","completed"].includes(c.workflow_state||""))return pe.indexOf("panels-assigned");const f=ee(c.workflow_state);return f?pe.indexOf(f):0}o.useEffect(()=>{if(!t)return;const c=setInterval(async()=>{try{const f=await fetch(`/api/defense-request/${t.id}`);if(f.ok){const j=await f.json();if(j.workflow_state!==t.workflow_state&&(a(j),d(H().format("h:mm A")),console.log("Defense request status updated:",j.workflow_state)),["adviser-rejected","coordinator-rejected"].includes(j.workflow_state)){const N=s.map(k=>k.thesis_title===j.thesis_title?{...k,status:"Rejected"}:k)}}}catch(f){console.error("Failed to poll defense request updates:",f)}},1e4);return()=>clearInterval(c)},[t==null?void 0:t.id,t==null?void 0:t.workflow_state]);function ye(){g(!0)}function fe(c,f){var N,k,E;if(!f)return((N=c.status)==null?void 0:N.toLowerCase())==="pending";const j=["pending","submitted","adviser-review"];return((k=c.status)==null?void 0:k.toLowerCase())==="cancelled"||f.thesis_title===c.thesis_title&&f.workflow_state==="cancelled"?!1:((E=c.status)==null?void 0:E.toLowerCase())==="pending"||f.thesis_title===c.thesis_title&&j.includes(f.workflow_state)}function De(c){const f=(c.workflow_state||"").toLowerCase();if((!t||t.thesis_title!==c.thesis_title)&&f==="completed")return{progress:100,title:"Defense Completed",description:"🎓 Congratulations! Your defense has been completed successfully.",color:"text-green-600",icon:e.jsx(Z,{className:"h-4 w-4 text-green-600"}),bg:"bg-green-50",progressColor:"bg-green-500"};if((!t||t.thesis_title!==c.thesis_title)&&f==="scheduled")return{progress:100,title:"Defense Scheduled",description:"Your defense has been scheduled. Prepare your presentation.",color:"text-green-600",icon:e.jsx(ie,{className:"h-4 w-4 text-green-600"}),bg:"bg-green-50",progressColor:"bg-green-500"};if((!t||t.thesis_title!==c.thesis_title)&&["adviser-rejected","coordinator-rejected"].includes(f))return{progress:100,title:f==="adviser-rejected"?"Rejected by Adviser":"Rejected by Coordinator",description:"This defense request was rejected. You may submit a new one after addressing feedback.",color:"text-red-600",icon:e.jsx(K,{className:"h-4 w-4 text-red-600"}),bg:"bg-red-50",progressColor:"bg-red-500"};let j=0,N="Submitted",k="Your defense requirements have been submitted and are awaiting review.",E="text-muted-foreground",F=e.jsx(ce,{className:"h-4 w-4 opacity-60"}),L="bg-secondary",A="bg-blue-500";if(t&&t.thesis_title===c.thesis_title&&t.school_id===r.auth.user.school_id){const re=t.workflow_state;switch(re){case"submitted":case"adviser-review":j=20,N="Under Adviser Review",k="Your defense requirements are currently being <b>reviewed by your Adviser</b>. You will be notified once the review is complete.",E="text-blue-600",F=e.jsx(Fe,{className:"h-4 w-4 text-blue-600"}),L="bg-blue-50",A="bg-blue-500";break;case"adviser-approved":case"coordinator-review":j=50,N="Approved by Adviser - Under Coordinator Review",k="Great! Your adviser has <b>approved</b> your defense requirements. The request is now being <b>reviewed by the Coordinator</b> for final approval and scheduling.",E="text-orange-600",F=e.jsx(W,{className:"h-4 w-4 text-orange-600"}),L="bg-orange-50",A="bg-orange-500";break;case"coordinator-approved":j=75,N="Approved - Panel Assignment in Progress",k="Excellent! Your defense request has been <b>approved by the Coordinator</b>. Defense panel members are currently being assigned.",E="text-green-600",F=e.jsx(de,{className:"h-4 w-4 text-green-600"}),L="bg-green-50",A="bg-green-500";break;case"scheduled":j=100,N="Defense Scheduled";const xe=t.defense_chairperson||"Chairperson not assigned",se=[t.defense_panelist1,t.defense_panelist2,t.defense_panelist3,t.defense_panelist4].filter(Boolean),ne=se.length?se.map((oe,Q)=>`<br/>• <b>${oe}</b> (Panelist ${Q+1})`).join(""):"<br/>• Panel members not yet assigned.";let $="";t.scheduled_date&&t.formatted_time_range?$=`<br/><br/><div class="mt-3 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                            <h4 class="font-semibold text-blue-800 mb-2">📅 Defense Schedule</h4>
                            <p><b>Date:</b> ${H(t.scheduled_date).format("MMMM D, YYYY")}</p>
                            <p><b>Time:</b> ${t.formatted_time_range}</p>
                            ${t.defense_venue?`<p><b>Venue:</b> ${t.defense_venue}</p>`:""}
                            ${t.defense_mode?`<p><b>Mode:</b> ${t.defense_mode}</p>`:""}
                        </div>`:t.date_of_defense&&($=`<br/><br/><div class="mt-3 p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                            <h4 class="font-semibold text-blue-800 mb-2">📅 Defense Schedule</h4>
                            <p><b>Date:</b> ${H(t.date_of_defense).format("MMMM D, YYYY")}</p>
                            <p><em>Time and venue details will be announced soon.</em></p>
                        </div>`),k=`🎉 <b>Congratulations!</b> Your defense has been fully scheduled and approved. 
                        <br/><br/><h4 class="font-semibold text-green-800 mb-2">👥 Defense Panel</h4>
                        • <b>${xe}</b> (Chairperson)${ne}${$}
                        <br/><br/><p class="text-sm text-gray-600 mt-3">💡 <b>Next Steps:</b> Prepare your defense presentation and materials. You will receive email notifications with additional details.</p>`,E="text-green-600",F=e.jsx(ie,{className:"h-4 w-4 text-green-600"}),L="bg-green-50",A="bg-green-500";break;case"adviser-rejected":j=100,N="Rejected by Adviser",k=`Your defense request has been <b>rejected by your Adviser</b>. 
                        ${t.adviser_comments?`<br/><br/><b>Feedback:</b> "${t.adviser_comments}"`:""}
                        <br/><br/>Please address the feedback and submit a new set of requirements if needed.`,E="text-red-600",F=e.jsx(K,{className:"h-4 w-4 text-red-600"}),L="bg-red-50",A="bg-red-500";break;case"coordinator-rejected":j=100,N="Rejected by Coordinator",k=`Your defense request has been <b>rejected by the Coordinator</b>. 
                        ${t.coordinator_comments?`<br/><br/><b>Feedback:</b> "${t.coordinator_comments}"`:""}
                        <br/><br/>Please address the feedback and resubmit if allowed.`,E="text-red-600",F=e.jsx(K,{className:"h-4 w-4 text-red-600"}),L="bg-red-50",A="bg-red-500";break;case"completed":j=100,N="Defense Completed",k="🎓 Congratulations! Your defense has been completed successfully.",E="text-green-600",F=e.jsx(Z,{className:"h-4 w-4 text-green-600"}),L="bg-green-50",A="bg-green-500";break;default:j=10,N="Processing",k="Your defense request is being processed. Current status: "+(t.workflow_state_display||re),E="text-gray-600",F=e.jsx(ce,{className:"h-4 w-4 text-gray-600"}),L="bg-gray-50",A="bg-gray-500";break}}return{progress:j,title:N,description:k,color:E,icon:F,bg:L,progressColor:A}}return e.jsxs(jt,{breadcrumbs:Sr,children:[e.jsx(wt,{title:"Defense Requirements"}),e.jsxs("div",{className:"flex flex-col px-7 pt-5 pb-5 w-full",children:[e.jsxs("div",{className:"w-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between w-full p-3 border-b border-zinc-200 dark:border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-full bg-rose-500/10 dark:bg-rose-500/20 border border-rose-500 dark:border-rose-700",children:e.jsx(Z,{className:"h-5 w-5 text-rose-400 dark:text-rose-300"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold dark:text-white",children:"Defense Requirements"}),e.jsx("p",{className:"block text-xs text-muted-foreground dark:text-zinc-400",children:"This sections shows all your submitted defense requirements and their current status."})]})]}),e.jsx(ve,{className:"bg-rose-500 text-sm px-5 rounded-md dark:bg-rose-600 disabled:opacity-60",onClick:()=>p(!0),disabled:u,title:u?"You already have an active defense workflow. Finish (or reach a terminal state) before submitting another.":"Submit new defense requirements",children:"Submit requirements"}),e.jsx(zt,{open:m,onOpenChange:p,onFinish:ye})]}),s.length===0?e.jsx("div",{className:"p-6 text-center text-sm text-muted-foreground dark:text-zinc-400",children:"No defense requirements submitted yet."}):[...s].sort((c,f)=>{const j=c.created_at?new Date(c.created_at).getTime():0;return(f.created_at?new Date(f.created_at).getTime():0)-j}).map(c=>{var Te;De(c);const f=J===c.id,j=c.created_at?H(c.created_at).fromNow():"Unknown",N=[{key:"submitted",label:"Submitted",icon:e.jsx(ce,{className:"w-4 h-4"})},{key:"adviser-approved",label:"Adviser Approved",icon:e.jsx(W,{className:"w-4 h-4"})},{key:"coordinator-approved",label:"Coordinator Approved",icon:e.jsx(W,{className:"w-4 h-4"})},{key:"panels-assigned",label:"Panels Assigned",icon:e.jsx(de,{className:"w-4 h-4"})},{key:"scheduled",label:"Scheduled",icon:e.jsx(ie,{className:"w-4 h-4"})},{key:"completed",label:"Completed",icon:e.jsx(Z,{className:"w-4 h-4"})}],k=t&&t.thesis_title===c.thesis_title?t:c.workflow_state?{workflow_state:c.workflow_state}:t,E=te(k),F=t==null?void 0:t.workflow_state,L=t?ee(F):null,A=!!t&&t.thesis_title===c.thesis_title&&["adviser-rejected","coordinator-rejected"].includes(t.workflow_state||""),re=A&&(t==null?void 0:t.workflow_state)==="coordinator-rejected",xe=A&&(t==null?void 0:t.workflow_state)==="adviser-rejected",se=re?t==null?void 0:t.coordinator_comments:xe?t==null?void 0:t.adviser_comments:null,ne=re?"Rejected by Coordinator":xe?"Rejected by Adviser":"Rejected",$=((Te=c.status)==null?void 0:Te.toLowerCase())==="cancelled"||t&&t.thesis_title===c.thesis_title&&t.workflow_state==="cancelled",oe=(c.workflow_state||"").toLowerCase(),Q=t&&t.thesis_title===c.thesis_title&&t.workflow_state==="completed"||oe==="completed";let I=0,R="Submitted",z=e.jsx(ce,{className:"h-4 w-4 opacity-60 dark:text-zinc-400"}),P="Submitted",D="Your defense requirements have been submitted and are awaiting review.",T="bg-secondary";const mt=t&&t.thesis_title===c.thesis_title&&t.school_id===r.auth.user.school_id,_e=(c.workflow_state||"").toLowerCase();if(!mt&&_e)switch(_e){case"completed":I=N.length-1,R="Defense Completed",z=e.jsx(Z,{className:"h-4 w-4 text-green-600"}),P="Defense Completed",T="bg-green-50",D="🎓 Congratulations! Your defense has been completed successfully.";break;case"scheduled":I=N.findIndex(y=>y.key==="scheduled"),R="Defense Scheduled",z=e.jsx(ie,{className:"h-4 w-4 text-green-600"}),P="Defense Scheduled",T="bg-green-50",D="Your defense has been scheduled. Prepare your presentation.";break;case"panels-assigned":I=N.findIndex(y=>y.key==="panels-assigned"),R="Panels Assigned",z=e.jsx(de,{className:"h-4 w-4 text-orange-600"}),P="Panels Assigned",T="bg-orange-50",D="Panel members have been assigned. Awaiting scheduling.";break;case"coordinator-approved":I=N.findIndex(y=>y.key==="coordinator-approved"),R="Coordinator Approved",z=e.jsx(W,{className:"h-4 w-4 text-green-600"}),P="Coordinator Approved",T="bg-green-50",D="Approved by Coordinator. Panel assignment in progress.";break;case"adviser-approved":I=N.findIndex(y=>y.key==="adviser-approved"),R="Adviser Approved",z=e.jsx(W,{className:"h-4 w-4 text-orange-600"}),P="Adviser Approved",T="bg-orange-50",D="Approved by Adviser. Awaiting Coordinator review.";break;case"adviser-rejected":case"coordinator-rejected":I=0,R=_e==="adviser-rejected"?"Rejected by Adviser":"Rejected by Coordinator",z=e.jsx(K,{className:"h-4 w-4 text-red-600"}),P=R,T="bg-red-50",D="This defense request was rejected. You may submit a new one after addressing feedback.";break}if($)I=0,R="Cancelled",z=e.jsx(K,{className:"h-4 w-4 text-red-600"}),P="Cancelled",T="bg-red-50",D="This submission was cancelled. You cannot make further changes to this request.";else if(A)I=0,R=ne,z=e.jsx(K,{className:"h-4 w-4 text-red-600"}),P=ne,T="bg-red-50",D=`
                                        <div class="space-y-2">
                                            <div>Your defense request has been <b>${ne.toLowerCase()}</b>.</div>
                                            ${se?`<div class="text-sm"><b>Feedback:</b> "${se}"</div>`:""}
                                            <div class="text-xs text-muted-foreground">
                                                Please address the feedback and, if allowed, submit a new set of requirements or updated documents.
                                            </div>
                                        </div>`;else if(t&&t.thesis_title===c.thesis_title&&t.school_id===r.auth.user.school_id){switch(L){case"submitted":I=0,R="Under Adviser Review",z=e.jsx(Fe,{className:"h-4 w-4 text-blue-600"}),P="Under Adviser Review",T="bg-blue-50",D="Your defense requirements are being reviewed by your Adviser.";break;case"adviser-approved":I=1,R="Adviser Approved",z=e.jsx(W,{className:"h-4 w-4 text-orange-600"}),P="Adviser Approved",T="bg-orange-50",D="Approved by Adviser. Awaiting Coordinator review.";break;case"coordinator-approved":I=2,R="Coordinator Approved",z=e.jsx(W,{className:"h-4 w-4 text-green-600"}),P="Coordinator Approved",T="bg-green-50",D="Approved by Coordinator. Panel assignment in progress.";break;case"panels-assigned":I=3,R="Panels Assigned",z=e.jsx(de,{className:"h-4 w-4 text-orange-600"}),P="Panels Assigned",T="bg-orange-50",D="Panel members have been assigned. Awaiting scheduling.";break;case"scheduled":I=4,R="Defense Scheduled",z=e.jsx(ie,{className:"h-4 w-4 text-green-600"}),P="Defense Scheduled",T="bg-green-50",D="Your defense has been scheduled. Prepare your presentation.";break;case"completed":I=5,R="Defense Completed",z=e.jsx(Z,{className:"h-4 w-4 text-green-600"}),P="Defense Completed",T="bg-green-50",D="🎓 Congratulations! Your defense has been completed successfully.";break;default:I=0,R="Processing",z=e.jsx(ce,{className:"h-4 w-4 text-gray-600"}),P="Processing",T="bg-gray-50",D="Your defense request is being processed."}!$&&(t!=null&&t.panels_assigned_at)&&I<3&&(I=3,R="Panels Assigned",z=e.jsx(de,{className:"h-4 w-4 text-orange-600"}),P="Panels Assigned",T="bg-orange-50",D="Panel members have been assigned (state update pending).")}const pt=!$&&!A&&!Q;return e.jsxs(U.Fragment,{children:[e.jsx("div",{className:"border-b border-zinc-200 dark:border-zinc-800 w-full"}),e.jsxs(St,{open:f,onOpenChange:y=>O(y?c.id:null),children:[e.jsx(Rt,{asChild:!0,children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 cursor-pointer bg-white dark:bg-zinc-900 hover:bg-zinc-50 dark:hover:bg-zinc-800 transition-colors",children:[e.jsx(Ot,{className:`transition-transform duration-200 h-4 w-4 text-muted-foreground dark:text-zinc-400 mr-3 ${f?"rotate-180":""}`}),e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[$||A?e.jsx(K,{className:"h-4 w-4 text-red-600"}):Q?e.jsx(W,{className:"h-4 w-4 text-green-600"}):U.cloneElement(z,{className:"h-4 w-4 text-muted-foreground dark:text-zinc-300"}),e.jsx("span",{className:`font-semibold text-xs ${$||A?"text-red-600":Q?"text-green-600":"text-muted-foreground dark:text-zinc-300"}`,children:R})]}),e.jsx("div",{className:"flex items-center w-64 justify-end",children:pt?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1"}),e.jsx("div",{className:"flex items-center gap-0",children:N.map((y,V)=>{const ae=V<=E?"bg-rose-500 text-white border-rose-500 dark:bg-rose-600 dark:border-rose-700":"bg-zinc-100 text-zinc-400 border-zinc-200 dark:bg-zinc-800 dark:text-zinc-500 dark:border-zinc-700";return e.jsxs(U.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:`rounded-full p-1 border ${ae}`,children:y.icon})}),V<N.length-1&&e.jsx("div",{className:`h-1 w-6 ${V<E?"bg-rose-500 dark:bg-rose-700":"bg-zinc-200 dark:bg-zinc-700"}`})]},y.key)})})]}):e.jsx("div",{className:"flex items-center justify-center",children:Q?e.jsx("div",{className:"rounded-full p-2 border bg-green-500 text-white border-green-500",children:e.jsx(Ft,{className:"w-4 h-4"})}):e.jsx("div",{className:"rounded-full p-2 border bg-red-500 text-white border-red-500",children:e.jsx(K,{className:"w-4 h-4"})})})})]})}),e.jsx(At,{children:e.jsxs("div",{className:"px-4 py-3",children:[e.jsxs("div",{className:"mb-3 p-3 rounded border bg-white dark:bg-zinc-900 border-zinc-200 dark:border-zinc-800 flex flex-col gap-2 rounded-md relative",children:[e.jsxs("div",{className:"flex flex-row gap-6 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-xs text-zinc-500 dark:text-zinc-400",children:"Thesis Title:"}),e.jsx("div",{className:"text-sm font-medium text-zinc-800 dark:text-white",children:c.thesis_title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-xs text-zinc-500 dark:text-zinc-400",children:"Student Name:"}),e.jsxs("div",{className:"text-sm text-zinc-800 dark:text-white",children:[c.first_name," ",c.last_name]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-xs text-zinc-500 dark:text-zinc-400",children:"Adviser:"}),e.jsx("div",{className:"text-sm text-zinc-800 dark:text-white",children:c.adviser})]})]}),e.jsxs("div",{className:"flex flex-row gap-2 mt-2 flex-wrap",children:[(t==null?void 0:t.manuscript_proposal)&&e.jsxs("a",{href:t.manuscript_proposal,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[e.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:e.jsx(we,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Manuscript"}),e.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:t.manuscript_proposal.split("/").pop()})]})]}),(t==null?void 0:t.similarity_index)&&e.jsxs("a",{href:t.similarity_index,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[e.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:e.jsx(we,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Similarity"}),e.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:t.similarity_index.split("/").pop()})]})]}),(t==null?void 0:t.rec_endorsement)&&e.jsxs("a",{href:t.rec_endorsement,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[e.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:e.jsx(we,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Endorsement"}),e.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:t.rec_endorsement.split("/").pop()})]})]}),(t==null?void 0:t.proof_of_payment)&&e.jsxs("a",{href:t.proof_of_payment,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-700 rounded-lg px-2 py-1 min-w-[120px] max-w-[180px] hover:bg-zinc-50 dark:hover:bg-zinc-800 transition truncate",style:{textDecoration:"none"},children:[e.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-lg border border-rose-500 dark:border-rose-700 bg-rose-500 dark:bg-rose-600",children:e.jsx(we,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"font-medium text-xs leading-tight truncate max-w-[100px] dark:text-white",children:"Payment"}),e.jsx("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 truncate max-w-[100px]",children:t.proof_of_payment.split("/").pop()})]})]})]}),t&&t.thesis_title===c.thesis_title&&e.jsxs("div",{className:"mt-2 w-full border border-zinc-200 dark:border-zinc-700 rounded-md p-3 bg-zinc-50 dark:bg-zinc-800/40",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide text-zinc-600 dark:text-zinc-300",children:"Defense Information"}),e.jsxs("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400",children:["State: ",t.workflow_state]})]}),(()=>{const y=t.workflow_state,V=t.defense_chairperson,be=t.defense_panelist1,ae=t.defense_panelist2,Ce=t.defense_panelist3,Se=t.defense_panelist4,Ee=[V,be,ae,Ce,Se].some(Boolean),he=t.scheduled_date?H(t.scheduled_date).format("MMMM D, YYYY"):null,ft=t.formatted_time_range?t.formatted_time_range:t.scheduled_time&&t.scheduled_end_time?`${t.scheduled_time} - ${t.scheduled_end_time}`:null,ge=t.defense_mode||t.mode_defense,Me=t.defense_venue,Oe=t.scheduling_notes,xt=e.jsx("div",{className:"text-[11px] text-zinc-600 dark:text-zinc-400",children:"Awaiting adviser review. No coordinator actions yet."}),bt=e.jsx("div",{className:"text-[11px] text-zinc-600 dark:text-zinc-400",children:"Adviser approved. Awaiting coordinator review / panel assignment."}),ht=e.jsx("div",{className:"text-[11px] text-zinc-600 dark:text-zinc-400",children:"Coordinator approved. Panel assignment pending."}),gt=e.jsx("div",{className:"text-[11px] text-zinc-600 dark:text-zinc-400",children:"Panel assigned. Scheduling in progress."});return["adviser-rejected","coordinator-rejected","cancelled"].includes(y)?e.jsxs("div",{className:"text-[11px] text-red-600",children:["No further defense information (request ",y.replace("-"," "),")."]}):e.jsxs("div",{className:"space-y-3",children:[["panels-assigned","scheduled","completed"].includes(y)&&Ee&&e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] font-semibold text-zinc-700 dark:text-zinc-300 mb-1",children:"Committee"}),e.jsxs("ul",{className:"pl-3 list-disc space-y-0.5",children:[V&&e.jsxs("li",{className:"text-[11px] text-zinc-700 dark:text-zinc-300",children:[e.jsx("b",{children:V})," (Chairperson)"]}),be&&e.jsxs("li",{className:"text-[11px] text-zinc-700 dark:text-zinc-300",children:[be," (Panelist 1)"]}),ae&&e.jsxs("li",{className:"text-[11px] text-zinc-700 dark:text-zinc-300",children:[ae," (Panelist 2)"]}),Ce&&e.jsxs("li",{className:"text-[11px] text-zinc-700 dark:text-zinc-300",children:[Ce," (Panelist 3)"]}),Se&&e.jsxs("li",{className:"text-[11px] text-zinc-700 dark:text-zinc-300",children:[Se," (Panelist 4)"]})]})]}),["scheduled","completed"].includes(y)&&e.jsxs("div",{className:"rounded-md border border-blue-200 dark:border-blue-600/40 bg-blue-50 dark:bg-blue-900/20 p-2.5",children:[e.jsx("div",{className:"text-[11px] font-semibold text-blue-700 dark:text-blue-300 mb-1",children:"Schedule"}),e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:[e.jsx("b",{children:"Date:"})," ",he||"TBD"]}),e.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:[e.jsx("b",{children:"Time:"})," ",ft||"TBD"]}),ge&&e.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:[e.jsx("b",{children:"Mode:"})," ",ge]}),Me&&e.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:[e.jsx("b",{children:"Venue:"})," ",Me]}),Oe&&e.jsxs("div",{className:"text-[11px] text-blue-800 dark:text-blue-200",children:[e.jsx("b",{children:"Notes:"})," ",Oe]})]})]}),["submitted","adviser-review"].includes(y)&&xt,["adviser-approved","coordinator-review"].includes(y)&&bt,y==="coordinator-approved"&&!Ee&&ht,y==="panels-assigned"&&!he&&gt,e.jsxs("div",{className:"pt-1 border-t border-dashed border-zinc-200 dark:border-zinc-700 mt-2 text-[10px] text-muted-foreground dark:text-zinc-500",children:["Last workflow state: ",y,he&&` • Scheduled for ${he}`,ge&&` • Mode: ${ge}`]})]})})()]}),e.jsxs("div",{className:"absolute right-3 top-2 flex items-center gap-2",children:[e.jsxs("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 whitespace-nowrap",children:["Submitted ",j]}),e.jsxs(Pt,{children:[e.jsx(Dt,{asChild:!0,children:e.jsx(ve,{variant:"outline",size:"icon",className:"h-6 w-6 p-0",disabled:!!$,children:e.jsx(Lt,{className:"h-4 w-4"})})}),e.jsxs(Tt,{align:"end",children:[e.jsx(Re,{disabled:!fe(c,t),onSelect:y=>{y.preventDefault(),fe(c,t)&&(S(c.id),x(""),M(""),w(!0))},children:"Unsubmit"}),e.jsx(Re,{children:"View Details"}),e.jsx(Re,{children:"Download"})]})]})]})]}),e.jsxs("div",{className:`flex flex-col ${T} dark:bg-zinc-900 p-3 rounded-md`,children:[e.jsx("div",{className:"flex items-center justify-between mb-1",children:e.jsx("span",{className:`font-semibold text-xs ${$||A?"text-red-600":"text-muted-foreground dark:text-zinc-300"}`,children:P})}),e.jsx("div",{className:"text-xs p-2 text-muted-foreground dark:text-zinc-400 space-y-2",dangerouslySetInnerHTML:{__html:D}}),e.jsx("div",{className:"flex flex-col items-end mt-4 gap-1",children:t&&e.jsxs("span",{className:"text-[10px] text-muted-foreground dark:text-zinc-400 whitespace-nowrap",children:["Last updated: ",i]})})]})]})})]})]},c.id)})]}),e.jsx(Nt,{open:b,onOpenChange:w,children:e.jsxs(kt,{children:[e.jsxs(yt,{children:[e.jsx(_t,{children:"Are you sure?"}),e.jsx(Ct,{children:"Please select a reason for unsubmission."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ut,{value:v,onValueChange:x,children:[e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(le,{value:"mistake",id:"reason-mistake"}),e.jsx("label",{htmlFor:"reason-mistake",className:"text-sm",children:"I made a mistake in filling up the forms"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(le,{value:"cancel",id:"reason-cancel"}),e.jsx("label",{htmlFor:"reason-cancel",className:"text-sm",children:"I'd like to just cancel the submission"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(le,{value:"outdated",id:"reason-outdated"}),e.jsx("label",{htmlFor:"reason-outdated",className:"text-sm",children:"The submission was outdated"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(le,{value:"other",id:"reason-other"}),e.jsx("label",{htmlFor:"reason-other",className:"text-sm",children:"Other..."})]})]}),v==="other"&&e.jsx(Mt,{placeholder:"Enter your reason",value:_,onChange:c=>M(c.target.value),className:"text-sm"}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[e.jsx(ve,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(ve,{disabled:B||!v||v==="other"&&!_,onClick:async()=>{var c,f;Y(!0);try{const j=((c=window.Laravel)==null?void 0:c.csrfToken)||((f=document.querySelector('meta[name="csrf-token"]'))==null?void 0:f.getAttribute("content")),N=await fetch(`/defense-requirements/${C}/unsubmit`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":j||""},body:JSON.stringify({reason:v==="other"?_:v,_token:j||""})});if(N.ok)w(!1),window.location.reload();else{let k={};try{k=await N.json()}catch{}alert(typeof k=="object"&&k!==null&&"message"in k?k.message:"Failed to unsubmit. You can only unsubmit requirements that are still pending or under adviser review.")}}catch{alert("Network error. Please try again.")}finally{Y(!1)}},children:"Submit"})]})]})]})})]})]})}export{hs as default};
