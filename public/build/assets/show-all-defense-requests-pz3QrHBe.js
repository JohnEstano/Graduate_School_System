import{r as x,j as e,S as B}from"./app-BDkuJsct.js";import{d as D}from"./dayjs.min-DvrApWfS.js";import{P as w,a as b,b as v}from"./popover-CxnVWzfd.js";import{I as E}from"./input-BmPXXlp0.js";import{T as O,a as I,b as N,c as m,d as Y,e as d}from"./table-CnA6sFiR.js";import{B as o}from"./button-DggClj9M.js";import{C as y}from"./checkbox-CR1JIwzI.js";import{B as C}from"./badge-BJdX7_A9.js";import{g as A}from"./program-abbreviations-BcvFCzIW.js";import{P as L}from"./paperclip-CfL61ESm.js";import{S as H}from"./search-oqoQW3gm.js";import{C as S}from"./circle-plus-C8aRXmTg.js";import{X as M}from"./x-CtfT_1vN.js";import"./index-BhbofC_p.js";import"./index-B_a1aFVM.js";import"./floating-ui.react-dom-w0Q93DA2.js";import"./index-D-bfryUZ.js";import"./utils-jAU0Cazi.js";import"./index-DZZQifJx.js";import"./index-LRezjsDo.js";import"./index-BdhkuEJx.js";import"./index-DMsjTEK4.js";import"./index-Dia2ik6c.js";import"./index-QFmRa-KD.js";import"./check-BUlQxyEc.js";import"./createLucideIcon-CEmaZ7tj.js";function _(c){const k=c.middle_name?`${c.middle_name[0].toUpperCase()}. `:"";return`${c.first_name} ${k}${c.last_name}`}function ge({defenseRequests:c=[],coordinator:k,title:F="All Defense Requirements",description:$="Review, approve, or reject defense requests from your advisees"}){const[p,P]=x.useState(""),[r,h]=x.useState([]),[a,u]=x.useState([]),[l,g]=x.useState([]),[f,j]=x.useState(!1),T=c.filter(s=>{var R;const t=_(s).toLowerCase(),i=((R=s.thesis_title)==null?void 0:R.toLowerCase())||"",z=p.toLowerCase();let n=t.includes(z)||i.includes(z);return r.length&&(n=n&&r.includes(s.adviser_status||"")),a.length&&(n=n&&a.includes(s.coordinator_status||"")),l.length&&(n=n&&l.includes(s.defense_type||"")),n});return e.jsxs("div",{className:"flex flex-col flex-1 w-full min-h-[90vh] gap-2  pr-3 pl-0 relative overflow-x-hidden",children:[e.jsxs("div",{className:"w-full bg-white dark:bg-zinc-900 border border-border rounded-lg overflow-hidden mb-2",children:[e.jsx("div",{className:"flex flex-row items-center justify-between w-full p-3 border-b border-border bg-white dark:bg-zinc-900",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-full bg-rose-500/10 dark:bg-rose-900/30 border border-rose-500 dark:border-rose-400",children:e.jsx(L,{className:"h-5 w-5 text-rose-400 dark:text-rose-300"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold text-zinc-900 dark:text-zinc-100",children:F}),e.jsx("span",{className:"block text-xs text-muted-foreground dark:text-zinc-400",children:$})]})]})}),e.jsx("div",{className:"flex items-center justify-between gap-2 px-4 py-3 border-b border-border bg-white dark:bg-zinc-900",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{type:"text",startIcon:H,placeholder:"Search...",value:p,onChange:s=>P(s.target.value),className:"max-w-xs text-sm h-8"}),e.jsxs(w,{open:f==="adviserStatus",onOpenChange:s=>j(s?"adviserStatus":!1),children:[e.jsx(b,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:"h-8 px-3 rounded-md border-dashed text-xs flex items-center gap-1",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),"Adviser Status",r.length>0&&e.jsx("span",{className:"ml-1 px-2 py-0.5 rounded-full text-xs bg-muted",children:r.length>1?`${r.length} selected`:r[0]})]})}),e.jsxs(v,{className:"w-44 p-1",side:"bottom",align:"start",children:[["Pending","Endorsed","Rejected"].map(s=>e.jsxs("div",{onClick:()=>h(t=>t.includes(s)?t.filter(i=>i!==s):[...t,s]),className:"flex items-center gap-2 p-2 rounded hover:bg-muted cursor-pointer",children:[e.jsx(y,{checked:r.includes(s)}),e.jsx("span",{className:"text-sm",children:s})]},s)),e.jsx(o,{size:"sm",variant:"ghost",className:"w-full mt-2",onClick:()=>h([]),children:"Clear"})]})]}),e.jsxs(w,{open:f==="coordinatorStatus",onOpenChange:s=>j(s?"coordinatorStatus":!1),children:[e.jsx(b,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:"h-8 px-3 rounded-md border-dashed text-xs flex items-center gap-1",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),"Coordinator Status",a.length>0&&e.jsx("span",{className:"ml-1 px-2 py-0.5 rounded-full text-xs bg-muted",children:a.length>1?`${a.length} selected`:a[0]})]})}),e.jsxs(v,{className:"w-44 p-1",side:"bottom",align:"start",children:[["Pending","Approved","Rejected"].map(s=>e.jsxs("div",{onClick:()=>u(t=>t.includes(s)?t.filter(i=>i!==s):[...t,s]),className:"flex items-center gap-2 p-2 rounded hover:bg-muted cursor-pointer",children:[e.jsx(y,{checked:a.includes(s)}),e.jsx("span",{className:"text-sm",children:s})]},s)),e.jsx(o,{size:"sm",variant:"ghost",className:"w-full mt-2",onClick:()=>u([]),children:"Clear"})]})]}),e.jsxs(w,{open:f==="type",onOpenChange:s=>j(s?"type":!1),children:[e.jsx(b,{asChild:!0,children:e.jsxs(o,{variant:"outline",className:"h-8 px-3 rounded-md border-dashed text-xs flex items-center gap-1",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),"Type",l.length>0&&e.jsx("span",{className:"ml-1 px-2 py-0.5 rounded-full text-xs bg-muted",children:l.length>1?`${l.length} selected`:l[0]})]})}),e.jsxs(v,{className:"w-44 p-1",side:"bottom",align:"start",children:[["Proposal","Prefinal","Final"].map(s=>e.jsxs("div",{onClick:()=>g(t=>t.includes(s)?t.filter(i=>i!==s):[...t,s]),className:"flex items-center gap-2 p-2 rounded hover:bg-muted cursor-pointer",children:[e.jsx(y,{checked:l.includes(s)}),e.jsx("span",{className:"text-sm",children:s})]},s)),e.jsx(o,{size:"sm",variant:"ghost",className:"w-full mt-2",onClick:()=>g([]),children:"Clear"})]})]}),(r.length>0||a.length>0||l.length>0||p.trim())&&e.jsxs(o,{variant:"ghost",size:"sm",className:"h-8 px-3 flex items-center gap-1",onClick:()=>{h([]),u([]),g([]),P("")},children:[e.jsx(M,{size:14})," Reset"]})]})})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-4 w-full min-h-0 overflow-x-hidden",children:e.jsx("div",{className:"flex flex-col w-full min-h-0 overflow-x-hidden",children:e.jsx("div",{className:"relative w-full max-w-full",children:e.jsx("div",{className:"w-full max-w-full",children:e.jsx("div",{className:"overflow-x-auto w-full rounded-md border border-border bg-background",children:e.jsxs(O,{className:"min-w-[900px] w-full text-sm table-auto",children:[e.jsx(I,{children:e.jsxs(N,{children:[e.jsx(m,{className:"px-3 py-2 min-w-[220px] whitespace-nowrap",children:"Thesis Title"}),e.jsx(m,{className:"px-3 py-2 min-w-[120px] whitespace-nowrap",children:"Presenter"}),e.jsx(m,{className:"px-3 py-2 min-w-[100px] whitespace-nowrap",children:"Program"}),e.jsx(m,{className:"px-3 py-2 min-w-[130px] text-center whitespace-nowrap",children:"Submitted"}),e.jsx(m,{className:"px-3 py-2 min-w-[120px] text-center whitespace-nowrap",children:"Adviser Status"}),e.jsx(m,{className:"px-3 py-2 min-w-[120px] text-center whitespace-nowrap",children:"Coordinator Status"})]})}),e.jsxs(Y,{children:[T.map(s=>e.jsxs(N,{className:"hover:bg-muted/40 cursor-pointer",onClick:()=>B.visit(`/adviser/defense-requirements/${s.id}/details`),children:[e.jsxs(d,{className:"px-3 py-2 font-medium truncate leading-tight align-middle whitespace-nowrap max-w-[260px]",title:s.thesis_title,children:[s.defense_type&&e.jsx(C,{variant:"outline",className:"mr-2",children:s.defense_type}),e.jsx("span",{children:s.thesis_title})]}),e.jsx(d,{className:"px-3 py-2 text-xs text-muted-foreground whitespace-nowrap align-middle max-w-[140px] truncate",title:_(s),children:_(s)}),e.jsx(d,{className:"px-3 py-2 text-xs text-muted-foreground whitespace-nowrap align-middle max-w-[100px] truncate",title:A(s.program),children:A(s.program)||"—"}),e.jsx(d,{className:"px-3 py-2 text-xs text-muted-foreground whitespace-nowrap text-center align-middle max-w-[120px] truncate",children:s.created_at?D(s.created_at).format("YYYY-MM-DD hh:mm A"):"—"}),e.jsx(d,{className:"px-3 py-2 text-xs whitespace-nowrap text-center align-middle",children:e.jsx(C,{className:s.adviser_status==="Endorsed"?"bg-green-100 text-green-700 border-green-200":s.adviser_status==="Rejected"?"bg-red-100 text-red-700 border-red-200":s.adviser_status==="Pending"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-gray-100 text-gray-700 border-gray-200",children:s.adviser_status==="Approved"?"Endorsed":s.adviser_status||"—"})}),e.jsx(d,{className:"px-3 py-2 text-xs whitespace-nowrap text-center align-middle",children:e.jsx(C,{className:s.coordinator_status==="Approved"?"bg-green-100 text-green-700 border-green-200":s.coordinator_status==="Rejected"?"bg-red-100 text-red-700 border-red-200":s.coordinator_status==="Pending"?"bg-yellow-100 text-yellow-700 border-yellow-200":"bg-gray-100 text-gray-700 border-gray-200",children:s.coordinator_status||"—"})})]},s.id)),T.length===0&&e.jsx(N,{children:e.jsx(d,{colSpan:6,className:"text-center py-10 text-muted-foreground",children:"No defense requests found."})})]})]})})})})})})]})}export{ge as default};
