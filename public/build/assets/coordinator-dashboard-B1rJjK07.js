import{K as w,r as a,j as e,R as D}from"./app-BFhJ_rhz.js";import k from"./pending-defense-request-widget-X36hBVJa.js";import z from"./weekly-defense-schedule-widget-HX0iuG20.js";import{B as S,Q as C}from"./quick-actions-widget-DtxdUDfo.js";import{C as P,a as R,b as q,c as E}from"./card-DBC-Y-7_.js";import{S as l}from"./skeleton-DzsJStbB.js";import p from"./unified-dashboard-layout-Dv5uIaEj.js";import{U as A}from"./users-DEbcMkR_.js";import{C as T}from"./calendar-days-Dpy-fNAL.js";import{C as W}from"./clipboard-list-CPIQpMom.js";import"./graduation-cap-CXqZ0t7s.js";import"./createLucideIcon-KZz7-iiu.js";import"./chevron-right-DjSSbn5Y.js";import"./formatDistanceToNowStrict-CG62KDbP.js";import"./constructNow-Chb2L4Vx.js";import"./en-US-BA9orzCf.js";import"./getRoundingMethod-Btu-7J5l.js";import"./parseISO-CbXPh3Al.js";import"./utils-jAU0Cazi.js";import"./calendar-CgC1wT9Q.js";import"./format-HX8DKPSU.js";import"./isSameDay-DUlCFK42.js";import"./tooltip-I1_k_sJu.js";import"./index-BxKqTWPD.js";import"./index-XUnuFccv.js";import"./floating-ui.react-dom-cBbMY6yK.js";import"./user-round-DUtLRF0P.js";import"./settings-HgSYffZJ.js";import"./receipt-DOktdA3j.js";import"./book-open-Bm6ABnRf.js";import"./separator-BY26pNcl.js";import"./index-DECR1Bfi.js";import"./sun-zhaV4S8O.js";function je(){const{auth:{user:i}}=w().props,[u,o]=a.useState([]),[d,c]=a.useState([]),[H,m]=a.useState([]),[n,g]=a.useState(!0),[f,h]=a.useState(new Date().getDay()),b=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];a.useEffect(()=>{fetch("/defense-requests",{headers:{Accept:"application/json"}}).then(s=>{if(!s.ok)throw new Error("Failed");return s.json()}).then(s=>{const t=Array.isArray(s)?s:s.defenseRequests??[];o(t);const v=t.filter(r=>(r.normalized_status||r.status)==="Pending");c(v);const y=new Date,N=t.filter(r=>{if(!r.scheduled_date)return!1;const x=(new Date(r.scheduled_date).getTime()-y.getTime())/(1e3*60*60*24);return x>=0&&x<3});m(N)}).catch(()=>{o([]),c([]),m([])}).finally(()=>g(!1))},[]);const j=[{title:"Panelists Assignment",value:e.jsxs("span",{children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:3}),e.jsxs("span",{className:"text-base font-semibold text-gray-400 dark:text-gray-500 ml-1",children:["/ ",5]})]}),description:"Panelists assigned",icon:e.jsx(A,{className:"size-7"})},{title:"Today's Schedules",value:3,description:"Defenses scheduled for today",icon:e.jsx(T,{className:"size-7"})},{title:"Pending Defense Requests",value:d.length,description:"Awaiting coordinator action",icon:e.jsx(W,{className:"size-7"})},{title:"Pending Honorariums",value:7,description:"Honorariums not yet processed",icon:e.jsx(S,{className:"size-7"})}];return n?e.jsx(p,{user:i,children:e.jsxs("div",{className:"w-full min-h-[70vh] bg-zinc-100 dark:bg-zinc-900 flex flex-col gap-4 p-0 m-0",children:[e.jsx(l,{className:"h-6 w-1/6 rounded bg-zinc-300 dark:bg-zinc-800 mt-8 mx-8"}),e.jsx(l,{className:"h-12 w-3/4 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(l,{className:"h-12 w-2/3 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(l,{className:"h-[500px] w-full rounded bg-zinc-300 dark:bg-zinc-800 mt-4"})]})}):e.jsxs(p,{user:i,children:[e.jsx("div",{className:"absolute top-6 right-8",children:e.jsx(C,{userRole:i==null?void 0:i.role})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 px-7",children:j.map((s,t)=>e.jsxs(P,{className:"border border-1 bg-white dark:bg-muted rounded-xl shadow-none flex flex-row items-center min-h-[70px] py-4 px-5",children:[e.jsxs("div",{className:"flex flex-col justify-center flex-1",children:[e.jsx(R,{className:"pb-1 px-0",children:e.jsx(q,{className:"text-xs font-semibold text-gray-600 dark:text-gray-300",children:s.title})}),e.jsxs(E,{className:"px-0 py-0",children:[e.jsx("div",{className:"mb-0.5",children:t===0?s.value:e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white leading-tight",children:s.value})}),e.jsx("div",{className:"text-[11px] text-gray-400 dark:text-gray-500 mt-0.5",children:s.description})]})]}),e.jsx("div",{className:"flex items-center justify-center ml-3 w-[40px] h-[40px]",children:D.cloneElement(s.icon,{className:"text-rose-500 dark:text-rose-400 size-7"})})]},t))}),e.jsxs("div",{className:"flex flex-col gap-6 bg-gray-100 dark:bg-muted ms-4 me-4 rounded-xl mt-2 mb-2 px-5 py-8",children:[e.jsxs("div",{className:"w-full mb-2 flex flex-col md:flex-row gap-4",children:[e.jsx(z,{weekDays:b,selectedDay:f,setSelectedDay:h,approvedDefenses:u,referenceDate:new Date,loading:n}),e.jsx(k,{pendingRequests:d,loading:n})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2"})]})]})}export{je as default};
