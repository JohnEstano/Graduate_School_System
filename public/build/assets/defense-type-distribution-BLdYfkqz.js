import{r as o,j as e}from"./app-BDkuJsct.js";import{C as c,a as i,b as l,d,c as m,e as v}from"./card-BJFJPDio.js";import{C as D,a as P,b as F}from"./chart-7aubccfQ.js";import{c as j}from"./createLucideIcon-CEmaZ7tj.js";import{F as T}from"./file-text-rxgzo2tt.js";import{R as k,a as w}from"./RadarChart-DvW10P3K.js";import{P as A,a as R}from"./PolarAngleAxis--DfQntO3.js";import"./utils-jAU0Cazi.js";import"./generateCategoricalChart-BOHwT1p9.js";import"./index-CoS1vLG5.js";import"./index-Chjiymov.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],M=j("Award",E);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],L=j("FileCheck",_),S={count:{label:"Requests",color:"#e11d48"},proposal:{label:"Proposal",color:"#3b82f6",icon:T},prefinal:{label:"Prefinal",color:"#f59e0b",icon:L},final:{label:"Final",color:"#10b981",icon:M}};function Q(){const[p,f]=o.useState([]),[y,C]=o.useState(!0),[b,N]=o.useState(0),[u,g]=o.useState({type:"N/A",count:0});return o.useEffect(()=>{fetch("/defense-requests",{headers:{Accept:"application/json"}}).then(t=>{if(!t.ok)throw new Error("Failed to fetch");return t.json()}).then(t=>{const h=Array.isArray(t)?t:t.defenseRequests??[];N(h.length);const s={Proposal:0,Prefinal:0,Final:0};h.forEach(a=>{const x=a.defense_type||"Proposal";s[x]!==void 0&&s[x]++});const r=[{type:"Proposal",count:s.Proposal},{type:"Prefinal",count:s.Prefinal},{type:"Final",count:s.Final}];f(r);const q=Math.max(...r.map(a=>a.count)),n=r.find(a=>a.count===q);n&&g({type:n.type,count:n.count})}).catch(t=>{console.error("Error fetching defense requests:",t),f([])}).finally(()=>{C(!1)})},[]),y?e.jsxs(c,{className:"rounded-xl shadow-none border",children:[e.jsxs(i,{className:"items-center",children:[e.jsx(l,{children:"Defense Type Distribution"}),e.jsx(d,{children:"Loading..."})]}),e.jsx(m,{className:"h-[250px] flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading chart data..."})})]}):p.length===0?e.jsxs(c,{className:"rounded-xl shadow-none border",children:[e.jsxs(i,{className:"items-center",children:[e.jsx(l,{children:"Defense Type Distribution"}),e.jsx(d,{children:"No data available"})]}),e.jsx(m,{className:"h-[250px] flex items-center justify-center",children:e.jsx("div",{className:"text-muted-foreground",children:"No defense requests found"})})]}):e.jsxs(c,{className:"rounded-xl shadow-none border",children:[e.jsxs(i,{className:"items-center pb-4",children:[e.jsx(l,{children:"Defense Type Distribution"}),e.jsx(d,{children:"Breakdown by defense stage"})]}),e.jsx(m,{className:"pb-0",children:e.jsx(D,{config:S,className:"mx-auto aspect-square max-h-[250px]",children:e.jsxs(k,{data:p,children:[e.jsx(P,{cursor:!1,content:e.jsx(F,{})}),e.jsx(A,{dataKey:"type"}),e.jsx(R,{}),e.jsx(w,{dataKey:"count",fill:"var(--color-count)",fillOpacity:.6,dot:{r:4,fillOpacity:1}})]})})}),e.jsxs(v,{className:"flex-col gap-2 pt-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium leading-none",children:["Most common: ",u.type," (",u.count," requests)"]}),e.jsxs("div",{className:"text-muted-foreground leading-none",children:["Total: ",b," defense requests"]})]})]})}export{Q as DefenseTypeDistribution};
