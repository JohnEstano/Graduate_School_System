<<<<<<<< Updated upstream:public/build/assets/Index-Gutct-di.js
import{r as a,R as K,j as s,L as vr}from"./app-CQngmq00.js";import{A as br}from"./app-layout-C76KB2Lm.js";import{T as xr,a as yr,b as Xt}from"./tabs-DJOYkXMD.js";import{B as Ee}from"./button-Cw9tQIeO.js";import{B as wr}from"./badge-BsPMjMb7.js";import{c as _}from"./utils-jAU0Cazi.js";import{S as Vt,a as Gt,b as qt,c as Jt,e as Rt}from"./select-Dw8a4pct.js";import{D as Dr,d as Cr,a as Sr,e as Nr,b as Er,f as jr}from"./dialog-D-tH9FDm.js";import{L as Pe}from"./label-CbqPBzn6.js";import{T as jn}from"./textarea-CCb-V_XO.js";import{C as Rr}from"./checkbox-D0LzfNbG.js";import{S as Mt}from"./skeleton-Dhy5gbzz.js";import{r as Ge}from"./index-DRp-GX9j.js";import{G as yt}from"./graduation-cap-DHFIPOzN.js";import{C as Rn}from"./calendar-Bi5dAEy5.js";import{X as Mr}from"./x-B3RMhnUQ.js";import{C as kr}from"./chevron-left-BphKULEz.js";import{C as Tr}from"./chevron-right-QGs8lTP5.js";import{C as Or}from"./calendar-days-DHLDYaT_.js";import{c as Ar}from"./createLucideIcon-pjYyoixj.js";import{E as zr}from"./eye-B6whRoNB.js";import{S as Lr}from"./square-pen-D_F9SxFV.js";import{P as Ir}from"./printer-BV1DV1RI.js";import{T as _r}from"./trash-2-BOv4JxAD.js";import{f as I,a as Mn}from"./format-HX8DKPSU.js";import{s as Qt,i as kn}from"./isSameMonth-CQd3m9St.js";import{e as Zt}from"./endOfMonth-CK_ShA5m.js";import{e as Pr,a as Ae}from"./endOfWeek-QFyZPl43.js";import{p as $e}from"./parseISO-CbXPh3Al.js";import{i as en}from"./isToday-2ODO8FsQ.js";import{i as Tn}from"./isSameDay-DUlCFK42.js";import"./index-CDDLQrUy.js";import"./index-DZZQifJx.js";import"./input-izsDzGd9.js";import"./index-BSk2xfhC.js";import"./index-BZgaE142.js";import"./tooltip-BvePKNvs.js";import"./floating-ui.react-dom-DL84dtXf.js";import"./separator-CMC4qrzs.js";import"./index-ahz1tZ6M.js";import"./dropdown-menu-BQlfF7jf.js";import"./index-CgLqTVh4.js";import"./index-VBHUZLOo.js";import"./index-BfMlnZ5P.js";import"./index-Csh4Fj4k.js";import"./check-BEGkAg7k.js";import"./avatar-DUph8BC-.js";import"./settings-CDLWUJwV.js";import"./users-DZ67WViD.js";import"./file-text-Buh9X5tE.js";import"./dollar-sign-CkMbILE9.js";import"./send-BvMnN6yE.js";import"./credit-card-Cid_txJ6.js";import"./circle-check-big-PSYRp90q.js";import"./info-BJ9Jpdwx.js";import"./sun-5m6UvoyG.js";import"./index-BJk2QW0A.js";import"./chevron-down-Bg3q2iyP.js";import"./en-US-BA9orzCf.js";import"./constructNow-Chb2L4Vx.js";/**
========
import{r as a,R as K,j as s,L as vr}from"./app-DdPj2m7B.js";import{A as br}from"./app-layout-CZ3kZ0t2.js";import{T as xr,a as yr,b as Xt}from"./tabs-BvzTftzm.js";import{B as Ee}from"./button-C4XkiM_B.js";import{B as wr}from"./badge-ofr1GoIX.js";import{c as _}from"./utils-jAU0Cazi.js";import{S as Vt,a as Gt,b as qt,c as Jt,e as Rt}from"./select-BHDrHMEc.js";import{D as Dr,d as Cr,a as Sr,e as Nr,b as Er,f as jr}from"./dialog-BeApitpu.js";import{L as Pe}from"./label-by1MoGWy.js";import{T as jn}from"./textarea-ClN04vZX.js";import{C as Rr}from"./checkbox-DDzRYWAy.js";import{S as Mt}from"./skeleton-eQxcUfOO.js";import{r as Ge}from"./index-C0AcbnKJ.js";import{G as yt}from"./graduation-cap-BxuxjmnL.js";import{C as Rn}from"./calendar-BkrqGKNC.js";import{X as Mr}from"./x-gfWO9KfB.js";import{C as kr}from"./chevron-left-IcMAr9yn.js";import{C as Tr}from"./chevron-right-BZod6iQK.js";import{C as Or}from"./calendar-days-QY893wAX.js";import{c as Ar}from"./createLucideIcon-B8qZ3ylK.js";import{E as zr}from"./eye-Dkmyf9ow.js";import{S as Lr}from"./square-pen-Brbz-8qz.js";import{P as Ir}from"./printer-8ps6np5W.js";import{T as _r}from"./trash-2-oufS_Sxw.js";import{f as I,a as Mn}from"./format-HX8DKPSU.js";import{s as Qt,i as kn}from"./isSameMonth-CQd3m9St.js";import{e as Zt}from"./endOfMonth-CK_ShA5m.js";import{e as Pr,a as Ae}from"./endOfWeek-QFyZPl43.js";import{p as $e}from"./parseISO-CbXPh3Al.js";import{i as en}from"./isToday-2ODO8FsQ.js";import{i as Tn}from"./isSameDay-DUlCFK42.js";import"./index-DYEC1Owk.js";import"./index-DZZQifJx.js";import"./input-DCrn1t-u.js";import"./index-DDxX9UbU.js";import"./index-DRr-UIpQ.js";import"./tooltip-YyHP33lU.js";import"./floating-ui.react-dom-qFQCHW7g.js";import"./separator-DAbYQnLI.js";import"./index-DxK34XW3.js";import"./dropdown-menu-sYZpN2tC.js";import"./index-DGKk-Zer.js";import"./index-ATT6OHxL.js";import"./index-MX9TSR8D.js";import"./index-BdQOngYf.js";import"./check-BgnkF1LW.js";import"./avatar-Cz3zvE7t.js";import"./settings-CYIvZ_Tn.js";import"./users-Bi2Lh05r.js";import"./file-text-Dl_aF8u0.js";import"./dollar-sign-DEGfV_co.js";import"./send-ChQ392yu.js";import"./credit-card-BvkjxVWT.js";import"./circle-check-big-CKCqbWb4.js";import"./info-BWBV8Gn3.js";import"./sun-CPhm4DAg.js";import"./index-DFD1OPps.js";import"./chevron-down-DEJUajdp.js";import"./en-US-BA9orzCf.js";import"./constructNow-Chb2L4Vx.js";/**
>>>>>>>> Stashed changes:public/build/assets/Index-C4fbX9h1.js
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]],Fr=Ar("CalendarRange",$r),Pt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function et(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function vn(e){return"nodeType"in e}function ne(e){var t,n;return e?et(e)?e:vn(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function bn(e){const{Document:t}=ne(e);return e instanceof t}function wt(e){return et(e)?!1:e instanceof ne(e).HTMLElement}function Gn(e){return e instanceof ne(e).SVGElement}function tt(e){return e?et(e)?e.document:vn(e)?bn(e)?e:wt(e)||Gn(e)?e.ownerDocument:document:document:document}const je=Pt?a.useLayoutEffect:a.useEffect;function $t(e){const t=a.useRef(e);return je(()=>{t.current=e}),a.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Br(){const e=a.useRef(null),t=a.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=a.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function pt(e,t){t===void 0&&(t=[e]);const n=a.useRef(e);return je(()=>{n.current!==e&&(n.current=e)},t),n}function Dt(e,t){const n=a.useRef();return a.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Tt(e){const t=$t(e),n=a.useRef(null),r=a.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function Ot(e){const t=a.useRef();return a.useEffect(()=>{t.current=e},[e]),t.current}let tn={};function Ft(e,t){return a.useMemo(()=>{if(t)return t;const n=tn[e]==null?0:tn[e]+1;return tn[e]=n,e+"-"+n},[e,t])}function qn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((i,d)=>{const l=Object.entries(d);for(const[u,f]of l){const m=i[u];m!=null&&(i[u]=m+e*f)}return i},{...t})}}const qe=qn(1),At=qn(-1);function Hr(e){return"clientX"in e&&"clientY"in e}function xn(e){if(!e)return!1;const{KeyboardEvent:t}=ne(e.target);return t&&e instanceof t}function Wr(e){if(!e)return!1;const{TouchEvent:t}=ne(e.target);return t&&e instanceof t}function zt(e){if(Wr(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Hr(e)?{x:e.clientX,y:e.clientY}:null}const vt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[vt.Translate.toString(e),vt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),On="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ur(e){return e.matches(On)?e:e.querySelector(On)}const Yr={display:"none"};function Kr(e){let{id:t,value:n}=e;return K.createElement("div",{id:t,style:Yr},n)}function Xr(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return K.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Vr(){const[e,t]=a.useState("");return{announce:a.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Jn=a.createContext(null);function Gr(e){const t=a.useContext(Jn);a.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function qr(){const[e]=a.useState(()=>new Set),t=a.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[a.useCallback(r=>{let{type:o,event:i}=r;e.forEach(d=>{var l;return(l=d[o])==null?void 0:l.call(d,i)})},[e]),t]}const Jr={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Qr={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Zr(e){let{announcements:t=Qr,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Jr}=e;const{announce:i,announcement:d}=Vr(),l=Ft("DndLiveRegion"),[u,f]=a.useState(!1);if(a.useEffect(()=>{f(!0)},[]),Gr(a.useMemo(()=>({onDragStart(h){let{active:p}=h;i(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:x}=h;t.onDragMove&&i(t.onDragMove({active:p,over:x}))},onDragOver(h){let{active:p,over:x}=h;i(t.onDragOver({active:p,over:x}))},onDragEnd(h){let{active:p,over:x}=h;i(t.onDragEnd({active:p,over:x}))},onDragCancel(h){let{active:p,over:x}=h;i(t.onDragCancel({active:p,over:x}))}}),[i,t])),!u)return null;const m=K.createElement(K.Fragment,null,K.createElement(Kr,{id:r,value:o.draggable}),K.createElement(Xr,{id:l,announcement:d}));return n?Ge.createPortal(m,n):m}var V;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(V||(V={}));function Lt(){}const pe=Object.freeze({x:0,y:0});function es(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ts(e,t){const n=zt(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function ns(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function rs(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function ss(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function An(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const nn=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=An(t,t.left,t.top),i=[];for(const d of r){const{id:l}=d,u=n.get(l);if(u){const f=es(An(u),o);i.push({id:l,data:{droppableContainer:d,value:f}})}}return i.sort(ns)};function os(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),d=o-r,l=i-n;if(r<o&&n<i){const u=t.width*t.height,f=e.width*e.height,m=d*l,h=m/(u+f-m);return Number(h.toFixed(4))}return 0}const is=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const i of r){const{id:d}=i,l=n.get(d);if(l){const u=os(l,t);u>0&&o.push({id:d,data:{droppableContainer:i,value:u}})}}return o.sort(rs)};function as(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Qn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:pe}function ls(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.reduce((d,l)=>({...d,top:d.top+e*l.y,bottom:d.bottom+e*l.y,left:d.left+e*l.x,right:d.right+e*l.x}),{...n})}}const cs=ls(1);function Zn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function ds(e,t,n){const r=Zn(t);if(!r)return e;const{scaleX:o,scaleY:i,x:d,y:l}=r,u=e.left-d-(1-o)*parseFloat(n),f=e.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),m=o?e.width/o:e.width,h=i?e.height/i:e.height;return{width:m,height:h,top:f,right:u+m,bottom:f+h,left:u}}const us={ignoreTransform:!1};function Ct(e,t){t===void 0&&(t=us);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:m}=ne(e).getComputedStyle(e);f&&(n=ds(n,f,m))}const{top:r,left:o,width:i,height:d,bottom:l,right:u}=n;return{top:r,left:o,width:i,height:d,bottom:l,right:u}}function zn(e){return Ct(e,{ignoreTransform:!0})}function fs(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function hs(e,t){return t===void 0&&(t=ne(e).getComputedStyle(e)),t.position==="fixed"}function ms(e,t){t===void 0&&(t=ne(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const i=t[o];return typeof i=="string"?n.test(i):!1})}function yn(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(bn(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!wt(o)||Gn(o)||n.includes(o))return n;const i=ne(e).getComputedStyle(o);return o!==e&&ms(o,i)&&n.push(o),hs(o,i)?n:r(o.parentNode)}return e?r(e):n}function er(e){const[t]=yn(e,1);return t??null}function rn(e){return!Pt||!e?null:et(e)?e:vn(e)?bn(e)||e===tt(e).scrollingElement?window:wt(e)?e:null:null}function tr(e){return et(e)?e.scrollX:e.scrollLeft}function nr(e){return et(e)?e.scrollY:e.scrollTop}function fn(e){return{x:tr(e),y:nr(e)}}var q;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(q||(q={}));function rr(e){return!Pt||!e?!1:e===document.scrollingElement}function sr(e){const t={x:0,y:0},n=rr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,d=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:o,isLeft:i,isBottom:d,isRight:l,maxScroll:r,minScroll:t}}const gs={x:.2,y:.2};function ps(e,t,n,r,o){let{top:i,left:d,right:l,bottom:u}=n;r===void 0&&(r=10),o===void 0&&(o=gs);const{isTop:f,isBottom:m,isLeft:h,isRight:p}=sr(e),x={x:0,y:0},T={x:0,y:0},y={height:t.height*o.y,width:t.width*o.x};return!f&&i<=t.top+y.height?(x.y=q.Backward,T.y=r*Math.abs((t.top+y.height-i)/y.height)):!m&&u>=t.bottom-y.height&&(x.y=q.Forward,T.y=r*Math.abs((t.bottom-y.height-u)/y.height)),!p&&l>=t.right-y.width?(x.x=q.Forward,T.x=r*Math.abs((t.right-y.width-l)/y.width)):!h&&d<=t.left+y.width&&(x.x=q.Backward,T.x=r*Math.abs((t.left+y.width-d)/y.width)),{direction:x,speed:T}}function vs(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:d}=window;return{top:0,left:0,right:i,bottom:d,width:i,height:d}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function or(e){return e.reduce((t,n)=>qe(t,fn(n)),pe)}function bs(e){return e.reduce((t,n)=>t+tr(n),0)}function xs(e){return e.reduce((t,n)=>t+nr(n),0)}function ir(e,t){if(t===void 0&&(t=Ct),!e)return;const{top:n,left:r,bottom:o,right:i}=t(e);er(e)&&(o<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ys=[["x",["left","right"],bs],["y",["top","bottom"],xs]];class wn{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=yn(n),o=or(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,d,l]of ys)for(const u of d)Object.defineProperty(this,u,{get:()=>{const f=l(r),m=o[i]-f;return this.rect[u]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ht{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function ws(e){const{EventTarget:t}=ne(e);return e instanceof t?e:tt(e)}function sn(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var fe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(fe||(fe={}));function Ln(e){e.preventDefault()}function Ds(e){e.stopPropagation()}var L;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(L||(L={}));const ar={start:[L.Space,L.Enter],cancel:[L.Esc],end:[L.Space,L.Enter,L.Tab]},Cs=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case L.Right:return{...n,x:n.x+25};case L.Left:return{...n,x:n.x-25};case L.Down:return{...n,y:n.y+25};case L.Up:return{...n,y:n.y-25}}};class lr{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new ht(tt(n)),this.windowListeners=new ht(ne(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(fe.Resize,this.handleCancel),this.windowListeners.add(fe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(fe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&ir(r),n(pe)}handleKeyDown(t){if(xn(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:i=ar,coordinateGetter:d=Cs,scrollBehavior:l="smooth"}=o,{code:u}=t;if(i.end.includes(u)){this.handleEnd(t);return}if(i.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:f}=r.current,m=f?{x:f.left,y:f.top}:pe;this.referenceCoordinates||(this.referenceCoordinates=m);const h=d(t,{active:n,context:r.current,currentCoordinates:m});if(h){const p=At(h,m),x={x:0,y:0},{scrollableAncestors:T}=r.current;for(const y of T){const D=t.code,{isTop:N,isRight:k,isLeft:R,isBottom:P,maxScroll:z,minScroll:O}=sr(y),M=vs(y),j={x:Math.min(D===L.Right?M.right-M.width/2:M.right,Math.max(D===L.Right?M.left:M.left+M.width/2,h.x)),y:Math.min(D===L.Down?M.bottom-M.height/2:M.bottom,Math.max(D===L.Down?M.top:M.top+M.height/2,h.y))},$=D===L.Right&&!k||D===L.Left&&!R,W=D===L.Down&&!P||D===L.Up&&!N;if($&&j.x!==h.x){const H=y.scrollLeft+p.x,X=D===L.Right&&H<=z.x||D===L.Left&&H>=O.x;if(X&&!p.y){y.scrollTo({left:H,behavior:l});return}X?x.x=y.scrollLeft-H:x.x=D===L.Right?y.scrollLeft-z.x:y.scrollLeft-O.x,x.x&&y.scrollBy({left:-x.x,behavior:l});break}else if(W&&j.y!==h.y){const H=y.scrollTop+p.y,X=D===L.Down&&H<=z.y||D===L.Up&&H>=O.y;if(X&&!p.x){y.scrollTo({top:H,behavior:l});return}X?x.y=y.scrollTop-H:x.y=D===L.Down?y.scrollTop-z.y:y.scrollTop-O.y,x.y&&y.scrollBy({top:-x.y,behavior:l});break}}this.handleMove(t,qe(At(h,this.referenceCoordinates),x))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}lr.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=ar,onActivation:o}=t,{active:i}=n;const{code:d}=e.nativeEvent;if(r.start.includes(d)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function In(e){return!!(e&&"distance"in e)}function _n(e){return!!(e&&"delay"in e)}class Dn{constructor(t,n,r){var o;r===void 0&&(r=ws(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:d}=i;this.props=t,this.events=n,this.document=tt(d),this.documentListeners=new ht(this.document),this.listeners=new ht(r),this.windowListeners=new ht(ne(d)),this.initialCoordinates=(o=zt(i))!=null?o:pe,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(fe.Resize,this.handleCancel),this.windowListeners.add(fe.DragStart,Ln),this.windowListeners.add(fe.VisibilityChange,this.handleCancel),this.windowListeners.add(fe.ContextMenu,Ln),this.documentListeners.add(fe.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(_n(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(In(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(fe.Click,Ds,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(fe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:i}=this,{onMove:d,options:{activationConstraint:l}}=i;if(!o)return;const u=(n=zt(t))!=null?n:pe,f=At(o,u);if(!r&&l){if(In(l)){if(l.tolerance!=null&&sn(f,l.tolerance))return this.handleCancel();if(sn(f,l.distance))return this.handleStart()}if(_n(l)&&sn(f,l.tolerance))return this.handleCancel();this.handlePending(l,f);return}t.cancelable&&t.preventDefault(),d(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===L.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Ss={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class cr extends Dn{constructor(t){const{event:n}=t,r=tt(n.target);super(t,Ss,r)}}cr.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Ns={move:{name:"mousemove"},end:{name:"mouseup"}};var hn;(function(e){e[e.RightClick=2]="RightClick"})(hn||(hn={}));class Es extends Dn{constructor(t){super(t,Ns,tt(t.event.target))}}Es.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===hn.RightClick?!1:(r==null||r({event:n}),!0)}}];const on={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class js extends Dn{constructor(t){super(t,on)}static setup(){return window.addEventListener(on.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(on.move.name,t)};function t(){}}}js.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var mt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(mt||(mt={}));var It;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(It||(It={}));function Rs(e){let{acceleration:t,activator:n=mt.Pointer,canScroll:r,draggingRect:o,enabled:i,interval:d=5,order:l=It.TreeOrder,pointerCoordinates:u,scrollableAncestors:f,scrollableAncestorRects:m,delta:h,threshold:p}=e;const x=ks({delta:h,disabled:!i}),[T,y]=Br(),D=a.useRef({x:0,y:0}),N=a.useRef({x:0,y:0}),k=a.useMemo(()=>{switch(n){case mt.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case mt.DraggableRect:return o}},[n,o,u]),R=a.useRef(null),P=a.useCallback(()=>{const O=R.current;if(!O)return;const M=D.current.x*N.current.x,j=D.current.y*N.current.y;O.scrollBy(M,j)},[]),z=a.useMemo(()=>l===It.TreeOrder?[...f].reverse():f,[l,f]);a.useEffect(()=>{if(!i||!f.length||!k){y();return}for(const O of z){if((r==null?void 0:r(O))===!1)continue;const M=f.indexOf(O),j=m[M];if(!j)continue;const{direction:$,speed:W}=ps(O,j,k,t,p);for(const H of["x","y"])x[H][$[H]]||(W[H]=0,$[H]=0);if(W.x>0||W.y>0){y(),R.current=O,T(P,d),D.current=W,N.current=$;return}}D.current={x:0,y:0},N.current={x:0,y:0},y()},[t,P,r,y,i,d,JSON.stringify(k),JSON.stringify(x),T,f,z,m,JSON.stringify(p)])}const Ms={x:{[q.Backward]:!1,[q.Forward]:!1},y:{[q.Backward]:!1,[q.Forward]:!1}};function ks(e){let{delta:t,disabled:n}=e;const r=Ot(t);return Dt(o=>{if(n||!r||!o)return Ms;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[q.Backward]:o.x[q.Backward]||i.x===-1,[q.Forward]:o.x[q.Forward]||i.x===1},y:{[q.Backward]:o.y[q.Backward]||i.y===-1,[q.Forward]:o.y[q.Forward]||i.y===1}}},[n,t,r])}function Ts(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return Dt(o=>{var i;return t==null?null:(i=r??o)!=null?i:null},[r,t])}function Os(e,t){return a.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,i=o.activators.map(d=>({eventName:d.eventName,handler:t(d.handler,r)}));return[...n,...i]},[]),[e,t])}var bt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(bt||(bt={}));var mn;(function(e){e.Optimized="optimized"})(mn||(mn={}));const Pn=new Map;function As(e,t){let{dragging:n,dependencies:r,config:o}=t;const[i,d]=a.useState(null),{frequency:l,measure:u,strategy:f}=o,m=a.useRef(e),h=D(),p=pt(h),x=a.useCallback(function(N){N===void 0&&(N=[]),!p.current&&d(k=>k===null?N:k.concat(N.filter(R=>!k.includes(R))))},[p]),T=a.useRef(null),y=Dt(N=>{if(h&&!n)return Pn;if(!N||N===Pn||m.current!==e||i!=null){const k=new Map;for(let R of e){if(!R)continue;if(i&&i.length>0&&!i.includes(R.id)&&R.rect.current){k.set(R.id,R.rect.current);continue}const P=R.node.current,z=P?new wn(u(P),P):null;R.rect.current=z,z&&k.set(R.id,z)}return k}return N},[e,i,n,h,u]);return a.useEffect(()=>{m.current=e},[e]),a.useEffect(()=>{h||x()},[n,h]),a.useEffect(()=>{i&&i.length>0&&d(null)},[JSON.stringify(i)]),a.useEffect(()=>{h||typeof l!="number"||T.current!==null||(T.current=setTimeout(()=>{x(),T.current=null},l))},[l,h,x,...r]),{droppableRects:y,measureDroppableContainers:x,measuringScheduled:i!=null};function D(){switch(f){case bt.Always:return!1;case bt.BeforeDragging:return n;default:return!n}}}function Cn(e,t){return Dt(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function zs(e,t){return Cn(e,t)}function Ls(e){let{callback:t,disabled:n}=e;const r=$t(t),o=a.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return a.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Bt(e){let{callback:t,disabled:n}=e;const r=$t(t),o=a.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return a.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Is(e){return new wn(Ct(e),e)}function $n(e,t,n){t===void 0&&(t=Is);const[r,o]=a.useState(null);function i(){o(u=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=u??n)!=null?f:null}const m=t(e);return JSON.stringify(u)===JSON.stringify(m)?u:m})}const d=Ls({callback(u){if(e)for(const f of u){const{type:m,target:h}=f;if(m==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),l=Bt({callback:i});return je(()=>{i(),e?(l==null||l.observe(e),d==null||d.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),d==null||d.disconnect())},[e]),r}function _s(e){const t=Cn(e);return Qn(e,t)}const Fn=[];function Ps(e){const t=a.useRef(e),n=Dt(r=>e?r&&r!==Fn&&e&&t.current&&e.parentNode===t.current.parentNode?r:yn(e):Fn,[e]);return a.useEffect(()=>{t.current=e},[e]),n}function $s(e){const[t,n]=a.useState(null),r=a.useRef(e),o=a.useCallback(i=>{const d=rn(i.target);d&&n(l=>l?(l.set(d,fn(d)),new Map(l)):null)},[]);return a.useEffect(()=>{const i=r.current;if(e!==i){d(i);const l=e.map(u=>{const f=rn(u);return f?(f.addEventListener("scroll",o,{passive:!0}),[f,fn(f)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{d(e),d(i)};function d(l){l.forEach(u=>{const f=rn(u);f==null||f.removeEventListener("scroll",o)})}},[o,e]),a.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,d)=>qe(i,d),pe):or(e):pe,[e,t])}function Bn(e,t){t===void 0&&(t=[]);const n=a.useRef(null);return a.useEffect(()=>{n.current=null},t),a.useEffect(()=>{const r=e!==pe;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?At(e,n.current):pe}function Fs(e){a.useEffect(()=>{if(!Pt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Bs(e,t){return a.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:i}=r;return n[o]=d=>{i(d,t)},n},{}),[e,t])}function dr(e){return a.useMemo(()=>e?fs(e):null,[e])}const Hn=[];function Hs(e,t){t===void 0&&(t=Ct);const[n]=e,r=dr(n?ne(n):null),[o,i]=a.useState(Hn);function d(){i(()=>e.length?e.map(u=>rr(u)?r:new wn(t(u),u)):Hn)}const l=Bt({callback:d});return je(()=>{l==null||l.disconnect(),d(),e.forEach(u=>l==null?void 0:l.observe(u))},[e]),o}function ur(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return wt(t)?t:e}function Ws(e){let{measure:t}=e;const[n,r]=a.useState(null),o=a.useCallback(f=>{for(const{target:m}of f)if(wt(m)){r(h=>{const p=t(m);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),i=Bt({callback:o}),d=a.useCallback(f=>{const m=ur(f);i==null||i.disconnect(),m&&(i==null||i.observe(m)),r(m?t(m):null)},[t,i]),[l,u]=Tt(d);return a.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const Us=[{sensor:cr,options:{}},{sensor:lr,options:{}}],Ys={current:{}},kt={draggable:{measure:zn},droppable:{measure:zn,strategy:bt.WhileDragging,frequency:mn.Optimized},dragOverlay:{measure:Ct}};class gt extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Ks={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new gt,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Lt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:kt,measureDroppableContainers:Lt,windowRect:null,measuringScheduled:!1},fr={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Lt,draggableNodes:new Map,over:null,measureDroppableContainers:Lt},St=a.createContext(fr),hr=a.createContext(Ks);function Xs(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new gt}}}function Vs(e,t){switch(t.type){case V.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case V.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case V.DragEnd:case V.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case V.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new gt(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case V.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const d=new gt(e.droppable.containers);return d.set(n,{...i,disabled:o}),{...e,droppable:{...e.droppable,containers:d}}}case V.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const i=new gt(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Gs(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=a.useContext(St),i=Ot(r),d=Ot(n==null?void 0:n.id);return a.useEffect(()=>{if(!t&&!r&&i&&d!=null){if(!xn(i)||document.activeElement===i.target)return;const l=o.get(d);if(!l)return;const{activatorNode:u,node:f}=l;if(!u.current&&!f.current)return;requestAnimationFrame(()=>{for(const m of[u.current,f.current]){if(!m)continue;const h=Ur(m);if(h){h.focus();break}}})}},[r,t,o,d,i]),null}function mr(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,i)=>i({transform:o,...r}),n):n}function qs(e){return a.useMemo(()=>({draggable:{...kt.draggable,...e==null?void 0:e.draggable},droppable:{...kt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...kt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Js(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const i=a.useRef(!1),{x:d,y:l}=typeof o=="boolean"?{x:o,y:o}:o;je(()=>{if(!d&&!l||!t){i.current=!1;return}if(i.current||!r)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const m=n(f),h=Qn(m,r);if(d||(h.x=0),l||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=er(f);p&&p.scrollBy({top:h.y,left:h.x})}},[t,d,l,r,n])}const Ht=a.createContext({...pe,scaleX:1,scaleY:1});var ze;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ze||(ze={}));const an=a.memo(function(t){var n,r,o,i;let{id:d,accessibility:l,autoScroll:u=!0,children:f,sensors:m=Us,collisionDetection:h=is,measuring:p,modifiers:x,...T}=t;const y=a.useReducer(Vs,void 0,Xs),[D,N]=y,[k,R]=qr(),[P,z]=a.useState(ze.Uninitialized),O=P===ze.Initialized,{draggable:{active:M,nodes:j,translate:$},droppable:{containers:W}}=D,H=M!=null?j.get(M):null,X=a.useRef({initial:null,translated:null}),le=a.useMemo(()=>{var B;return M!=null?{id:M,data:(B=H==null?void 0:H.data)!=null?B:Ys,rect:X}:null},[M,H]),ce=a.useRef(null),[nt,rt]=a.useState(null),[J,Fe]=a.useState(null),ve=pt(T,Object.values(T)),st=Ft("DndDescribedBy",d),Be=a.useMemo(()=>W.getEnabled(),[W]),Re=qs(p),{droppableRects:Me,measureDroppableContainers:ke,measuringScheduled:He}=As(Be,{dragging:O,dependencies:[$.x,$.y],config:Re.droppable}),Q=Ts(j,M),ot=a.useMemo(()=>J?zt(J):null,[J]),Te=F(),it=zs(Q,Re.draggable.measure);Js({activeNode:M!=null?j.get(M):null,config:Te.layoutShiftCompensation,initialRect:it,measure:Re.draggable.measure});const se=$n(Q,Re.draggable.measure,it),at=$n(Q?Q.parentElement:null),Ce=a.useRef({activatorEvent:null,active:null,activeNode:Q,collisionRect:null,collisions:null,droppableRects:Me,draggableNodes:j,draggingNode:null,draggingNodeRect:null,droppableContainers:W,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Nt=W.getNodeFor((n=Ce.current.over)==null?void 0:n.id),he=Ws({measure:Re.dragOverlay.measure}),We=(r=he.nodeRef.current)!=null?r:Q,oe=O?(o=he.rect)!=null?o:se:null,Ue=!!(he.nodeRef.current&&he.rect),_e=_s(Ue?null:se),lt=dr(We?ne(We):null),be=Ps(O?Nt??Q:null),Ye=Hs(be),Ke=mr(x,{transform:{x:$.x-_e.x,y:$.y-_e.y,scaleX:1,scaleY:1},activatorEvent:J,active:le,activeNodeRect:se,containerNodeRect:at,draggingNodeRect:oe,over:Ce.current.over,overlayNodeRect:he.rect,scrollableAncestors:be,scrollableAncestorRects:Ye,windowRect:lt}),ct=ot?qe(ot,$):null,ie=$s(be),Wt=Bn(ie),A=Bn(ie,[se]),Se=qe(Ke,Wt),xe=oe?cs(oe,Ke):null,Ne=le&&xe?h({active:le,collisionRect:xe,droppableRects:Me,droppableContainers:Be,pointerCoordinates:ct}):null,Oe=ss(Ne,"id"),[de,Xe]=a.useState(null),dt=Ue?Ke:qe(Ke,A),En=as(dt,(i=de==null?void 0:de.rect)!=null?i:null,se),Et=a.useRef(null),re=a.useCallback((B,U)=>{let{sensor:Z,options:me}=U;if(ce.current==null)return;const ee=j.get(ce.current);if(!ee)return;const te=B.nativeEvent,ae=new Z({active:ce.current,activeNode:ee,event:te,options:me,context:Ce,onAbort(Y){if(!j.get(Y))return;const{onDragAbort:ue}=ve.current,c={id:Y};ue==null||ue(c),k({type:"onDragAbort",event:c})},onPending(Y,ye,ue,c){if(!j.get(Y))return;const{onDragPending:b}=ve.current,v={id:Y,constraint:ye,initialCoordinates:ue,offset:c};b==null||b(v),k({type:"onDragPending",event:v})},onStart(Y){const ye=ce.current;if(ye==null)return;const ue=j.get(ye);if(!ue)return;const{onDragStart:c}=ve.current,g={activatorEvent:te,active:{id:ye,data:ue.data,rect:X}};Ge.unstable_batchedUpdates(()=>{c==null||c(g),z(ze.Initializing),N({type:V.DragStart,initialCoordinates:Y,active:ye}),k({type:"onDragStart",event:g}),rt(Et.current),Fe(te)})},onMove(Y){N({type:V.DragMove,coordinates:Y})},onEnd:ge(V.DragEnd),onCancel:ge(V.DragCancel)});Et.current=ae;function ge(Y){return async function(){const{active:ue,collisions:c,over:g,scrollAdjustedTranslate:b}=Ce.current;let v=null;if(ue&&b){const{cancelDrop:E}=ve.current;v={activatorEvent:te,active:ue,collisions:c,delta:b,over:g},Y===V.DragEnd&&typeof E=="function"&&await Promise.resolve(E(v))&&(Y=V.DragCancel)}ce.current=null,Ge.unstable_batchedUpdates(()=>{N({type:Y}),z(ze.Uninitialized),Xe(null),rt(null),Fe(null),Et.current=null;const E=Y===V.DragEnd?"onDragEnd":"onDragCancel";if(v){const C=ve.current[E];C==null||C(v),k({type:E,event:v})}})}}},[j]),Ut=a.useCallback((B,U)=>(Z,me)=>{const ee=Z.nativeEvent,te=j.get(me);if(ce.current!==null||!te||ee.dndKit||ee.defaultPrevented)return;const ae={active:te};B(Z,U.options,ae)===!0&&(ee.dndKit={capturedBy:U.sensor},ce.current=me,re(Z,U))},[j,re]),jt=Os(m,Ut);Fs(m),je(()=>{se&&P===ze.Initializing&&z(ze.Initialized)},[se,P]),a.useEffect(()=>{const{onDragMove:B}=ve.current,{active:U,activatorEvent:Z,collisions:me,over:ee}=Ce.current;if(!U||!Z)return;const te={active:U,activatorEvent:Z,collisions:me,delta:{x:Se.x,y:Se.y},over:ee};Ge.unstable_batchedUpdates(()=>{B==null||B(te),k({type:"onDragMove",event:te})})},[Se.x,Se.y]),a.useEffect(()=>{const{active:B,activatorEvent:U,collisions:Z,droppableContainers:me,scrollAdjustedTranslate:ee}=Ce.current;if(!B||ce.current==null||!U||!ee)return;const{onDragOver:te}=ve.current,ae=me.get(Oe),ge=ae&&ae.rect.current?{id:ae.id,rect:ae.rect.current,data:ae.data,disabled:ae.disabled}:null,Y={active:B,activatorEvent:U,collisions:Z,delta:{x:ee.x,y:ee.y},over:ge};Ge.unstable_batchedUpdates(()=>{Xe(ge),te==null||te(Y),k({type:"onDragOver",event:Y})})},[Oe]),je(()=>{Ce.current={activatorEvent:J,active:le,activeNode:Q,collisionRect:xe,collisions:Ne,droppableRects:Me,draggableNodes:j,draggingNode:We,draggingNodeRect:oe,droppableContainers:W,over:de,scrollableAncestors:be,scrollAdjustedTranslate:Se},X.current={initial:oe,translated:xe}},[le,Q,Ne,xe,j,We,oe,Me,W,de,be,Se]),Rs({...Te,delta:$,draggingRect:xe,pointerCoordinates:ct,scrollableAncestors:be,scrollableAncestorRects:Ye});const Yt=a.useMemo(()=>({active:le,activeNode:Q,activeNodeRect:se,activatorEvent:J,collisions:Ne,containerNodeRect:at,dragOverlay:he,draggableNodes:j,droppableContainers:W,droppableRects:Me,over:de,measureDroppableContainers:ke,scrollableAncestors:be,scrollableAncestorRects:Ye,measuringConfiguration:Re,measuringScheduled:He,windowRect:lt}),[le,Q,se,J,Ne,at,he,j,W,Me,de,ke,be,Ye,Re,He,lt]),ut=a.useMemo(()=>({activatorEvent:J,activators:jt,active:le,activeNodeRect:se,ariaDescribedById:{draggable:st},dispatch:N,draggableNodes:j,over:de,measureDroppableContainers:ke}),[J,jt,le,se,N,st,j,de,ke]);return K.createElement(Jn.Provider,{value:R},K.createElement(St.Provider,{value:ut},K.createElement(hr.Provider,{value:Yt},K.createElement(Ht.Provider,{value:En},f)),K.createElement(Gs,{disabled:(l==null?void 0:l.restoreFocus)===!1})),K.createElement(Zr,{...l,hiddenTextDescribedById:st}));function F(){const B=(nt==null?void 0:nt.autoScrollEnabled)===!1,U=typeof u=="object"?u.enabled===!1:u===!1,Z=O&&!B&&!U;return typeof u=="object"?{...u,enabled:Z}:{enabled:Z}}}),Qs=a.createContext(null),Wn="button",Zs="Draggable";function Sn(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const i=Ft(Zs),{activators:d,activatorEvent:l,active:u,activeNodeRect:f,ariaDescribedById:m,draggableNodes:h,over:p}=a.useContext(St),{role:x=Wn,roleDescription:T="draggable",tabIndex:y=0}=o??{},D=(u==null?void 0:u.id)===t,N=a.useContext(D?Ht:Qs),[k,R]=Tt(),[P,z]=Tt(),O=Bs(d,t),M=pt(n);je(()=>(h.set(t,{id:t,key:i,node:k,activatorNode:P,data:M}),()=>{const $=h.get(t);$&&$.key===i&&h.delete(t)}),[h,t]);const j=a.useMemo(()=>({role:x,tabIndex:y,"aria-disabled":r,"aria-pressed":D&&x===Wn?!0:void 0,"aria-roledescription":T,"aria-describedby":m.draggable}),[r,x,y,D,T,m.draggable]);return{active:u,activatorEvent:l,activeNodeRect:f,attributes:j,isDragging:D,listeners:r?void 0:O,node:k,over:p,setNodeRef:R,setActivatorNodeRef:z,transform:N}}function eo(){return a.useContext(hr)}const to="Droppable",no={timeout:25};function gr(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const i=Ft(to),{active:d,dispatch:l,over:u,measureDroppableContainers:f}=a.useContext(St),m=a.useRef({disabled:n}),h=a.useRef(!1),p=a.useRef(null),x=a.useRef(null),{disabled:T,updateMeasurementsFor:y,timeout:D}={...no,...o},N=pt(y??r),k=a.useCallback(()=>{if(!h.current){h.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{f(Array.isArray(N.current)?N.current:[N.current]),x.current=null},D)},[D]),R=Bt({callback:k,disabled:T||!d}),P=a.useCallback((j,$)=>{R&&($&&(R.unobserve($),h.current=!1),j&&R.observe(j))},[R]),[z,O]=Tt(P),M=pt(t);return a.useEffect(()=>{!R||!z.current||(R.disconnect(),h.current=!1,R.observe(z.current))},[z,R]),a.useEffect(()=>(l({type:V.RegisterDroppable,element:{id:r,key:i,disabled:n,node:z,rect:p,data:M}}),()=>l({type:V.UnregisterDroppable,key:i,id:r})),[r]),a.useEffect(()=>{n!==m.current.disabled&&(l({type:V.SetDroppableDisabled,id:r,key:i,disabled:n}),m.current.disabled=n)},[r,i,n,l]),{active:d,rect:p,isOver:(u==null?void 0:u.id)===r,node:z,over:u,setNodeRef:O}}function ro(e){let{animation:t,children:n}=e;const[r,o]=a.useState(null),[i,d]=a.useState(null),l=Ot(n);return!n&&!r&&l&&o(l),je(()=>{if(!i)return;const u=r==null?void 0:r.key,f=r==null?void 0:r.props.id;if(u==null||f==null){o(null);return}Promise.resolve(t(f,i)).then(()=>{o(null)})},[t,r,i]),K.createElement(K.Fragment,null,n,r?a.cloneElement(r,{ref:d}):null)}const so={x:0,y:0,scaleX:1,scaleY:1};function oo(e){let{children:t}=e;return K.createElement(St.Provider,{value:fr},K.createElement(Ht.Provider,{value:so},t))}const io={position:"fixed",touchAction:"none"},ao=e=>xn(e)?"transform 250ms ease":void 0,lo=a.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:i,className:d,rect:l,style:u,transform:f,transition:m=ao}=e;if(!l)return null;const h=o?f:{...f,scaleX:1,scaleY:1},p={...io,width:l.width,height:l.height,top:l.top,left:l.left,transform:vt.Transform.toString(h),transformOrigin:o&&r?ts(r,l):void 0,transition:typeof m=="function"?m(r):m,...u};return K.createElement(n,{className:d,style:p,ref:t},i)}),co=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:i,className:d}=e;if(i!=null&&i.active)for(const[l,u]of Object.entries(i.active))u!==void 0&&(o[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,u));if(i!=null&&i.dragOverlay)for(const[l,u]of Object.entries(i.dragOverlay))u!==void 0&&r.node.style.setProperty(l,u);return d!=null&&d.active&&n.node.classList.add(d.active),d!=null&&d.dragOverlay&&r.node.classList.add(d.dragOverlay),function(){for(const[u,f]of Object.entries(o))n.node.style.setProperty(u,f);d!=null&&d.active&&n.node.classList.remove(d.active)}},uo=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:vt.Transform.toString(t)},{transform:vt.Transform.toString(n)}]},fo={duration:250,easing:"ease",keyframes:uo,sideEffects:co({styles:{active:{opacity:"0"}}})};function ho(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return $t((i,d)=>{if(t===null)return;const l=n.get(i);if(!l)return;const u=l.node.current;if(!u)return;const f=ur(d);if(!f)return;const{transform:m}=ne(d).getComputedStyle(d),h=Zn(m);if(!h)return;const p=typeof t=="function"?t:mo(t);return ir(u,o.draggable.measure),p({active:{id:i,data:l.data,node:u,rect:o.draggable.measure(u)},draggableNodes:n,dragOverlay:{node:d,rect:o.dragOverlay.measure(f)},droppableContainers:r,measuringConfiguration:o,transform:h})})}function mo(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...fo,...e};return i=>{let{active:d,dragOverlay:l,transform:u,...f}=i;if(!t)return;const m={x:l.rect.left-d.rect.left,y:l.rect.top-d.rect.top},h={scaleX:u.scaleX!==1?d.rect.width*u.scaleX/l.rect.width:1,scaleY:u.scaleY!==1?d.rect.height*u.scaleY/l.rect.height:1},p={x:u.x-m.x,y:u.y-m.y,...h},x=o({...f,active:d,dragOverlay:l,transform:{initial:u,final:p}}),[T]=x,y=x[x.length-1];if(JSON.stringify(T)===JSON.stringify(y))return;const D=r==null?void 0:r({active:d,dragOverlay:l,...f}),N=l.node.animate(x,{duration:t,easing:n,fill:"forwards"});return new Promise(k=>{N.onfinish=()=>{D==null||D(),k()}})}}let Un=0;function go(e){return a.useMemo(()=>{if(e!=null)return Un++,Un},[e])}const ln=K.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:i,modifiers:d,wrapperElement:l="div",className:u,zIndex:f=999}=e;const{activatorEvent:m,active:h,activeNodeRect:p,containerNodeRect:x,draggableNodes:T,droppableContainers:y,dragOverlay:D,over:N,measuringConfiguration:k,scrollableAncestors:R,scrollableAncestorRects:P,windowRect:z}=eo(),O=a.useContext(Ht),M=go(h==null?void 0:h.id),j=mr(d,{activatorEvent:m,active:h,activeNodeRect:p,containerNodeRect:x,draggingNodeRect:D.rect,over:N,overlayNodeRect:D.rect,scrollableAncestors:R,scrollableAncestorRects:P,transform:O,windowRect:z}),$=Cn(p),W=ho({config:r,draggableNodes:T,droppableContainers:y,measuringConfiguration:k}),H=$?D.setRef:void 0;return K.createElement(oo,null,K.createElement(ro,{animation:W},h&&M?K.createElement(lo,{key:M,id:h.id,ref:H,as:l,activatorEvent:m,adjustScale:t,className:u,transition:i,rect:$,style:{zIndex:f,...o},transform:j},n):null))}),Yn=e=>e.toString().padStart(2,"0");function xt(e,t=28){return e.length>t?e.slice(0,t)+"â€¦":e}const po=[{title:"Dashboard",href:"/dashboard"},{title:"Schedules",href:"/schedule"}],cn=["January","February","March","April","May","June","July","August","September","October","November","December"],vo=new Date().getFullYear(),bo=Array.from({length:9},(e,t)=>vo-4+t),Le=0,_t=24,xo=30,De=(_t-Le)*60,we=44,Je="bg-zinc-100 dark:bg-zinc-900/90 hover:bg-zinc-200 dark:hover:bg-zinc-800 text-zinc-900 dark:text-zinc-100 ring-1 ring-zinc-300 dark:ring-zinc-700/40 shadow-sm",Nn="bg-zinc-200 dark:bg-zinc-900 hover:bg-zinc-300 dark:hover:bg-zinc-800 text-zinc-900 dark:text-zinc-100 ring-1 ring-zinc-400 dark:ring-zinc-700/40 shadow-sm ";function yo(){const e=[];for(let t=Le;t<_t;t++)for(let n=0;n<60;n+=xo){const r=(t-Le)*60+n,o=I(new Date(2020,1,1,t,n,0),"h:mm a");e.push({label:o,minutes:r,isHour:n===0})}return e}const Ve=yo();function Qe(e){if(!e)return 0;const[t,n]=e.split(":").map(r=>parseInt(r,10));return(t-Le)*60+n}function Ie(e){if(!e)return"";const[t,n]=e.split(":"),r=new Date(2020,0,1,Number(t||0),Number(n||0),0);return I(r,"h:mm a")}function Kn(e){if(!e.length)return e;const t=[...e].sort((i,d)=>(i.start||"").localeCompare(d.start||"")||(i.end||"").localeCompare(d.end||""));let n=[],r=0;const o=()=>{if(!n.length)return;const i=r+1;n.forEach(d=>{const l=100/i;d.ev.__layout={leftPct:d.col*l,widthPct:l-1.5,top:0,height:0}}),n=[],r=0};for(const i of t){const d=Qe(i.start),l=i.end?Qe(i.end):d+30,u=Math.max(d+5,l);n=n.filter(h=>h.end>d);const f=new Set(n.map(h=>h.col));let m=0;for(;f.has(m);)m++;n.push({ev:i,start:d,end:u,col:m}),r=Math.max(r,m)}return o(),t}function Ze(e){if(!e)return"#064e3b";const t=e.replace("#","");if(t.length!==6)return"#064e3b";const n=parseInt(t.slice(0,2),16)/255,r=parseInt(t.slice(2,4),16)/255,o=parseInt(t.slice(4,6),16)/255;return .2126*Math.pow(n,2.2)+.7152*Math.pow(r,2.2)+.0722*Math.pow(o,2.2)>.55?"#1f2937":"#ffffff"}function wo(e){const t=e.replace("#","").match(/^([0-9a-fA-F]{6})$/);if(!t)return{r:37,g:99,b:235};const n=t[1];return{r:parseInt(n.slice(0,2),16),g:parseInt(n.slice(2,4),16),b:parseInt(n.slice(4,6),16)}}function Do(e){const t=(e.defense?"#059669":e.color||"#2563eb").toLowerCase();function n(m,h){const p=m.replace("#",""),x=parseInt(p,16);let T=(x>>16)+h,y=(x>>8&255)+h,D=(x&255)+h;return T=Math.max(0,Math.min(255,T)),y=Math.max(0,Math.min(255,y)),D=Math.max(0,Math.min(255,D)),"#"+((1<<24)+(T<<16)+(y<<8)+D).toString(16).slice(1)}const r=n(t,-30),{r:o,g:i,b:d}=wo(t),l=(.299*o+.587*i+.114*d)/255,u=l>.55?"#1f2937":"#ffffff",f=l>.55?"#111827":"rgba(255,255,255,0.85)";return{base:t,border:r,text:u,subText:f}}const dn="backdrop-blur supports-[backdrop-filter]:bg-white/85 bg-white/70 dark:bg-zinc-900/75 shadow-sm",gn=0,pr=52,un=gn+pr;function Xn(){const e=document.querySelector('meta[name="csrf-token"]');return(e==null?void 0:e.content)||""}const pn=({event:e,editMode:t,onClick:n})=>{const{attributes:r,listeners:o,setNodeRef:i,isDragging:d}=Sn({id:e.id,data:{event:e,fromDate:e.date},disabled:!t||e.defense});return s.jsxs("div",{ref:i,...r,...o,className:_("px-1 py-0.5 rounded text-[10px] font-medium truncate flex items-center gap-1 cursor-grab active:cursor-grabbing",e.defense?Nn:Je,d&&"opacity-50"),style:e.defense?void 0:{backgroundColor:e.color||"#6ee7b7",color:Ze(e.color)},title:e.title,onClick:n,children:[e.defense&&s.jsx(yt,{className:"h-3 w-3"}),xt(e.title,26)]})},Co=({dateKey:e,children:t,editMode:n,isDragOver:r,activeDrag:o})=>{const{setNodeRef:i,isOver:d}=gr({id:e,disabled:!n});return s.jsxs("div",{ref:i,className:_("relative p-1 border-r border-b last:[&:nth-last-child(-n+7)]:border-b-0 cursor-pointer overflow-hidden focus:outline-none focus-visible:outline-none","bg-white dark:bg-zinc-900","border-zinc-200 dark:border-zinc-800",d&&"bg-blue-50 dark:bg-blue-900/20 ring-2 ring-blue-400 ring-inset"),style:{minHeight:120},children:[t,r&&o&&s.jsx("div",{className:"absolute left-1 right-1 top-7 z-30 pointer-events-none",style:{opacity:.6},children:s.jsx(pn,{event:o.event,editMode:!1})})]})},Vn=({dateKey:e,children:t,editMode:n,isDragOver:r,activeDrag:o})=>{const{setNodeRef:i,isOver:d}=gr({id:e,disabled:!n});return s.jsxs("div",{ref:i,className:_("relative h-full",d&&"bg-blue-50 dark:bg-blue-900/20 ring-2 ring-blue-400 ring-inset"),children:[t,r&&o&&s.jsx("div",{className:"absolute left-2 right-2 top-2 z-50 pointer-events-none",style:{opacity:.6},children:s.jsxs("div",{className:_("px-2 py-1 rounded text-[11px] font-medium truncate flex items-center gap-1 shadow-lg",Je),style:{backgroundColor:o.event.color||"#6ee7b7",color:Ze(o.event.color),border:"2px dashed #888"},children:[o.event.defense&&s.jsx(yt,{className:"h-3 w-3"}),xt(o.event.title,26),s.jsx("span",{className:"ml-1 text-[9px] text-muted-foreground",children:"(Preview)"})]})})]})},So=({event:e,editMode:t,onClick:n})=>{const{attributes:r,listeners:o,setNodeRef:i,isDragging:d}=Sn({id:e.id,data:{event:e,fromDate:e.date},disabled:!t||e.defense}),l=e.__layout,u=Math.max(0,Qe(e.start)),f=Math.min(De,e.end?Qe(e.end):u+60),m=u/De*100,p=Math.max(5,f-u)/De*100;return s.jsxs("div",{ref:i,...r,...o,className:_("absolute rounded-md text-[11px] flex flex-col overflow-hidden cursor-grab active:cursor-grabbing",(e.defense,Je),"hover:ring-2 ring-primary/40","bg-white dark:bg-zinc-800","border border-zinc-200 dark:border-zinc-700",d&&"opacity-50 z-50"),style:{top:`calc(${m}% )`,height:`calc(${p}% )`,left:`calc(${(l==null?void 0:l.leftPct)??0}% )`,width:`calc(${(l==null?void 0:l.widthPct)??100}% )`,backgroundColor:e.defense?void 0:e.color||"#34d399",color:e.defense?void 0:Ze(e.color)},title:e.title,onClick:n,children:[s.jsxs("div",{className:"px-1 pt-1 flex items-start gap-1",children:[e.defense&&s.jsx(yt,{className:"h-3.5 w-3.5 shrink-0 text-emerald-900/80"}),s.jsx("span",{className:"font-semibold leading-tight truncate",children:xt(e.title,56)})]}),s.jsxs("div",{className:"px-1 pb-1 font-medium",children:[e.start&&Ie(e.start),e.end&&" â€“ "+Ie(e.end)]}),e.raw.student_name&&e.defense&&s.jsx("div",{className:"px-1 pb-1 truncate text-emerald-950/90 text-[10px]",children:xt(e.raw.student_name,40)})]})},No=({event:e,editMode:t,onClick:n})=>{const{attributes:r,listeners:o,setNodeRef:i,isDragging:d}=Sn({id:e.id,data:{event:e,fromDate:e.date},disabled:!t||e.defense}),l=e.__layout,u=Math.max(0,Qe(e.start)),f=Math.min(De,e.end?Qe(e.end):u+60),m=u/De*100,p=Math.max(5,f-u)/De*100;return s.jsxs("div",{ref:i,...r,...o,className:_("absolute rounded-md p-2 text-[11px] flex flex-col overflow-hidden cursor-grab active:cursor-grabbing",e.defense?Nn:Je,"hover:ring-2 ring-primary/40","bg-white dark:bg-zinc-800","border border-zinc-200 dark:border-zinc-700",d&&"opacity-50 z-50"),style:{top:`calc(${m}% )`,height:`calc(${p}% )`,left:`calc(${(l==null?void 0:l.leftPct)??0}% )`,width:`calc(${(l==null?void 0:l.widthPct)??100}% )`,backgroundColor:e.defense?void 0:e.color||"#34d399",color:e.defense?void 0:Ze(e.color)},title:e.title,onClick:n,children:[s.jsxs("div",{className:"flex items-start gap-1",children:[e.defense&&s.jsx(yt,{className:"h-4 w-4 shrink-0"}),s.jsx("div",{className:"font-semibold leading-tight truncate text-[12px]",children:xt(e.title,80)})]}),s.jsxs("div",{className:"text-[11px] font-medium mt-0.5",children:[e.start&&Ie(e.start),e.end&&" â€“ "+Ie(e.end),e.raw.student_name&&e.defense&&" â€¢ "+e.raw.student_name]}),e.defense&&e.raw.student_name&&s.jsxs("div",{className:"text-[10px] truncate",children:[e.raw.student_name," ",e.raw.program&&s.jsxs("span",{className:"opacity-70",children:["(",e.raw.program,")"]})]}),e.defense&&e.raw.defense_type&&s.jsx("div",{className:"text-[10px] mt-0.5 uppercase tracking-wide",children:e.raw.defense_type})]})};function Oi({canManage:e,userRole:t}){const[n,r]=a.useState([]),[o,i]=a.useState([]),[d,l]=a.useState([]),[u,f]=a.useState(new Date),[m,h]=a.useState(new Date),[p,x]=a.useState("week"),[T,y]=a.useState(!1),[D,N]=a.useState(!1),[k,R]=a.useState(!1),[P,z]=a.useState(""),[O,M]=a.useState(I(new Date,"yyyy-MM-dd")),[j,$]=a.useState("08:00"),[W,H]=a.useState("09:00"),[X,le]=a.useState(!1),[ce,nt]=a.useState(""),[rt,J]=a.useState(null),[Fe,ve]=a.useState("#10b981"),st=["#10b981","#0ea5e9","#6366f1","#f59e0b","#ef4444","#d946ef","#14b8a6","#6d28d9"],[Be]=a.useState(""),[Re,Me]=a.useState(new Date);a.useEffect(()=>{const c=setInterval(()=>Me(new Date),6e4);return()=>clearInterval(c)},[]);const ke=a.useRef(null),He=a.useRef(null),[Q,ot]=a.useState({v:!1,y:0}),[Te,it]=a.useState({v:!1,y:0}),se=c=>{if(!ke.current)return;const g=ke.current.getBoundingClientRect(),b=Math.min(Math.max(0,c.clientY-g.top),g.height);ot({v:!0,y:b})},at=()=>ot({v:!1,y:0}),Ce=c=>{if(!He.current)return;const g=He.current.getBoundingClientRect(),b=Math.min(Math.max(0,c.clientY-g.top),g.height);it({v:!0,y:b})},Nt=()=>it({v:!1,y:0});a.useEffect(()=>{y(!0),fetch("/defense-requests/calendar").then(c=>c.json()).then(c=>r(c||[])).finally(()=>y(!1))},[]),a.useEffect(()=>{const c=Qt(u),g=Zt(u),b=`?from=${encodeURIComponent(c.toISOString())}&to=${encodeURIComponent(g.toISOString())}`;fetch("/api/calendar/events"+b).then(v=>v.json()).then(v=>{const E=w=>new Date(w.replace(" ","T")),C=v.filter(w=>w.origin==="event").map(w=>{const S=E(w.start),G=w.end?E(w.end):null;return{id:w.id,title:w.title||"Event",date:I(S,"yyyy-MM-dd"),start:I(S,"HH:mm"),end:G?I(G,"HH:mm"):void 0,raw:{id:Number((w.id||"").replace("ev-",""))||0,thesis_title:w.title,date_of_defense:I(S,"yyyy-MM-dd"),start_time:I(S,"HH:mm"),end_time:G?I(G,"HH:mm"):void 0,defense_type:void 0,defense_mode:void 0,defense_venue:void 0,program:void 0,student_name:void 0},color:w.color||"#2563eb",defense:!1,description:w.description??w.desc??w.details??w.detail??w.note??w.notes??""}});l(C)}).catch(()=>{})},[u]),a.useEffect(()=>{const c=n.map(g=>({id:"def-"+g.id,title:g.thesis_title||"Thesis Defense",date:g.date_of_defense,start:g.start_time?g.start_time.slice(0,5):void 0,end:g.end_time?g.end_time.slice(0,5):void 0,raw:g,defense:!0}));i([...c,...d])},[n,d]);const he=a.useMemo(()=>{if(!Be.trim())return o;const c=Be.toLowerCase();return o.filter(g=>g.title.toLowerCase().includes(c)||(g.raw.student_name||"").toLowerCase().includes(c)||(g.raw.program||"").toLowerCase().includes(c)||(g.raw.defense_type||"").toLowerCase().includes(c))},[o,Be]),We=a.useMemo(()=>{const c=Mn(Qt(u),{weekStartsOn:0}),g=Pr(Zt(u),{weekStartsOn:0}),b=[];let v=c;for(;v<=g;){const E=[];for(let C=0;C<7;C++)E.push(v),v=Ae(v,1);b.push(E)}return b},[u]),oe=a.useMemo(()=>{const c={};return he.forEach(g=>{var b;(c[b=g.date]||(c[b]=[])).push(g)}),Object.values(c).forEach(g=>g.sort((b,v)=>(b.start||"23:59:59").localeCompare(v.start||"23:59:59"))),c},[he]),Ue=m?I(m,"yyyy-MM-dd"):"";a.useMemo(()=>Ue?oe[Ue]||[]:[],[oe,Ue]);const _e=a.useMemo(()=>{const g=Mn(m||new Date,{weekStartsOn:0});return Array.from({length:7},(b,v)=>Ae(g,v))},[m]),lt=a.useMemo(()=>{const c={};return _e.forEach(g=>{const b=I(g,"yyyy-MM-dd");c[b]=(oe[b]||[]).map(v=>({...v})),Kn(c[b])}),c},[_e,oe]),be=()=>{p==="month"?f(Ae(Qt(u),-1)):h(p==="week"?c=>Ae(c||new Date,-7):c=>Ae(c||new Date,-1))},Ye=()=>{p==="month"?f(Ae(Zt(u),1)):h(p==="week"?c=>Ae(c||new Date,7):c=>Ae(c||new Date,1))},Ke=()=>{const c=new Date;f(c),h(c)};a.useEffect(()=>{p==="month"&&m&&!kn(m,u)&&h(u)},[p,u,m]);function ct(c,g=28){return c.length>g?c.slice(0,g)+"â€¦":c}const[ie,Wt]=a.useState(!1),[A,Se]=a.useState(null),[xe,Ne]=a.useState(null),Oe=()=>{Se(null),Ne(null)};a.useEffect(()=>{!D&&A&&Oe()},[D,A]);function de(c){c.active.data.current&&Se(c.active.data.current)}function Xe(c){const{active:g,over:b}=c;if(Oe(),!g||!b)return;const v=g.data.current;!v||v.event.defense||v.fromDate!==b.id&&(B({...v.event,date:b.id}),N(!0))}function dt(c){var g;(g=c.over)!=null&&g.id?Ne(c.over.id):Ne(null)}const re="border-zinc-200 dark:border-zinc-700",Ut=()=>{const c=We;return s.jsx(an,{collisionDetection:nn,onDragStart:de,onDragEnd:Xe,onDragOver:dt,children:s.jsxs("div",{className:"w-full border border-t-0 bg-white dark:bg-zinc-900 flex flex-col rounded-b-md rounded-t-none",children:[s.jsx("div",{className:_("grid border-b sticky z-40",dn,"bg-transparent"),style:{gridTemplateColumns:"repeat(7, 1fr)",top:un},children:["SUN","MON","TUE","WED","THU","FRI","SAT"].map(g=>s.jsx("div",{className:_("h-12 border-r last:border-r-0 flex items-center justify-center text-[10px] font-semibold uppercase tracking-wide",re),children:g},g))}),s.jsx("div",{className:"grid grid-cols-7",children:c.map(g=>g.map(b=>{const v=I(b,"yyyy-MM-dd"),E=oe[v]||[];kn(b,u);const C=en(b),w=m&&Tn(b,m);return s.jsxs(Co,{dateKey:v,editMode:ie,isDragOver:xe===v,activeDrag:A,children:[s.jsxs("div",{className:"flex items-start justify-between mb-0.5",children:[s.jsx("span",{className:_("w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-semibold select-none",C&&"bg-rose-500 text-white shadow dark:bg-rose-500",!C&&w&&"bg-rose-500/80 text-white dark:bg-rose-500/80",!C&&!w&&"text-muted-foreground"),children:I(b,"d")}),E.length>3&&s.jsxs("span",{className:"text-[10px] text-muted-foreground mt-0.5",children:["+",E.length-3]})]}),s.jsx("div",{className:"space-y-0.5",children:E.slice(0,3).map(S=>s.jsx(pn,{event:S,editMode:ie,onClick:G=>{G.stopPropagation(),ie||(h(b),x("day"))}},S.id))})]},v)}))}),s.jsx(ln,{children:A?s.jsx(pn,{event:A.event,editMode:!1}):null})]})})},jt=()=>{const g=Ve.length*we;let b=null;if(Q.v){const v=Math.min(De,Math.max(0,Q.y/g*De)),E=Math.round(v),C=Le+Math.floor(E/60),w=E%60,S=(C+11)%12+1,G=C>=12?"PM":"AM";b=`${S}:${Yn(w)} ${G}`}return s.jsx(an,{collisionDetection:nn,onDragStart:de,onDragEnd:Xe,onDragOver:dt,children:s.jsxs("div",{className:"w-full border border-t-0 bg-white dark:bg-zinc-900 flex flex-col overflow-visible rounded-b-md rounded-t-none",children:[s.jsxs("div",{className:_("grid border-b sticky z-40",dn),style:{gridTemplateColumns:"90px repeat(7, 1fr)",top:un},children:[s.jsx("div",{className:_("h-12 border-r flex items-center justify-center text-[10px] font-semibold uppercase tracking-wide text-muted-foreground",re),children:"TIME"}),_e.map(v=>{const E=m&&Tn(v,m),C=en(v);return s.jsxs("div",{className:_("h-12 border-r flex flex-col items-center justify-center gap-0.5 text-xs font-medium",E&&!C&&"bg-primary/5 dark:bg-rose-900/10",C&&"text-primary font-semibold",re),children:[s.jsx("span",{className:"uppercase tracking-wide text-[10px]",children:I(v,"EEE")}),s.jsx("span",{className:_("w-7 h-7 rounded-full flex items-center justify-center text-[12px] font-semibold",C&&"bg-rose-500 text-white shadow dark:bg-rose-500",!C&&E&&"bg-rose-500/80 text-white dark:bg-rose-500/80"),children:I(v,"d")})]},v.toISOString())})]}),s.jsxs("div",{ref:ke,className:"relative",style:{minHeight:g},onMouseMove:se,onMouseLeave:at,children:[s.jsx("div",{className:_("absolute left-0 top-0 bottom-0 border-r bg-white dark:bg-zinc-900 z-20",re),style:{width:90},children:Ve.map(v=>s.jsx("div",{className:"relative flex items-center justify-end pr-3",style:{height:we},children:s.jsx("span",{className:_("select-none text-[10px]",v.isHour?"font-semibold text-muted-foreground":"text-muted-foreground/50"),children:v.label.replace(":00","")})},v.minutes))}),s.jsxs("div",{className:"absolute top-0 bottom-0 right-0 grid",style:{left:90,gridTemplateColumns:"repeat(7, 1fr)"},children:[_e.map(v=>{const E=I(v,"yyyy-MM-dd"),C=lt[E]||[];return s.jsx(Vn,{dateKey:E,editMode:ie,isDragOver:xe===E,activeDrag:A,children:s.jsxs("div",{className:_("relative border-r h-full",en(v)&&"bg-primary/5 dark:bg-emerald-900/10",re,"bg-white dark:bg-zinc-900"),children:[Array.from({length:_t-Le},(w,S)=>S%2===1?s.jsx("div",{className:"absolute inset-x-0 bg-muted/15 dark:bg-zinc-800/30",style:{top:S*2*we,height:we*2}},"stripe-"+S):null),Ve.map((w,S)=>s.jsx("div",{className:_("absolute left-0 right-0",w.isHour?`${re} border-b-2`:`${re} border-b`),style:{top:S*we}},w.minutes)),C.map(w=>s.jsx(So,{event:w,editMode:ie,onClick:S=>{S.stopPropagation(),ie||(e&&!w.defense?B(w):(h($e(w.date)),Z(w),x("day")))}},w.id))]})},"week-col-"+E)}),Q.v&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pointer-events-none absolute left-0 right-0 h-px bg-black/60 z-40",style:{top:Q.y}}),b&&s.jsx("div",{className:"pointer-events-none absolute z-50 -translate-y-1/2 px-1.5 py-0.5 bg-black text-white rounded text-[10px] font-medium shadow",style:{top:Q.y,left:4},children:b})]})]})]}),s.jsx(ln,{children:A?s.jsxs("div",{className:_("absolute rounded-md text-[11px] flex flex-col overflow-hidden shadow-lg",Je),style:{backgroundColor:A.event.defense?void 0:A.event.color||"#34d399",color:A.event.defense?void 0:Ze(A.event.color),padding:"4px 8px",minWidth:"120px",maxWidth:"200px"},children:[s.jsx("div",{className:"font-semibold leading-tight truncate",children:ct(A.event.title,40)}),s.jsxs("div",{className:"font-medium text-[10px]",children:[A.event.start&&Ie(A.event.start),A.event.end&&" â€“ "+Ie(A.event.end)]})]}):null})]})})},Yt=()=>{const c=m||new Date,g=I(c,"yyyy-MM-dd"),b=Kn((oe[g]||[]).map(C=>({...C}))),v=Ve.length*we;let E=null;if(Te.v){const C=Math.min(De,Math.max(0,Te.y/v*De)),w=Math.round(C),S=Le+Math.floor(w/60),G=w%60,ft=(S+11)%12+1,Kt=S>=12?"PM":"AM";E=`${ft}:${Yn(G)} ${Kt}`}return s.jsx(an,{collisionDetection:nn,onDragStart:de,onDragEnd:Xe,onDragOver:dt,children:s.jsxs("div",{className:"w-full border border-t-0 bg-white dark:bg-zinc-900 flex flex-col rounded-b-md rounded-t-none",children:[s.jsxs("div",{className:_("sticky flex items-center justify-between px-6 py-4 border-b z-40",dn,re),style:{top:un},children:[s.jsxs("div",{className:"flex items-end gap-4",children:[s.jsx("div",{className:"flex flex-col leading-none",children:s.jsx("span",{className:"text-4xl font-bold tracking-tight",children:I(c,"d")})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-lg font-semibold",children:I(c,"MMMM")}),s.jsx("span",{className:"text-sm text-muted-foreground",children:I(c,"EEEE, yyyy")})]})]}),s.jsx(wr,{variant:"secondary",className:"text-[11px] px-3 py-1",children:"Approved Defenses"})]}),s.jsx("div",{ref:He,className:"relative",onMouseMove:Ce,onMouseLeave:Nt,children:s.jsx(Vn,{dateKey:g,editMode:ie,isDragOver:xe===g,activeDrag:A,children:s.jsxs("div",{className:"relative",style:{minHeight:v},children:[s.jsx("div",{className:_("absolute left-0 top-0 bottom-0 w-[90px] border-r bg-white dark:bg-zinc-900 z-20",re),children:Ve.map(C=>s.jsx("div",{className:"relative flex items-center justify-end pr-3",style:{height:we},children:s.jsx("span",{className:_("text-[11px] select-none",C.isHour?"font-semibold text-muted-foreground":"text-muted-foreground/50"),children:C.label.replace(":00","")})},C.minutes))}),s.jsxs("div",{className:"absolute left-[90px] right-0 top-0 bottom-0 bg-white dark:bg-zinc-900",children:[Array.from({length:_t-Le},(C,w)=>w%2===1?s.jsx("div",{className:"absolute inset-x-0 bg-muted/15 dark:bg-zinc-800/30",style:{top:w*2*we,height:we*2}},"stripe-"+w):null),Ve.map((C,w)=>s.jsx("div",{className:_("absolute left-0 right-0",C.isHour?`${re} border-b-2`:`${re} border-b`),style:{top:w*we}},C.minutes)),b.map(C=>s.jsx(No,{event:C,editMode:ie,onClick:w=>{w.stopPropagation(),ie||(e&&!C.defense?B(C):Z(C))}},C.id)),Te.v&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"pointer-events-none absolute left-0 right-0 h-px bg-black/60 z-40",style:{top:Te.y}}),E&&s.jsx("div",{className:"pointer-events-none absolute z-50 -translate-y-1/2 px-1.5 py-0.5 bg-black text-white rounded text-[10px] font-medium shadow",style:{top:Te.y,left:4},children:E})]})]})]})})}),s.jsx(ln,{children:A?s.jsxs("div",{className:_("absolute rounded-md p-2 text-[11px] flex flex-col overflow-hidden shadow-lg",Nn),style:{backgroundColor:A.event.defense?void 0:A.event.color||"#34d399",color:A.event.defense?void 0:Ze(A.event.color),minWidth:"150px",maxWidth:"250px"},children:[s.jsx("div",{className:"font-semibold leading-tight truncate text-[12px]",children:ct(A.event.title,60)}),s.jsxs("div",{className:"text-[11px] font-medium mt-0.5",children:[A.event.start&&Ie(A.event.start),A.event.end&&" â€“ "+Ie(A.event.end)]})]}):null})]})})},ut=a.useRef(null),[F,B]=a.useState(null),[U,Z]=a.useState(null),[me,ee]=a.useState(!1),[te,ae]=a.useState(!1),ge=!!F,Y=()=>{!U||me||(ee(!0),setTimeout(()=>{Z(null),ee(!1)},180))};a.useEffect(()=>{if(U){ee(!1),ae(!0);const c=requestAnimationFrame(()=>ae(!1));return()=>cancelAnimationFrame(c)}},[U]),a.useEffect(()=>{if(!U)return;const c=b=>{ut.current&&!ut.current.contains(b.target)&&Y()},g=b=>{b.key==="Escape"&&Y()};return document.addEventListener("mousedown",c),document.addEventListener("keydown",g),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("keydown",g)}},[U]);const ye=U&&p==="day"?Ge.createPortal(s.jsx("div",{ref:ut,className:_("fixed right-4 w-[400px] max-h-[82vh] flex flex-col rounded-lg overflow-hidden shadow-lg border z-[2500]","transition-all duration-200 ease-out will-change-transform will-change-opacity origin-top",te||me?"opacity-0 translate-y-2 scale-[0.97]":"opacity-100 translate-y-0 scale-100"),style:{top:gn+pr+14},children:(()=>{const c=U,g=Do(c),b=I($e(c.date),"PPP"),v=(c.start?I($e("2020-01-01T"+c.start),"h:mm a"):"")+(c.end?" â€“ "+I($e("2020-01-01T"+c.end),"h:mm a"):(c.start,"")),E=c.description&&c.description.trim()||"â€”";return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"px-4 py-3 flex items-start gap-3",style:{background:g.base,borderBottom:`1px solid ${g.border}`,color:g.text},children:[s.jsx("div",{className:"mt-0.5 shrink-0",children:c.defense?s.jsx(yt,{className:"h-5 w-5",style:{color:g.text}}):s.jsx(Rn,{className:"h-5 w-5",style:{color:g.text}})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"font-semibold text-sm leading-snug pr-6",style:{color:g.text},title:c.title,children:c.title}),s.jsxs("div",{className:"text-[11px] font-medium mt-0.5",style:{color:g.subText},children:[b,v&&" â€¢ "+v]})]}),s.jsx(Ee,{variant:"ghost",size:"icon",className:"h-7 w-7 -m-1",onClick:Y,children:s.jsx(Mr,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-100",children:s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-muted-foreground",children:c.defense?"Defense Details":"Event Details"}),s.jsxs("dl",{className:"grid grid-cols-3 gap-x-2 gap-y-1 text-[11px]",children:[s.jsx("dt",{className:"font-medium text-muted-foreground",children:"Date"}),s.jsx("dd",{className:"col-span-2",children:b}),s.jsx("dt",{className:"font-medium text-muted-foreground",children:"Time"}),s.jsx("dd",{className:"col-span-2",children:v||"â€”"}),c.defense&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"font-medium text-muted-foreground",children:"Student"}),s.jsx("dd",{className:"col-span-2",children:c.raw.student_name||"â€”"}),s.jsx("dt",{className:"font-medium text-muted-foreground",children:"Program"}),s.jsx("dd",{className:"col-span-2",children:c.raw.program||"â€”"}),s.jsx("dt",{className:"font-medium text-muted-foreground",children:"Type"}),s.jsx("dd",{className:"col-span-2 uppercase",children:c.raw.defense_type||"â€”"}),s.jsx("dt",{className:"font-medium text-muted-foreground",children:"Mode"}),s.jsx("dd",{className:"col-span-2",children:c.raw.defense_mode||"â€”"}),s.jsx("dt",{className:"font-medium text-muted-foreground",children:"Venue"}),s.jsx("dd",{className:"col-span-2",children:c.raw.defense_venue||"â€”"})]}),s.jsx("dt",{className:"font-medium text-muted-foreground",children:"Description"}),s.jsx("dd",{className:"col-span-2 whitespace-pre-wrap",children:E})]})]})})})]})})()}),document.body):null;a.useEffect(()=>{F&&(N(!0),z(F.title),M(F.date),le(!1),$(F.start?F.start.slice(0,5):"08:00"),H(F.end?F.end.slice(0,5):F.start?F.start.slice(0,5):"09:00"),nt(F.description||""),ve(F.color||"#10b981"))},[F]),a.useEffect(()=>{!D&&F&&B(null)},[D,F]);const ue=()=>{try{const c=[...he].slice().sort((S,G)=>S.date===G.date?(S.start||"23:59").localeCompare(G.start||"23:59"):S.date.localeCompare(G.date)),g=S=>(S||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),b=c.map(S=>{const G=I($e(S.date),"MMM d, yyyy"),ft=(S.start?I($e("2020-01-01T"+S.start),"h:mm a"):"")+(S.end?" â€“ "+I($e("2020-01-01T"+S.end),"h:mm a"):"");return`<tr>
          <td>${g(G)}</td>
          <td>${g(ft)}</td>
          <td>${g(S.title)}</td>
          <td>${g(S.raw.student_name||"â€”")}</td>
          <td>${g(S.raw.program||"â€”")}</td>
          <td>${g(S.raw.defense_type||"â€”")}</td>
          <td>${g(S.raw.defense_venue||S.raw.defense_mode||"â€”")}</td>
        </tr>`}).join("")||'<tr><td colspan="7" style="text-align:center;padding:16px;color:#666;">No scheduled defenses.</td></tr>',v=`<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Schedules Print</title>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<style>
  * { box-sizing:border-box; font-family: system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif; }
  body { margin:24px; color:#111; }
  h1 { margin:0 0 16px; font-size:20px; }
  table { border-collapse:collapse; width:100%; font-size:12px; }
  thead th { background:#f1f5f9; text-align:left; padding:6px 8px; font-weight:600; border:1px solid #dbe1e6; }
  td { padding:6px 8px; border:1px solid #e2e8f0; vertical-align:top; }
  tbody tr:nth-child(even) { background:#fafafa; }
  @media print { body { margin:8px 16px; } }
</style>
</head>
<body>
<h1>Schedules (${c.length})</h1>
<table>
  <thead>
    <tr>
      <th>Date</th><th>Time</th><th>Title</th><th>Student</th><th>Program</th><th>Type</th><th>Venue / Mode</th>
    </tr>
  </thead>
  <tbody>${b}</tbody>
</table>
<script>window.addEventListener('load',()=>{setTimeout(()=>window.print(),120);});<\/script>
</body>
</html>`,E=new Blob([v],{type:"text/html"}),C=URL.createObjectURL(E);if(!window.open(C,"_blank")){alert("Pop-up blocked. Allow pop-ups to print."),URL.revokeObjectURL(C);return}setTimeout(()=>URL.revokeObjectURL(C),5e3)}catch(c){console.error("Print failed",c),alert("Print failed.")}};return s.jsxs(br,{breadcrumbs:po,children:[s.jsx(vr,{title:"Schedules"}),s.jsx("div",{className:"flex flex-col gap-0 bg-white dark:bg-zinc-900 min-h-screen",children:T?s.jsxs("div",{className:"w-full min-h-[70vh] bg-zinc-100 dark:bg-zinc-900 flex flex-col gap-4 p-0 m-0",children:[s.jsx(Mt,{className:"h-6 w-1/6 rounded bg-zinc-300 dark:bg-zinc-800 mt-8 mx-8"}),s.jsx(Mt,{className:"h-12 w-3/4 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),s.jsx(Mt,{className:"h-12 w-2/3 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),s.jsx(Mt,{className:"h-[500px] w-full rounded bg-zinc-300 dark:bg-zinc-800 mt-4"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:_("flex flex-wrap items-center gap-2 w-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-md rounded-b-none px-3 py-2 sticky z-50","shadow-sm"),style:{top:gn},children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ee,{size:"icon",variant:"outline",onClick:be,children:s.jsx(kr,{className:"h-4 w-4"})}),s.jsx(Ee,{size:"icon",variant:"outline",onClick:Ye,children:s.jsx(Tr,{className:"h-4 w-4"})}),s.jsx(Ee,{className:"hover:cursor-pointer",variant:"outline",onClick:Ke,children:"Today"})]}),s.jsx(xr,{value:p,onValueChange:c=>x(c),children:s.jsxs(yr,{children:[s.jsxs(Xt,{className:"hover:cursor-pointer",value:"day",children:[s.jsx(Or,{className:"mr-1 h-4 w-4"}),"Day"]}),s.jsxs(Xt,{className:"hover:cursor-pointer",value:"week",children:[s.jsx(Fr,{className:"mr-1 h-4 w-4"}),"Week"]}),s.jsxs(Xt,{className:"hover:cursor-pointer",value:"month",children:[s.jsx(Rn,{className:"mr-1 h-4 w-4"}),"Month"]})]})}),p==="month"&&s.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[s.jsxs(Vt,{value:cn[u.getMonth()],onValueChange:c=>{const g=cn.indexOf(c);g!==-1&&f(new Date(u.getFullYear(),g,1))},children:[s.jsx(Gt,{className:"w-[120px] h-8",children:s.jsx(qt,{placeholder:"Month"})}),s.jsx(Jt,{children:cn.map(c=>s.jsx(Rt,{value:c,children:c},c))})]}),s.jsxs(Vt,{value:u.getFullYear().toString(),onValueChange:c=>f(new Date(Number(c),u.getMonth(),1)),children:[s.jsx(Gt,{className:"w-[90px] h-8",children:s.jsx(qt,{placeholder:"Year"})}),s.jsx(Jt,{children:bo.map(c=>s.jsx(Rt,{value:c.toString(),children:c},c))})]})]}),e&&s.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[s.jsxs(Vt,{value:ie?"editing":"viewing",onValueChange:c=>Wt(c==="editing"),children:[s.jsx(Gt,{className:" h-8",children:s.jsx(qt,{})}),s.jsxs(Jt,{children:[s.jsxs(Rt,{value:"viewing",children:[s.jsx(zr,{className:"inline-block mr-2 h-4 w-4"}),"Viewing"]}),s.jsxs(Rt,{value:"editing",children:[s.jsx(Lr,{className:"inline-block mr-2 h-4 w-4"}),"Editing"]})]})]}),s.jsx(Ee,{type:"button",size:"icon",variant:"outline",onClick:ue,title:"Print schedules",children:s.jsx(Ir,{className:"h-4 w-4 hover:cursor-printer"})}),s.jsxs(Dr,{open:D,onOpenChange:c=>{N(c),J(null),c||(B(null),Oe())},children:[s.jsx(Cr,{asChild:!0,children:s.jsx(Ee,{className:"hover:cursor-pointer dark:bg-rose",size:"sm",children:ge?"Edit Event":"Add Event"})}),s.jsxs(Sr,{className:"sm:max-w-md",children:[s.jsx(Nr,{children:s.jsx(Er,{className:"text-sm font-semibold",children:ge?"Edit Event":"Create Event"})}),s.jsxs("div",{className:"space-y-3 py-1",children:[rt&&s.jsx("div",{className:"text-[11px] text-red-600 bg-red-50 border border-red-200 px-2 py-1 rounded",children:rt}),s.jsxs("div",{className:"grid gap-1",children:[s.jsx(Pe,{className:"text-xs",children:"Title"}),s.jsx(jn,{value:P,onChange:c=>z(c.target.value),placeholder:"Short description..."})]}),s.jsxs("div",{className:"grid gap-1",children:[s.jsx(Pe,{className:"text-xs",children:"Date"}),s.jsx("input",{type:"date",className:"border rounded px-2 py-1 text-sm",value:O,onChange:c=>M(c.target.value)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rr,{checked:X,onCheckedChange:c=>le(!!c),id:"allDay"}),s.jsx(Pe,{htmlFor:"allDay",className:"text-xs",children:"All Day"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx(Pe,{className:"text-xs",children:"Start Time"}),s.jsx("input",{type:"time",className:"border rounded px-2 py-1 text-sm w-full",value:j,onChange:c=>$(c.target.value),disabled:X})]}),s.jsxs("div",{children:[s.jsx(Pe,{className:"text-xs",children:"End Time"}),s.jsx("input",{type:"time",className:"border rounded px-2 py-1 text-sm w-full",value:W,onChange:c=>H(c.target.value),disabled:X})]})]}),s.jsxs("div",{className:"grid gap-1",children:[s.jsx(Pe,{className:"text-xs",children:"Description"}),s.jsx(jn,{value:ce,onChange:c=>nt(c.target.value),placeholder:"Details (optional)..."})]}),s.jsxs("div",{className:"grid gap-1",children:[s.jsx(Pe,{className:"text-xs",children:"Color"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:st.map(c=>s.jsx("button",{type:"button",onClick:()=>ve(c),className:_("w-6 h-6 rounded-full ring-2 transition",Fe===c?"ring-black scale-110":"ring-transparent hover:ring-gray-400"),style:{backgroundColor:c},"aria-label":`Choose ${c}`},c))})]})]}),s.jsxs(jr,{className:"gap-2",children:[ge&&s.jsxs(Ee,{type:"button",variant:"destructive",size:"sm",onClick:async()=>{if(F&&confirm("Delete this event?")){R(!0);try{const c=Xn();if(!(await fetch(`/api/calendar/events/${F.raw.id}`,{method:"DELETE",headers:{Accept:"application/json","X-CSRF-TOKEN":c}})).ok)throw new Error("Delete failed");l(b=>b.filter(v=>v.raw.id!==F.raw.id)),N(!1),B(null)}catch(c){J(c.message||"Delete failed")}finally{R(!1)}}},children:[s.jsx(_r,{className:"h-4 w-4 mr-1"})," Delete"]}),s.jsx(Ee,{variant:"outline",size:"sm",onClick:()=>{N(!1),Oe()},disabled:k,children:"Cancel"}),s.jsx(Ee,{size:"sm",onClick:async()=>{if(!P.trim()){J("Title required.");return}if(!O){J("Date required.");return}if(!X&&W<=j){J("End must be after start.");return}J(null),R(!0);try{const c=Xn(),g={title:P.trim(),description:ce.trim()||null,start:X?`${O} 00:00:00`:`${O} ${j}:00`,end:X?`${O} 23:59:59`:`${O} ${W}:00`,allDay:X,color:Fe};let b;if(ge&&F?b=await fetch(`/api/calendar/events/${F.raw.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":c},body:JSON.stringify(g)}):b=await fetch("/api/calendar/events",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":c},body:JSON.stringify(g)}),!b.ok){const S=await b.json().catch(()=>({}));throw new Error(S.message||S.error||"Save failed")}const E=(await b.json().catch(()=>({}))).event_id||F&&F.raw.id,C=X?"00:00":j,w=X?"23:59":W;l(S=>{const G=S.filter(Kt=>Kt.raw.id!==E),ft={id:"ev-"+E,title:P.trim(),date:O,start:C,end:w,raw:{id:E,thesis_title:P.trim(),date_of_defense:O,start_time:C,end_time:w,defense_type:void 0,defense_mode:void 0,defense_venue:void 0,program:void 0,student_name:void 0},color:Fe,defense:!1,description:ce.trim()};return[...G,ft]}),N(!1),B(null),Oe()}catch(c){J(c.message||"Error")}finally{R(!1)}},disabled:k,children:k?"Saving...":"Save Event"})]})]})]})]})]}),p==="month"&&Ut(),p==="week"&&jt(),p==="day"&&Yt(),ye,!1]})})]})}export{Oi as default};
