import{r as t,j as e,$ as c}from"./app-DVscOEu2.js";import{B as l}from"./button-Ce0hhOYY.js";import{C as x}from"./card-d-byv3Vx.js";import{B as h}from"./badge-CoIL-rL9.js";import{M as r}from"./message-square-XNRLjw0M.js";import{P as u}from"./plus-DzSUvAbQ.js";function b(){const[s,i]=t.useState(0),[j,f]=t.useState([]),[m,o]=t.useState(!0);t.useEffect(()=>{n();const a=setInterval(n,3e4);return()=>clearInterval(a)},[]);const n=async()=>{try{const d=await(await fetch("/messages/unread-count")).json();i(d.count)}catch(a){console.error("Failed to fetch unread messages:",a)}finally{o(!1)}};return e.jsxs(x,{className:"p-4 h-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold",children:"Messages"}),s>0&&e.jsx(h,{variant:"destructive",className:"h-5 px-1.5 text-xs",children:s})]}),e.jsx(c,{href:"/messages",children:e.jsx(l,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(u,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"space-y-3",children:[m?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):s===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(r,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No new messages"})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"text-center py-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["You have ",s," unread message",s!==1?"s":""]})})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(c,{href:"/messages",children:e.jsxs(l,{className:"w-full",children:[e.jsx(r,{className:"h-4 w-4 mr-2"}),"Open Messages"]})})})]})]})}export{b as M};
