import{r as o,j as e}from"./app-BAKMM9W6.js";import{T as Y,a as H,b as f,c as m,d as O,e as c}from"./table-B43wWAfS.js";import{C as z}from"./checkbox-C4nOuQnB.js";import{B as N}from"./badge-D0sAGNiG.js";import{D as U,d as W,a as q}from"./dialog-Fyk91gvx.js";import{B as b}from"./button-CVeIta7K.js";import G from"./details-Bvo_c-av.js";import{D as k,a as w,b as y,d as l}from"./dropdown-menu-D2EcCZ7C.js";import{F as C}from"./filter-BKSBju5g.js";import{C as r}from"./check-DCZqiU_u.js";import{I as J}from"./info-D5wsL-jW.js";import{f as K}from"./format-HX8DKPSU.js";import"./utils-jAU0Cazi.js";import"./index-BHprz6Pm.js";import"./index-CUQ5MhIm.js";import"./index-DUmeJSti.js";import"./index-SVK1MPcU.js";import"./index-tSynuKjl.js";import"./index-BqysFurs.js";import"./index-CEqJL0NP.js";import"./index-DZZQifJx.js";import"./index-Chzm2fti.js";import"./index-DScCZkqp.js";import"./x-BVoq4DiS.js";import"./createLucideIcon-BSNBS9Xz.js";import"./clipboard-list-BeCyxD2L.js";import"./user-round-BXdc0yRX.js";import"./mail-CodUr7f5.js";import"./graduation-cap-CyBvkmsT.js";import"./circle-check-9ABPVyRI.js";import"./circle-x-CexCIQtI.js";import"./index-C98k58Jz.js";import"./floating-ui.react-dom-CqLEll0E.js";import"./index-CEy3VqYv.js";import"./en-US-BA9orzCf.js";function Me({paged:u,columns:a}){const[g,_]=o.useState([]),[Q,M]=o.useState(0),[v,E]=o.useState(null),[n,h]=o.useState("all"),[d,j]=o.useState("all"),[i,x]=o.useState("all"),S=g.length>0&&g.length===u.length,T=o.useMemo(()=>[...u].sort((t,s)=>{const p=t.submitted_at?new Date(t.submitted_at).getTime():-1/0;return(s.submitted_at?new Date(s.submitted_at).getTime():-1/0)-p}),[u]),A=o.useMemo(()=>{let t=T;return n==="eligible"?t=t.filter(s=>s.eligible===!0):n==="not"&&(t=t.filter(s=>s.eligible===!1)),d==="yes"?t=t.filter(s=>s.applied===!0):d==="no"&&(t=t.filter(s=>s.applied===!1)),i!=="all"&&(t=t.filter(s=>(s.application_status||"not_yet_applied")===i)),t},[T,n,d,i]);function B(){_(S?[]:u.map(t=>t.id))}function F(t){_(s=>s.includes(t)?s.filter(p=>p!==t):[...s,t])}const I=t=>e.jsx(N,{className:"rounded-full "+(t?"bg-green-100 text-green-700 border-green-200 dark:bg-green-950 dark:text-green-300 dark:border-green-900":"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-950 dark:text-amber-300 dark:border-amber-900"),variant:"outline",children:t?"Eligible":"Not eligible"}),R=t=>{const s=t||"not_yet_applied",p={approved:"bg-green-100 text-green-700 border-green-200 dark:bg-green-950 dark:text-green-300 dark:border-green-900",rejected:"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-950 dark:text-rose-300 dark:border-rose-900",pending:"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-950 dark:text-amber-300 dark:border-amber-900",not_yet_applied:"bg-zinc-100 text-zinc-700 border-zinc-200 dark:bg-zinc-900 dark:text-zinc-300 dark:border-zinc-800"},D=s==="not_yet_applied"?"Not yet applied":s[0].toUpperCase()+s.slice(1);return e.jsx(N,{className:"rounded-full "+p[s],variant:"outline",children:D})},$=n==="all"?"All":n==="eligible"?"Eligible":"Not eligible",L=d==="all"?"All":d==="yes"?"Yes":"No",P={all:"All",approved:"Approved",pending:"Pending",rejected:"Rejected",not_yet_applied:"Not yet applied"};return e.jsxs("div",{className:"rounded-md overflow-x-auto border border-border bg-white dark:bg-background dark:border-border w-full max-w-full",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-end gap-2 px-3 py-3 border-b bg-muted/20 dark:bg-muted/10",children:[e.jsxs(k,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Eligibility: ",$]})}),e.jsxs(y,{align:"end",className:"w-44",children:[e.jsxs(l,{onClick:()=>h("all"),className:"flex items-center justify-between",children:["All ",n==="all"&&e.jsx(r,{className:"h-4 w-4"})]}),e.jsxs(l,{onClick:()=>h("eligible"),className:"flex items-center justify-between",children:["Eligible ",n==="eligible"&&e.jsx(r,{className:"h-4 w-4"})]}),e.jsxs(l,{onClick:()=>h("not"),className:"flex items-center justify-between",children:["Not eligible ",n==="not"&&e.jsx(r,{className:"h-4 w-4"})]})]})]}),e.jsxs(k,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Applied: ",L]})}),e.jsxs(y,{align:"end",className:"w-40",children:[e.jsxs(l,{onClick:()=>j("all"),className:"flex items-center justify-between",children:["All ",d==="all"&&e.jsx(r,{className:"h-4 w-4"})]}),e.jsxs(l,{onClick:()=>j("yes"),className:"flex items-center justify-between",children:["Yes ",d==="yes"&&e.jsx(r,{className:"h-4 w-4"})]}),e.jsxs(l,{onClick:()=>j("no"),className:"flex items-center justify-between",children:["No ",d==="no"&&e.jsx(r,{className:"h-4 w-4"})]})]})]}),e.jsxs(k,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(b,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Status: ",P[i]]})}),e.jsxs(y,{align:"end",className:"w-56",children:[e.jsxs(l,{onClick:()=>x("all"),className:"flex items-center justify-between",children:["All ",i==="all"&&e.jsx(r,{className:"h-4 w-4"})]}),e.jsxs(l,{onClick:()=>x("approved"),className:"flex items-center justify-between",children:["Approved ",i==="approved"&&e.jsx(r,{className:"h-4 w-4"})]}),e.jsxs(l,{onClick:()=>x("pending"),className:"flex items-center justify-between",children:["Pending ",i==="pending"&&e.jsx(r,{className:"h-4 w-4"})]}),e.jsxs(l,{onClick:()=>x("rejected"),className:"flex items-center justify-between",children:["Rejected ",i==="rejected"&&e.jsx(r,{className:"h-4 w-4"})]}),e.jsxs(l,{onClick:()=>x("not_yet_applied"),className:"flex items-center justify-between",children:["Not yet applied ",i==="not_yet_applied"&&e.jsx(r,{className:"h-4 w-4"})]})]})]})]}),e.jsxs(Y,{className:"min-w-[900px] text-sm dark:text-muted-foreground",children:[e.jsx(H,{children:e.jsxs(f,{className:"dark:bg-muted/40",children:[e.jsx(m,{className:"w-[4%] py-2 dark:bg-muted/30 dark:texxt-muted-foreground",children:e.jsx(z,{checked:S,onCheckedChange:B})}),a.student&&e.jsx(m,{className:"w-[28%] px-2 dark:bg-muted/30 dark:text-muted-foreground",children:"Student"}),a.program&&e.jsx(m,{className:"w-[22%] px-2 dark:bg-muted/30 dark:text-muted-foreground",children:"Program"}),a.eligibility&&e.jsx(m,{className:"w-[14%] text-center px-1 py-2 dark:bg-muted/30 dark:text-muted-foreground",children:"Eligibility"}),a.applied&&e.jsx(m,{className:"w-[10%] text-center px-1 py-2 dark:bg-muted/30 dark:text-muted-foreground",children:"Applied"}),a.appStatus&&e.jsx(m,{className:"w-[16%] text-center px-1 py-2 dark:bg-muted/30 dark:text-muted-foreground",children:"Application status"}),a.actions&&e.jsx(m,{className:"w-[10%] px-1 py-2 text-center dark:bg-muted/30 dark:text-muted-foreground",children:"Actions"})]})}),e.jsxs(O,{children:[A.map((t,s)=>e.jsxs(f,{className:"hover:bg-muted/50 dark:hover:bg-muted/70",children:[e.jsx(c,{className:"px-2 py-2",children:e.jsx(z,{checked:g.includes(t.id),onCheckedChange:()=>F(t.id)})}),a.student&&e.jsxs(c,{className:"px-2 py-2 font-semibold truncate leading-tight dark:text-foreground",style:{maxWidth:"260px"},children:[e.jsxs("div",{className:"truncate",title:`${t.last_name}, ${t.first_name}`,children:[t.last_name,", ",t.first_name," ",t.middle_name?`${t.middle_name[0]}.`:""]}),e.jsxs("div",{className:"text-xs font-normal text-muted-foreground mt-1 truncate",children:[t.email||"—"," ",t.school_id?`• ${t.school_id}`:""]})]}),a.program&&e.jsx(c,{className:"px-2 py-2",children:e.jsx("span",{className:"truncate block",children:t.program||"—"})}),a.eligibility&&e.jsx(c,{className:"px-1 py-2 text-center",children:I(t.eligible)}),a.applied&&e.jsxs(c,{className:"px-1 py-2 text-center",children:[e.jsx(N,{variant:"outline",className:"rounded-full",children:t.applied?"Yes":"No"}),t.submitted_at?e.jsx("div",{className:"text-[11px] text-muted-foreground mt-1",children:K(new Date(t.submitted_at),"MMM dd, yyyy")}):null]}),a.appStatus&&e.jsx(c,{className:"px-1 py-2 text-center",children:R(t.application_status)}),a.actions&&e.jsx(c,{className:"px-1 py-2 text-center",children:e.jsxs(U,{children:[e.jsx(W,{asChild:!0,children:e.jsx(b,{size:"sm",variant:"outline",onClick:()=>{E(t),M(s)},title:"Details",className:"dark:bg-muted/30",children:e.jsx(J,{})})}),e.jsx(q,{className:"max-w-3xl min-w-260 w-full max-h-[90vh]",children:e.jsx("div",{className:"max-h-[80vh] overflow-y-auto px-1",children:v&&e.jsx(G,{application:v})})})]})})]},t.id)),A.length===0&&e.jsx(f,{children:e.jsx(c,{colSpan:Object.values(a).filter(Boolean).length+1,className:"text-center py-16",children:e.jsx("div",{className:"text-muted-foreground",children:"No records found."})})})]})]})]})}export{Me as default};
