import{r as t,j as e,L as w}from"./app-BAKMM9W6.js";import{S as N}from"./switch-ygBnpRFO.js";import{D as k,a as D,e as O,b as L,c as R,f as T}from"./dialog-Fyk91gvx.js";import{B as a}from"./button-CVeIta7K.js";import{I as E}from"./input-BRk-fvKd.js";import{t as u}from"./index-C9JbnLWr.js";import{A as F}from"./app-layout-CHeZhPmm.js";import{S as I}from"./layout-Z6FC9vFI.js";import"./index-CUQ5MhIm.js";import"./index-CEqJL0NP.js";import"./utils-jAU0Cazi.js";import"./index-Chzm2fti.js";import"./index-DScCZkqp.js";import"./x-BVoq4DiS.js";import"./createLucideIcon-BSNBS9Xz.js";import"./index-DZZQifJx.js";import"./tooltip-B2Ch4P2D.js";import"./floating-ui.react-dom-CqLEll0E.js";import"./separator-LRfcwlAa.js";import"./index-BHprz6Pm.js";import"./chevron-right-DZ7e7qvM.js";import"./dropdown-menu-D2EcCZ7C.js";import"./index-SVK1MPcU.js";import"./index-DUmeJSti.js";import"./index-C98k58Jz.js";import"./index-BqysFurs.js";import"./index-CEy3VqYv.js";import"./check-DCZqiU_u.js";import"./avatar-BvAeIlgK.js";import"./settings-CXr5fuO8.js";import"./graduation-cap-CyBvkmsT.js";import"./file-text-Bhi2OKUW.js";import"./dollar-sign-BZcFe5e9.js";import"./users-t5r6UxGv.js";import"./badge-dollar-sign-Ciqfzy1N.js";import"./send-CY1U2khq.js";import"./credit-card-DIRNAmsI.js";import"./tabs-DJFs2CDd.js";import"./badge-D0sAGNiG.js";import"./circle-check-big-wj1h3M4g.js";import"./info-D5wsL-jW.js";import"./sun-D0NfJtcj.js";function be({initialAutoAccept:n,initialAdviserCode:h}){const[x,f]=t.useState(n),[o,g]=t.useState(n),[v,i]=t.useState(!1),[c,d]=t.useState(!1),[j,y]=t.useState(h),[m,l]=t.useState(!1);function A(s){g(s),i(!0)}async function S(){var r;d(!0),i(!1),f(o);const s=(r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content");await fetch("/settings/adviser/auto-accept",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""},body:JSON.stringify({autoAccept:o})}),u.success("Auto-accept setting updated!"),d(!1)}async function C(){var p;l(!0);const s=(p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content"),b=await(await fetch("/settings/adviser/reset-code",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":s||""}})).json();y(b.adviser_code),u.success("Adviser code reset!"),l(!1)}return e.jsxs(F,{breadcrumbs:[{title:"Adviser Settings",href:"/settings/adviser"}],children:[e.jsx(w,{title:"Adviser Settings"}),e.jsx(I,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Adviser Code Management"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Your Adviser Code"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{value:j,disabled:!0,className:"w-40 font-mono"}),e.jsx(a,{onClick:C,disabled:m,variant:"destructive",children:m?"Resetting...":"Reset Code"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Share this code with your students so they can register you as their adviser. If you suspect your code is compromised, reset it here."})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{checked:x,onCheckedChange:A,disabled:c,"aria-label":"Auto-accept students"}),e.jsx("span",{className:"text-base font-medium",children:"Auto-accept students who enter your adviser code"})]}),e.jsx("div",{className:"text-muted-foreground text-sm max-w-lg",children:"When enabled, students who enter your code are automatically linked to you. When disabled, you must manually approve each student."})]}),e.jsx(k,{open:v,onOpenChange:i,children:e.jsxs(D,{children:[e.jsxs(O,{children:[e.jsx(L,{children:o?"Enable Auto-Accept?":"Disable Auto-Accept?"}),e.jsx(R,{children:o?"Students who enter your adviser code will be automatically linked to you.":"You will need to manually approve each student who enters your adviser code."})]}),e.jsxs(T,{children:[e.jsx(a,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),e.jsx(a,{onClick:S,disabled:c,children:"Confirm"})]})]})})]})})]})}export{be as default};
