import{r as n,j as e,S as E}from"./app-cp5Xxmuq.js";import{T as we,a as ke,b as $,c as A,d as Se,e as j}from"./table-Bl3rslsz.js";import{C as F}from"./checkbox-Bg390E6Z.js";import{B as Re}from"./badge-CD31ww1M.js";import{D as z,f as _e,a as B}from"./dialog-BrgoPxJ8.js";import{b as W,B as k}from"./button-HcUz4N3c.js";import Te from"./details-I-XeSOwj.js";import{D as Pe,a as Oe,b as $e,c as T}from"./dropdown-menu-gg636D7H.js";import{T as Me}from"./textarea-ByK0ywa2.js";import{c as G,R as Ie,b as Ee,P as Fe,W as ze,C as Be,T as Le,D as We,a as U,O as Ge}from"./index-DbUO4osX.js";import{a as Ue}from"./index-BiaJJerR.js";import{c as D}from"./utils-jAU0Cazi.js";import{F as Ve}from"./filter-sKlqmTy4.js";import{C as P}from"./check-BKTDNJDu.js";import{I as Ye}from"./info-CTXSwM4X.js";import{C as qe}from"./circle-x-DL_-XZRU.js";import{C as Xe}from"./circle-check-big-D0Jy2-20.js";import{C as He}from"./circle-arrow-left-Cn027Ov8.js";import{f as Je}from"./format-HX8DKPSU.js";import"./index-B7grp9yP.js";import"./index-BwY1skv1.js";import"./index-w2GBgPnQ.js";import"./index-DGSzJOj5.js";import"./index-DjkDYLy3.js";import"./index-DgxNXxEZ.js";import"./index-DZZQifJx.js";import"./x-ChVMmgUr.js";import"./createLucideIcon-fPg6f676.js";import"./credit-card-BumryUWt.js";import"./user-round-Bjl-RuYP.js";import"./mail-UcswMDF5.js";import"./graduation-cap-DiPQsR-i.js";import"./receipt-bvtmF3pp.js";import"./en-US-BA9orzCf.js";import"./index-KWoA_zXX.js";import"./floating-ui.react-dom-CclZEsZs.js";import"./index-BkV9g7de.js";function Ke(t,r=[]){let a=[];function i(l,c){const m=n.createContext(c),p=a.length;a=[...a,c];const u=f=>{var w;const{scope:h,children:N,...x}=f,v=((w=h==null?void 0:h[t])==null?void 0:w[p])||m,y=n.useMemo(()=>x,Object.values(x));return e.jsx(v.Provider,{value:y,children:N})};u.displayName=l+"Provider";function C(f,h){var v;const N=((v=h==null?void 0:h[t])==null?void 0:v[p])||m,x=n.useContext(N);if(x)return x;if(c!==void 0)return c;throw new Error(`\`${f}\` must be used within \`${l}\``)}return[u,C]}const o=()=>{const l=a.map(c=>n.createContext(c));return function(m){const p=(m==null?void 0:m[t])||l;return n.useMemo(()=>({[`__scope${t}`]:{...m,[t]:p}}),[m,p])}};return o.scopeName=t,[i,Qe(o,...r)]}function Qe(...t){const r=t[0];if(t.length===1)return r;const a=()=>{const i=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const c=i.reduce((m,{useScope:p,scopeName:u})=>{const f=p(l)[`__scope${u}`];return{...m,...f}},{});return n.useMemo(()=>({[`__scope${r.scopeName}`]:c}),[c])}};return a.scopeName=r.scopeName,a}function L(t,r){if(typeof t=="function")return t(r);t!=null&&(t.current=r)}function Ze(...t){return r=>{let a=!1;const i=t.map(o=>{const l=L(o,r);return!a&&typeof l=="function"&&(a=!0),l});if(a)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():L(t[o],null)}}}}function V(...t){return n.useCallback(Ze(...t),t)}function et(t,r,{checkForDefaultPrevented:a=!0}={}){return function(o){if(t==null||t(o),a===!1||!o.defaultPrevented)return r==null?void 0:r(o)}}var Y="AlertDialog",[tt,er]=Ke(Y,[G]),b=G(),q=t=>{const{__scopeAlertDialog:r,...a}=t,i=b(r);return e.jsx(Ie,{...i,...a,modal:!0})};q.displayName=Y;var rt="AlertDialogTrigger",X=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,o=b(a);return e.jsx(Ee,{...o,...i,ref:r})});X.displayName=rt;var at="AlertDialogPortal",H=t=>{const{__scopeAlertDialog:r,...a}=t,i=b(r);return e.jsx(Fe,{...i,...a})};H.displayName=at;var st="AlertDialogOverlay",J=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,o=b(a);return e.jsx(Ge,{...o,...i,ref:r})});J.displayName=st;var S="AlertDialogContent",[ot,nt]=tt(S),it=Ue("AlertDialogContent"),K=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,children:i,...o}=t,l=b(a),c=n.useRef(null),m=V(r,c),p=n.useRef(null);return e.jsx(ze,{contentName:S,titleName:Q,docsSlug:"alert-dialog",children:e.jsx(ot,{scope:a,cancelRef:p,children:e.jsxs(Be,{role:"alertdialog",...l,...o,ref:m,onOpenAutoFocus:et(o.onOpenAutoFocus,u=>{var C;u.preventDefault(),(C=p.current)==null||C.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[e.jsx(it,{children:i}),e.jsx(ct,{contentRef:c})]})})})});K.displayName=S;var Q="AlertDialogTitle",Z=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,o=b(a);return e.jsx(Le,{...o,...i,ref:r})});Z.displayName=Q;var ee="AlertDialogDescription",te=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,o=b(a);return e.jsx(We,{...o,...i,ref:r})});te.displayName=ee;var lt="AlertDialogAction",re=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,o=b(a);return e.jsx(U,{...o,...i,ref:r})});re.displayName=lt;var ae="AlertDialogCancel",se=n.forwardRef((t,r)=>{const{__scopeAlertDialog:a,...i}=t,{cancelRef:o}=nt(ae,a),l=b(a),c=V(r,o);return e.jsx(U,{...l,...i,ref:c})});se.displayName=ae;var ct=({contentRef:t})=>{const r=`\`${S}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${S}\` by passing a \`${ee}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${S}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return n.useEffect(()=>{var i;document.getElementById((i=t.current)==null?void 0:i.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},dt=q,mt=X,pt=H,oe=J,ne=K,ie=re,le=se,ce=Z,de=te;const ut=dt,xt=mt,gt=pt,me=n.forwardRef(({className:t,...r},a)=>e.jsx(oe,{className:D("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:a}));me.displayName=oe.displayName;const pe=n.forwardRef(({className:t,...r},a)=>e.jsxs(gt,{children:[e.jsx(me,{}),e.jsx(ne,{ref:a,className:D("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]}));pe.displayName=ne.displayName;const ue=({className:t,...r})=>e.jsx("div",{className:D("flex flex-col space-y-2 text-center sm:text-left",t),...r});ue.displayName="AlertDialogHeader";const xe=({className:t,...r})=>e.jsx("div",{className:D("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});xe.displayName="AlertDialogFooter";const ge=n.forwardRef(({className:t,...r},a)=>e.jsx(ce,{ref:a,className:D("text-lg font-semibold",t),...r}));ge.displayName=ce.displayName;const fe=n.forwardRef(({className:t,...r},a)=>e.jsx(de,{ref:a,className:D("text-sm text-muted-foreground",t),...r}));fe.displayName=de.displayName;const he=n.forwardRef(({className:t,...r},a)=>e.jsx(ie,{ref:a,className:D(W(),t),...r}));he.displayName=ie.displayName;const je=n.forwardRef(({className:t,...r},a)=>e.jsx(le,{ref:a,className:D(W({variant:"outline"}),"mt-2 sm:mt-0",t),...r}));je.displayName=le.displayName;function tr({paged:t,columns:r,tabType:a,onRowApprove:i,onRowReject:o,onRowRetrieve:l}){const[c,m]=n.useState([]),[p,u]=n.useState(null),[C,f]=n.useState(null),[h,N]=n.useState(null),[x,v]=n.useState(""),[y,w]=n.useState(!1),[g,_]=n.useState("all"),M=c.length>0&&c.length===t.length,O=n.useMemo(()=>[...t].sort((s,d)=>{const R=s.submitted_at?new Date(s.submitted_at).getTime():-1/0;return(d.submitted_at?new Date(d.submitted_at).getTime():-1/0)-R}),[t]),I=n.useMemo(()=>g==="all"?O:O.filter(s=>s.status===g),[O,g]);function be(){m(M?[]:t.map(s=>s.id))}function Ne(s){m(d=>d.includes(s)?d.filter(R=>R!==s):[...d,s])}const ve=s=>{const d=String(s||"pending").toLowerCase(),R=d==="approved"?"bg-green-100 text-green-700 border-green-200 dark:bg-green-950 dark:text-green-300 dark:border-green-900":d==="rejected"?"bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-950 dark:text-rose-300 dark:border-rose-900":"bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-950 dark:text-amber-300 dark:border-amber-900";return e.jsx(Re,{className:`rounded-full ${R}`,variant:"outline",children:d[0].toUpperCase()+d.slice(1)})},ye=s=>s==null||isNaN(Number(s))?"—":new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",maximumFractionDigits:2}).format(Number(s)),Ae=g==="all"?"All":g[0].toUpperCase()+g.slice(1);function De(s){w(!0),E.post(route("coordinator.compre-payment.approve",s),{},{preserveScroll:!0,onFinish:()=>{w(!1),f(null)}})}function Ce(s){x.trim()&&(w(!0),E.post(route("coordinator.compre-payment.reject",s),{remarks:x.trim()},{preserveScroll:!0,onFinish:()=>{w(!1),N(null),v("")}}))}return e.jsxs("div",{className:"rounded-md overflow-x-auto border border-border bg-white dark:bg-background dark:border-border w-full max-w-full",children:[e.jsx("div",{className:"flex items-center justify-end gap-2 px-3 py-2 border-b bg-muted/20 dark:bg-muted/10",children:e.jsxs(Pe,{children:[e.jsx(Oe,{asChild:!0,children:e.jsxs(k,{variant:"outline",size:"sm",className:"h-8",children:[e.jsx(Ve,{className:"mr-2 h-4 w-4"}),"Status: ",Ae]})}),e.jsxs($e,{align:"end",className:"w-44",children:[e.jsxs(T,{onClick:()=>_("all"),className:"flex items-center justify-between",children:["All ",g==="all"&&e.jsx(P,{className:"h-4 w-4"})]}),e.jsxs(T,{onClick:()=>_("pending"),className:"flex items-center justify-between",children:["Pending ",g==="pending"&&e.jsx(P,{className:"h-4 w-4"})]}),e.jsxs(T,{onClick:()=>_("approved"),className:"flex items-center justify-between",children:["Approved ",g==="approved"&&e.jsx(P,{className:"h-4 w-4"})]}),e.jsxs(T,{onClick:()=>_("rejected"),className:"flex items-center justify-between",children:["Rejected ",g==="rejected"&&e.jsx(P,{className:"h-4 w-4"})]})]})]})}),e.jsxs(we,{className:"min-w-[900px] text-sm dark:text-muted-foreground",children:[e.jsx(ke,{children:e.jsxs($,{className:"dark:bg-muted/40",children:[e.jsx(A,{className:"w-[4%] py-2 dark:bg-muted/30 dark:text-muted-foreground",children:e.jsx(F,{checked:M,onCheckedChange:be})}),r.student&&e.jsx(A,{className:"w-[22%] px-2 dark:bg-muted/30 dark:text-muted-foreground",children:"Student"}),r.program&&e.jsx(A,{className:"w-[18%] px-2 dark:bg-muted/30 dark:text-muted-foreground",children:"Program"}),r.reference&&e.jsx(A,{className:"w-[16%] px-2 dark:bg-muted/30 dark:text-muted-foreground",children:"OR / Reference"}),r.amount&&e.jsx(A,{className:"w-[10%] text-right px-2 py-2 dark:bg-muted/30 dark:text-muted-foreground",children:"Amount"}),r.date&&e.jsx(A,{className:"w-[12%] text-center px-1 py-2 dark:bg-muted/30 dark:text-muted-foreground",children:"Date"}),r.status&&e.jsx(A,{className:"w-[12%] text-center px-1 py-2 dark:bg-muted/30 dark:text-muted-foreground",children:"Status"}),r.actions&&e.jsx(A,{className:"w-[14%] px-1 py-2 text-center dark:bg-muted/30 dark:text-muted-foreground",children:"Actions"})]})}),e.jsxs(Se,{children:[I.map(s=>e.jsxs($,{className:"hover:bg-muted/50 dark:hover:bg-muted/70",children:[e.jsx(j,{className:"px-2 py-2",children:e.jsx(F,{checked:c.includes(s.id),onCheckedChange:()=>Ne(s.id)})}),r.student&&e.jsxs(j,{className:"px-2 py-2 font-semibold truncate leading-tight dark:text-foreground",style:{maxWidth:"220px"},children:[e.jsxs("div",{className:"truncate",title:`${s.last_name}, ${s.first_name}`,children:[s.last_name,", ",s.first_name," ",s.middle_name?`${s.middle_name[0]}.`:""]}),e.jsxs("div",{className:"text-xs font-normal text-muted-foreground mt-1 truncate",children:[s.email||"—"," ",s.school_id?`• ${s.school_id}`:""]})]}),r.program&&e.jsx(j,{className:"px-2 py-2",children:e.jsx("span",{className:"truncate block",children:s.program||"—"})}),r.reference&&e.jsx(j,{className:"px-2 py-2",children:e.jsx("span",{className:"truncate block",children:s.reference||"—"})}),r.amount&&e.jsx(j,{className:"px-2 py-2 text-right",children:ye(s.amount)}),r.date&&e.jsx(j,{className:"px-1 py-2 text-center whitespace-nowrap",children:s.submitted_at?Je(new Date(s.submitted_at),"MMM dd, yyyy"):"—"}),r.status&&e.jsx(j,{className:"px-1 py-2 text-center",children:ve(s.status)}),r.actions&&e.jsx(j,{className:"px-1 py-2 text-center",children:e.jsxs("div",{className:"flex gap-1 justify-center",children:[e.jsxs(z,{children:[e.jsx(_e,{asChild:!0,children:e.jsx(k,{size:"sm",variant:"outline",onClick:()=>u(s),title:"Details",className:"dark:bg-muted/30",children:e.jsx(Ye,{})})}),e.jsx(B,{className:"max-w-3xl min-w-260 w-full max-h-[90vh]",children:e.jsx("div",{className:"max-h-[80vh] overflow-y-auto px-1",children:p&&e.jsx(Te,{payment:p})})})]}),a==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(k,{size:"sm",variant:"outline",title:"Reject",onClick:()=>{N(s.id),v("")},className:"text-red-500 hover:text-red-500",children:e.jsx(qe,{size:16})}),e.jsxs(ut,{open:C===s.id,onOpenChange:d=>!d&&f(null),children:[e.jsx(xt,{asChild:!0,children:e.jsx(k,{size:"sm",variant:"outline",title:"Approve",onClick:()=>f(s.id),className:"text-green-500 hover:text-green-500",children:e.jsx(Xe,{size:16})})}),e.jsxs(pe,{children:[e.jsxs(ue,{children:[e.jsx(ge,{children:"Approve this payment?"}),e.jsx(fe,{children:"This will mark the submission as approved. The student will see the status update."})]}),e.jsxs(xe,{children:[e.jsx(je,{disabled:y,children:"Cancel"}),e.jsx(he,{disabled:y,onClick:()=>De(s.id),children:y?"Approving…":"Approve"})]})]})]}),e.jsx(z,{open:h===s.id,onOpenChange:d=>!d&&N(null),children:e.jsx(B,{className:"max-w-md",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-base font-semibold",children:"Reject this payment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Provide a reason. The student will see this message."}),e.jsx(Me,{value:x,onChange:d=>v(d.target.value),placeholder:"Reason for rejection",rows:4}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(k,{variant:"outline",onClick:()=>N(null),disabled:y,children:"Cancel"}),e.jsx(k,{variant:"destructive",onClick:()=>Ce(s.id),disabled:y||x.trim().length<3,children:y?"Rejecting…":"Confirm Reject"})]})]})})})]}),a==="rejected"&&e.jsx(k,{size:"sm",variant:"outline",title:"Retrieve",onClick:()=>l&&l(s.id),className:"text-blue-500 hover:text-blue-500",children:e.jsx(He,{size:16})})]})})]},s.id)),I.length===0&&e.jsx($,{children:e.jsx(j,{colSpan:Object.values(r).filter(Boolean).length+1,className:"text-center py-16",children:e.jsx("div",{className:"text-muted-foreground",children:"No records found."})})})]})]})]})}export{tr as default};
