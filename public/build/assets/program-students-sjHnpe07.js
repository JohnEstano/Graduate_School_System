import{r as d,m as B,j as e,L as $}from"./app-BDkuJsct.js";import{A as z}from"./app-layout-Cr_DtTkJ.js";import H from"./individual-records-BJNawdwV.js";import{T as O,a as U,b as n,c as j,d as V,e as c}from"./table-CnA6sFiR.js";import{A as q,a as G}from"./avatar-DpsgA3Kf.js";import{S as J}from"./search-input-BDV3126c.js";import{B as y}from"./button-DggClj9M.js";import{C as K}from"./calendar-BhsmegxW.js";import{P as Q,a as W,b as X}from"./popover-CxnVWzfd.js";import{c as Y}from"./utils-jAU0Cazi.js";import{I as N}from"./input-BmPXXlp0.js";import{L as v}from"./label-MiJboLk1.js";import{C as Z}from"./calendar-CI-DWPmu.js";import{f as a,i as b}from"./format-Cze4Gw5q.js";import{p as w}from"./parse-BrgCSArQ.js";import"./index-B_a1aFVM.js";import"./index-DZZQifJx.js";import"./index-CWqpdCTP.js";import"./index-BhbofC_p.js";import"./index-D-bfryUZ.js";import"./x-CtfT_1vN.js";import"./createLucideIcon-CEmaZ7tj.js";import"./tooltip-CWM4FSMS.js";import"./floating-ui.react-dom-w0Q93DA2.js";import"./separator-DaKqQg6m.js";import"./index-LRezjsDo.js";import"./chevron-right-BpKiIXqV.js";import"./dropdown-menu-B7sOazTG.js";import"./index-DMsjTEK4.js";import"./index-BdhkuEJx.js";import"./index-BKBXBDOv.js";import"./index-QFmRa-KD.js";import"./check-BUlQxyEc.js";import"./settings-BITCJcnj.js";import"./users-BTr8E8QO.js";import"./graduation-cap-Cszrlop1.js";import"./file-text-rxgzo2tt.js";import"./dollar-sign-CSALIIUa.js";import"./send-9CEFXyiZ.js";import"./credit-card-CM3Zlvhr.js";import"./tabs-BOuSS6lC.js";import"./badge-BJdX7_A9.js";import"./circle-check-big-CKfkcUFR.js";import"./info-DwFda8kE.js";import"./sun-B3PIUh1_.js";import"./dialog-DeUj0iLU.js";import"./chevron-down-DMxaecxw.js";import"./download-DGArilmi.js";import"./search-oqoQW3gm.js";import"./endOfWeek-BqBOMalL.js";import"./differenceInCalendarMonths-BlVIDW-K.js";import"./normalizeInterval-6lUcOLZ2.js";import"./endOfMonth-DvPI_8Ds.js";import"./isSameDay-DsAL-Hdb.js";import"./isSameMonth-C-hFGgGu.js";function et({program:o,students:M,filters:S}){const[D,x]=d.useState(!1),[p,g]=d.useState(null),[s,m]=d.useState(),[C,i]=d.useState(""),[k,l]=d.useState(""),{data:u,setData:I,get:T}=B({search:S.search||""}),_=t=>{i(t);const r=w(t,"yyyy-MM-dd",new Date);b(r)&&m({from:r,to:s==null?void 0:s.to})},A=t=>{l(t);const r=w(t,"yyyy-MM-dd",new Date);b(r)&&m({from:s==null?void 0:s.from,to:r})},E=t=>{m(t),t!=null&&t.from?i(a(t.from,"yyyy-MM-dd")):i(""),t!=null&&t.to?l(a(t.to,"yyyy-MM-dd")):l("")},F=[{title:"Student Records",href:"/student-records"},{title:o.name,href:`/student-records/program/${o.id}`}];d.useEffect(()=>{const t=setTimeout(()=>{T(route("student-records.program.show",o.id),{preserveState:!0,replace:!0})},300);return()=>clearTimeout(t)},[u]);const L=t=>{g(t),x(!0)},f=M.data.filter(t=>{if(s!=null&&s.from){const r=t.defense_date?new Date(t.defense_date):null;if(!r)return!1;const h=s.from,P=s.to||h;return r>=h&&r<=P}return!0});return e.jsxs(z,{breadcrumbs:F,children:[e.jsx($,{title:`Students - ${o.name}`}),e.jsxs("div",{className:"container mx-auto p-6 dark:bg-[#0a0a0a] min-h-screen",children:[e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:o.name}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[o.program," â€¢ ",o.category]})]})}),e.jsxs("div",{className:"mb-4 flex flex-col sm:flex-row gap-4 items-start sm:items-center",children:[e.jsx(J,{placeholder:"Search Student Name or ID...",className:"w-full sm:w-1/3",value:u.search,onChange:t=>I("search",t.target.value)}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Filter:"}),e.jsxs(Q,{children:[e.jsx(W,{asChild:!0,children:e.jsxs(y,{variant:"outline",className:Y("w-[280px] justify-start text-left font-normal",!s&&"text-muted-foreground"),children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),s!=null&&s.from?s.to?e.jsxs(e.Fragment,{children:[a(s.from,"MMM dd, yyyy")," -"," ",a(s.to,"MMM dd, yyyy")]}):a(s.from,"MMM dd, yyyy"):e.jsx("span",{children:"Pick a date range"})]})}),e.jsx(X,{className:"w-auto p-0",align:"start",children:e.jsxs("div",{className:"p-3 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{htmlFor:"start-date",className:"text-xs font-medium text-muted-foreground",children:"From"}),e.jsx(N,{id:"start-date",type:"date",value:C,onChange:t=>_(t.target.value),className:"h-9 w-full",placeholder:"Start date"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{htmlFor:"end-date",className:"text-xs font-medium text-muted-foreground",children:"To"}),e.jsx(N,{id:"end-date",type:"date",value:k,onChange:t=>A(t.target.value),className:"h-9 w-full",placeholder:"End date"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or select from calendar"})})]}),e.jsx(K,{mode:"range",defaultMonth:(s==null?void 0:s.from)||new Date,selected:s,onSelect:E,numberOfMonths:1,className:"rounded-md"}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[s!=null&&s.from?e.jsx("div",{className:"text-xs text-muted-foreground flex-1",children:s.to?e.jsxs("span",{className:"font-medium",children:[a(s.from,"MMM dd, yyyy")," - ",a(s.to,"MMM dd, yyyy")]}):e.jsx("span",{children:a(s.from,"MMM dd, yyyy")})}):e.jsx("div",{className:"text-xs text-muted-foreground",children:"No date selected"}),s&&e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>{m(void 0),i(""),l("")},className:"h-8 px-2 text-xs",children:"Clear"})]})]})})]})]})]}),e.jsx("div",{className:"rounded-md border border-border bg-white dark:bg-[#121212] p-2 max-h-[68vh] overflow-y-auto",children:e.jsxs(O,{className:"min-w-full text-sm",children:[e.jsx(U,{className:"sticky top-0 bg-white dark:bg-[#121212] z-10 shadow-sm",children:e.jsxs(n,{children:[e.jsx(j,{className:"w-[70%] px-4 py-2",children:"Student Name"}),e.jsx(j,{className:"w-[30%] px-4 py-2 text-center",children:"Defense Date"})]})}),e.jsx(V,{children:f.length>0?f.map(t=>e.jsxs(n,{className:"hover:bg-muted/50 cursor-pointer",onClick:()=>L(t),children:[e.jsxs(c,{className:"flex items-center space-x-4 px-4 py-3",children:[e.jsx(q,{className:"h-10 w-10 flex-shrink-0 bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-300",children:e.jsx(G,{children:t.first_name.charAt(0)})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[t.first_name," ",t.middle_name?t.middle_name.charAt(0)+".":""," ",t.last_name]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.student_id})]})]}),e.jsx(c,{className:"px-4 py-3 text-center",children:t.defense_date?new Date(t.defense_date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-"})]},t.id)):e.jsx(n,{children:e.jsx(c,{colSpan:1,className:"h-24 text-center",children:"No students found."})})})]})}),D&&p&&e.jsx(H,{record:p,onClose:()=>x(!1)})]})]})}export{et as default};
