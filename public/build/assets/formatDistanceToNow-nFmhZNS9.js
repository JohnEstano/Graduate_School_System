import{c as O}from"./constructNow-DDgVKswu.js";import{t as h,n as I,g as y,e as T,d as S,h as X,j as D}from"./format-Cze4Gw5q.js";import{d as b}from"./differenceInCalendarMonths-BlVIDW-K.js";import{e as w}from"./endOfDay-Ci94Ylrd.js";import{e as N}from"./endOfMonth-DvPI_8Ds.js";function M(a,r){const e=+h(a)-+h(r);return e<0?-1:e>0?1:e}function _(a){return r=>{const f=(a?Math[a]:Math.trunc)(r);return f===0?0:f}}function Y(a,r){return+h(a)-+h(r)}function v(a,r){const e=h(a,r==null?void 0:r.in);return+w(e,r)==+N(e,r)}function z(a,r,e){const[f,t,i]=I(e==null?void 0:e.in,a,a,r),u=M(t,i),n=Math.abs(b(t,i));if(n<1)return 0;t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-u*n);let o=M(t,i)===-u;v(f)&&n===1&&M(f,i)===1&&(o=!1);const l=u*(n-+o);return l===0?0:l}function A(a,r,e){const f=Y(a,r)/1e3;return _(e==null?void 0:e.roundingMethod)(f)}function L(a,r,e){const f=y(),t=(e==null?void 0:e.locale)??f.locale??T,i=2520,u=M(a,r);if(isNaN(u))throw new RangeError("Invalid time value");const n=Object.assign({},e,{addSuffix:e==null?void 0:e.addSuffix,comparison:u}),[o,l]=I(e==null?void 0:e.in,...u>0?[r,a]:[a,r]),m=A(l,o),x=(S(l)-S(o))/1e3,s=Math.round((m-x)/60);let d;if(s<2)return e!=null&&e.includeSeconds?m<5?t.formatDistance("lessThanXSeconds",5,n):m<10?t.formatDistance("lessThanXSeconds",10,n):m<20?t.formatDistance("lessThanXSeconds",20,n):m<40?t.formatDistance("halfAMinute",0,n):m<60?t.formatDistance("lessThanXMinutes",1,n):t.formatDistance("xMinutes",1,n):s===0?t.formatDistance("lessThanXMinutes",1,n):t.formatDistance("xMinutes",s,n);if(s<45)return t.formatDistance("xMinutes",s,n);if(s<90)return t.formatDistance("aboutXHours",1,n);if(s<X){const c=Math.round(s/60);return t.formatDistance("aboutXHours",c,n)}else{if(s<i)return t.formatDistance("xDays",1,n);if(s<D){const c=Math.round(s/X);return t.formatDistance("xDays",c,n)}else if(s<D*2)return d=Math.round(s/D),t.formatDistance("aboutXMonths",d,n)}if(d=z(l,o),d<12){const c=Math.round(s/D);return t.formatDistance("xMonths",c,n)}else{const c=d%12,g=Math.trunc(d/12);return c<3?t.formatDistance("aboutXYears",g,n):c<9?t.formatDistance("overXYears",g,n):t.formatDistance("almostXYears",g+1,n)}}function E(a,r){return L(a,O(a),r)}export{E as f};
