import{K as L,m as B,r as C,R as H,j as e}from"./app-BubHmeqC.js";import{H as p}from"./heading-small-Cs8R91EO.js";import{L as o}from"./label-D3c8d3nH.js";import{I as i}from"./input-y4wBi6jo.js";import{B as b}from"./button-CX84Ig4W.js";import{S as z}from"./Stepper-Cw11H9gl.js";import{D as q,a as K,e as V,b as G,c as J}from"./dialog-ywfV6j7b.js";import{P as Q,a as U,b as W}from"./popover-DbNLJDwL.js";import{C as X}from"./calendar-1djviplC.js";import{S as Z}from"./separator-B1kTuyS6.js";import{C as ee}from"./calendar-B4x-YT-4.js";import{P as se}from"./plus-Dt1ajQhA.js";import{C as te}from"./check-CZ9c_sEg.js";import{f}from"./format-HX8DKPSU.js";import"./index-PQN_369Y.js";import"./index-CAAZlwhj.js";import"./utils-jAU0Cazi.js";import"./index-DZZQifJx.js";import"./proxy-kg28mF7V.js";import"./index-Bsel9b7o.js";import"./index-DyQT7xcZ.js";import"./x-DS6n0ElR.js";import"./createLucideIcon-Biu-y2hB.js";import"./floating-ui.react-dom-DwEbxQiH.js";import"./en-US-BA9orzCf.js";import"./endOfWeek-QFyZPl43.js";import"./differenceInCalendarMonths-HUNRrXGm.js";import"./normalizeInterval-CdMCNNY-.js";import"./endOfMonth-CK_ShA5m.js";import"./isSameDay-DUlCFK42.js";import"./isSameMonth-CQd3m9St.js";import"./chevron-left-BtmPIa6j.js";import"./chevron-right-BRo8ahWW.js";import"./chevron-down-2lGOOBZZ.js";import"./index-1EFpZ92o.js";function Oe({open:m,onOpenChange:x,onFinish:d}){var v,y,w;const{props:c}=L(),r=((v=c==null?void 0:c.auth)==null?void 0:v.user)||{},{data:l,setData:n,post:M,processing:D,reset:P}=B({schoolYear:"",program:r.program||"",officeAddress:"",mobileNo:r.mobile_no||r.contact_number||"",telephoneNo:"",subjects:[{subject:"",date:"",startTime:"",endTime:""}]}),[u,j]=C.useState(0),[k,g]=C.useState(!1),A=H.useMemo(()=>Array.from({length:20},(s,t)=>{const a=2020+t;return`${a}-${a+1}`}),[]);function E(s){x(s),s||(j(0),P(),g(!1))}function I(){n("subjects",[...l.subjects,{subject:"",date:"",startTime:"",endTime:""}])}function $(s){n("subjects",l.subjects.filter((t,a)=>a!==s))}function h(s,t,a){const O=l.subjects.map((S,F)=>F===s?{...S,[t]:a}:S);n("subjects",O)}function _(){M(route("comprehensive-exam.store"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{g(!0),d==null||d()}})}function R(){u<N.length-1?j(s=>s+1):_()}function Y(){u>0&&j(s=>s-1)}const N=[{title:"Personal Information",content:e.jsxs(e.Fragment,{children:[e.jsx(p,{title:"Step 1: Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(o,{className:"text-s",children:"First Name"}),e.jsx(i,{className:"h-10 text-s text-black disabled:opacity-100 disabled:bg-white disabled:text-black",value:r.first_name||"",readOnly:!0,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-s",children:"Middle Initial"}),e.jsx(i,{className:"h-10 text-s text-black disabled:opacity-100 disabled:bg-white disabled:text-black",maxLength:3,value:((y=r.middle_name)==null?void 0:y[0])??"",readOnly:!0,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-s",children:"Last Name"}),e.jsx(i,{className:"h-10 text-s text-black disabled:opacity-100 disabled:bg-white disabled:text-black",value:r.last_name||"",readOnly:!0,disabled:!0})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-s",children:"School Year"}),e.jsxs("select",{className:"h-10 text-s w-full border rounded-md px-3 bg-white focus:outline-none focus:ring-2 focus:ring-rose-300",value:l.schoolYear,onChange:s=>n("schoolYear",s.target.value),children:[e.jsx("option",{value:"",disabled:!0,children:"Select school year"}),A.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-s",children:"Program"}),e.jsx(i,{className:"h-10 text-s w-105 text-black disabled:opacity-100 disabled:bg-white disabled:text-black",value:l.program,readOnly:!0,disabled:!0})]})]})]})},{title:"Contact Information",content:e.jsxs(e.Fragment,{children:[e.jsx(p,{title:"Step 2: Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(o,{className:"text-s",children:"Office Address"}),e.jsx(i,{className:"h-10 text-s",value:l.officeAddress,onChange:s=>n("officeAddress",s.target.value)})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-s",children:"Mobile No."}),e.jsx(i,{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"h-10 text-s",value:l.mobileNo,placeholder:"e.g. 09171234567",onChange:s=>n("mobileNo",s.target.value.replace(/\D/g,""))})]}),e.jsxs("div",{children:[e.jsx(o,{className:"text-s",children:"Telephone No."}),e.jsx(i,{type:"tel",className:"h-10 text-s",value:l.telephoneNo,placeholder:"e.g. (02) 123-4567",onChange:s=>{const t=s.target.value.replace(/[^0-9\s()-]/g,"");n("telephoneNo",t)}})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(o,{className:"text-s",children:"Email"}),e.jsx(i,{className:"h-10 text-s text-black disabled:opacity-100 disabled:bg-white disabled:text-black",type:"email",value:r.email,readOnly:!0,disabled:!0})]})]})]})},{title:"Examination Schedules",content:e.jsxs(e.Fragment,{children:[e.jsx(p,{title:"Step 3: Examination Schedules"}),e.jsx("div",{className:"mt-4 mb-6",children:e.jsx("p",{className:"text-sm text-gray-600 text-justify",children:"Add the subjects and schedules for your comprehensive examination. Each subject must have a specific date and time slot."})}),e.jsxs("div",{className:"space-y-6",children:[l.subjects.map((s,t)=>e.jsxs("div",{className:"group relative border border-gray-200 rounded-lg p-6 bg-white shadow-sm transition-all hover:border-rose-200 hover:shadow-md",children:[e.jsxs("div",{className:"absolute -top-3 -left-2 bg-rose-500 text-white text-xs font-semibold px-2 py-1 rounded",children:["Subject ",t+1]}),l.subjects.length>1&&e.jsxs("button",{onClick:()=>$(t),className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-white border border-gray-200 shadow-sm flex items-center justify-center text-gray-400 hover:bg-rose-50 hover:border-rose-300 hover:text-rose-500 transition-all",title:"Remove Subject",type:"button",children:[e.jsx("span",{className:"sr-only",children:"Remove Subject"}),e.jsx("span",{className:"text-lg leading-none",children:"Ã—"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs(o,{className:"text-sm font-medium text-gray-700",children:["Subject Name",e.jsx("span",{className:"text-rose-500 ml-1",children:"*"})]}),e.jsx(i,{value:s.subject,onChange:a=>h(t,"subject",a.target.value),placeholder:"e.g. Advanced Mathematics",className:"mt-1 w-full transition-colors focus:border-rose-300"})]}),e.jsxs("div",{className:"w-full",children:[e.jsxs(o,{className:"text-sm font-medium text-gray-700",children:["Exam Date",e.jsx("span",{className:"text-rose-500 ml-1",children:"*"})]}),e.jsxs(Q,{children:[e.jsx(U,{asChild:!0,children:e.jsxs(b,{variant:"outline",type:"button",className:`mt-1 w-full justify-start text-left transition-colors ${s.date?"text-gray-900":"text-gray-500"} hover:bg-rose-50 hover:border-rose-300`,children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),s.date?f(new Date(s.date),"MMMM d, yyyy"):"Select date"]})}),e.jsx(W,{className:"w-auto p-0 z-[9999] pointer-events-auto",align:"start",side:"bottom",children:e.jsx(X,{mode:"single",selected:s.date?new Date(s.date):void 0,onSelect:a=>h(t,"date",a?f(a,"yyyy-MM-dd"):""),initialFocus:!0,disabled:a=>a<new Date})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs(o,{className:"text-sm font-medium text-gray-700",children:["Start Time",e.jsx("span",{className:"text-rose-500 ml-1",children:"*"})]}),e.jsx(i,{type:"time",value:s.startTime||"",onChange:a=>h(t,"startTime",a.target.value),className:"mt-1 w-full transition-colors focus:border-rose-300"})]}),e.jsxs("div",{children:[e.jsxs(o,{className:"text-sm font-medium text-gray-700",children:["End Time",e.jsx("span",{className:"text-rose-500 ml-1",children:"*"})]}),e.jsx(i,{type:"time",value:s.endTime||"",onChange:a=>h(t,"endTime",a.target.value),className:"mt-1 w-full transition-colors focus:border-rose-300"})]})]})]})]},t)),e.jsxs(b,{type:"button",onClick:I,className:"w-full mt-4 py-6 border-2 border-dashed border-gray-300 bg-gray-50 hover:bg-rose-50 hover:border-rose-300 transition-colors flex items-center justify-center gap-2 text-gray-600 hover:text-rose-600",variant:"outline",children:[e.jsx(se,{className:"h-5 w-5"}),"Add Another Subject"]})]})]})},{title:"Review Submission",content:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full pb-5",children:[e.jsx(p,{title:"Step 4: Review Submission"}),e.jsxs("div",{className:"rounded-xl border-2 border-rose-400 bg-rose-50 p-8 shadow-lg space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"text-lg font-bold text-rose-700",children:"Personal Information"}),e.jsxs("div",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Name:"})," ",`${r.last_name||""}, ${r.first_name||""} ${((w=r.middle_name)==null?void 0:w[0])??""}`," "]}),e.jsxs("div",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"School Year:"})," ",l.schoolYear||"--"]}),e.jsxs("div",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Program:"})," ",l.program||"--"]})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"text-lg font-bold text-rose-700",children:"Contact Information"}),e.jsxs("div",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Office Address:"})," ",l.officeAddress||"--"]}),e.jsxs("div",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Mobile No.:"})," ",l.mobileNo||"--"]}),e.jsxs("div",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Telephone No.:"})," ",l.telephoneNo||"--"]}),e.jsxs("div",{className:"text-gray-700",children:[e.jsx("span",{className:"font-semibold",children:"Email:"})," ",r.email||"--"]})]})]}),e.jsx(Z,{}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-rose-700 mb-2",children:"Subjects & Schedules"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full border border-rose-300 rounded-lg bg-white",children:[e.jsx("thead",{className:"bg-rose-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-rose-700 font-semibold",children:"#"}),e.jsx("th",{className:"px-4 py-2 text-left text-rose-700 font-semibold",children:"Subject"}),e.jsx("th",{className:"px-4 py-2 text-left text-rose-700 font-semibold",children:"Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-rose-700 font-semibold",children:"Time"})]})}),e.jsx("tbody",{children:l.subjects.map((s,t)=>e.jsxs("tr",{className:"border-t border-rose-200",children:[e.jsx("td",{className:"px-4 py-2 text-rose-700 font-bold",children:t+1}),e.jsx("td",{className:"px-4 py-2",children:s.subject||"--"}),e.jsx("td",{className:"px-4 py-2",children:s.date?f(new Date(s.date),"MMMM d, yyyy"):"--"}),e.jsx("td",{className:"px-4 py-2",children:s.startTime&&s.endTime?`${T(s.startTime)} - ${T(s.endTime)}`:"--"})]},t))})]})})]})]})]})})}];return e.jsx(q,{open:m,onOpenChange:E,children:e.jsxs(K,{className:"flex h-[85vh] w-full max-w-3xl flex-col",children:[e.jsxs(V,{children:[e.jsx(G,{children:"Comprehensive Exam Application"}),e.jsx(J,{children:"Fill out all required information"})]}),k?e.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center space-y-6 px-4",children:[e.jsx(te,{size:48,className:"text-rose-500"}),e.jsx("h2",{className:"text-2xl font-semibold",children:"Application Submitted!"}),e.jsx("p",{className:"text-center text-gray-600",children:"Your comprehensive exam application has been saved successfully."}),e.jsx(b,{onClick:()=>{x(!1),setTimeout(()=>{var s;(s=document.getElementById("compre-application-card"))==null||s.scrollIntoView({behavior:"smooth",block:"start"})},100)},className:"bg-rose-500",children:"Done"})]}):e.jsx("div",{className:"flex-1 overflow-auto px-2",children:e.jsx(z,{steps:N,currentStep:u,onNext:R,onPrev:Y,loading:D,className:"h-full"})})]})})}function T(m){if(!m)return"--";const[x,d]=m.split(":");let c=parseInt(x,10);const r=c>=12?"PM":"AM";return c=c%12,c===0&&(c=12),`${c.toString().padStart(2,"0")}:${d} ${r}`}export{Oe as default};
