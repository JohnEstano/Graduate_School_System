import{K as l,r as m,j as s}from"./app-BubHmeqC.js";import{B as c}from"./button-CX84Ig4W.js";import"./index-CAAZlwhj.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";function v(){const{defenseRequests:i=[],auth:{user:n}}=l().props,[a,d]=m.useState(null);async function o(e,t){var r;d(e);try{(await fetch(`/defense-requests/${e}/adviser-decision`,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.content)||""},body:JSON.stringify({decision:t})})).ok?window.location.reload():console.error("Decision failed")}finally{d(null)}}return s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsx("h1",{className:"text-xl font-semibold",children:"Defense Requests Assigned To Me"}),s.jsxs("div",{className:"border rounded divide-y",children:[i.length===0&&s.jsx("div",{className:"p-4 text-sm text-gray-500",children:"No assigned defense requests."}),i.map(e=>{const t=e.workflow_state==="adviser-review"&&(e.adviser_user_id===n.id||e.assigned_to_user_id===n.id);return s.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center gap-3 justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:e.thesis_title}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Student: ",e.first_name," ",e.last_name]}),s.jsxs("p",{className:"text-xs text-gray-500",children:["Status: ",e.status," â€¢ Workflow: ",e.workflow_state]})]}),s.jsx("div",{className:"flex gap-2",children:t&&s.jsxs(s.Fragment,{children:[s.jsx(c,{size:"sm",disabled:a===e.id,onClick:()=>o(e.id,"approve"),children:"Approve"}),s.jsx(c,{size:"sm",variant:"destructive",disabled:a===e.id,onClick:()=>o(e.id,"reject"),children:"Reject"})]})})]},e.id)})]})]})}export{v as default};
