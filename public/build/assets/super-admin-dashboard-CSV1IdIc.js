import{K as J,r as A,j as e,R as N}from"./app-BAKMM9W6.js";import{C as n,a as l,b as o,c}from"./card-DwLtnUhU.js";import{B as g}from"./button-CVeIta7K.js";import{B as w}from"./badge-D0sAGNiG.js";import{S as O}from"./skeleton-tKFykgei.js";import{S as Q}from"./separator-LRfcwlAa.js";import{I as R}from"./input-BRk-fvKd.js";import{L as j}from"./label-BmI7-N0c.js";import{S as _,a as D,b as k,c as P,e as p}from"./select-DtdDdDNe.js";import{T as M}from"./textarea-BookjGw7.js";import{D as q,d as z,a as $,e as G,b as H}from"./dialog-Fyk91gvx.js";import{S as W,M as Y}from"./sun-D0NfJtcj.js";import{U as C}from"./users-t5r6UxGv.js";import{B as T}from"./book-open-FnWChekc.js";import{C as Z}from"./clipboard-list-BeCyxD2L.js";import{D as ee}from"./database-C2DSBYP7.js";import{S as B}from"./settings-CXr5fuO8.js";import{U as se}from"./user-check-DLpV1gHv.js";import{c as re}from"./createLucideIcon-BSNBS9Xz.js";import{G as te}from"./graduation-cap-CyBvkmsT.js";import{M as ae}from"./mail-CodUr7f5.js";import"./utils-jAU0Cazi.js";import"./index-CEqJL0NP.js";import"./index-DZZQifJx.js";import"./index-BHprz6Pm.js";import"./index-CUQ5MhIm.js";import"./index-SVK1MPcU.js";import"./index-DUmeJSti.js";import"./index-C98k58Jz.js";import"./floating-ui.react-dom-CqLEll0E.js";import"./index-CEy3VqYv.js";import"./index-tSynuKjl.js";import"./index-DScCZkqp.js";import"./chevron-down-De7CcGjL.js";import"./check-DCZqiU_u.js";import"./index-Chzm2fti.js";import"./x-BVoq4DiS.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],de=re("Shield",ie);function ne(){return new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function V(){const u=new Date().getHours();return u>=6&&u<18}function He(){const{auth:{user:u},allUsers:t=[],programs:b=[],coordinators:F=[],stats:y={total_users:0,total_programs:0,pending_requests:0}}=J().props,[I,U]=A.useState(!1),[m,f]=A.useState("overview"),[x,d]=A.useState({name:"",code:"",coordinator_id:"",description:""}),[h,v]=A.useState({recipient_type:"all",subject:"",message:"",recipient_roles:[]}),E=V()?"Good morning":"Good evening";return e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-auto rounded-xl pt-6 pr-7 pl-7 pb-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:[E,", ",(u==null?void 0:u.name)??"Super Admin"]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[ne()," â€¢ System Administrator"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:V()?e.jsx(W,{className:"size-6 text-yellow-500"}):e.jsx(Y,{className:"size-6 text-blue-400"})})]}),e.jsx(Q,{})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(n,{className:"border-l-4 border-l-blue-500",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Total Users"}),e.jsx(C,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y.total_users}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All registered accounts"})]})]}),e.jsxs(n,{className:"border-l-4 border-l-purple-500",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Programs"}),e.jsx(T,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y.total_programs}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active programs"})]})]}),e.jsxs(n,{className:"border-l-4 border-l-orange-500",children:[e.jsxs(l,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(o,{className:"text-sm font-medium",children:"Pending Requests"}),e.jsx(Z,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(c,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y.pending_requests}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires attention"})]})]})]}),e.jsxs("div",{className:"flex space-x-1 rounded-lg bg-muted p-1",children:[e.jsx("button",{onClick:()=>f("overview"),className:`flex-1 rounded-md px-3 py-2 text-sm font-medium transition-colors ${m==="overview"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Overview"}),e.jsx("button",{onClick:()=>f("users"),className:`flex-1 rounded-md px-3 py-2 text-sm font-medium transition-colors ${m==="users"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"User Management"}),e.jsx("button",{onClick:()=>f("programs"),className:`flex-1 rounded-md px-3 py-2 text-sm font-medium transition-colors ${m==="programs"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Programs"}),e.jsx("button",{onClick:()=>f("notifications"),className:`flex-1 rounded-md px-3 py-2 text-sm font-medium transition-colors ${m==="notifications"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Notifications"}),e.jsx("button",{onClick:()=>f("coordinators"),className:`flex-1 rounded-md px-3 py-2 text-sm font-medium transition-colors ${m==="coordinators"?"bg-background text-foreground shadow-sm":"text-muted-foreground hover:text-foreground"}`,children:"Coordinators"})]}),m==="overview"&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5"}),"Recent Programs"]})}),e.jsxs(c,{children:[e.jsx("div",{className:"space-y-3",children:b.slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.coordinator_name})]}),e.jsxs(w,{variant:s.status==="active"?"default":"secondary",children:[s.students_count," students"]})]},s.id))}),e.jsx(g,{variant:"outline",className:"w-full mt-4",onClick:()=>f("programs"),children:"Manage Programs"})]})]})}),m==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"h-5 w-5"}),"User Management Dashboard"]})}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.filter(s=>s.role==="Student").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Students"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(s=>s.role==="Faculty").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Faculty"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:t.filter(s=>s.role==="Coordinator").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Coordinators"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.filter(s=>s.role==="Administrative Assistant").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Admin Assistants"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.filter(s=>s.role==="Dean").length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Deans"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:t.filter(s=>!["Student","Faculty","Coordinator","Administrative Assistant","Dean"].includes(s.role)).length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Others"})]})]})})]}),e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-blue-600"}),"Students (",t.filter(s=>s.role==="Student").length,")"]})}),e.jsx(c,{children:e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 bg-blue-50 dark:bg-blue-950 font-medium text-sm",children:[e.jsx("div",{children:"Name"}),e.jsx("div",{children:"Email"}),e.jsx("div",{children:"School ID"}),e.jsx("div",{children:"Program"})]}),e.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[t.filter(s=>s.role==="Student").map(s=>e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 border-t text-sm",children:[e.jsx("div",{className:"font-medium",children:s.name||"N/A"}),e.jsx("div",{className:"text-muted-foreground",children:s.email}),e.jsx("div",{className:"text-muted-foreground",children:s.school_id||"N/A"}),e.jsx("div",{className:"text-muted-foreground",children:s.program||"N/A"})]},s.id)),t.filter(s=>s.role==="Student").length===0&&e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No students found"})]})]})})]}),e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-5 w-5 text-green-600"}),"Faculty (",t.filter(s=>s.role==="Faculty").length,")"]})}),e.jsx(c,{children:e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 bg-green-50 dark:bg-green-950 font-medium text-sm",children:[e.jsx("div",{children:"Name"}),e.jsx("div",{children:"Email"}),e.jsx("div",{children:"School ID"}),e.jsx("div",{children:"Program"})]}),e.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[t.filter(s=>s.role==="Faculty").map(s=>e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 border-t text-sm",children:[e.jsx("div",{className:"font-medium",children:s.name||"N/A"}),e.jsx("div",{className:"text-muted-foreground",children:s.email}),e.jsx("div",{className:"text-muted-foreground",children:s.school_id||"N/A"}),e.jsx("div",{className:"text-muted-foreground",children:s.program||"N/A"})]},s.id)),t.filter(s=>s.role==="Faculty").length===0&&e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No faculty found"})]})]})})]}),e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-purple-600"}),"Coordinators (",t.filter(s=>s.role==="Coordinator").length,")"]})}),e.jsx(c,{children:e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 bg-purple-50 dark:bg-purple-950 font-medium text-sm",children:[e.jsx("div",{children:"Name"}),e.jsx("div",{children:"Email"}),e.jsx("div",{children:"Program"}),e.jsx("div",{children:"School ID"})]}),e.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[t.filter(s=>s.role==="Coordinator").map(s=>e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 border-t text-sm",children:[e.jsx("div",{className:"font-medium",children:s.name||"N/A"}),e.jsx("div",{className:"text-muted-foreground",children:s.email}),e.jsx("div",{className:"text-muted-foreground",children:s.program||"N/A"}),e.jsx("div",{className:"text-muted-foreground",children:s.school_id||"N/A"})]},s.id)),t.filter(s=>s.role==="Coordinator").length===0&&e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No coordinators found"})]})]})})]}),e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-orange-600"}),"Administrative Assistants (",t.filter(s=>s.role==="Administrative Assistant").length,")"]})}),e.jsx(c,{children:e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 bg-orange-50 dark:bg-orange-950 font-medium text-sm",children:[e.jsx("div",{children:"Name"}),e.jsx("div",{children:"Email"}),e.jsx("div",{children:"School ID"}),e.jsx("div",{children:"Program"})]}),e.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[t.filter(s=>s.role==="Administrative Assistant").map(s=>e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 border-t text-sm",children:[e.jsx("div",{className:"font-medium",children:s.name||"N/A"}),e.jsx("div",{className:"text-muted-foreground",children:s.email}),e.jsx("div",{className:"text-muted-foreground",children:s.school_id||"N/A"}),e.jsx("div",{className:"text-muted-foreground",children:s.program||"N/A"})]},s.id)),t.filter(s=>s.role==="Administrative Assistant").length===0&&e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No administrative assistants found"})]})]})})]}),e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-5 w-5 text-red-600"}),"Deans (",t.filter(s=>s.role==="Dean").length,")"]})}),e.jsx(c,{children:e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 bg-red-50 dark:bg-red-950 font-medium text-sm",children:[e.jsx("div",{children:"Name"}),e.jsx("div",{children:"Email"}),e.jsx("div",{children:"School ID"}),e.jsx("div",{children:"Program"})]}),e.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[t.filter(s=>s.role==="Dean").map(s=>e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 border-t text-sm",children:[e.jsx("div",{className:"font-medium",children:s.name||"N/A"}),e.jsx("div",{className:"text-muted-foreground",children:s.email}),e.jsx("div",{className:"text-muted-foreground",children:s.school_id||"N/A"}),e.jsx("div",{className:"text-muted-foreground",children:s.program||"N/A"})]},s.id)),t.filter(s=>s.role==="Dean").length===0&&e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No deans found"})]})]})})]}),t.filter(s=>!["Student","Faculty","Coordinator","Administrative Assistant","Dean"].includes(s.role)).length>0&&e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-gray-600"}),"Other Roles (",t.filter(s=>!["Student","Faculty","Coordinator","Administrative Assistant","Dean"].includes(s.role)).length,")"]})}),e.jsx(c,{children:e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 bg-gray-50 dark:bg-gray-950 font-medium text-sm",children:[e.jsx("div",{children:"Name"}),e.jsx("div",{children:"Email"}),e.jsx("div",{children:"Role"}),e.jsx("div",{children:"School ID"})]}),e.jsx("div",{className:"max-h-60 overflow-y-auto",children:t.filter(s=>!["Student","Faculty","Coordinator","Administrative Assistant","Dean"].includes(s.role)).map(s=>e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-4 border-t text-sm",children:[e.jsx("div",{className:"font-medium",children:s.name||"N/A"}),e.jsx("div",{className:"text-muted-foreground",children:s.email}),e.jsx("div",{children:e.jsx(w,{variant:"secondary",children:s.role})}),e.jsx("div",{className:"text-muted-foreground",children:s.school_id||"N/A"})]},s.id))})]})})]})]}),m==="programs"&&e.jsx("div",{className:"space-y-6",children:e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5"}),"Program Management"]}),e.jsxs(q,{children:[e.jsx(z,{asChild:!0,children:e.jsx(g,{children:"Add New Program"})}),e.jsxs($,{children:[e.jsx(G,{children:e.jsx(H,{children:"Create New Program"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"program-name",children:"Program Name"}),e.jsx(R,{id:"program-name",value:x.name,onChange:s=>d({...x,name:s.target.value}),placeholder:"e.g., Master of Science in Computer Science"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"program-code",children:"Program Code"}),e.jsx(R,{id:"program-code",value:x.code,onChange:s=>d({...x,code:s.target.value}),placeholder:"e.g., MSCS"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"coordinator",children:"Coordinator"}),e.jsxs(_,{value:x.coordinator_id,onValueChange:s=>d({...x,coordinator_id:s}),children:[e.jsx(D,{children:e.jsx(k,{placeholder:"Select coordinator"})}),e.jsx(P,{children:F.map(s=>e.jsx(p,{value:s.id.toString(),children:s.name},s.id))})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"description",children:"Description"}),e.jsx(M,{id:"description",value:x.description,onChange:s=>d({...x,description:s.target.value}),placeholder:"Program description..."})]}),e.jsx(g,{className:"w-full",children:"Create Program"})]})]})]})]})}),e.jsx(c,{children:e.jsxs("div",{className:"border rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-7 gap-4 p-4 bg-muted font-medium text-sm",children:[e.jsx("div",{children:"Program Name"}),e.jsx("div",{children:"Code"}),e.jsx("div",{children:"Coordinator"}),e.jsx("div",{children:"Email"}),e.jsx("div",{children:"Students"}),e.jsx("div",{children:"Status"}),e.jsx("div",{children:"Actions"})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:b.map(s=>e.jsxs("div",{className:"grid grid-cols-7 gap-4 p-4 border-t text-sm",children:[e.jsx("div",{className:"font-medium",children:s.name}),e.jsx("div",{className:"text-muted-foreground font-mono text-xs",children:s.code}),e.jsx("div",{className:"font-medium text-blue-600",children:s.coordinator_name}),e.jsx("div",{className:"text-muted-foreground text-xs",children:s.coordinator_email}),e.jsx("div",{children:e.jsxs(w,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[s.students_count," students"]})}),e.jsx("div",{children:e.jsx(w,{variant:s.status==="active"?"default":"secondary",className:"bg-emerald-100 text-emerald-800 border-emerald-200",children:s.status})}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(g,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",children:"View"}),e.jsx(g,{size:"sm",variant:"outline",className:"h-7 px-2 text-xs",children:"Edit"})]})]},s.id))}),b.length===0&&e.jsxs("div",{className:"p-8 text-center text-muted-foreground",children:[e.jsx(te,{className:"mx-auto h-8 w-8 mb-2 opacity-50"}),e.jsx("p",{children:"No programs found"})]})]})})]})}),m==="notifications"&&e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-5 w-5"}),"Send Notifications"]})}),e.jsx(c,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{htmlFor:"recipient-type",children:"Recipients"}),e.jsxs(_,{value:h.recipient_type,onValueChange:s=>v({...h,recipient_type:s}),children:[e.jsx(D,{children:e.jsx(k,{})}),e.jsxs(P,{children:[e.jsx(p,{value:"all",children:"All Users"}),e.jsx(p,{value:"students",children:"Students Only"}),e.jsx(p,{value:"faculty",children:"Faculty Only"}),e.jsx(p,{value:"coordinators",children:"Coordinators Only"}),e.jsx(p,{value:"staff",children:"Staff Only"})]})]})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"subject",children:"Subject"}),e.jsx(R,{id:"subject",value:h.subject,onChange:s=>v({...h,subject:s.target.value}),placeholder:"Email subject line"})]}),e.jsxs("div",{children:[e.jsx(j,{htmlFor:"message",children:"Message"}),e.jsx(M,{id:"message",value:h.message,onChange:s=>v({...h,message:s.target.value}),placeholder:"Enter your message here...",rows:6})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{className:"flex-1",children:"Send Notification"}),e.jsx(g,{variant:"outline",children:"Save as Draft"})]})]})})]}),m==="coordinators"&&e.jsx(le,{})]})}function le(){const[u,t]=N.useState([]),[b,F]=N.useState([]),[y,I]=N.useState([]),[U,m]=N.useState(!0),[f,x]=N.useState(!1),[d,h]=N.useState({coordinator_user_id:"",program_name:"",notes:""});N.useEffect(()=>{v()},[]);const v=async()=>{m(!0);try{const[r,i,a]=await Promise.all([fetch("/api/coordinator-assignments"),fetch("/api/coordinator-assignments/coordinators"),fetch("/api/coordinator-assignments/programs")]),S=await r.json(),K=await i.json(),X=await a.json();t(S.assignments||[]),F(K.coordinators||[]),I(X.programs||[])}catch(r){console.error("Error loading coordinator assignments:",r)}finally{m(!1)}},E=async()=>{var r;if(!d.coordinator_user_id||!d.program_name){alert("Please select both coordinator and program");return}try{const i=await fetch("/api/coordinator-assignments",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},body:JSON.stringify(d)}),a=await i.json();i.ok?(alert(a.message||"Program assigned successfully!"),x(!1),h({coordinator_user_id:"",program_name:"",notes:""}),v()):alert(a.error||"Failed to assign program")}catch(i){console.error("Error adding assignment:",i),alert("Failed to assign program. Please try again.")}},s=async r=>{var i;if(confirm("Are you sure you want to remove this program assignment?"))try{const a=await fetch(`/api/coordinator-assignments/${r}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""}}),S=await a.json();a.ok?(alert(S.message||"Assignment removed successfully!"),v()):alert(S.error||"Failed to remove assignment")}catch(a){console.error("Error removing assignment:",a),alert("Failed to remove assignment. Please try again.")}},L=u.reduce((r,i)=>{const a=i.coordinator_id;return r[a]||(r[a]={coordinator:i.coordinator_name,email:i.coordinator_email,programs:[]}),r[a].programs.push(i),r},{});return e.jsx("div",{className:"space-y-6",children:e.jsxs(n,{children:[e.jsx(l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{children:"Coordinator Program Assignments"}),e.jsxs(q,{open:f,onOpenChange:x,children:[e.jsx(z,{asChild:!0,children:e.jsxs(g,{children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"Assign Program"]})}),e.jsxs($,{children:[e.jsx(G,{children:e.jsx(H,{children:"Assign Program to Coordinator"})}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"coordinator",children:"Coordinator"}),e.jsxs(_,{value:d.coordinator_user_id,onValueChange:r=>h({...d,coordinator_user_id:r}),children:[e.jsx(D,{children:e.jsx(k,{placeholder:"Select coordinator..."})}),e.jsx(P,{children:b.map(r=>e.jsxs(p,{value:r.id.toString(),children:[r.name," (",r.email,")"]},r.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"program",children:"Program"}),e.jsxs(_,{value:d.program_name,onValueChange:r=>h({...d,program_name:r}),children:[e.jsx(D,{children:e.jsx(k,{placeholder:"Select program..."})}),e.jsx(P,{children:y.map(r=>e.jsx(p,{value:r,children:r},r))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(M,{id:"notes",placeholder:"Add any notes about this assignment...",value:d.notes,onChange:r=>h({...d,notes:r.target.value}),rows:3})]}),e.jsx(g,{onClick:E,className:"w-full",children:"Assign Program"})]})]})]})]})}),e.jsx(c,{children:U?e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{className:"h-12 w-full"}),e.jsx(O,{className:"h-12 w-full"}),e.jsx(O,{className:"h-12 w-full"})]}):Object.keys(L).length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No coordinator assignments yet. Click "Assign Program" to get started.'}):e.jsx("div",{className:"space-y-6",children:Object.values(L).map((r,i)=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:r.coordinator}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.email})]}),e.jsxs(w,{variant:"secondary",children:[r.programs.length," programs"]})]}),e.jsx("div",{className:"space-y-2",children:r.programs.map(a=>e.jsxs("div",{className:"flex items-center justify-between bg-muted p-3 rounded-md",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:a.program_name}),a.notes&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a.notes}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Assigned ",a.created_at," by ",a.assigned_by_name]})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>s(a.id),className:"text-destructive hover:text-destructive",children:"Remove"})]},a.id))})]},i))})})]})})}export{He as default};
