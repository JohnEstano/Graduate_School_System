import{r as N,j as i,L as v}from"./app-DVscOEu2.js";import{A as S}from"./app-layout-B3GcPYH9.js";import{C as U,d as I}from"./card-d-byv3Vx.js";import{c as w,t as T,m as M,a as C,f as x,s as O}from"./format-CbXpjz9O.js";import{i as Y,a as D,s as b,e as j,b as W,c as _}from"./isSameMonth-BpAwUn1X.js";import"./index-DZo2EVCJ.js";import"./utils-jAU0Cazi.js";import"./button-Ce0hhOYY.js";import"./input-r876wPDn.js";import"./index-Cf9FYmS9.js";import"./index-DMoMDHfQ.js";import"./index-y5_JTaNr.js";import"./index-Bje6bX72.js";import"./Combination-h-yS1RMD.js";import"./floating-ui.react-dom-B8YvmuRi.js";import"./index-BkWARksf.js";import"./x-DOc550yR.js";import"./createLucideIcon-D7oluGz7.js";import"./tooltip-CF62-_BS.js";import"./separator-D0jXpuQ_.js";import"./chevron-right-BTIB9cEh.js";import"./dropdown-menu-COhy0mIG.js";import"./message-square-XNRLjw0M.js";function $(t){return w(t,Date.now())}function z(t,e){return Y(w(t,t),$(t))}function E(t,e){const n=()=>w(e==null?void 0:e.in,NaN),r=L(t);let c;if(r.date){const o=H(r.date,2);c=A(o.restDateString,o.year)}if(!c||isNaN(+c))return n();const m=+c;let a=0,l;if(r.time&&(a=q(r.time),isNaN(a)))return n();if(r.timezone){if(l=B(r.timezone),isNaN(l))return n()}else{const o=new Date(m+a),u=T(0,e==null?void 0:e.in);return u.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),u.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),u}return T(m+a+l,e==null?void 0:e.in)}const g={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},F=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,R=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Z=/^([+-])(\d{2})(?::?(\d{2}))?$/;function L(t){const e={},n=t.split(g.dateTimeDelimiter);let s;if(n.length>2)return e;if(/:/.test(n[0])?s=n[0]:(e.date=n[0],s=n[1],g.timeZoneDelimiter.test(e.date)&&(e.date=t.split(g.timeZoneDelimiter)[0],s=t.substr(e.date.length,t.length))),s){const r=g.timezone.exec(s);r?(e.time=s.replace(r[1],""),e.timezone=r[1]):e.time=s}return e}function H(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),s=t.match(n);if(!s)return{year:NaN,restDateString:""};const r=s[1]?parseInt(s[1]):null,c=s[2]?parseInt(s[2]):null;return{year:c===null?r:c*100,restDateString:t.slice((s[1]||s[2]).length)}}function A(t,e){if(e===null)return new Date(NaN);const n=t.match(F);if(!n)return new Date(NaN);const s=!!n[4],r=p(n[1]),c=p(n[2])-1,m=p(n[3]),a=p(n[4]),l=p(n[5])-1;if(s)return Q(e,a,l)?J(e,a,l):new Date(NaN);{const o=new Date(0);return!G(e,c,m)||!K(e,r)?new Date(NaN):(o.setUTCFullYear(e,c,Math.max(r,m)),o)}}function p(t){return t?parseInt(t):1}function q(t){const e=t.match(R);if(!e)return NaN;const n=y(e[1]),s=y(e[2]),r=y(e[3]);return V(n,s,r)?n*M+s*C+r*1e3:NaN}function y(t){return t&&parseFloat(t.replace(",","."))||0}function B(t){if(t==="Z")return 0;const e=t.match(Z);if(!e)return 0;const n=e[1]==="+"?-1:1,s=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return X(s,r)?n*(s*M+r*C):NaN}function J(t,e,n){const s=new Date(0);s.setUTCFullYear(t,0,4);const r=s.getUTCDay()||7,c=(e-1)*7+n+1-r;return s.setUTCDate(s.getUTCDate()+c),s}const P=[31,null,31,30,31,30,31,31,30,31,30,31];function k(t){return t%400===0||t%4===0&&t%100!==0}function G(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(P[e]||(k(t)?29:28))}function K(t,e){return e>=1&&e<=(k(t)?366:365)}function Q(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function V(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function X(t,e){return e>=0&&e<=59}const ee=[{title:"Dashboard",href:"/dashboard"},{title:"Schedules",href:"/schedules"}];function je(){const[t,e]=N.useState([]),[n,s]=N.useState(new Date);N.useEffect(()=>{fetch("/api/defense-requests/calendar").then(a=>a.json()).then(e)},[]);const r={};t.forEach(a=>{const l=x(E(a.date_of_defense),"yyyy-MM-dd");r[l]||(r[l]=[]),r[l].push(a)});function c(a){const l=O(b(a),{weekStartsOn:0}),o=_(j(a),{weekStartsOn:0}),u=[];let f=l;for(;f<=o;){const h=[];for(let d=0;d<7;d++)h.push(f),f=D(f,1);u.push(h)}return u}const m=c(n);return i.jsxs(S,{breadcrumbs:ee,children:[i.jsx(v,{title:"Schedules"}),i.jsx("div",{className:"w-full h-[calc(100vh-5rem)] p-4",children:i.jsx(U,{className:"w-full h-full",children:i.jsxs(I,{className:"p-4 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{className:"rounded px-2 py-1 text-muted-foreground hover:bg-accent",onClick:()=>s(D(b(n),-1)),"aria-label":"Previous month",children:"<"}),i.jsx("span",{className:"font-medium",children:x(n,"MMMM yyyy")}),i.jsx("button",{className:"rounded px-2 py-1 text-muted-foreground hover:bg-accent",onClick:()=>s(D(j(n),1)),"aria-label":"Next month",children:">"})]})]}),i.jsxs("div",{className:"flex-1 overflow-auto grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>i.jsx("div",{className:"text-xs font-medium text-center text-muted-foreground pb-2",children:a},a)),m.flat().map((a,l)=>{const o=x(a,"yyyy-MM-dd"),u=W(a,n),f=z(a),h=r[o]||[];return i.jsxs("div",{className:`min-h-[90px] h-24 flex flex-col items-center border rounded-lg p-1 transition-colors
                                            ${u?"bg-background":"bg-muted/50"}
                                            ${f?"border-2 border-primary":""}
                                        `,children:[i.jsx("span",{className:`text-xs font-medium ${u?"text-foreground":"text-muted-foreground"}`,children:x(a,"d")}),i.jsx("div",{className:"flex flex-col gap-1 mt-1 w-full",children:h.map(d=>i.jsxs("span",{className:"flex items-center gap-1 w-full",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-primary inline-block shrink-0"}),i.jsx("span",{className:"truncate text-xs text-muted-foreground max-w-[60px]",title:d.thesis_title,children:d.thesis_title.length>9?d.thesis_title.slice(0,9)+"â€¦":d.thesis_title})]},d.id))})]},l)})]})]})})})]})}export{je as default};
