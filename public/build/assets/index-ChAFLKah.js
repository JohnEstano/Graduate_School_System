import{K as L,r as o,j as e,L as E,S as f}from"./app-cp5Xxmuq.js";import{A as z}from"./app-layout-FVyShlvS.js";import{B as h}from"./button-HcUz4N3c.js";import{I as D}from"./input-CozWEoae.js";import F from"./panelists-list-table-uECrKQt2.js";import T from"./panelists-form-modal-B_Kcwhbi.js";import{T as B,t as a}from"./index-BuZOVBQ5.js";import{U}from"./users-Dgf5XU-g.js";import{S as I}from"./search-BOf2-cFy.js";import{T as M}from"./trash-2-CdaG9Vkl.js";import{C as q}from"./circle-check-big-D0Jy2-20.js";import{C as O}from"./circle-x-DL_-XZRU.js";import{X}from"./x-ChVMmgUr.js";import"./index-BiaJJerR.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";import"./index-DbUO4osX.js";import"./index-BwY1skv1.js";import"./index-BkV9g7de.js";import"./tooltip-CP7U2y76.js";import"./floating-ui.react-dom-CclZEsZs.js";import"./createLucideIcon-fPg6f676.js";import"./separator-DqvAWWgV.js";import"./index-B7grp9yP.js";import"./chevron-right-u5yeAyLv.js";import"./dropdown-menu-gg636D7H.js";import"./index-DGSzJOj5.js";import"./index-w2GBgPnQ.js";import"./index-KWoA_zXX.js";import"./index-DgxNXxEZ.js";import"./avatar-BVnHwuNv.js";import"./settings-BJpfwdNG.js";import"./chevrons-up-down-CUkeUAhf.js";import"./file-text-Brb8dGUd.js";import"./graduation-cap-DiPQsR-i.js";import"./dollar-sign-OqGbvCP2.js";import"./credit-card-BumryUWt.js";import"./badge-CD31ww1M.js";import"./info-CTXSwM4X.js";import"./sun-BdlRNmMn.js";import"./table-Bl3rslsz.js";import"./checkbox-Bg390E6Z.js";import"./index-DjkDYLy3.js";import"./check-BKTDNJDu.js";import"./dialog-BrgoPxJ8.js";import"./label-BLxT7CIS.js";import"./select-TPdSJVhR.js";import"./chevron-down-CRKR2eDe.js";const $=[{title:"Dashboard",href:"/dashboard"},{title:"Panelists",href:"/panelists"}];function Ie(){const{panelists:b=[]}=L().props,[g,d]=o.useState(b),[n,c]=o.useState([]),[w,m]=o.useState(!1),[N,u]=o.useState(null),[j,y]=o.useState(""),[l,i]=o.useState(!1),[S,x]=o.useState(!1);o.useEffect(()=>{d(b)},[b]);const A=o.useMemo(()=>{const s=j.trim().toLowerCase();return s?g.filter(t=>t.name.toLowerCase().includes(s)||t.email.toLowerCase().includes(s)||t.status.toLowerCase().includes(s)):g},[j,g]);function C(s,t,r){x(!0),t?f.put(`/panelists/${t}`,s,{preserveScroll:!0,onSuccess:p=>{a.success("Panelist updated"),m(!1),u(null),d(Array.isArray(p.props.panelists)?p.props.panelists:[]),x(!1),r&&r()},onError:()=>{a.error("Failed to update panelist"),x(!1),r&&r()}}):f.post("/panelists",s,{preserveScroll:!0,onSuccess:p=>{a.success("Panelist added"),m(!1),u(null),d(Array.isArray(p.props.panelists)?p.props.panelists:[]),x(!1),r&&r()},onError:()=>{a.error("Failed to add panelist"),x(!1),r&&r()}})}function k(s){i(!0),f.delete(`/panelists/${s}`,{preserveScroll:!0,onSuccess:t=>{a.success("Panelist deleted"),c(r=>r.filter(p=>p!==s)),d(Array.isArray(t.props.panelists)?t.props.panelists:[]),i(!1)},onError:()=>{a.error("Failed to delete panelist"),i(!1)}})}function P(){n.length!==0&&window.confirm("Delete selected panelists?")&&(i(!0),f.post("/panelists/bulk-delete",{ids:n},{preserveScroll:!0,onSuccess:s=>{a.success("Panelists deleted"),c([]),d(Array.isArray(s.props.panelists)?s.props.panelists:[]),i(!1)},onError:()=>{a.error("Failed to bulk delete"),i(!1)}}))}function v(s){n.length!==0&&(i(!0),f.post("/panelists/bulk-status",{ids:n,status:s},{preserveScroll:!0,onSuccess:t=>{a.success("Panelists status updated"),c([]),d(Array.isArray(t.props.panelists)?t.props.panelists:[]),i(!1)},onError:()=>{a.error("Failed to update status"),i(!1)}}))}return e.jsxs(z,{breadcrumbs:$,children:[e.jsx(E,{title:"Panelists"}),e.jsx(B,{richColors:!0,position:"bottom-right"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-auto rounded-xl pt-5 pr-7 pl-7 relative",children:[e.jsxs("div",{className:"w-full bg-white border border-border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between w-full p-3 border-b bg-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-10 w-10 flex items-center justify-center rounded-full bg-rose-500/10 border border-rose-500",children:e.jsx(U,{className:"h-5 w-5 text-rose-400"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:"Panelists"}),e.jsx("span",{className:"block text-xs text-muted-foreground",children:"This section shows all defense panelists. Add, search, and manage panelists."})]})]}),e.jsx(h,{onClick:()=>{m(!0),u(null)},disabled:S||l,children:S?"Loading...":"Add Panel"})]}),e.jsx("div",{className:"flex items-center px-4 py-3 border-b bg-white",children:e.jsx(D,{type:"text",startIcon:I,placeholder:"Search...",value:j,onChange:s=>y(s.target.value),className:"max-w-xs text-sm py-1 h-8",disabled:l})})]}),e.jsx(F,{panelists:A,onEdit:s=>{u(s),m(!0)},onDelete:k,selected:n,setSelected:c,loading:l}),n.length>0&&e.jsxs("div",{className:"fixed left-1/2 z-30 -translate-x-1/2 bottom-4 md:bottom-6 flex items-center gap-1 bg-white border border-border shadow-lg rounded-lg px-4 py-1 text-xs animate-in fade-in slide-in-from-bottom-2 dark:bg-muted dark:text-muted-foreground dark:border-border",children:[e.jsxs("span",{className:"font-semibold min-w-[70px] text-center",children:[n.length," selected"]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs(h,{variant:"ghost",size:"icon",className:"px-2 py-1 h-7 w-auto text-xs flex items-center gap-1",onClick:P,"aria-label":"Delete",disabled:l,children:[e.jsx(M,{size:13}),e.jsx("span",{className:"hidden sm:inline",children:l?"Deleting...":"Delete"})]}),e.jsxs(h,{variant:"ghost",size:"icon",className:"px-2 py-1 h-7 w-auto text-xs flex items-center gap-1",onClick:()=>v("Available"),"aria-label":"Set Available",disabled:l,children:[e.jsx(q,{size:13,className:"text-green-500"}),e.jsx("span",{className:"hidden sm:inline",children:l?"Updating...":"Set Available"})]}),e.jsxs(h,{variant:"ghost",size:"icon",className:"px-2 py-1 h-7 w-auto text-xs flex items-center gap-1",onClick:()=>v("Not Available"),"aria-label":"Set Not Available",disabled:l,children:[e.jsx(O,{size:13,className:"text-red-500"}),e.jsx("span",{className:"hidden sm:inline",children:l?"Updating...":"Set Not Available"})]}),e.jsx(h,{variant:"ghost",size:"icon",className:"px-1 py-1 h-7 w-auto text-xs flex items-center",onClick:()=>c([]),"aria-label":"Clear selection",children:e.jsx(X,{size:14})})]})]}),e.jsx(T,{open:w,editing:N,onClose:()=>{m(!1),u(null)},onSubmit:C,loading:S})]})]})}export{Ie as default};
