import{K as P,r as a,j as e,R}from"./app-BDkuJsct.js";import q from"./quick-actions-widget-Dik1XIA1.js";import{S as m}from"./skeleton-C1N4Z9e5.js";import{C as W}from"./card-BJFJPDio.js";import{T as H,a as M,b as f,c as v}from"./tabs-BOuSS6lC.js";import F from"./weekly-defense-schedule-widget-tElMdAaa.js";import L from"./pending-defense-request-widget--x6TIQAR.js";import _ from"./defense-count-DMbEx-DJ.js";import{DefenseTypeDistribution as E}from"./defense-type-distribution-BLdYfkqz.js";import{DefenseModeBreakdown as B}from"./defense-mode-breakdown-ClQ1u8sH.js";import{OverallProgramActivity as U}from"./overall-program-activity-BBJuHA-N.js";import{CoordinatorPerformance as O}from"./coordinator-performance-BolHPydl.js";import{C as b}from"./clipboard-list-DFItBkgn.js";import{C as Y}from"./calendar-days-Dp2eL-bU.js";import{B as K}from"./badge-dollar-sign-Ck-V3fgX.js";import{U as j}from"./users-BTr8E8QO.js";import{S as Q,M as V}from"./sun-B3PIUh1_.js";import"./tooltip-CWM4FSMS.js";import"./index-BhbofC_p.js";import"./index-B_a1aFVM.js";import"./floating-ui.react-dom-w0Q93DA2.js";import"./utils-jAU0Cazi.js";import"./user-round-BfbMCXUO.js";import"./createLucideIcon-CEmaZ7tj.js";import"./settings-BITCJcnj.js";import"./book-open-D0xLe0hN.js";import"./receipt-YZTtq_ps.js";import"./calendar-CI-DWPmu.js";import"./chevron-right-BpKiIXqV.js";import"./graduation-cap-Cszrlop1.js";import"./format-Cze4Gw5q.js";import"./parseISO-Bx-IO3P2.js";import"./isSameDay-DsAL-Hdb.js";import"./select-D1tIJaem.js";import"./index-DMsjTEK4.js";import"./index-BdhkuEJx.js";import"./index-BKBXBDOv.js";import"./index-LRezjsDo.js";import"./index-Dia2ik6c.js";import"./index-D-bfryUZ.js";import"./chevron-down-DMxaecxw.js";import"./check-BUlQxyEc.js";import"./generateCategoricalChart-BOHwT1p9.js";import"./index-CoS1vLG5.js";import"./index-Chjiymov.js";import"./AreaChart-D-ENoPw9.js";import"./YAxis-B7UrdJFR.js";import"./chart-7aubccfQ.js";import"./file-text-rxgzo2tt.js";import"./RadarChart-DvW10P3K.js";import"./PolarAngleAxis--DfQntO3.js";import"./CartesianGrid-CTAPJDM6.js";import"./BarChart-AW9tJqMJ.js";function $(){return new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function G(){const s=new Date().getHours();return s>=6&&s<18}function I(s){const i=new Date;return s.filter(o=>{if(!o.scheduled_date)return!1;const r=new Date(o.scheduled_date);return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()&&r.getDate()===i.getDate()}).length}function Ie(){const{auth:{user:s}}=P().props,[i,o]=a.useState([]),[r,x]=a.useState([]),[c,y]=a.useState(!0),[w,p]=a.useState(0),[N,g]=a.useState(0),[k,u]=a.useState(0),[D,h]=a.useState(0),[z,S]=a.useState(new Date().getDay()),T=[{label:"Sun",value:0},{label:"Mon",value:1},{label:"Tue",value:2},{label:"Wed",value:3},{label:"Thu",value:4},{label:"Fri",value:5},{label:"Sat",value:6}];a.useEffect(()=>{fetch("/defense-requests",{headers:{Accept:"application/json"}}).then(t=>t.ok?t.json():[]).then(t=>{const l=Array.isArray(t)?t:t.defenseRequests??[];o(l);const n=l.filter(d=>(d.normalized_status||d.status)==="Pending");x(n)}).catch(()=>{o([]),x([])}).finally(()=>y(!1)),fetch("/api/panelists",{headers:{Accept:"application/json"}}).then(t=>t.ok?t.json():[]).then(t=>{p(Array.isArray(t)?t.length:0)}).catch(()=>p(0)),fetch("/api/advisers",{headers:{Accept:"application/json"}}).then(t=>t.ok?t.json():[]).then(t=>{g(Array.isArray(t)?t.length:0)}).catch(()=>g(0)),fetch("/api/programs",{headers:{Accept:"application/json"}}).then(t=>t.ok?t.json():[]).then(t=>{u(Array.isArray(t)?t.length:0)}).catch(()=>u(0)),fetch("/api/dean/pending-honorariums",{headers:{Accept:"application/json"}}).then(t=>t.ok?t.json():{pending_count:0}).then(t=>h(t.pending_count??0)).catch(()=>h(0))},[]);const A=I(i),C=[{title:"Pending Defense Requests",value:r.length,description:"Awaiting coordinator action",icon:e.jsx(b,{className:"size-5 text-rose-500"}),iconTheme:"bg-rose-100 text-rose-600 dark:bg-rose-900 dark:text-rose-300"},{title:"Today's Defense Schedules",value:A,description:"Defenses scheduled for today",icon:e.jsx(Y,{className:"size-5 text-violet-500"}),iconTheme:"bg-violet-100 text-violet-600 dark:bg-violet-900 dark:text-violet-300"},{title:"Pending Honorariums",value:D,description:"Honorariums not yet processed",icon:e.jsx(K,{className:"size-5 text-rose-400"}),iconTheme:"bg-rose-100 text-rose-600 dark:bg-rose-900 dark:text-rose-300"},{title:"Programs",value:k,description:"Total programs",icon:e.jsx(b,{className:"size-5 text-violet-500"}),iconTheme:"bg-violet-100 text-violet-600 dark:bg-violet-900 dark:text-violet-300"},{title:"Advisers",value:N,description:"Total advisers",icon:e.jsx(j,{className:"size-5 text-rose-400"}),iconTheme:"bg-rose-100 text-rose-600 dark:bg-rose-900 dark:text-rose-300"},{title:"Panelists",value:e.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:w}),description:"Total panelists",icon:e.jsx(j,{className:"size-5 text-violet-500"}),iconTheme:"bg-violet-100 text-violet-600 dark:bg-violet-900 dark:text-violet-300"}];return e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-auto bg-white dark:bg-background",children:c?e.jsxs("div",{className:"w-full min-h-[70vh] bg-zinc-100 dark:bg-zinc-900 flex flex-col gap-4 p-0 m-0",children:[e.jsx(m,{className:"h-6 w-1/6 rounded bg-zinc-300 dark:bg-zinc-800 mt-8 mx-8"}),e.jsx(m,{className:"h-12 w-3/4 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(m,{className:"h-12 w-2/3 rounded bg-zinc-300 dark:bg-zinc-800 mx-8"}),e.jsx(m,{className:"h-[500px] w-full rounded bg-zinc-300 dark:bg-zinc-800 mt-4"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 md:mb-7 mt-2 md:mt-3 pt-2 md:pt-3 px-4 md:px-7",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 md:gap-0 relative overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex items-center text-xs font-semibold text-gray-700 dark:text-gray-200 mb-1 md:mb-2 relative z-10",children:[G()?e.jsx(Q,{className:"mr-1 size-3 md:size-4 text-rose-500"}):e.jsx(V,{className:"mr-1 size-3 md:size-4 text-rose-500"}),$()]}),e.jsxs("h1",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-gray-900 dark:text-white relative z-10",children:["Hi, ",s==null?void 0:s.name,"!"]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 relative z-10",children:(s==null?void 0:s.role)??"Dean"})]}),e.jsxs("div",{className:"hidden md:flex items-center",children:[e.jsx("div",{className:"h-12 w-px mx-4 bg-gray-300 dark:bg-gray-700 opacity-60"}),e.jsx("div",{className:"mr-8",children:e.jsx(q,{userRole:s==null?void 0:s.role})})]})]})}),e.jsx("div",{className:"w-full max-w-screen-xl mx-auto px-4 md:px-7",children:e.jsxs(H,{defaultValue:"overview",className:"w-full",children:[e.jsxs(M,{className:"mb-2 w-full sm:w-auto",children:[e.jsx(f,{value:"overview",className:"flex-1 sm:flex-none",children:"Overview"}),e.jsx(f,{value:"analytics",className:"flex-1 sm:flex-none",children:"Analytics"})]}),e.jsxs(v,{value:"overview",className:"w-full",children:[e.jsx("div",{className:"w-full max-w-screen-xl mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-4 px-0 mb-4 md:mb-6",children:C.map((t,l)=>{var n;return e.jsxs(W,{className:"col-span-1 rounded-lg md:rounded-xl border border-gray-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 shadow-sm flex flex-col justify-between p-0 min-h-0 h-auto transition hover:shadow-md",style:{minWidth:0},children:[e.jsxs("div",{className:"flex items-center justify-between px-4 md:px-5 pt-3 md:pt-4 pb-0",children:[e.jsx("div",{className:"text-xs md:text-sm font-extrabold text-gray-800 dark:text-zinc-100 leading-tight",children:t.title}),e.jsx("div",{className:`rounded-full p-1 md:p-1.5 flex items-center justify-center flex-shrink-0 ${t.iconTheme}`,children:R.cloneElement(t.icon,{className:"size-3 md:size-4 font-extrabold "+(((n=t.iconTheme)==null?void 0:n.split(" ").find(d=>d.startsWith("text-")))??"")})})]}),e.jsxs("div",{className:"flex flex-col px-4 md:px-5 pb-3 md:pb-4 pt-1 md:pt-2",children:[e.jsx("span",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white leading-none",children:t.value}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1 truncate",children:t.description})]})]},l)})}),e.jsx("div",{className:"flex flex-col gap-4 md:gap-6 bg-gray-100 dark:bg-muted rounded-lg md:rounded-xl mt-2 mb-2 px-3 md:px-4 py-4 md:py-8 w-full",children:e.jsxs("div",{className:"w-full mb-2 flex flex-col gap-4",children:[e.jsx(F,{weekDays:T,selectedDay:z,setSelectedDay:S,approvedDefenses:i,referenceDate:new Date,loading:c}),e.jsx(L,{pendingRequests:r,loading:c})]})})]}),e.jsx(v,{value:"analytics",className:"w-full",children:e.jsxs("div",{className:"flex flex-col gap-4 md:gap-6 mb-4 md:mb-6",children:[e.jsx("div",{className:"w-full",children:e.jsx(_,{})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[e.jsx(E,{}),e.jsx(B,{})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-6",children:[e.jsx(U,{}),e.jsx(O,{})]})]})})]})})]})})}export{Ie as default};
