import{r as B,m as y,j as e,L as Q}from"./app-DW0Mt5c9.js";import{B as m}from"./button-BZf0VdIO.js";import{T as R,t as C}from"./index-ByTeG7FR.js";import{C as p,a as v,b as N,c as f,d as X}from"./card-kuBjanmv.js";import{B as U}from"./badge-B7OUzsXL.js";import{I as D}from"./input-Ch6RmxP_.js";import{L as i}from"./label-Dk8neUpq.js";import{T as Y}from"./textarea-DlzvW0NA.js";import{S as u,a as j,b as _,c as g,e as c}from"./select-cV-UjAs3.js";import{D as A,a as F,e as T,b as k,c as V,f as $}from"./dialog-D7L72BhV.js";import{A as Z,B as q}from"./app-layout-CPwLq_xH.js";import{C as w}from"./circle-alert-CV2dla6l.js";import{U as O}from"./users-CFj_s0Ga.js";import{C as ee}from"./calendar-BCyjqlGy.js";import{C as se}from"./circle-check-big-CG9wjNDm.js";import{E as ne}from"./eye-CiUjArwd.js";import{S as te}from"./square-pen-DAuFRdnq.js";import{C as de}from"./check-C1Ca0PY3.js";import{M as le}from"./map-pin-BIs5WYgR.js";import"./index-RzYQM1sh.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";import"./index-DHu7YzAG.js";import"./index-dxfJWdT_.js";import"./index-I9YLalqX.js";import"./index-Au_TdUcj.js";import"./index-xrb8sl6P.js";import"./floating-ui.react-dom-DEJ-U2zP.js";import"./index-D1ThX8Vn.js";import"./index-Bh88FqJG.js";import"./chevron-down-B7XKdsxY.js";import"./createLucideIcon-S0dKkUVo.js";import"./index-BMNAwHVU.js";import"./x-CW6T59GI.js";import"./tooltip-3yEC6fE6.js";import"./separator-4d5ucxHB.js";import"./chevron-right-x7vIKCyG.js";import"./dropdown-menu-FJcetjAu.js";import"./index-Bwn0NV8Z.js";import"./avatar-B3rD_VQk.js";import"./settings-DPsrAkv5.js";import"./graduation-cap-d15gjgNL.js";import"./file-text-Dpj0IN7n.js";import"./dollar-sign-DVIUp7aq.js";import"./send-BUfb6BoG.js";import"./credit-card-Bzx9FpUt.js";import"./tabs-3Dm9feNm.js";import"./info-Dl-vg0Zq.js";import"./sun-C_6rnlvD.js";function ns({defenseRequests:E,facultyMembers:z,panelists:I,availablePanelMembers:x,stats:b,user:ae}){const[l,M]=B.useState(null),[S,o]=B.useState(null),d=y({defense_chairperson:"none",defense_panelist1:"none",defense_panelist2:"none",defense_panelist3:"none",defense_panelist4:"none"}),n=y({scheduled_date:"",scheduled_time:"",scheduled_end_time:"",defense_mode:"",defense_venue:"",scheduling_notes:""}),W=y({defense_chairperson:"none",defense_panelist1:"none",defense_panelist2:"none",defense_panelist3:"none",defense_panelist4:"none",scheduled_date:"",scheduled_time:"",defense_mode:"",defense_venue:"",scheduling_notes:""}),H=()=>{if(!l)return;const s={defense_chairperson:d.data.defense_chairperson==="none"?"":d.data.defense_chairperson,defense_panelist1:d.data.defense_panelist1==="none"?"":d.data.defense_panelist1,defense_panelist2:d.data.defense_panelist2==="none"?"":d.data.defense_panelist2,defense_panelist3:d.data.defense_panelist3==="none"?"":d.data.defense_panelist3,defense_panelist4:d.data.defense_panelist4==="none"?"":d.data.defense_panelist4};d.setData(s),d.post(route("coordinator.defense.assign-panels",l.id),{preserveScroll:!0,onSuccess:t=>{C.success("Defense panel assigned successfully! Now set the schedule."),o("schedule"),n.setData({scheduled_date:"",scheduled_time:"",scheduled_end_time:"",defense_mode:"",defense_venue:"",scheduling_notes:""}),d.reset()},onError:t=>{const r=Object.entries(t).map(([h,a])=>`${h.replace("defense_","").replace("_"," ").toLowerCase()}: ${a}`);r.length>0&&C.error(r[0])}})},G=()=>{l&&n.post(route("coordinator.defense.schedule",l.id),{preserveScroll:!0,onSuccess:s=>{const t=s.props.flash;t!=null&&t.success&&C.success(t.success),o(null),n.reset(),window.location.reload()},onError:s=>{const t=Object.entries(s);if(t.length>0){const[r,h]=t[0],a=r.replace("scheduled_","").replace("defense_","").replace("_"," ").toLowerCase().replace(/\b\w/g,L=>L.toUpperCase());C.error(`${a}: ${h}`)}}})},J=s=>{if(!l)return;y({notify_parties:s}).post(route("coordinator.defense.notify",l.id),{onSuccess:()=>{}})},P=(s,t)=>{M(t),s==="panels"?d.setData({defense_chairperson:t.defense_chairperson||"none",defense_panelist1:t.defense_panelist1||"none",defense_panelist2:t.defense_panelist2||"none",defense_panelist3:t.defense_panelist3||"none",defense_panelist4:t.defense_panelist4||"none"}):s==="schedule"?n.setData({scheduled_date:t.scheduled_date||"",scheduled_time:t.scheduled_time||"",scheduled_end_time:t.scheduled_end_time||"",defense_mode:t.defense_mode||"",defense_venue:t.defense_venue||"",scheduling_notes:t.scheduling_notes||""}):s==="edit"&&W.setData({defense_chairperson:t.defense_chairperson||"none",defense_panelist1:t.defense_panelist1||"none",defense_panelist2:t.defense_panelist2||"none",defense_panelist3:t.defense_panelist3||"none",defense_panelist4:t.defense_panelist4||"none",scheduled_date:t.scheduled_date||"",scheduled_time:t.scheduled_time||"",defense_mode:t.defense_mode||"",defense_venue:t.defense_venue||"",scheduling_notes:t.scheduling_notes||""}),o(s)},K=s=>{switch(s){case"pending-panels":return"bg-yellow-100 text-yellow-800";case"panels-assigned":return"bg-blue-100 text-blue-800";case"scheduled":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(Z,{children:[e.jsx(Q,{title:"Defense Management"}),e.jsx(R,{richColors:!0,position:"bottom-right"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsxs(p,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium",children:"Pending Panels"}),e.jsx(w,{className:"h-4 w-4 text-yellow-600"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.pending_panels}),e.jsx("p",{className:"text-xs text-gray-500",children:"Awaiting panel assignment"})]})]}),e.jsxs(p,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium",children:"Panels Assigned"}),e.jsx(O,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.panels_assigned}),e.jsx("p",{className:"text-xs text-gray-500",children:"Ready for scheduling"})]})]}),e.jsxs(p,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium",children:"Scheduled"}),e.jsx(ee,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.scheduled}),e.jsx("p",{className:"text-xs text-gray-500",children:"Defense scheduled"})]})]}),e.jsxs(p,{children:[e.jsxs(v,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(N,{className:"text-sm font-medium",children:"Completed"}),e.jsx(se,{className:"h-4 w-4 text-gray-600"})]}),e.jsxs(f,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.completed}),e.jsx("p",{className:"text-xs text-gray-500",children:"Defense completed"})]})]})]}),e.jsxs(p,{children:[e.jsxs(v,{children:[e.jsx(N,{children:"Approved Defense Requests"}),e.jsx(X,{children:"Manage panel assignments, scheduling, and notifications for approved defense requests"})]}),e.jsx(f,{children:e.jsx("div",{className:"space-y-4",children:E.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No approved defense requests requiring scheduling at this time."}):E.map(s=>e.jsx(p,{className:"border-l-4 border-l-blue-500",children:e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.student_name}),e.jsx(U,{className:K(s.scheduling_status??"pending-panels"),children:(s.scheduling_status??"pending-panels").replace("-"," ").toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",s.school_id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Program:"})," ",s.program]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Defense Type:"})," ",s.defense_type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Adviser:"})," ",s.adviser]})]}),e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Submitted:"})," ",s.submitted_at]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Approved:"})," ",s.adviser_reviewed_at]}),s.formatted_schedule!=="Not scheduled"&&e.jsxs("p",{children:[e.jsx("strong",{children:"Schedule:"})," ",s.formatted_schedule]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"font-medium text-sm mb-1",children:"Thesis Title:"}),e.jsx("p",{className:"text-sm text-gray-700",children:s.thesis_title})]}),(s.panels_list??[]).length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"font-medium text-sm mb-1",children:"Panel Members:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(s.panels_list??[]).map((t,r)=>e.jsxs(U,{variant:"outline",children:[t.role,": ",t.name]},r))})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[e.jsxs(m,{type:"button",variant:"outline",size:"sm",onClick:()=>P("view",s),children:[e.jsx(ne,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(m,{type:"button",variant:"outline",size:"sm",onClick:()=>P("panels",s),children:[e.jsx(O,{className:"h-4 w-4 mr-1"}),s.defense_chairperson&&s.scheduled_date?"Edit Assignment":s.defense_chairperson?"Complete Scheduling":"Assign Panels & Schedule"]}),e.jsxs(m,{type:"button",variant:"outline",size:"sm",onClick:()=>P("edit",s),children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"Edit"]}),s.defense_chairperson&&s.scheduled_date&&e.jsxs(m,{type:"button",size:"sm",onClick:()=>J(["adviser","student","panels"]),children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),"Notify All"]})]})]})})},s.id))})})]})]})}),e.jsx(A,{open:S==="panels",onOpenChange:s=>{s||o(null)},children:e.jsxs(F,{className:"max-w-2xl",children:[e.jsxs(T,{children:[e.jsx(k,{children:"Assign Defense Panels"}),e.jsxs(V,{children:["Assign chairperson and panelists for ",l==null?void 0:l.student_name,"'s defense"]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 text-sm",children:[e.jsx(O,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Panel Selection"})]}),e.jsxs("p",{className:"text-blue-600 text-xs mt-1",children:["Select from faculty members (including advisers) and panelists database.",x.length>0&&e.jsxs("span",{children:[" ",I.length," panelists and ",z.length," faculty members available."]}),e.jsx("br",{}),e.jsx("span",{className:"font-medium",children:"Note:"})," Advisers can serve as panel members."]})]}),e.jsxs("div",{className:"space-y-4",children:[Object.keys(d.errors).length>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-700 text-sm",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Please fix the following:"})]}),e.jsx("ul",{className:"text-red-600 text-xs mt-1 ml-6 list-disc",children:Object.entries(d.errors).map(([s,t])=>e.jsx("li",{children:t},s))})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"chairperson",children:"Chairperson *"}),e.jsxs(u,{value:d.data.defense_chairperson,onValueChange:s=>d.setData("defense_chairperson",s),children:[e.jsx(j,{className:d.errors.defense_chairperson?"border-red-300":"",children:e.jsx(_,{placeholder:"Select chairperson"})}),e.jsx(g,{children:(x??[]).map(s=>e.jsxs(c,{value:s.name,children:[s.name," (",s.type==="faculty"?"Faculty":"Panelist",")"]},`${s.type}-${s.id}`))})]}),d.errors.defense_chairperson&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.errors.defense_chairperson})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"panelist1",children:"Panelist 1 *"}),e.jsxs(u,{value:d.data.defense_panelist1,onValueChange:s=>d.setData("defense_panelist1",s),children:[e.jsx(j,{className:d.errors.defense_panelist1?"border-red-300":"",children:e.jsx(_,{placeholder:"Select panelist 1"})}),e.jsx(g,{children:(x??[]).map(s=>e.jsxs(c,{value:s.name,children:[s.name," (",s.type==="faculty"?"Faculty":"Panelist",")"]},`${s.type}-${s.id}`))})]}),d.errors.defense_panelist1&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.errors.defense_panelist1})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"panelist2",children:"Panelist 2"}),e.jsxs(u,{value:d.data.defense_panelist2,onValueChange:s=>d.setData("defense_panelist2",s),children:[e.jsx(j,{children:e.jsx(_,{placeholder:"Select panelist 2 (optional)"})}),e.jsxs(g,{children:[e.jsx(c,{value:"none",children:"None"}),(x??[]).map(s=>e.jsxs(c,{value:s.name,children:[s.name," (",s.type==="faculty"?"Faculty":"Panelist",")"]},`${s.type}-${s.id}`))]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"panelist3",children:"Panelist 3"}),e.jsxs(u,{value:d.data.defense_panelist3,onValueChange:s=>d.setData("defense_panelist3",s),children:[e.jsx(j,{children:e.jsx(_,{placeholder:"Select panelist 3 (optional)"})}),e.jsxs(g,{children:[e.jsx(c,{value:"none",children:"None"}),(x??[]).map(s=>e.jsxs(c,{value:s.name,children:[s.name," (",s.type==="faculty"?"Faculty":"Panelist",")"]},`${s.type}-${s.id}`))]})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"panelist4",children:"Panelist 4"}),e.jsxs(u,{value:d.data.defense_panelist4,onValueChange:s=>d.setData("defense_panelist4",s),children:[e.jsx(j,{children:e.jsx(_,{placeholder:"Select panelist 4 (optional)"})}),e.jsxs(g,{children:[e.jsx(c,{value:"none",children:"None"}),x.map(s=>e.jsxs(c,{value:s.name,children:[s.name," (",s.type==="faculty"?"Faculty":"Panelist",")"]},`${s.type}-${s.id}`))]})]})]})]}),e.jsxs($,{children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>o(null),children:"Cancel"}),e.jsx(m,{type:"button",onClick:H,disabled:d.processing||!d.data.defense_chairperson||!d.data.defense_panelist1,children:d.processing?"Processing...":"Assign Panels & Continue to Schedule"})]})]})}),e.jsx(A,{open:S==="schedule",onOpenChange:s=>{s||o(null)},children:e.jsxs(F,{className:"max-w-lg",children:[e.jsxs(T,{children:[e.jsx(k,{children:"Step 2: Schedule Defense"}),e.jsxs(V,{children:["Panels assigned! Now set the date, time, and venue for ",l==null?void 0:l.student_name,"'s defense"]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 text-sm",children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Panels Assigned Successfully"})]}),e.jsx("p",{className:"text-green-600 text-xs mt-1",children:"Now complete the process by setting the defense schedule. Conflicts will be checked automatically."})]}),e.jsxs("div",{className:"space-y-4",children:[Object.keys(n.errors).length>0&&e.jsxs("div",{className:"space-y-3",children:[n.errors.scheduled_time&&n.errors.scheduled_time.includes("Conflict Detected")&&e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-red-100 rounded-full p-2",children:e.jsx(w,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"Scheduling Conflict Detected"}),e.jsx("div",{className:"text-red-700 text-sm space-y-2",children:n.errors.scheduled_time.split(`
`).map((s,t)=>{if(s.trim()==="")return null;if(s.includes("**")){const r=s.split("**");return e.jsx("div",{className:s.startsWith("•")?"ml-3":"",children:r.map((h,a)=>a%2===1?e.jsx("strong",{className:"font-semibold",children:h},a):e.jsx("span",{children:h},a))},t)}return e.jsx("div",{className:s.startsWith("•")?"ml-3":"",children:s},t)})}),e.jsx("div",{className:"mt-3 pt-3 border-t border-red-200",children:e.jsx("p",{className:"text-red-600 text-xs font-medium",children:"💡 Tip: Adjust the time slot or reassign panel members to resolve this conflict."})})]})]})}),n.errors.defense_venue&&n.errors.defense_venue.includes("Venue Conflict")&&e.jsx("div",{className:"bg-orange-50 border-2 border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-orange-100 rounded-full p-2",children:e.jsx(le,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-orange-800 mb-2",children:"Venue Conflict Detected"}),e.jsx("div",{className:"text-orange-700 text-sm space-y-2",children:n.errors.defense_venue.split(`
`).map((s,t)=>{if(s.trim()==="")return null;if(s.includes("**")){const r=s.split("**");return e.jsx("div",{children:r.map((h,a)=>a%2===1?e.jsx("strong",{className:"font-semibold",children:h},a):e.jsx("span",{children:h},a))},t)}return e.jsx("div",{children:s},t)})}),e.jsx("div",{className:"mt-3 pt-3 border-t border-orange-200",children:e.jsx("p",{className:"text-orange-600 text-xs font-medium",children:"💡 Tip: Select a different venue or adjust the time slot."})})]})]})}),Object.entries(n.errors).some(([s,t])=>!t.includes("Conflict Detected")&&!t.includes("Venue Conflict"))&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-700 text-sm",children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Please fix the following:"})]}),e.jsx("ul",{className:"text-red-600 text-xs mt-1 ml-6 list-disc",children:Object.entries(n.errors).map(([s,t])=>t.includes("Conflict Detected")||t.includes("Venue Conflict")?null:e.jsx("li",{children:t},s))})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"date",children:"Defense Date *"}),e.jsx(D,{type:"date",value:n.data.scheduled_date,onChange:s=>n.setData("scheduled_date",s.target.value),min:new Date().toISOString().split("T")[0],className:n.errors.scheduled_date?"border-red-300":""}),n.errors.scheduled_date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.errors.scheduled_date})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"time",children:"Defense Start Time *"}),e.jsx(D,{type:"time",value:n.data.scheduled_time,onChange:s=>n.setData("scheduled_time",s.target.value),className:n.errors.scheduled_time?"border-red-300":""}),n.errors.scheduled_time&&!n.errors.scheduled_time.includes("Conflict Detected")&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.errors.scheduled_time}),n.errors.scheduled_time&&n.errors.scheduled_time.includes("Conflict Detected")&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"⚠️ Time conflict detected - see details above"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"end_time",children:"Defense End Time *"}),e.jsx(D,{type:"time",value:n.data.scheduled_end_time,onChange:s=>n.setData("scheduled_end_time",s.target.value),className:n.errors.scheduled_end_time?"border-red-300":""}),n.errors.scheduled_end_time&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.errors.scheduled_end_time}),n.data.scheduled_time&&n.data.scheduled_end_time&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Defense Schedule: ",n.data.scheduled_time," - ",n.data.scheduled_end_time]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"mode",children:"Defense Mode *"}),e.jsxs(u,{value:n.data.defense_mode,onValueChange:s=>n.setData("defense_mode",s),children:[e.jsx(j,{className:n.errors.defense_mode?"border-red-300":"",children:e.jsx(_,{placeholder:"Select defense mode"})}),e.jsxs(g,{children:[e.jsx(c,{value:"face-to-face",children:"Face-to-Face"}),e.jsx(c,{value:"online",children:"Online"})]})]}),n.errors.defense_mode&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.errors.defense_mode})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"venue",children:"Venue/Link *"}),e.jsx(D,{placeholder:"Room number or online meeting link",value:n.data.defense_venue,onChange:s=>n.setData("defense_venue",s.target.value),className:n.errors.defense_venue?"border-red-300":""}),n.errors.defense_venue&&!n.errors.defense_venue.includes("Venue Conflict")&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:n.errors.defense_venue}),n.errors.defense_venue&&n.errors.defense_venue.includes("Venue Conflict")&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"🏛️ Venue conflict detected - see details above"})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"notes",children:"Scheduling Notes"}),e.jsx(Y,{placeholder:"Additional notes or instructions...",value:n.data.scheduling_notes,onChange:s=>n.setData("scheduling_notes",s.target.value),rows:3})]})]}),e.jsxs($,{children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>o(null),children:"Cancel"}),e.jsx(m,{type:"button",onClick:G,disabled:n.processing||!n.data.scheduled_date||!n.data.scheduled_time||!n.data.scheduled_end_time||!n.data.defense_mode||!n.data.defense_venue,children:n.processing?"Scheduling...":"Schedule Defense"})]})]})}),e.jsx(A,{open:S==="view",onOpenChange:s=>{s||o(null)},children:e.jsxs(F,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(T,{children:[e.jsx(k,{children:"Defense Request Details"}),e.jsxs(V,{children:["Complete information for ",l==null?void 0:l.student_name,"'s defense request"]})]}),l&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Student Information"}),e.jsxs("p",{children:["Name: ",l.student_name]}),e.jsxs("p",{children:["ID: ",l.school_id]}),e.jsxs("p",{children:["Program: ",l.program]}),e.jsxs("p",{children:["Defense Type: ",l.defense_type]}),e.jsxs("p",{children:["Adviser: ",l.adviser]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Status Information"}),e.jsxs("p",{children:["Workflow State: ",l.workflow_state_display]}),e.jsxs("p",{children:["Scheduling Status: ",l.scheduling_status.replace("-"," ").toUpperCase()]}),e.jsxs("p",{children:["Submitted: ",l.submitted_at]}),e.jsxs("p",{children:["Approved: ",l.adviser_reviewed_at]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-2",children:"Thesis Title"}),e.jsx("p",{className:"text-sm bg-gray-50 p-3 rounded",children:l.thesis_title})]}),l.panels_list.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-2",children:"Panel Members"}),e.jsx("div",{className:"space-y-1",children:l.panels_list.map((s,t)=>e.jsxs("div",{className:"flex justify-between text-sm bg-gray-50 p-2 rounded",children:[e.jsxs("span",{className:"font-medium",children:[s.role,":"]}),e.jsx("span",{children:s.name})]},t))})]})]}),e.jsx($,{children:e.jsx(m,{type:"button",variant:"outline",onClick:()=>o(null),children:"Close"})})]})})]})}export{ns as default};
