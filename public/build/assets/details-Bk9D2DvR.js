import{r as o,j as n,L as Oe,S as $e}from"./app-cp5Xxmuq.js";import{A as Fe}from"./app-layout-FVyShlvS.js";import{T as _t,t as Y}from"./index-BuZOVBQ5.js";import{B as se}from"./button-HcUz4N3c.js";import{I as Ne}from"./input-CozWEoae.js";import{B as We}from"./badge-CD31ww1M.js";import{S as oe}from"./separator-DqvAWWgV.js";import"./index-BwY1skv1.js";import{c as Ct}from"./index-BiaJJerR.js";import{c as B}from"./utils-jAU0Cazi.js";import{R as Pt,P as Rt,O as Et,C as At}from"./index-DbUO4osX.js";import{P as G,c as me}from"./index-B7grp9yP.js";import{u as ie}from"./index-KWoA_zXX.js";import{S as kt}from"./search-BOf2-cFy.js";import{P as Ge,a as Je,b as Qe,C as Tt}from"./calendar-BnO3dmDg.js";import{S as Dt,a as It,b as Lt,c as Mt,d as ze}from"./select-TPdSJVhR.js";import{c as Te}from"./createLucideIcon-fPg6f676.js";import{F as je}from"./file-text-Brb8dGUd.js";import{U as Ue}from"./users-Dgf5XU-g.js";import{L as _e}from"./loader-circle-_XDaqOMC.js";import{C as Ot}from"./calendar-CPOz5vlg.js";import{C as $t}from"./chevrons-up-down-CUkeUAhf.js";import{C as Ft}from"./check-BKTDNJDu.js";import{f as qe}from"./format-HX8DKPSU.js";import"./index-DZZQifJx.js";import"./x-ChVMmgUr.js";import"./tooltip-CP7U2y76.js";import"./floating-ui.react-dom-CclZEsZs.js";import"./chevron-right-u5yeAyLv.js";import"./dropdown-menu-gg636D7H.js";import"./index-DGSzJOj5.js";import"./index-w2GBgPnQ.js";import"./index-DgxNXxEZ.js";import"./index-BkV9g7de.js";import"./avatar-BVnHwuNv.js";import"./settings-BJpfwdNG.js";import"./graduation-cap-DiPQsR-i.js";import"./dollar-sign-OqGbvCP2.js";import"./credit-card-BumryUWt.js";import"./circle-check-big-D0Jy2-20.js";import"./info-CTXSwM4X.js";import"./sun-BdlRNmMn.js";import"./en-US-BA9orzCf.js";import"./endOfWeek-QFyZPl43.js";import"./differenceInCalendarMonths-HUNRrXGm.js";import"./normalizeInterval-CdMCNNY-.js";import"./endOfMonth-CK_ShA5m.js";import"./isSameDay-DUlCFK42.js";import"./isSameMonth-CQd3m9St.js";import"./chevron-left-Lq9k-s81.js";import"./chevron-down-CRKR2eDe.js";import"./index-DjkDYLy3.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],zt=Te("ArrowLeft",Wt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ve=Te("Save",Ut);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Vt=Te("User",qt);var Bt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fe=Bt.reduce((e,r)=>{const t=Ct(`Primitive.${r}`),l=o.forwardRef((a,s)=>{const{asChild:i,...u}=a,f=i?t:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(f,{...u,ref:s})});return l.displayName=`Primitive.${r}`,{...e,[r]:l}},{});function Be(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function Ht(...e){return r=>{let t=!1;const l=e.map(a=>{const s=Be(a,r);return!t&&typeof s=="function"&&(t=!0),s});if(t)return()=>{for(let a=0;a<l.length;a++){const s=l[a];typeof s=="function"?s():Be(e[a],null)}}}}function re(...e){return o.useCallback(Ht(...e),e)}var Ee=globalThis!=null&&globalThis.document?o.useLayoutEffect:()=>{};function Xt(e,r){return o.useReducer((t,l)=>r[t][l]??t,e)}var pe=e=>{const{present:r,children:t}=e,l=Yt(r),a=typeof t=="function"?t({present:l.isPresent}):o.Children.only(t),s=re(l.ref,Kt(a));return typeof t=="function"||l.isPresent?o.cloneElement(a,{ref:s}):null};pe.displayName="Presence";function Yt(e){const[r,t]=o.useState(),l=o.useRef(null),a=o.useRef(e),s=o.useRef("none"),i=e?"mounted":"unmounted",[u,f]=Xt(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return o.useEffect(()=>{const d=ve(l.current);s.current=u==="mounted"?d:"none"},[u]),Ee(()=>{const d=l.current,h=a.current;if(h!==e){const x=s.current,v=ve(d);e?f("MOUNT"):v==="none"||(d==null?void 0:d.display)==="none"?f("UNMOUNT"):f(h&&x!==v?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,f]),Ee(()=>{if(r){let d;const h=r.ownerDocument.defaultView??window,p=v=>{const S=ve(l.current).includes(v.animationName);if(v.target===r&&S&&(f("ANIMATION_END"),!a.current)){const R=r.style.animationFillMode;r.style.animationFillMode="forwards",d=h.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=R)})}},x=v=>{v.target===r&&(s.current=ve(l.current))};return r.addEventListener("animationstart",x),r.addEventListener("animationcancel",p),r.addEventListener("animationend",p),()=>{h.clearTimeout(d),r.removeEventListener("animationstart",x),r.removeEventListener("animationcancel",p),r.removeEventListener("animationend",p)}}else f("ANIMATION_END")},[r,f]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:o.useCallback(d=>{l.current=d?getComputedStyle(d):null,t(d)},[])}}function ve(e){return(e==null?void 0:e.animationName)||"none"}function Kt(e){var l,a;let r=(l=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:l.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?e.ref:(r=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,t=r&&"isReactWarning"in r&&r.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}function Gt(e,r=[]){let t=[];function l(s,i){const u=o.createContext(i),f=t.length;t=[...t,i];const d=p=>{var k;const{scope:x,children:v,...j}=p,S=((k=x==null?void 0:x[e])==null?void 0:k[f])||u,R=o.useMemo(()=>j,Object.values(j));return n.jsx(S.Provider,{value:R,children:v})};d.displayName=s+"Provider";function h(p,x){var S;const v=((S=x==null?void 0:x[e])==null?void 0:S[f])||u,j=o.useContext(v);if(j)return j;if(i!==void 0)return i;throw new Error(`\`${p}\` must be used within \`${s}\``)}return[d,h]}const a=()=>{const s=t.map(i=>o.createContext(i));return function(u){const f=(u==null?void 0:u[e])||s;return o.useMemo(()=>({[`__scope${e}`]:{...u,[e]:f}}),[u,f])}};return a.scopeName=e,[l,Jt(a,...r)]}function Jt(...e){const r=e[0];if(e.length===1)return r;const t=()=>{const l=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(s){const i=l.reduce((u,{useScope:f,scopeName:d})=>{const p=f(s)[`__scope${d}`];return{...u,...p}},{});return o.useMemo(()=>({[`__scope${r.scopeName}`]:i}),[i])}};return t.scopeName=r.scopeName,t}function Z(e){const r=o.useRef(e);return o.useEffect(()=>{r.current=e}),o.useMemo(()=>(...t)=>{var l;return(l=r.current)==null?void 0:l.call(r,...t)},[])}var Qt=o.createContext(void 0);function Zt(e){const r=o.useContext(Qt);return e||r||"ltr"}function er(e,[r,t]){return Math.min(t,Math.max(r,e))}function ee(e,r,{checkForDefaultPrevented:t=!0}={}){return function(a){if(e==null||e(a),t===!1||!a.defaultPrevented)return r==null?void 0:r(a)}}function tr(e,r){return o.useReducer((t,l)=>r[t][l]??t,e)}var De="ScrollArea",[Ze,qn]=Gt(De),[rr,F]=Ze(De),et=o.forwardRef((e,r)=>{const{__scopeScrollArea:t,type:l="hover",dir:a,scrollHideDelay:s=600,...i}=e,[u,f]=o.useState(null),[d,h]=o.useState(null),[p,x]=o.useState(null),[v,j]=o.useState(null),[S,R]=o.useState(null),[k,W]=o.useState(0),[V,z]=o.useState(0),[L,N]=o.useState(!1),[E,U]=o.useState(!1),C=re(r,$=>f($)),T=Zt(a);return n.jsx(rr,{scope:t,type:l,dir:T,scrollHideDelay:s,scrollArea:u,viewport:d,onViewportChange:h,content:p,onContentChange:x,scrollbarX:v,onScrollbarXChange:j,scrollbarXEnabled:L,onScrollbarXEnabledChange:N,scrollbarY:S,onScrollbarYChange:R,scrollbarYEnabled:E,onScrollbarYEnabledChange:U,onCornerWidthChange:W,onCornerHeightChange:z,children:n.jsx(fe.div,{dir:T,...i,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":k+"px","--radix-scroll-area-corner-height":V+"px",...e.style}})})});et.displayName=De;var tt="ScrollAreaViewport",rt=o.forwardRef((e,r)=>{const{__scopeScrollArea:t,children:l,nonce:a,...s}=e,i=F(tt,t),u=o.useRef(null),f=re(r,u,i.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(fe.div,{"data-radix-scroll-area-viewport":"",...s,ref:f,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:l})})]})});rt.displayName=tt;var q="ScrollAreaScrollbar",nt=o.forwardRef((e,r)=>{const{forceMount:t,...l}=e,a=F(q,e.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:i}=a,u=e.orientation==="horizontal";return o.useEffect(()=>(u?s(!0):i(!0),()=>{u?s(!1):i(!1)}),[u,s,i]),a.type==="hover"?n.jsx(nr,{...l,ref:r,forceMount:t}):a.type==="scroll"?n.jsx(sr,{...l,ref:r,forceMount:t}):a.type==="auto"?n.jsx(st,{...l,ref:r,forceMount:t}):a.type==="always"?n.jsx(Ie,{...l,ref:r}):null});nt.displayName=q;var nr=o.forwardRef((e,r)=>{const{forceMount:t,...l}=e,a=F(q,e.__scopeScrollArea),[s,i]=o.useState(!1);return o.useEffect(()=>{const u=a.scrollArea;let f=0;if(u){const d=()=>{window.clearTimeout(f),i(!0)},h=()=>{f=window.setTimeout(()=>i(!1),a.scrollHideDelay)};return u.addEventListener("pointerenter",d),u.addEventListener("pointerleave",h),()=>{window.clearTimeout(f),u.removeEventListener("pointerenter",d),u.removeEventListener("pointerleave",h)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(pe,{present:t||s,children:n.jsx(st,{"data-state":s?"visible":"hidden",...l,ref:r})})}),sr=o.forwardRef((e,r)=>{const{forceMount:t,...l}=e,a=F(q,e.__scopeScrollArea),s=e.orientation==="horizontal",i=Se(()=>f("SCROLL_END"),100),[u,f]=tr("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return o.useEffect(()=>{if(u==="idle"){const d=window.setTimeout(()=>f("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[u,a.scrollHideDelay,f]),o.useEffect(()=>{const d=a.viewport,h=s?"scrollLeft":"scrollTop";if(d){let p=d[h];const x=()=>{const v=d[h];p!==v&&(f("SCROLL"),i()),p=v};return d.addEventListener("scroll",x),()=>d.removeEventListener("scroll",x)}},[a.viewport,s,f,i]),n.jsx(pe,{present:t||u!=="hidden",children:n.jsx(Ie,{"data-state":u==="hidden"?"hidden":"visible",...l,ref:r,onPointerEnter:ee(e.onPointerEnter,()=>f("POINTER_ENTER")),onPointerLeave:ee(e.onPointerLeave,()=>f("POINTER_LEAVE"))})})}),st=o.forwardRef((e,r)=>{const t=F(q,e.__scopeScrollArea),{forceMount:l,...a}=e,[s,i]=o.useState(!1),u=e.orientation==="horizontal",f=Se(()=>{if(t.viewport){const d=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;i(u?d:h)}},10);return ce(t.viewport,f),ce(t.content,f),n.jsx(pe,{present:l||s,children:n.jsx(Ie,{"data-state":s?"visible":"hidden",...a,ref:r})})}),Ie=o.forwardRef((e,r)=>{const{orientation:t="vertical",...l}=e,a=F(q,e.__scopeScrollArea),s=o.useRef(null),i=o.useRef(0),[u,f]=o.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=ct(u.viewport,u.content),h={...l,sizes:u,onSizesChange:f,hasThumb:d>0&&d<1,onThumbChange:x=>s.current=x,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:x=>i.current=x};function p(x,v){return dr(x,i.current,u,v)}return t==="horizontal"?n.jsx(or,{...h,ref:r,onThumbPositionChange:()=>{if(a.viewport&&s.current){const x=a.viewport.scrollLeft,v=He(x,u,a.dir);s.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollLeft=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollLeft=p(x,a.dir))}}):t==="vertical"?n.jsx(ar,{...h,ref:r,onThumbPositionChange:()=>{if(a.viewport&&s.current){const x=a.viewport.scrollTop,v=He(x,u);s.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollTop=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollTop=p(x))}}):null}),or=o.forwardRef((e,r)=>{const{sizes:t,onSizesChange:l,...a}=e,s=F(q,e.__scopeScrollArea),[i,u]=o.useState(),f=o.useRef(null),d=re(r,f,s.onScrollbarXChange);return o.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),n.jsx(at,{"data-orientation":"horizontal",...a,ref:d,sizes:t,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":we(t)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,p)=>{if(s.viewport){const x=s.viewport.scrollLeft+h.deltaX;e.onWheelScroll(x),ut(x,p)&&h.preventDefault()}},onResize:()=>{f.current&&s.viewport&&i&&l({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:f.current.clientWidth,paddingStart:be(i.paddingLeft),paddingEnd:be(i.paddingRight)}})}})}),ar=o.forwardRef((e,r)=>{const{sizes:t,onSizesChange:l,...a}=e,s=F(q,e.__scopeScrollArea),[i,u]=o.useState(),f=o.useRef(null),d=re(r,f,s.onScrollbarYChange);return o.useEffect(()=>{f.current&&u(getComputedStyle(f.current))},[f]),n.jsx(at,{"data-orientation":"vertical",...a,ref:d,sizes:t,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":we(t)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,p)=>{if(s.viewport){const x=s.viewport.scrollTop+h.deltaY;e.onWheelScroll(x),ut(x,p)&&h.preventDefault()}},onResize:()=>{f.current&&s.viewport&&i&&l({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:f.current.clientHeight,paddingStart:be(i.paddingTop),paddingEnd:be(i.paddingBottom)}})}})}),[lr,ot]=Ze(q),at=o.forwardRef((e,r)=>{const{__scopeScrollArea:t,sizes:l,hasThumb:a,onThumbChange:s,onThumbPointerUp:i,onThumbPointerDown:u,onThumbPositionChange:f,onDragScroll:d,onWheelScroll:h,onResize:p,...x}=e,v=F(q,t),[j,S]=o.useState(null),R=re(r,C=>S(C)),k=o.useRef(null),W=o.useRef(""),V=v.viewport,z=l.content-l.viewport,L=Z(h),N=Z(f),E=Se(p,10);function U(C){if(k.current){const T=C.clientX-k.current.left,$=C.clientY-k.current.top;d({x:T,y:$})}}return o.useEffect(()=>{const C=T=>{const $=T.target;(j==null?void 0:j.contains($))&&L(T,z)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[V,j,z,L]),o.useEffect(N,[l,N]),ce(j,E),ce(v.content,E),n.jsx(lr,{scope:t,scrollbar:j,hasThumb:a,onThumbChange:Z(s),onThumbPointerUp:Z(i),onThumbPositionChange:N,onThumbPointerDown:Z(u),children:n.jsx(fe.div,{...x,ref:R,style:{position:"absolute",...x.style},onPointerDown:ee(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),k.current=j.getBoundingClientRect(),W.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),U(C))}),onPointerMove:ee(e.onPointerMove,U),onPointerUp:ee(e.onPointerUp,C=>{const T=C.target;T.hasPointerCapture(C.pointerId)&&T.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=W.current,v.viewport&&(v.viewport.style.scrollBehavior=""),k.current=null})})})}),ge="ScrollAreaThumb",lt=o.forwardRef((e,r)=>{const{forceMount:t,...l}=e,a=ot(ge,e.__scopeScrollArea);return n.jsx(pe,{present:t||a.hasThumb,children:n.jsx(ir,{ref:r,...l})})}),ir=o.forwardRef((e,r)=>{const{__scopeScrollArea:t,style:l,...a}=e,s=F(ge,t),i=ot(ge,t),{onThumbPositionChange:u}=i,f=re(r,p=>i.onThumbChange(p)),d=o.useRef(void 0),h=Se(()=>{d.current&&(d.current(),d.current=void 0)},100);return o.useEffect(()=>{const p=s.viewport;if(p){const x=()=>{if(h(),!d.current){const v=ur(p,u);d.current=v,u()}};return u(),p.addEventListener("scroll",x),()=>p.removeEventListener("scroll",x)}},[s.viewport,h,u]),n.jsx(fe.div,{"data-state":i.hasThumb?"visible":"hidden",...a,ref:f,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...l},onPointerDownCapture:ee(e.onPointerDownCapture,p=>{const v=p.target.getBoundingClientRect(),j=p.clientX-v.left,S=p.clientY-v.top;i.onThumbPointerDown({x:j,y:S})}),onPointerUp:ee(e.onPointerUp,i.onThumbPointerUp)})});lt.displayName=ge;var Le="ScrollAreaCorner",it=o.forwardRef((e,r)=>{const t=F(Le,e.__scopeScrollArea),l=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&l?n.jsx(cr,{...e,ref:r}):null});it.displayName=Le;var cr=o.forwardRef((e,r)=>{const{__scopeScrollArea:t,...l}=e,a=F(Le,t),[s,i]=o.useState(0),[u,f]=o.useState(0),d=!!(s&&u);return ce(a.scrollbarX,()=>{var p;const h=((p=a.scrollbarX)==null?void 0:p.offsetHeight)||0;a.onCornerHeightChange(h),f(h)}),ce(a.scrollbarY,()=>{var p;const h=((p=a.scrollbarY)==null?void 0:p.offsetWidth)||0;a.onCornerWidthChange(h),i(h)}),d?n.jsx(fe.div,{...l,ref:r,style:{width:s,height:u,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function be(e){return e?parseInt(e,10):0}function ct(e,r){const t=e/r;return isNaN(t)?0:t}function we(e){const r=ct(e.viewport,e.content),t=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,l=(e.scrollbar.size-t)*r;return Math.max(l,18)}function dr(e,r,t,l="ltr"){const a=we(t),s=a/2,i=r||s,u=a-i,f=t.scrollbar.paddingStart+i,d=t.scrollbar.size-t.scrollbar.paddingEnd-u,h=t.content-t.viewport,p=l==="ltr"?[0,h]:[h*-1,0];return dt([f,d],p)(e)}function He(e,r,t="ltr"){const l=we(r),a=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,s=r.scrollbar.size-a,i=r.content-r.viewport,u=s-l,f=t==="ltr"?[0,i]:[i*-1,0],d=er(e,f);return dt([0,i],[0,u])(d)}function dt(e,r){return t=>{if(e[0]===e[1]||r[0]===r[1])return r[0];const l=(r[1]-r[0])/(e[1]-e[0]);return r[0]+l*(t-e[0])}}function ut(e,r){return e>0&&e<r}var ur=(e,r=()=>{})=>{let t={left:e.scrollLeft,top:e.scrollTop},l=0;return function a(){const s={left:e.scrollLeft,top:e.scrollTop},i=t.left!==s.left,u=t.top!==s.top;(i||u)&&r(),t=s,l=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(l)};function Se(e,r){const t=Z(e),l=o.useRef(0);return o.useEffect(()=>()=>window.clearTimeout(l.current),[]),o.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(t,r)},[t,r])}function ce(e,r){const t=Z(r);Ee(()=>{let l=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(l),l=window.requestAnimationFrame(t)});return a.observe(e),()=>{window.cancelAnimationFrame(l),a.unobserve(e)}}},[e,t])}var mr=et,fr=rt,pr=it;function hr({className:e,children:r,...t}){return n.jsxs(mr,{"data-slot":"scroll-area",className:B("relative",e),...t,children:[n.jsx(fr,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:r}),n.jsx(xr,{}),n.jsx(pr,{})]})}function xr({className:e,orientation:r="vertical",...t}){return n.jsx(nt,{"data-slot":"scroll-area-scrollbar",orientation:r,className:B("flex touch-none p-px transition-colors select-none",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...t,children:n.jsx(lt,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}var Xe=1,vr=.9,gr=.8,br=.17,Ce=.1,Pe=.999,wr=.9999,Sr=.99,yr=/[\\\/_+.#"@\[\(\{&]/,Nr=/[\\\/_+.#"@\[\(\{&]/g,jr=/[\s-]/,mt=/[\s-]/g;function Ae(e,r,t,l,a,s,i){if(s===r.length)return a===e.length?Xe:Sr;var u=`${a},${s}`;if(i[u]!==void 0)return i[u];for(var f=l.charAt(s),d=t.indexOf(f,a),h=0,p,x,v,j;d>=0;)p=Ae(e,r,t,l,d+1,s+1,i),p>h&&(d===a?p*=Xe:yr.test(e.charAt(d-1))?(p*=gr,v=e.slice(a,d-1).match(Nr),v&&a>0&&(p*=Math.pow(Pe,v.length))):jr.test(e.charAt(d-1))?(p*=vr,j=e.slice(a,d-1).match(mt),j&&a>0&&(p*=Math.pow(Pe,j.length))):(p*=br,a>0&&(p*=Math.pow(Pe,d-a))),e.charAt(d)!==r.charAt(s)&&(p*=wr)),(p<Ce&&t.charAt(d-1)===l.charAt(s+1)||l.charAt(s+1)===l.charAt(s)&&t.charAt(d-1)!==l.charAt(s))&&(x=Ae(e,r,t,l,d+1,s+2,i),x*Ce>p&&(p=x*Ce)),p>h&&(h=p),d=t.indexOf(f,d+1);return i[u]=h,h}function Ye(e){return e.toLowerCase().replace(mt," ")}function _r(e,r,t){return e=t&&t.length>0?`${e+" "+t.join(" ")}`:e,Ae(e,r,Ye(e),Ye(r),0,0,{})}var ue='[cmdk-group=""]',Re='[cmdk-group-items=""]',Cr='[cmdk-group-heading=""]',ft='[cmdk-item=""]',Ke=`${ft}:not([aria-disabled="true"])`,ke="cmdk-item-select",ae="data-value",Pr=(e,r,t)=>_r(e,r,t),pt=o.createContext(void 0),he=()=>o.useContext(pt),ht=o.createContext(void 0),Me=()=>o.useContext(ht),xt=o.createContext(void 0),vt=o.forwardRef((e,r)=>{let t=le(()=>{var c,b;return{search:"",value:(b=(c=e.value)!=null?c:e.defaultValue)!=null?b:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),l=le(()=>new Set),a=le(()=>new Map),s=le(()=>new Map),i=le(()=>new Set),u=gt(e),{label:f,children:d,value:h,onValueChange:p,filter:x,shouldFilter:v,loop:j,disablePointerSelection:S=!1,vimBindings:R=!0,...k}=e,W=ie(),V=ie(),z=ie(),L=o.useRef(null),N=$r();te(()=>{if(h!==void 0){let c=h.trim();t.current.value=c,E.emit()}},[h]),te(()=>{N(6,de)},[]);let E=o.useMemo(()=>({subscribe:c=>(i.current.add(c),()=>i.current.delete(c)),snapshot:()=>t.current,setState:(c,b,w)=>{var g,_,P,O;if(!Object.is(t.current[c],b)){if(t.current[c]=b,c==="search")J(),T(),N(1,$);else if(c==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let I=document.getElementById(z);I?I.focus():(g=document.getElementById(W))==null||g.focus()}if(N(7,()=>{var I;t.current.selectedItemId=(I=H())==null?void 0:I.id,E.emit()}),w||N(5,de),((_=u.current)==null?void 0:_.value)!==void 0){let I=b??"";(O=(P=u.current).onValueChange)==null||O.call(P,I);return}}E.emit()}},emit:()=>{i.current.forEach(c=>c())}}),[]),U=o.useMemo(()=>({value:(c,b,w)=>{var g;b!==((g=s.current.get(c))==null?void 0:g.value)&&(s.current.set(c,{value:b,keywords:w}),t.current.filtered.items.set(c,C(b,w)),N(2,()=>{T(),E.emit()}))},item:(c,b)=>(l.current.add(c),b&&(a.current.has(b)?a.current.get(b).add(c):a.current.set(b,new Set([c]))),N(3,()=>{J(),T(),t.current.value||$(),E.emit()}),()=>{s.current.delete(c),l.current.delete(c),t.current.filtered.items.delete(c);let w=H();N(4,()=>{J(),(w==null?void 0:w.getAttribute("id"))===c&&$(),E.emit()})}),group:c=>(a.current.has(c)||a.current.set(c,new Set),()=>{s.current.delete(c),a.current.delete(c)}),filter:()=>u.current.shouldFilter,label:f||e["aria-label"],getDisablePointerSelection:()=>u.current.disablePointerSelection,listId:W,inputId:z,labelId:V,listInnerRef:L}),[]);function C(c,b){var w,g;let _=(g=(w=u.current)==null?void 0:w.filter)!=null?g:Pr;return c?_(c,t.current.search,b):0}function T(){if(!t.current.search||u.current.shouldFilter===!1)return;let c=t.current.filtered.items,b=[];t.current.filtered.groups.forEach(g=>{let _=a.current.get(g),P=0;_.forEach(O=>{let I=c.get(O);P=Math.max(I,P)}),b.push([g,P])});let w=L.current;Q().sort((g,_)=>{var P,O;let I=g.getAttribute("id"),xe=_.getAttribute("id");return((P=c.get(xe))!=null?P:0)-((O=c.get(I))!=null?O:0)}).forEach(g=>{let _=g.closest(Re);_?_.appendChild(g.parentElement===_?g:g.closest(`${Re} > *`)):w.appendChild(g.parentElement===w?g:g.closest(`${Re} > *`))}),b.sort((g,_)=>_[1]-g[1]).forEach(g=>{var _;let P=(_=L.current)==null?void 0:_.querySelector(`${ue}[${ae}="${encodeURIComponent(g[0])}"]`);P==null||P.parentElement.appendChild(P)})}function $(){let c=Q().find(w=>w.getAttribute("aria-disabled")!=="true"),b=c==null?void 0:c.getAttribute(ae);E.setState("value",b||void 0)}function J(){var c,b,w,g;if(!t.current.search||u.current.shouldFilter===!1){t.current.filtered.count=l.current.size;return}t.current.filtered.groups=new Set;let _=0;for(let P of l.current){let O=(b=(c=s.current.get(P))==null?void 0:c.value)!=null?b:"",I=(g=(w=s.current.get(P))==null?void 0:w.keywords)!=null?g:[],xe=C(O,I);t.current.filtered.items.set(P,xe),xe>0&&_++}for(let[P,O]of a.current)for(let I of O)if(t.current.filtered.items.get(I)>0){t.current.filtered.groups.add(P);break}t.current.filtered.count=_}function de(){var c,b,w;let g=H();g&&(((c=g.parentElement)==null?void 0:c.firstChild)===g&&((w=(b=g.closest(ue))==null?void 0:b.querySelector(Cr))==null||w.scrollIntoView({block:"nearest"})),g.scrollIntoView({block:"nearest"}))}function H(){var c;return(c=L.current)==null?void 0:c.querySelector(`${ft}[aria-selected="true"]`)}function Q(){var c;return Array.from(((c=L.current)==null?void 0:c.querySelectorAll(Ke))||[])}function X(c){let b=Q()[c];b&&E.setState("value",b.getAttribute(ae))}function ne(c){var b;let w=H(),g=Q(),_=g.findIndex(O=>O===w),P=g[_+c];(b=u.current)!=null&&b.loop&&(P=_+c<0?g[g.length-1]:_+c===g.length?g[0]:g[_+c]),P&&E.setState("value",P.getAttribute(ae))}function m(c){let b=H(),w=b==null?void 0:b.closest(ue),g;for(;w&&!g;)w=c>0?Mr(w,ue):Or(w,ue),g=w==null?void 0:w.querySelector(Ke);g?E.setState("value",g.getAttribute(ae)):ne(c)}let y=()=>X(Q().length-1),D=c=>{c.preventDefault(),c.metaKey?y():c.altKey?m(1):ne(1)},A=c=>{c.preventDefault(),c.metaKey?X(0):c.altKey?m(-1):ne(-1)};return o.createElement(G.div,{ref:r,tabIndex:-1,...k,"cmdk-root":"",onKeyDown:c=>{var b;(b=k.onKeyDown)==null||b.call(k,c);let w=c.nativeEvent.isComposing||c.keyCode===229;if(!(c.defaultPrevented||w))switch(c.key){case"n":case"j":{R&&c.ctrlKey&&D(c);break}case"ArrowDown":{D(c);break}case"p":case"k":{R&&c.ctrlKey&&A(c);break}case"ArrowUp":{A(c);break}case"Home":{c.preventDefault(),X(0);break}case"End":{c.preventDefault(),y();break}case"Enter":{c.preventDefault();let g=H();if(g){let _=new Event(ke);g.dispatchEvent(_)}}}}},o.createElement("label",{"cmdk-label":"",htmlFor:U.inputId,id:U.labelId,style:Wr},f),ye(e,c=>o.createElement(ht.Provider,{value:E},o.createElement(pt.Provider,{value:U},c))))}),Rr=o.forwardRef((e,r)=>{var t,l;let a=ie(),s=o.useRef(null),i=o.useContext(xt),u=he(),f=gt(e),d=(l=(t=f.current)==null?void 0:t.forceMount)!=null?l:i==null?void 0:i.forceMount;te(()=>{if(!d)return u.item(a,i==null?void 0:i.id)},[d]);let h=bt(a,s,[e.value,e.children,s],e.keywords),p=Me(),x=K(N=>N.value&&N.value===h.current),v=K(N=>d||u.filter()===!1?!0:N.search?N.filtered.items.get(a)>0:!0);o.useEffect(()=>{let N=s.current;if(!(!N||e.disabled))return N.addEventListener(ke,j),()=>N.removeEventListener(ke,j)},[v,e.onSelect,e.disabled]);function j(){var N,E;S(),(E=(N=f.current).onSelect)==null||E.call(N,h.current)}function S(){p.setState("value",h.current,!0)}if(!v)return null;let{disabled:R,value:k,onSelect:W,forceMount:V,keywords:z,...L}=e;return o.createElement(G.div,{ref:me(s,r),...L,id:a,"cmdk-item":"",role:"option","aria-disabled":!!R,"aria-selected":!!x,"data-disabled":!!R,"data-selected":!!x,onPointerMove:R||u.getDisablePointerSelection()?void 0:S,onClick:R?void 0:j},e.children)}),Er=o.forwardRef((e,r)=>{let{heading:t,children:l,forceMount:a,...s}=e,i=ie(),u=o.useRef(null),f=o.useRef(null),d=ie(),h=he(),p=K(v=>a||h.filter()===!1?!0:v.search?v.filtered.groups.has(i):!0);te(()=>h.group(i),[]),bt(i,u,[e.value,e.heading,f]);let x=o.useMemo(()=>({id:i,forceMount:a}),[a]);return o.createElement(G.div,{ref:me(u,r),...s,"cmdk-group":"",role:"presentation",hidden:p?void 0:!0},t&&o.createElement("div",{ref:f,"cmdk-group-heading":"","aria-hidden":!0,id:d},t),ye(e,v=>o.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?d:void 0},o.createElement(xt.Provider,{value:x},v))))}),Ar=o.forwardRef((e,r)=>{let{alwaysRender:t,...l}=e,a=o.useRef(null),s=K(i=>!i.search);return!t&&!s?null:o.createElement(G.div,{ref:me(a,r),...l,"cmdk-separator":"",role:"separator"})}),kr=o.forwardRef((e,r)=>{let{onValueChange:t,...l}=e,a=e.value!=null,s=Me(),i=K(d=>d.search),u=K(d=>d.selectedItemId),f=he();return o.useEffect(()=>{e.value!=null&&s.setState("search",e.value)},[e.value]),o.createElement(G.input,{ref:r,...l,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":f.listId,"aria-labelledby":f.labelId,"aria-activedescendant":u,id:f.inputId,type:"text",value:a?e.value:i,onChange:d=>{a||s.setState("search",d.target.value),t==null||t(d.target.value)}})}),Tr=o.forwardRef((e,r)=>{let{children:t,label:l="Suggestions",...a}=e,s=o.useRef(null),i=o.useRef(null),u=K(d=>d.selectedItemId),f=he();return o.useEffect(()=>{if(i.current&&s.current){let d=i.current,h=s.current,p,x=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{let v=d.offsetHeight;h.style.setProperty("--cmdk-list-height",v.toFixed(1)+"px")})});return x.observe(d),()=>{cancelAnimationFrame(p),x.unobserve(d)}}},[]),o.createElement(G.div,{ref:me(s,r),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":u,"aria-label":l,id:f.listId},ye(e,d=>o.createElement("div",{ref:me(i,f.listInnerRef),"cmdk-list-sizer":""},d)))}),Dr=o.forwardRef((e,r)=>{let{open:t,onOpenChange:l,overlayClassName:a,contentClassName:s,container:i,...u}=e;return o.createElement(Pt,{open:t,onOpenChange:l},o.createElement(Rt,{container:i},o.createElement(Et,{"cmdk-overlay":"",className:a}),o.createElement(At,{"aria-label":e.label,"cmdk-dialog":"",className:s},o.createElement(vt,{ref:r,...u}))))}),Ir=o.forwardRef((e,r)=>K(t=>t.filtered.count===0)?o.createElement(G.div,{ref:r,...e,"cmdk-empty":"",role:"presentation"}):null),Lr=o.forwardRef((e,r)=>{let{progress:t,children:l,label:a="Loading...",...s}=e;return o.createElement(G.div,{ref:r,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},ye(e,i=>o.createElement("div",{"aria-hidden":!0},i)))}),M=Object.assign(vt,{List:Tr,Item:Rr,Input:kr,Group:Er,Separator:Ar,Dialog:Dr,Empty:Ir,Loading:Lr});function Mr(e,r){let t=e.nextElementSibling;for(;t;){if(t.matches(r))return t;t=t.nextElementSibling}}function Or(e,r){let t=e.previousElementSibling;for(;t;){if(t.matches(r))return t;t=t.previousElementSibling}}function gt(e){let r=o.useRef(e);return te(()=>{r.current=e}),r}var te=typeof window>"u"?o.useEffect:o.useLayoutEffect;function le(e){let r=o.useRef();return r.current===void 0&&(r.current=e()),r}function K(e){let r=Me(),t=()=>e(r.snapshot());return o.useSyncExternalStore(r.subscribe,t,t)}function bt(e,r,t,l=[]){let a=o.useRef(),s=he();return te(()=>{var i;let u=(()=>{var d;for(let h of t){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(d=h.current.textContent)==null?void 0:d.trim():a.current}})(),f=l.map(d=>d.trim());s.value(e,u,f),(i=r.current)==null||i.setAttribute(ae,u),a.current=u}),a}var $r=()=>{let[e,r]=o.useState(),t=le(()=>new Map);return te(()=>{t.current.forEach(l=>l()),t.current=new Map},[e]),(l,a)=>{t.current.set(l,a),r({})}};function Fr(e){let r=e.type;return typeof r=="function"?r(e.props):"render"in r?r.render(e.props):e}function ye({asChild:e,children:r},t){return e&&o.isValidElement(r)?o.cloneElement(Fr(r),{ref:r.ref},t(r.props.children)):t(r)}var Wr={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const wt=o.forwardRef(({className:e,...r},t)=>n.jsx(M,{ref:t,className:B("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...r}));wt.displayName=M.displayName;const St=o.forwardRef(({className:e,...r},t)=>n.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[n.jsx(kt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),n.jsx(M.Input,{ref:t,className:B("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...r})]}));St.displayName=M.Input.displayName;const zr=o.forwardRef(({className:e,...r},t)=>n.jsx(M.List,{ref:t,className:B("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...r}));zr.displayName=M.List.displayName;const yt=o.forwardRef((e,r)=>n.jsx(M.Empty,{ref:r,className:"py-6 text-center text-sm",...e}));yt.displayName=M.Empty.displayName;const Nt=o.forwardRef(({className:e,...r},t)=>n.jsx(M.Group,{ref:t,className:B("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...r}));Nt.displayName=M.Group.displayName;const Ur=o.forwardRef(({className:e,...r},t)=>n.jsx(M.Separator,{ref:t,className:B("-mx-1 h-px bg-border",e),...r}));Ur.displayName=M.Separator.displayName;const jt=o.forwardRef(({className:e,...r},t)=>n.jsx(M.Item,{ref:t,className:B("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...r}));jt.displayName=M.Item.displayName;function qr({label:e,value:r,onChange:t,options:l,disabled:a,taken:s}){const[i,u]=o.useState(!1),[f,d]=o.useState(""),h=o.useMemo(()=>{if(!f)return l;const p=f.toLowerCase();return l.filter(x=>x.name.toLowerCase().includes(p)||x.email&&x.email.toLowerCase().includes(p))},[f,l]);return n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs font-medium",children:e}),n.jsxs(Ge,{open:i,onOpenChange:p=>{u(p),p||d("")},children:[n.jsx(Je,{asChild:!0,children:n.jsxs("button",{type:"button",className:"w-full h-9 px-3 flex items-center justify-between rounded-md border bg-background text-sm text-left focus:outline-none focus:ring-2 focus:ring-primary/40 hover:bg-accent disabled:opacity-50",disabled:a,children:[n.jsx("span",{className:`truncate ${r?"":"text-muted-foreground"}`,children:r||`Select ${e}`}),n.jsx($t,{size:14,className:"opacity-50"})]})}),n.jsx(Qe,{className:"w-[320px] p-0",align:"start",sideOffset:4,onOpenAutoFocus:p=>p.preventDefault(),children:n.jsxs(wt,{shouldFilter:!1,children:[n.jsx(St,{value:f,onValueChange:d,placeholder:"Search...",className:"h-9",autoFocus:!0}),n.jsx(yt,{className:"py-8 text-sm text-muted-foreground text-center",children:"No matches."}),n.jsx(Nt,{className:"max-h-72 overflow-auto",children:h.map(p=>{const x=p.name===r,v=s.has(p.name)&&!x;return n.jsxs(jt,{value:p.name,disabled:v,onSelect:()=>{v||(t(p.name),u(!1),d(""))},className:`flex flex-col items-start gap-0.5 px-3 py-2
                      ${x?"bg-muted":""}
                      ${v?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[n.jsxs("div",{className:"flex items-center w-full gap-2",children:[n.jsx(Ft,{size:14,className:x?"opacity-100 text-muted-foreground":"opacity-0"}),n.jsx("span",{className:"text-sm truncate",children:p.name}),p.type&&n.jsx("span",{className:"ml-auto text-[10px] px-1.5 py-0.5 rounded bg-muted text-muted-foreground uppercase",children:p.type})]}),p.email&&n.jsx("span",{className:"pl-5 text-[11px] text-muted-foreground truncate max-w-[250px]",children:p.email}),v&&!x&&n.jsx("span",{className:"pl-5 text-[10px] text-muted-foreground",children:"Already chosen"})]},p.id)})})]})})]})]})}function Vn(e){var ne;const r=e||{},t=r.defenseRequest||null,l=r.userRole||"",a=[{title:"Dashboard",href:"/dashboard"},{title:"Defense Requests",href:"/defense-request"}];if(t!=null&&t.id){const m=(((ne=t.thesis_title)==null?void 0:ne.length)||0)>60?t.thesis_title.slice(0,57)+"...":t.thesis_title||`Request #${t.id}`;a.push({title:m,href:`/coordinator/defense-requests/${t.id}/details`})}if(!t)return n.jsxs(Fe,{breadcrumbs:a,children:[n.jsx(Oe,{title:"Defense Request - Not Found"}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("p",{className:"text-sm text-red-500",children:"No defense request loaded. Use the list page and click Details again."}),n.jsx(se,{variant:"outline",onClick:()=>$e.visit("/defense-request"),children:"Back to list"})]})]});const[s,i]=o.useState(t),[u,f]=o.useState([]),[d,h]=o.useState(!1),[p,x]=o.useState(null);o.useEffect(()=>{let m=!0;async function y(){h(!0),x(null);const D=["/coordinator/defense/panel-members-all","/api/panel-members"];let A=!1;for(const c of D)try{const b=await fetch(c,{headers:{Accept:"application/json"}});if(!b.ok){console.warn("Panel member fetch failed",c,b.status);continue}const w=await b.json();m&&(f(Array.isArray(w)?w:[]),console.log("Loaded panel members from",c,"count:",Array.isArray(w)?w.length:0),A=!0);break}catch(b){console.warn("Fetch error",c,b)}!A&&m&&(f([]),x("Could not load panel members.")),m&&h(!1)}return y(),()=>{m=!1}},[]);const[v,j]=o.useState({defense_chairperson:s.defense_chairperson??"",defense_panelist1:s.defense_panelist1??"",defense_panelist2:s.defense_panelist2??"",defense_panelist3:s.defense_panelist3??"",defense_panelist4:s.defense_panelist4??""}),[S,R]=o.useState({scheduled_date:s.scheduled_date??"",scheduled_time:s.scheduled_time??"",scheduled_end_time:s.scheduled_end_time??"",defense_mode:s.defense_mode??"",defense_venue:s.defense_venue??"",scheduling_notes:s.scheduling_notes??""}),[k,W]=o.useState(!1),[V,z]=o.useState(!1),L=o.useMemo(()=>new Set(Object.values(v).filter(Boolean)),[v]),N=["Coordinator","Administrative Assistant","Dean"].includes(l);function E(){var m;return((m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.content)||""}async function U(){const m=Y.loading("Saving panel assignments...");W(!0);try{const y=await fetch(`/coordinator/defense-requests/${s.id}/panels`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":E(),Accept:"application/json"},body:JSON.stringify(v)}),D=y.headers.get("content-type")||"";let A={};try{D.includes("application/json")?A=await y.json():A={error:await y.text()}}catch{A={error:"Invalid response"}}y.ok&&A.ok?(i(c=>({...c,...A.request})),Y.success("Panels saved",{id:m,description:[v.defense_chairperson,v.defense_panelist1,v.defense_panelist2,v.defense_panelist3,v.defense_panelist4].filter(Boolean).join(", ")})):Y.error(A.error||`Failed (${y.status})`,{id:m})}catch{Y.error("Network error saving panels",{id:m})}finally{W(!1)}}async function C(){const m=Y.loading("Saving schedule...");z(!0);try{const y=await fetch(`/coordinator/defense-requests/${s.id}/schedule-json`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":E()},body:JSON.stringify(S)}),D=await y.json();y.ok?(i(A=>({...A,...D.request})),Y.success("Schedule saved",{id:m,description:`${S.scheduled_date||""} ${S.scheduled_time||""}${S.scheduled_end_time?" - "+S.scheduled_end_time:""}`})):Y.error(D.error||"Failed to save schedule",{id:m})}catch{Y.error("Network error saving schedule",{id:m})}finally{z(!1)}}function T(m){if(!m)return"—";try{return qe(new Date(m),"PPP")}catch{return m}}function $(m){return m?/approved/i.test(m)?"bg-green-100 text-green-600":/reject/i.test(m)?"bg-red-100 text-red-600":"bg-amber-100 text-amber-600":"bg-gray-100 text-gray-600"}const J=[{label:"Adviser’s Endorsement",url:s.advisers_endorsement},{label:"REC Endorsement",url:s.rec_endorsement},{label:"Proof of Payment",url:s.proof_of_payment},{label:"Reference No.",url:s.reference_no}];function de(m){const y=m.split("-").map(Number);return y.length===3?new Date(y[0],y[1]-1,y[2]):new Date(NaN)}function H(m){return`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}-${String(m.getDate()).padStart(2,"0")}`}function Q(m){var g;const y=m.event_type||m.action||m.status_change||m.status||m.type||"Event",D=m.description||m.details||m.note||m.notes||m.remarks||"",A=m.from_state||m.from||m.previous_state,c=m.to_state||m.to||m.new_state,b=m.created_at||m.timestamp||m.performed_at||m.date||"",w=m.user_name||((g=m.user)==null?void 0:g.name)||m.actor_name||m.actor||m.performed_by_name||m.performed_by||"";return{event:y,desc:D,from:A,to:c,created:b,userName:w}}const X="rounded-lg border p-5 space-y-3";return n.jsxs(Fe,{breadcrumbs:a,children:[n.jsx(_t,{position:"bottom-right",richColors:!0,closeButton:!0}),n.jsxs("div",{className:"p-5 space-y-6",children:[n.jsx(Oe,{title:s.thesis_title||`Defense Request #${s.id}`}),n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsx(se,{variant:"outline",onClick:()=>$e.visit("/defense-request"),className:"h-8 px-2",children:n.jsx(zt,{className:"h-4 w-4"})}),n.jsx("h1",{className:"text-xl font-semibold",children:"Defense Request Details"}),s.status&&n.jsx("span",{className:`ml-2 text-xs font-semibold px-2 py-0.5 rounded-full ${$(s.status)}`,children:s.status}),s.priority&&n.jsx(We,{variant:"outline",className:"ml-1 text-xs",children:s.priority}),s.defense_type&&n.jsx(We,{className:"ml-1 text-xs",variant:"secondary",children:s.defense_type})]}),n.jsxs("div",{className:"grid gap-5 md:grid-cols-3",children:[n.jsxs("div",{className:"col-span-2 space-y-5",children:[n.jsxs("div",{className:X,children:[n.jsxs("h2",{className:"text-sm font-semibold flex items-center gap-2",children:[n.jsx(je,{className:"h-4 w-4"})," Submission"]}),n.jsx(oe,{}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground text-[11px] uppercase tracking-wide",children:"Thesis Title"}),n.jsx("div",{className:"font-medium",children:s.thesis_title})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground text-[11px] uppercase tracking-wide",children:"Presenter"}),n.jsxs("div",{className:"font-medium",children:[s.first_name," ",s.middle_name||""," ",s.last_name]}),n.jsx("div",{className:"text-xs text-muted-foreground",children:s.school_id})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground text-[11px] uppercase tracking-wide",children:"Program"}),n.jsx("div",{className:"font-medium",children:s.program})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground text-[11px] uppercase tracking-wide",children:"Workflow State"}),n.jsx("div",{className:"font-medium",children:s.workflow_state||"—"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground text-[11px] uppercase tracking-wide",children:"Scheduled Date"}),n.jsx("div",{className:"font-medium",children:T(s.scheduled_date)})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground text-[11px] uppercase tracking-wide",children:"Time"}),n.jsx("div",{className:"font-medium",children:s.scheduled_time?`${s.scheduled_time} - ${s.scheduled_end_time||""}`:"—"})]})]})]}),n.jsxs("div",{className:X,children:[n.jsxs("h2",{className:"text-sm font-semibold flex items-center gap-2",children:[n.jsx(Ue,{className:"h-4 w-4"})," Committee"]}),n.jsx(oe,{}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] text-muted-foreground uppercase tracking-wide",children:"Adviser"}),n.jsx("div",{className:"font-medium",children:s.defense_adviser||"—"})]}),[{label:"Chairperson",v:v.defense_chairperson||s.defense_chairperson},{label:"Panelist 1",v:v.defense_panelist1||s.defense_panelist1},{label:"Panelist 2",v:v.defense_panelist2||s.defense_panelist2},{label:"Panelist 3",v:v.defense_panelist3||s.defense_panelist3},{label:"Panelist 4",v:v.defense_panelist4||s.defense_panelist4}].map(m=>n.jsxs("div",{children:[n.jsx("div",{className:"text-[11px] text-muted-foreground uppercase tracking-wide",children:m.label}),n.jsx("div",{className:"font-medium",children:m.v||"—"})]},m.label))]})]}),n.jsxs("div",{className:X,children:[n.jsxs("h2",{className:"text-sm font-semibold flex items-center gap-2",children:[n.jsx(je,{className:"h-4 w-4"})," Attachments"]}),n.jsx(oe,{}),n.jsxs("div",{className:"space-y-2 text-sm",children:[J.map(m=>m.url?n.jsxs("a",{href:m.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 rounded-md border hover:bg-muted transition",children:[n.jsx(je,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:m.label}),n.jsx("span",{className:"text-xs text-muted-foreground ml-auto truncate max-w-[180px]",children:m.url.split("/").pop()})]},m.label):null),!J.some(m=>m.url)&&n.jsx("p",{className:"text-sm text-muted-foreground",children:"No attachments."})]})]}),n.jsxs("div",{className:X,children:[n.jsx("h2",{className:"text-sm font-semibold",children:"Workflow History"}),n.jsx(oe,{}),Array.isArray(s.workflow_history)&&s.workflow_history.length>0?n.jsx(hr,{className:"h-60",children:n.jsx("ul",{className:"space-y-3 text-xs pr-2",children:s.workflow_history.map((m,y)=>{const{event:D,desc:A,from:c,to:b,created:w,userName:g}=Q(m);return n.jsxs("li",{className:"border rounded-md p-3 bg-background",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("span",{className:"font-semibold",children:D}),c||b?n.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[c||"—"," ➜ ",b||"—"]}):null]}),A&&n.jsx("div",{className:"text-muted-foreground mb-2 leading-snug",children:A}),n.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-muted-foreground",children:[g&&n.jsxs("span",{className:"inline-flex items-center gap-1",children:[n.jsx(Vt,{className:"h-3 w-3"}),g]}),w&&n.jsx("span",{children:w})]})]},y)})})}):n.jsx("p",{className:"text-xs text-muted-foreground",children:"No workflow history yet."})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"rounded-lg border p-5 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ue,{className:"h-4 w-4"}),n.jsx("h2",{className:"text-sm font-semibold",children:"Panel Assignment"}),d&&n.jsx(_e,{className:"h-4 w-4 animate-spin ml-auto"})]}),n.jsx(oe,{}),n.jsxs("div",{className:"space-y-3",children:[p&&n.jsxs("div",{className:"text-[11px] text-red-500",children:[p,n.jsx(se,{variant:"ghost",size:"sm",className:"ml-2 h-6 px-2",onClick:()=>{f([]),x(null),(async()=>{h(!0);try{const m=await fetch("/coordinator/defense/panel-members-all");if(!m.ok)throw 0;const y=await m.json();f(Array.isArray(y)?y:[])}catch{x("Could not load panel members.")}finally{h(!1)}})()},children:"Retry"})]}),[{key:"defense_chairperson",label:"Chairperson *"},{key:"defense_panelist1",label:"Panelist 1 *"},{key:"defense_panelist2",label:"Panelist 2"},{key:"defense_panelist3",label:"Panelist 3"},{key:"defense_panelist4",label:"Panelist 4"}].map(m=>n.jsx(qr,{label:m.label,value:v[m.key],onChange:y=>j(D=>({...D,[m.key]:y})),options:u,disabled:!N||d,taken:L},m.key))]}),N&&n.jsxs(se,{size:"sm",className:"w-full",onClick:U,disabled:k||!v.defense_chairperson||!v.defense_panelist1,children:[k&&n.jsx(_e,{className:"h-4 w-4 animate-spin mr-1"}),n.jsx(Ve,{className:"h-4 w-4 mr-1"})," Save Panels"]}),n.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Adviser: ",s.defense_adviser||"—"]})]}),n.jsxs("div",{className:"rounded-lg border p-5 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ot,{className:"h-4 w-4"}),n.jsx("h2",{className:"text-sm font-semibold",children:"Scheduling"})]}),n.jsx(oe,{}),n.jsxs("div",{className:"space-y-2 text-xs",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.jsxs("div",{className:"space-y-1 col-span-2 sm:col-span-1",children:[n.jsx("label",{className:"text-[10px] font-medium",children:"Date *"}),n.jsxs(Ge,{children:[n.jsx(Je,{asChild:!0,children:n.jsx(se,{variant:"outline",className:B("w-full justify-start text-left h-8 px-2 text-xs",!S.scheduled_date&&"text-muted-foreground"),disabled:!N,children:S.scheduled_date?qe(de(S.scheduled_date),"PPP"):"Pick a date"})}),n.jsx(Qe,{className:"p-0 w-auto",align:"start",children:n.jsx(Tt,{mode:"single",selected:S.scheduled_date?de(S.scheduled_date):void 0,onSelect:m=>m&&R(y=>({...y,scheduled_date:H(m)})),initialFocus:!0})})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-medium",children:"Mode *"}),n.jsxs(Dt,{value:S.defense_mode,onValueChange:m=>R(y=>({...y,defense_mode:m})),disabled:!N,children:[n.jsx(It,{className:"h-8 text-xs px-2",children:n.jsx(Lt,{placeholder:"Select mode"})}),n.jsxs(Mt,{children:[n.jsx(ze,{value:"face-to-face",children:"Face-to-Face"}),n.jsx(ze,{value:"online",children:"Online"})]})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-medium",children:"Start *"}),n.jsx(Ne,{type:"time",value:S.scheduled_time,onChange:m=>R(y=>({...y,scheduled_time:m.target.value})),disabled:!N,className:"h-8 text-xs"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-medium",children:"End *"}),n.jsx(Ne,{type:"time",value:S.scheduled_end_time,onChange:m=>R(y=>({...y,scheduled_end_time:m.target.value})),disabled:!N,className:"h-8 text-xs"})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-medium",children:"Venue / Link *"}),n.jsx(Ne,{value:S.defense_venue,onChange:m=>R(y=>({...y,defense_venue:m.target.value})),disabled:!N,className:"h-8 text-xs",placeholder:"Room or URL"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-medium",children:"Notes"}),n.jsx("textarea",{rows:3,className:"w-full border rounded p-2 text-xs bg-background",value:S.scheduling_notes,disabled:!N,onChange:m=>R(y=>({...y,scheduling_notes:m.target.value})),placeholder:"Optional notes..."})]}),S.scheduled_time&&S.scheduled_end_time&&n.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["Duration:"," ",(()=>{try{const[m,y]=S.scheduled_time.split(":").map(Number),[D,A]=S.scheduled_end_time.split(":").map(Number),c=D*60+A-(m*60+y);return c>0?`${c} mins`:"—"}catch{return"—"}})()]})]}),N&&n.jsxs(se,{size:"sm",className:"w-full",disabled:V||!S.scheduled_date||!S.scheduled_time||!S.scheduled_end_time||!S.defense_mode||!S.defense_venue,onClick:C,children:[V&&n.jsx(_e,{className:"h-4 w-4 animate-spin mr-1"}),n.jsx(Ve,{className:"h-4 w-4 mr-1"}),"Save Schedule"]})]})]})]}),n.jsxs("div",{className:"text-[11px] text-muted-foreground",children:["Last updated by:"," ",s.last_status_updated_by_name||s.last_status_updated_by||"—"," ",s.last_status_updated_at?`(${s.last_status_updated_at})`:""]})]})]})}export{Vn as default};
