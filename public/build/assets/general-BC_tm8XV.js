import{r as s,j as e,L as U}from"./app-DW0Mt5c9.js";import{S as A}from"./switch-k-ngQ9xd.js";import{D as N,a as k,e as D,b as O,c as R,f as T}from"./dialog-D7L72BhV.js";import{B as a}from"./button-BZf0VdIO.js";import{I as E}from"./input-Ch6RmxP_.js";import{t as p}from"./index-ByTeG7FR.js";import{A as Z}from"./app-layout-CPwLq_xH.js";import{S as $}from"./layout-B48svXCM.js";import"./index-DHu7YzAG.js";import"./index-RzYQM1sh.js";import"./utils-jAU0Cazi.js";import"./index-BMNAwHVU.js";import"./index-Bh88FqJG.js";import"./x-CW6T59GI.js";import"./createLucideIcon-S0dKkUVo.js";import"./index-DZZQifJx.js";import"./tooltip-3yEC6fE6.js";import"./floating-ui.react-dom-DEJ-U2zP.js";import"./separator-4d5ucxHB.js";import"./index-xrb8sl6P.js";import"./chevron-right-x7vIKCyG.js";import"./dropdown-menu-FJcetjAu.js";import"./index-dxfJWdT_.js";import"./index-I9YLalqX.js";import"./index-Au_TdUcj.js";import"./index-Bwn0NV8Z.js";import"./check-C1Ca0PY3.js";import"./avatar-B3rD_VQk.js";import"./settings-DPsrAkv5.js";import"./users-CFj_s0Ga.js";import"./graduation-cap-d15gjgNL.js";import"./file-text-Dpj0IN7n.js";import"./dollar-sign-DVIUp7aq.js";import"./send-BUfb6BoG.js";import"./credit-card-Bzx9FpUt.js";import"./tabs-3Dm9feNm.js";import"./badge-B7OUzsXL.js";import"./circle-check-big-CG9wjNDm.js";import"./info-Dl-vg0Zq.js";import"./sun-C_6rnlvD.js";function Xe({role:n,initialAcceptDefense:h,initialAutoAccept:f,initialAdviserCode:L,initialCoordinatorCode:F}){const[q,P]=s.useState(h??!1),[r,I]=s.useState(h??!1),[K,d]=s.useState(!1),[x,g]=s.useState(!1),[W,X]=s.useState(f??!1),[c,G]=s.useState(f??!1),[Y,l]=s.useState(!1),[b,j]=s.useState(!1),[_,B]=s.useState(L??""),[C,v]=s.useState(!1),[m,y]=s.useState(F??""),[S,w]=s.useState(!1);s.useEffect(()=>{n==="Coordinator"&&!m&&fetch("/api/coordinator/code").then(t=>t.json()).then(t=>y(t.coordinator_code))},[n,m]);function J(t){I(t),d(!0)}async function V(){var o;g(!0),d(!1),P(r);const t=(o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content");await fetch("/api/settings/general",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t||""},body:JSON.stringify({acceptDefense:r})}),g(!1)}function H(t){G(t),l(!0)}async function z(){var o;j(!0),l(!1),X(c);const t=(o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content");await fetch("/settings/adviser/auto-accept",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t||""},body:JSON.stringify({autoAccept:c})}),p.success("Auto-accept setting updated!"),j(!1)}async function M(){var i;v(!0);const t=(i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"),u=await(await fetch("/settings/adviser/reset-code",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t||""}})).json();B(u.adviser_code),p.success("Adviser code reset!"),v(!1)}async function Q(){var i;w(!0);const t=(i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"),u=await(await fetch("/api/coordinator/reset-code",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":t||""}})).json();y(u.coordinator_code),p.success("Coordinator code reset!"),w(!1)}return e.jsxs(Z,{breadcrumbs:[{title:"General",href:"/settings/general"}],children:[e.jsx(U,{title:"General Settings"}),e.jsx($,{children:e.jsxs("div",{className:"space-y-8",children:[n==="Coordinator"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium mb-1",children:"Your Coordinator Code"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{value:m,disabled:!0,className:"w-40 font-mono text-base"}),e.jsx(a,{onClick:Q,disabled:S,className:"bg-rose-500 hover:bg-rose-600 text-white transition-colors px-4 py-2 rounded-md font-medium",children:S?"Resetting...":"Reset Code"})]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Share this code with your advisers so they can register you as their coordinator. If you suspect your code is compromised, reset it here."})]}),e.jsxs("div",{className:"mt-20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(A,{checked:q,onCheckedChange:J,disabled:x,"aria-label":"Accept defense submissions"}),e.jsx("span",{className:"text-base font-medium",children:"Accept defense submissions"})]}),e.jsx("div",{className:"text-sm text-muted-foreground max-w-lg",children:"When enabled, students can submit defense requirements. When disabled, submissions are blocked. Only applicable to your program."}),e.jsx(N,{open:K,onOpenChange:d,children:e.jsxs(k,{children:[e.jsxs(D,{children:[e.jsx(O,{className:"text-base font-semibold",children:r?"Enable Defense Submissions?":"Disable Defense Submissions?"}),e.jsx(R,{className:"text-sm",children:r?"Enabling this will allow students to submit defense requirements.":"Disabling this will block all new defense requirement submissions from students. Existing workflows will not be affected."})]}),e.jsxs(T,{children:[e.jsx(a,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(a,{onClick:V,disabled:x,children:"Confirm"})]})]})})]})]}),(n==="Adviser"||n==="Faculty")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold mb-2",children:"Adviser Code"}),e.jsx("div",{className:"text-base font-medium mb-1",children:"Your Adviser Code"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{value:_,disabled:!0,className:"w-40 font-mono text-base"}),e.jsx(a,{onClick:M,disabled:C,className:"bg-rose-500 hover:bg-rose-600 text-white transition-colors px-4 py-2 rounded-md font-medium dark:bg-rose-500 dark:hover:bg-rose-600",children:C?"Resetting...":"Reset Code"})]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"Share this code with your students so they can register you as their adviser. If you suspect your code is compromised, reset it here."})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(A,{checked:W,onCheckedChange:H,disabled:b,"aria-label":"Auto-accept students"}),e.jsx("span",{className:"text-base font-medium",children:"Auto-accept students who enter your adviser code"})]}),e.jsx("div",{className:"text-sm text-muted-foreground max-w-lg",children:"When enabled, students who enter your adviser code are automatically registered as your students. When disabled, you must manually approve each student."})]}),e.jsx(N,{open:Y,onOpenChange:l,children:e.jsxs(k,{children:[e.jsxs(D,{children:[e.jsx(O,{className:"text-base font-semibold",children:c?"Enable Auto-Accept?":"Disable Auto-Accept?"}),e.jsx(R,{className:"text-sm",children:c?"Students who enter your adviser code will be automatically linked to you.":"You will need to manually approve each student who enters your adviser code."})]}),e.jsxs(T,{children:[e.jsx(a,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),e.jsx(a,{onClick:z,disabled:b,children:"Confirm"})]})]})})]})]})})]})}export{Xe as default};
