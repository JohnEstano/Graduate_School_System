import{r as n,j as e}from"./app-OOvd0qGy.js";import{B as l}from"./badge-9siNCstt.js";import{C as h,a as p,b as j,c as N}from"./card-CMDgN0i6.js";import{S as g}from"./separator-Cye1ujSm.js";import{T as b,a as v,b as u}from"./tooltip-BFmjF_jJ.js";import{C as _}from"./circle-check-J0D5T7uC.js";import{I as d}from"./info-CIHMpyv0.js";import{P as w}from"./paperclip-D2cdFqeN.js";import{C as c}from"./clock-BJgG26g7.js";import{C}from"./circle-x-Cfzvg8iR.js";import{B as y}from"./badge-check-D9AtGDnO.js";import{f as P}from"./format-HX8DKPSU.js";import"./index-ChOW5_O6.js";import"./index-DZZQifJx.js";import"./utils-jAU0Cazi.js";import"./index-B9sjBiRz.js";import"./index-DQ9rqnvl.js";import"./floating-ui.react-dom-BrG2AUyT.js";import"./createLucideIcon-Cvkj7Hkp.js";import"./en-US-BA9orzCf.js";function I(s){switch(s){case"Approved":return e.jsxs(l,{className:"bg-green-100 text-green-700 border border-green-200 flex items-center gap-1",children:[e.jsx(y,{size:14})," Approved"]});case"Rejected":return e.jsxs(l,{className:"bg-rose-100 text-rose-700 border border-rose-200 flex items-center gap-1",children:[e.jsx(C,{size:14})," Rejected"]});case"Needs-info":return e.jsxs(l,{className:"bg-blue-100 text-blue-700 border border-blue-200 flex items-center gap-1",children:[e.jsx(d,{size:14})," Needs Info"]});case"In progress":return e.jsxs(l,{className:"bg-amber-100 text-amber-700 border border-amber-200 flex items-center gap-1",children:[e.jsx(c,{size:14})," In Progress"]});case"Pending":default:return e.jsxs(l,{className:"bg-gray-100 text-gray-700 border border-gray-200 flex items-center gap-1",children:[e.jsx(c,{size:14})," Pending"]})}}function K({request:s}){const[r,o]=n.useState(s),[m,x]=n.useState(!1);n.useEffect(()=>{const a=setInterval(async()=>{try{const t=await fetch(`/api/defense-request/${s.school_id}`);if(t.ok){const f=await t.json();o(f)}}catch{}},5e3);return()=>clearInterval(a)},[s.school_id]);const i=[{label:"Adviserâ€™s Endorsement",url:r.advisers_endorsement},{label:"REC Endorsement",url:r.rec_endorsement},{label:"Proof of Payment",url:r.proof_of_payment},{label:"Reference No.",url:r.reference_no}];return e.jsxs(h,{className:"pt-10 pb-10",children:[e.jsx(p,{className:"col-span-2 flex flex-row items-start justify-between",children:e.jsxs("div",{children:[e.jsxs(j,{className:"flex items-center gap-3 pl-2 text-2xl font-medium",children:["Your Defense Request Was Sent",e.jsx(_,{className:"text-rose-500"})]}),e.jsxs("div",{className:"pb-5 pl-2 flex items-center gap-2",children:[e.jsx("h1",{className:"text-muted-foreground",children:"The request will be reviewed shortly"}),I(r.status)]})]})}),e.jsxs(N,{className:"space-y-5",children:[e.jsx(g,{className:"w-full"}),e.jsxs("div",{className:"pl-3",children:[e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 md:flex-row",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs text-zinc-600",children:"Thesis Title"}),e.jsx("h1",{className:"text-xl font-bold",children:s.thesis_title})]}),e.jsx("div",{className:"space-x-2",children:e.jsxs(b,{children:[e.jsxs(v,{children:[" ",e.jsx("button",{onClick:()=>x(a=>!a),"aria-label":"Toggle details",className:"rounded-lg p-2 hover:bg-zinc-100",children:e.jsx(d,{className:"size-5"})})]}),e.jsx(u,{children:e.jsx("p",{children:"More Info"})})]})})]}),e.jsxs("div",{className:"mt-2 space-x-2",children:[e.jsx(l,{variant:"secondary",children:s.mode_defense}),e.jsx(l,{variant:"secondary",children:s.defense_type})]})]}),e.jsxs("div",{className:"flex flex-col items-baseline gap-8 pl-3 md:flex-row",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"mb-1 text-xs text-zinc-600",children:"Presenter"}),e.jsxs("h1",{className:"text-sm leading-tight font-bold",children:[`${s.first_name} ${s.middle_name??""} ${s.last_name}`," ",e.jsxs("span",{className:"text-muted-foreground text-xs font-thin",children:["/ ",s.school_id]})]}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"mb-1 text-xs text-zinc-600",children:"Program"}),e.jsx("h1",{className:"text-sm leading-tight font-bold",children:s.program})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"mb-1 flex items-center space-x-1",children:e.jsx("h3",{className:"text-xs text-zinc-600",children:"Date Scheduled"})}),e.jsx("p",{className:"text-sm leading-tight font-bold",children:P(new Date(s.date_of_defense),"PPP")})]})]}),m&&e.jsx("div",{className:"mt-4 rounded-lg p-5 pt-4",children:e.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[e.jsxs("div",{className:"w-full lg:w-1/2",children:[e.jsx("h3",{className:"mb-2 text-xs text-zinc-600",children:"Attachments"}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[i.map(({label:a,url:t})=>t&&e.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"flex w-full items-center space-x-3 rounded-lg border p-2 transition hover:bg-zinc-50",children:[e.jsx("div",{className:"flex-shrink-0 rounded bg-rose-500 p-2",children:e.jsx(w,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium",children:a}),e.jsx("span",{className:"text-muted-foreground text-xs",children:t.split("/").pop()})]})]},a)),!i.some(a=>a.url)&&e.jsx("p",{className:"text-muted-foreground text-sm",children:"No attachments available."})]})]}),e.jsxs("div",{className:"w-full lg:w-1/2",children:[e.jsx("h3",{className:"mb-2 text-xs text-zinc-600",children:"Committee"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Adviser:"})," ",s.defense_adviser]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Chair:"})," ",s.defense_chairperson]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Panelist I:"})," ",s.defense_panelist1]}),s.defense_panelist2&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Panelist II:"})," ",s.defense_panelist2]}),s.defense_panelist3&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Panelist III:"})," ",s.defense_panelist3]}),s.defense_panelist4&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Panelist IV:"})," ",s.defense_panelist4]})]})]})]})})]})]})}export{K as default};
